/*! For license information please see main.5b77ca3d.js.LICENSE.txt */
(()=>{var e={3322:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r=function(e){try{return!!e()}catch(e){return!0}},s=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),o=s,a=Function.prototype,c=a.call,d=o&&a.bind.bind(c,c),l=o?d:function(e){return function(){return c.apply(e,arguments)}},u=l({}.isPrototypeOf),h=function(e){return e&&e.Math==Math&&e},p=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof t&&t)||function(){return this}()||t||Function("return this")(),f=s,m=Function.prototype,g=m.apply,E=m.call,_="object"==typeof Reflect&&Reflect.apply||(f?E.bind(g):function(){return E.apply(g,arguments)}),v=l,y=v({}.toString),S=v("".slice),b=function(e){return S(y(e),8,-1)},T=b,C=l,A=function(e){if("Function"===T(e))return C(e)},w="object"==typeof document&&document.all,R={all:w,IS_HTMLDDA:void 0===w&&void 0!==w},I=R.all,N=R.IS_HTMLDDA?function(e){return"function"==typeof e||e===I}:function(e){return"function"==typeof e},O={},k=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=s,P=Function.prototype.call,x=D?P.bind(P):function(){return P.apply(P,arguments)},L={},M={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,j=U&&!M.call({1:2},1);L.f=j?function(e){var t=U(this,e);return!!t&&t.enumerable}:M;var V,F,B=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},W=r,G=b,H=Object,K=l("".split),z=W((function(){return!H("z").propertyIsEnumerable(0)}))?function(e){return"String"==G(e)?K(e,""):H(e)}:H,Y=function(e){return null==e},q=Y,J=TypeError,Q=function(e){if(q(e))throw J("Can't call method on "+e);return e},X=z,Z=Q,$=function(e){return X(Z(e))},ee=N,te=R.all,ne=R.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:ee(e)||e===te}:function(e){return"object"==typeof e?null!==e:ee(e)},ie={},re=ie,se=p,oe=N,ae=function(e){return oe(e)?e:void 0},ce=function(e,t){return arguments.length<2?ae(re[e])||ae(se[e]):re[e]&&re[e][t]||se[e]&&se[e][t]},de="undefined"!=typeof navigator&&String(navigator.userAgent)||"",le=p,ue=de,he=le.process,pe=le.Deno,fe=he&&he.versions||pe&&pe.version,me=fe&&fe.v8;me&&(F=(V=me.split("."))[0]>0&&V[0]<4?1:+(V[0]+V[1])),!F&&ue&&(!(V=ue.match(/Edge\/(\d+)/))||V[1]>=74)&&(V=ue.match(/Chrome\/(\d+)/))&&(F=+V[1]);var ge=F,Ee=ge,_e=r,ve=p.String,ye=!!Object.getOwnPropertySymbols&&!_e((function(){var e=Symbol();return!ve(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ee&&Ee<41})),Se=ye&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,be=ce,Te=N,Ce=u,Ae=Object,we=Se?function(e){return"symbol"==typeof e}:function(e){var t=be("Symbol");return Te(t)&&Ce(t.prototype,Ae(e))},Re=String,Ie=function(e){try{return Re(e)}catch(e){return"Object"}},Ne=N,Oe=Ie,ke=TypeError,De=function(e){if(Ne(e))return e;throw ke(Oe(e)+" is not a function")},Pe=De,xe=Y,Le=function(e,t){var n=e[t];return xe(n)?void 0:Pe(n)},Me=x,Ue=N,je=ne,Ve=TypeError,Fe={exports:{}},Be=p,We=Object.defineProperty,Ge=function(e,t){try{We(Be,e,{value:t,configurable:!0,writable:!0})}catch(i){Be[e]=t}return t},He="__core-js_shared__",Ke=p[He]||Ge(He,{}),ze=Ke;(Fe.exports=function(e,t){return ze[e]||(ze[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ye=Fe.exports,qe=Q,Je=Object,Qe=function(e){return Je(qe(e))},Xe=Qe,Ze=l({}.hasOwnProperty),$e=Object.hasOwn||function(e,t){return Ze(Xe(e),t)},et=l,tt=0,nt=Math.random(),it=et(1..toString),rt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+it(++tt+nt,36)},st=Ye,ot=$e,at=rt,ct=ye,dt=Se,lt=p.Symbol,ut=st("wks"),ht=dt?lt.for||lt:lt&&lt.withoutSetter||at,pt=function(e){return ot(ut,e)||(ut[e]=ct&&ot(lt,e)?lt[e]:ht("Symbol."+e)),ut[e]},ft=x,mt=ne,gt=we,Et=Le,_t=function(e,t){var n,i;if("string"===t&&Ue(n=e.toString)&&!je(i=Me(n,e)))return i;if(Ue(n=e.valueOf)&&!je(i=Me(n,e)))return i;if("string"!==t&&Ue(n=e.toString)&&!je(i=Me(n,e)))return i;throw Ve("Can't convert object to primitive value")},vt=TypeError,yt=pt("toPrimitive"),St=function(e,t){if(!mt(e)||gt(e))return e;var n,i=Et(e,yt);if(i){if(void 0===t&&(t="default"),n=ft(i,e,t),!mt(n)||gt(n))return n;throw vt("Can't convert object to primitive value")}return void 0===t&&(t="number"),_t(e,t)},bt=we,Tt=function(e){var t=St(e,"string");return bt(t)?t:t+""},Ct=ne,At=p.document,wt=Ct(At)&&Ct(At.createElement),Rt=function(e){return wt?At.createElement(e):{}},It=Rt,Nt=!k&&!r((function(){return 7!=Object.defineProperty(It("div"),"a",{get:function(){return 7}}).a})),Ot=k,kt=x,Dt=L,Pt=B,xt=$,Lt=Tt,Mt=$e,Ut=Nt,jt=Object.getOwnPropertyDescriptor;O.f=Ot?jt:function(e,t){if(e=xt(e),t=Lt(t),Ut)try{return jt(e,t)}catch(e){}if(Mt(e,t))return Pt(!kt(Dt.f,e,t),e[t])};var Vt=r,Ft=N,Bt=/#|\.prototype\./,Wt=function(e,t){var n=Ht[Gt(e)];return n==zt||n!=Kt&&(Ft(t)?Vt(t):!!t)},Gt=Wt.normalize=function(e){return String(e).replace(Bt,".").toLowerCase()},Ht=Wt.data={},Kt=Wt.NATIVE="N",zt=Wt.POLYFILL="P",Yt=Wt,qt=De,Jt=s,Qt=A(A.bind),Xt=function(e,t){return qt(e),void 0===t?e:Jt?Qt(e,t):function(){return e.apply(t,arguments)}},Zt={},$t=k&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),en=ne,tn=String,nn=TypeError,rn=function(e){if(en(e))return e;throw nn(tn(e)+" is not an object")},sn=k,on=Nt,an=$t,cn=rn,dn=Tt,ln=TypeError,un=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,pn="enumerable",fn="configurable",mn="writable";Zt.f=sn?an?function(e,t,n){if(cn(e),t=dn(t),cn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&mn in n&&!n[mn]){var i=hn(e,t);i&&i[mn]&&(e[t]=n.value,n={configurable:fn in n?n[fn]:i[fn],enumerable:pn in n?n[pn]:i[pn],writable:!1})}return un(e,t,n)}:un:function(e,t,n){if(cn(e),t=dn(t),cn(n),on)try{return un(e,t,n)}catch(e){}if("get"in n||"set"in n)throw ln("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var gn=Zt,En=B,_n=k?function(e,t,n){return gn.f(e,t,En(1,n))}:function(e,t,n){return e[t]=n,e},vn=p,yn=_,Sn=A,bn=N,Tn=O.f,Cn=Yt,An=ie,wn=Xt,Rn=_n,In=$e,Nn=function(e){var t=function(n,i,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,i)}return new e(n,i,r)}return yn(e,this,arguments)};return t.prototype=e.prototype,t},On=function(e,t){var n,i,r,s,o,a,c,d,l,u=e.target,h=e.global,p=e.stat,f=e.proto,m=h?vn:p?vn[u]:(vn[u]||{}).prototype,g=h?An:An[u]||Rn(An,u,{})[u],E=g.prototype;for(s in t)i=!(n=Cn(h?s:u+(p?".":"#")+s,e.forced))&&m&&In(m,s),a=g[s],i&&(c=e.dontCallGetSet?(l=Tn(m,s))&&l.value:m[s]),o=i&&c?c:t[s],i&&typeof a==typeof o||(d=e.bind&&i?wn(o,vn):e.wrap&&i?Nn(o):f&&bn(o)?Sn(o):o,(e.sham||o&&o.sham||a&&a.sham)&&Rn(d,"sham",!0),Rn(g,s,d),f&&(In(An,r=u+"Prototype")||Rn(An,r,{}),Rn(An[r],s,o),e.real&&E&&(n||!E[s])&&Rn(E,s,o)))},kn=Math.ceil,Dn=Math.floor,Pn=Math.trunc||function(e){var t=+e;return(t>0?Dn:kn)(t)},xn=function(e){var t=+e;return t!=t||0===t?0:Pn(t)},Ln=xn,Mn=Math.max,Un=Math.min,jn=function(e,t){var n=Ln(e);return n<0?Mn(n+t,0):Un(n,t)},Vn=xn,Fn=Math.min,Bn=function(e){return e>0?Fn(Vn(e),9007199254740991):0},Wn=function(e){return Bn(e.length)},Gn=$,Hn=jn,Kn=Wn,zn=function(e){return function(t,n,i){var r,s=Gn(t),o=Kn(s),a=Hn(i,o);if(e&&n!=n){for(;o>a;)if((r=s[a++])!=r)return!0}else for(;o>a;a++)if((e||a in s)&&s[a]===n)return e||a||0;return!e&&-1}},Yn={includes:zn(!0),indexOf:zn(!1)},qn=Yn.includes;On({target:"Array",proto:!0,forced:r((function(){return!Array(1).includes()}))},{includes:function(e){return qn(this,e,arguments.length>1?arguments[1]:void 0)}});var Jn=ie,Qn=function(e){return Jn[e+"Prototype"]},Xn=Qn("Array").includes,Zn=ne,$n=b,ei=pt("match"),ti=function(e){var t;return Zn(e)&&(void 0!==(t=e[ei])?!!t:"RegExp"==$n(e))},ni=TypeError,ii={};ii[pt("toStringTag")]="z";var ri="[object z]"===String(ii),si=ri,oi=N,ai=b,ci=pt("toStringTag"),di=Object,li="Arguments"==ai(function(){return arguments}()),ui=si?ai:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=di(e),ci))?n:li?ai(t):"Object"==(i=ai(t))&&oi(t.callee)?"Arguments":i},hi=ui,pi=String,fi=function(e){if("Symbol"===hi(e))throw TypeError("Cannot convert a Symbol value to a string");return pi(e)},mi=pt("match"),gi=On,Ei=function(e){if(ti(e))throw ni("The method doesn't accept regular expressions");return e},_i=Q,vi=fi,yi=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[mi]=!1,"/./"[e](t)}catch(e){}}return!1},Si=l("".indexOf);gi({target:"String",proto:!0,forced:!yi("includes")},{includes:function(e){return!!~Si(vi(_i(this)),vi(Ei(e)),arguments.length>1?arguments[1]:void 0)}});var bi=Qn("String").includes,Ti=u,Ci=Xn,Ai=bi,wi=Array.prototype,Ri=String.prototype,Ii=i((function(e){var t=e.includes;return e===wi||Ti(wi,e)&&t===wi.includes?Ci:"string"==typeof e||e===Ri||Ti(Ri,e)&&t===Ri.includes?Ai:t}));let Ni=!0,Oi=!0;function ki(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function Di(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const s=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,s),r.apply(this,[e,s])};const s=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(n))return s.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Pi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ni=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function xi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Oi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Li(){if("object"==typeof window){if(Ni)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Mi(e,t){Oi&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Ui(e){return"[object Object]"===Object.prototype.toString.call(e)}function ji(e){return Ui(e)?Object.keys(e).reduce((function(t,n){const i=Ui(e[n]),r=i?ji(e[n]):e[n],s=i&&!Object.keys(r).length;return void 0===r||s?t:Object.assign(t,{[n]:r})}),{}):e}function Vi(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?Vi(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((t=>{Vi(e,e.get(t),n)}))})))}function Fi(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const s=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((n=>{n.type===i&&n.trackId===t.id&&Vi(e,n,r)}))})),r}const Bi=Li;function Wi(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"==typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const o=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let o=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=i(e.video),Bi("chrome: "+JSON.stringify(e)),r(e)}))}e.video=i(e.video)}return Bi("chrome: "+JSON.stringify(e)),r(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{i&&i(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}function Gi(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Hi(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Di(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Ki(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function zi(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,i]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){n(s(r(e)))};return t.apply(this,[i,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(s(r(t)))},n])})).then(n,i)}}function Yi(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Fi(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Di(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Fi(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach((n=>{n.track===e&&(t?i=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?i=!0:n=t),t.track===e))),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function qi(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function Ji(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return qi(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const r=this._streams[n.id];if(r)r.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=s(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Qi(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function Xi(e,t){Di(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Zi=Object.freeze({__proto__:null,fixNegotiationNeeded:Xi,shimAddTrackRemoveTrack:Ji,shimAddTrackRemoveTrackWithNative:qi,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const i=n.video&&n.video.width,r=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:s||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:Ki,shimGetStats:zi,shimGetUserMedia:Wi,shimMediaStream:Gi,shimOnTrack:Hi,shimPeerConnection:Qi,shimSenderReceiverGetStats:Yi});function $i(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){Mi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function er(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function tr(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,s]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,s)}}function nr(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ir(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Di(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function rr(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Mi("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function sr(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function or(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function ar(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function cr(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function dr(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var lr=Object.freeze({__proto__:null,shimAddTransceiver:or,shimCreateAnswer:dr,shimCreateOffer:cr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:ar,shimGetUserMedia:$i,shimOnTrack:er,shimPeerConnection:tr,shimRTCDataChannel:sr,shimReceiverGetStats:ir,shimRemoveStream:rr,shimSenderGetStats:nr});function ur(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function hr(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function pr(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,n){const i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=a}function fr(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(mr(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function mr(e){return e&&void 0!==e.video?Object.assign({},e,{video:ji(e.video)}):e}function gr(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(Mi("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Er(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _r(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function vr(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var yr=Object.freeze({__proto__:null,shimAudioContext:vr,shimCallbacksAPI:pr,shimConstraints:mr,shimCreateOfferLegacy:_r,shimGetUserMedia:fr,shimLocalStreamsAPI:ur,shimRTCIceServerUrls:gr,shimRemoteStreamsAPI:hr,shimTrackEventTransceiver:Er}),Sr={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const i=e.substring(e.indexOf(" ")+1).split(";");for(let r=0;r<i.length;r++)n=i[r].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substring(t+1,i),n.value=e.substring(i+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");n.profile=i[2];for(let s=3;s<i.length;s++){const r=i[s],o=t.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(o){const i=t.parseRtpMap(o),s=t.matchPrefix(e,"a=fmtp:"+r+" ");switch(i.parameters=s.length?t.parseFmtp(s[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(t.parseRtcpFb),n.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(i.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let r=0;return n.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const n=[],i=t.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=o.length>0&&o[0].ssrc;let c;const d=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));d.length>0&&d[0].length>1&&d[0][0]===a&&(c=d[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=l}))),n},t.parseRtcpParameters=function(e){const n={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const s=t.matchPrefix(e,"a=rtcp-mux");return n.mux=s.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let r;i.length>0&&(r=parseInt(i[0].substring(19),10)),isNaN(r)&&(r=65536);const s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,i){let r;const s=void 0!==n?n:2;return r=e||t.generateSessionId(),"v=0\r\no="+(i||"thisisadapterortc")+" "+r+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const i=t.splitLines(e);for(let t=0;t<i.length;t++)switch(i[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(Sr);var br=Sr.exports,Tr=i(br),Cr=e({__proto__:null,default:Tr},[br]);function Ar(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),i=Tr.parseCandidate(e.candidate),r=Object.assign(n,i);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Di(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function wr(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Di(e,"icecandidate",(e=>{if(e.candidate){const t=Tr.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Rr(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Tr.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Tr.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},r=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=Tr.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=i(arguments[0]),t=r(e),n=s(arguments[0],e);let o;o=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>o}),this._sctp=a}return o.apply(this,arguments)}}function Ir(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Di(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Nr(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Or(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function kr(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Dr(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var Pr=Object.freeze({__proto__:null,removeExtmapAllowMixed:Or,shimAddIceCandidateNullOrEmpty:kr,shimConnectionState:Nr,shimMaxMessageSize:Rr,shimParameterlessSetLocalDescription:Dr,shimRTCIceCandidate:Ar,shimRTCIceCandidateRelayProtocol:wr,shimSendThrowTypeError:Ir});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Li,i=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=ki(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=ki(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=ki(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:i,commonShim:Pr,extractVersion:ki,disableLog:Pi,disableWarnings:xi,sdp:Cr};switch(i.browser){case"chrome":if(!Zi||!Qi||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=Zi,kr(e,i),Dr(e),Wi(e,i),Gi(e),Qi(e,i),Hi(e),Ji(e,i),Ki(e),zi(e),Yi(e),Xi(e,i),Ar(e),wr(e),Nr(e),Rr(e,i),Ir(e),Or(e,i);break;case"firefox":if(!lr||!tr||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=lr,kr(e,i),Dr(e),$i(e,i),tr(e,i),er(e),rr(e),nr(e),ir(e),sr(e),or(e),ar(e),cr(e),dr(e),Ar(e),Nr(e),Rr(e,i),Ir(e);break;case"safari":if(!yr||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=yr,kr(e,i),Dr(e),gr(e),_r(e),pr(e),ur(e),hr(e),Er(e),fr(e),vr(e),Ar(e),wr(e),Rr(e,i),Ir(e),Or(e,i);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var xr={exports:{}},Lr=On,Mr=k,Ur=Zt.f;Lr({target:"Object",stat:!0,forced:Object.defineProperty!==Ur,sham:!Mr},{defineProperty:Ur});var jr=ie.Object,Vr=xr.exports=function(e,t,n){return jr.defineProperty(e,t,n)};jr.defineProperty.sham&&(Vr.sham=!0);var Fr=i(xr.exports),Br=b,Wr=Array.isArray||function(e){return"Array"==Br(e)},Gr=TypeError,Hr=Tt,Kr=Zt,zr=B,Yr=function(e,t,n){var i=Hr(t);i in e?Kr.f(e,i,zr(0,n)):e[i]=n},qr=N,Jr=Ke,Qr=l(Function.toString);qr(Jr.inspectSource)||(Jr.inspectSource=function(e){return Qr(e)});var Xr=Jr.inspectSource,Zr=l,$r=r,es=N,ts=ui,ns=Xr,is=function(){},rs=[],ss=ce("Reflect","construct"),os=/^\s*(?:class|function)\b/,as=Zr(os.exec),cs=!os.exec(is),ds=function(e){if(!es(e))return!1;try{return ss(is,rs,e),!0}catch(e){return!1}},ls=function(e){if(!es(e))return!1;switch(ts(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return cs||!!as(os,ns(e))}catch(e){return!0}};ls.sham=!0;var us=!ss||$r((function(){var e;return ds(ds.call)||!ds(Object)||!ds((function(){e=!0}))||e}))?ls:ds,hs=Wr,ps=us,fs=ne,ms=pt("species"),gs=Array,Es=function(e){var t;return hs(e)&&(t=e.constructor,(ps(t)&&(t===gs||hs(t.prototype))||fs(t)&&null===(t=t[ms]))&&(t=void 0)),void 0===t?gs:t},_s=function(e,t){return new(Es(e))(0===t?0:t)},vs=r,ys=ge,Ss=pt("species"),bs=On,Ts=r,Cs=Wr,As=ne,ws=Qe,Rs=Wn,Is=function(e){if(e>9007199254740991)throw Gr("Maximum allowed index exceeded");return e},Ns=Yr,Os=_s,ks=function(e){return ys>=51||!vs((function(){var t=[];return(t.constructor={})[Ss]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ds=ge,Ps=pt("isConcatSpreadable"),xs=Ds>=51||!Ts((function(){var e=[];return e[Ps]=!1,e.concat()[0]!==e})),Ls=function(e){if(!As(e))return!1;var t=e[Ps];return void 0!==t?!!t:Cs(e)};bs({target:"Array",proto:!0,arity:1,forced:!xs||!ks("concat")},{concat:function(e){var t,n,i,r,s,o=ws(this),a=Os(o,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(Ls(s=-1===t?o:arguments[t]))for(r=Rs(s),Is(c+r),n=0;n<r;n++,c++)n in s&&Ns(a,c,s[n]);else Is(c+1),Ns(a,c++,s);return a.length=c,a}});var Ms={},Us={},js=$e,Vs=$,Fs=Yn.indexOf,Bs=Us,Ws=l([].push),Gs=function(e,t){var n,i=Vs(e),r=0,s=[];for(n in i)!js(Bs,n)&&js(i,n)&&Ws(s,n);for(;t.length>r;)js(i,n=t[r++])&&(~Fs(s,n)||Ws(s,n));return s},Hs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ks=Gs,zs=Hs,Ys=Object.keys||function(e){return Ks(e,zs)},qs=k,Js=$t,Qs=Zt,Xs=rn,Zs=$,$s=Ys;Ms.f=qs&&!Js?Object.defineProperties:function(e,t){Xs(e);for(var n,i=Zs(t),r=$s(t),s=r.length,o=0;s>o;)Qs.f(e,n=r[o++],i[n]);return e};var eo,to=ce("document","documentElement"),no=rt,io=Ye("keys"),ro=function(e){return io[e]||(io[e]=no(e))},so=rn,oo=Ms,ao=Hs,co=Us,lo=to,uo=Rt,ho="prototype",po="script",fo=ro("IE_PROTO"),mo=function(){},go=function(e){return"<"+po+">"+e+"</"+po+">"},Eo=function(e){e.write(go("")),e.close();var t=e.parentWindow.Object;return e=null,t},_o=function(){try{eo=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;_o="undefined"!=typeof document?document.domain&&eo?Eo(eo):(t=uo("iframe"),n="java"+po+":",t.style.display="none",lo.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(go("document.F=Object")),e.close(),e.F):Eo(eo);for(var i=ao.length;i--;)delete _o[ho][ao[i]];return _o()};co[fo]=!0;var vo=Object.create||function(e,t){var n;return null!==e?(mo[ho]=so(e),n=new mo,mo[ho]=null,n[fo]=e):n=_o(),void 0===t?n:oo.f(n,t)},yo={},So=Gs,bo=Hs.concat("length","prototype");yo.f=Object.getOwnPropertyNames||function(e){return So(e,bo)};var To={},Co=jn,Ao=Wn,wo=Yr,Ro=Array,Io=Math.max,No=function(e,t,n){for(var i=Ao(e),r=Co(t,i),s=Co(void 0===n?i:n,i),o=Ro(Io(s-r,0)),a=0;r<s;r++,a++)wo(o,a,e[r]);return o.length=a,o},Oo=b,ko=$,Do=yo.f,Po=No,xo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];To.f=function(e){return xo&&"Window"==Oo(e)?function(e){try{return Do(e)}catch(e){return Po(xo)}}(e):Do(ko(e))};var Lo={};Lo.f=Object.getOwnPropertySymbols;var Mo=_n,Uo=function(e,t,n,i){return i&&i.enumerable?e[t]=n:Mo(e,t,n),e},jo=Zt,Vo=function(e,t,n){return jo.f(e,t,n)},Fo={},Bo=pt;Fo.f=Bo;var Wo,Go,Ho,Ko=ie,zo=$e,Yo=Fo,qo=Zt.f,Jo=function(e){var t=Ko.Symbol||(Ko.Symbol={});zo(t,e)||qo(t,e,{value:Yo.f(e)})},Qo=x,Xo=ce,Zo=pt,$o=Uo,ea=function(){var e=Xo("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,i=Zo("toPrimitive");t&&!t[i]&&$o(t,i,(function(e){return Qo(n,this)}),{arity:1})},ta=ui,na=ri?{}.toString:function(){return"[object "+ta(this)+"]"},ia=ri,ra=Zt.f,sa=_n,oa=$e,aa=na,ca=pt("toStringTag"),da=function(e,t,n,i){if(e){var r=n?e:e.prototype;oa(r,ca)||ra(r,ca,{configurable:!0,value:t}),i&&!ia&&sa(r,"toString",aa)}},la=N,ua=p.WeakMap,ha=la(ua)&&/native code/.test(String(ua)),pa=p,fa=ne,ma=_n,ga=$e,Ea=Ke,_a=ro,va=Us,ya="Object already initialized",Sa=pa.TypeError,ba=pa.WeakMap;if(ha||Ea.state){var Ta=Ea.state||(Ea.state=new ba);Ta.get=Ta.get,Ta.has=Ta.has,Ta.set=Ta.set,Wo=function(e,t){if(Ta.has(e))throw Sa(ya);return t.facade=e,Ta.set(e,t),t},Go=function(e){return Ta.get(e)||{}},Ho=function(e){return Ta.has(e)}}else{var Ca=_a("state");va[Ca]=!0,Wo=function(e,t){if(ga(e,Ca))throw Sa(ya);return t.facade=e,ma(e,Ca,t),t},Go=function(e){return ga(e,Ca)?e[Ca]:{}},Ho=function(e){return ga(e,Ca)}}var Aa={set:Wo,get:Go,has:Ho,enforce:function(e){return Ho(e)?Go(e):Wo(e,{})},getterFor:function(e){return function(t){var n;if(!fa(t)||(n=Go(t)).type!==e)throw Sa("Incompatible receiver, "+e+" required");return n}}},wa=Xt,Ra=z,Ia=Qe,Na=Wn,Oa=_s,ka=l([].push),Da=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,s=6==e,o=7==e,a=5==e||s;return function(c,d,l,u){for(var h,p,f=Ia(c),m=Ra(f),g=wa(d,l),E=Na(m),_=0,v=u||Oa,y=t?v(c,E):n||o?v(c,0):void 0;E>_;_++)if((a||_ in m)&&(p=g(h=m[_],_,f),e))if(t)y[_]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return _;case 2:ka(y,h)}else switch(e){case 4:return!1;case 7:ka(y,h)}return s?-1:i||r?r:y}},Pa={forEach:Da(0),map:Da(1),filter:Da(2),some:Da(3),every:Da(4),find:Da(5),findIndex:Da(6),filterReject:Da(7)},xa=On,La=p,Ma=x,Ua=l,ja=k,Va=ye,Fa=r,Ba=$e,Wa=u,Ga=rn,Ha=$,Ka=Tt,za=fi,Ya=B,qa=vo,Ja=Ys,Qa=yo,Xa=To,Za=Lo,$a=O,ec=Zt,tc=Ms,nc=L,ic=Uo,rc=Vo,sc=Ye,oc=Us,ac=rt,cc=pt,dc=Fo,lc=Jo,uc=ea,hc=da,pc=Aa,fc=Pa.forEach,mc=ro("hidden"),gc="Symbol",Ec="prototype",_c=pc.set,vc=pc.getterFor(gc),yc=Object[Ec],Sc=La.Symbol,bc=Sc&&Sc[Ec],Tc=La.TypeError,Cc=La.QObject,Ac=$a.f,wc=ec.f,Rc=Xa.f,Ic=nc.f,Nc=Ua([].push),Oc=sc("symbols"),kc=sc("op-symbols"),Dc=sc("wks"),Pc=!Cc||!Cc[Ec]||!Cc[Ec].findChild,xc=ja&&Fa((function(){return 7!=qa(wc({},"a",{get:function(){return wc(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=Ac(yc,t);i&&delete yc[t],wc(e,t,n),i&&e!==yc&&wc(yc,t,i)}:wc,Lc=function(e,t){var n=Oc[e]=qa(bc);return _c(n,{type:gc,tag:e,description:t}),ja||(n.description=t),n},Mc=function(e,t,n){e===yc&&Mc(kc,t,n),Ga(e);var i=Ka(t);return Ga(n),Ba(Oc,i)?(n.enumerable?(Ba(e,mc)&&e[mc][i]&&(e[mc][i]=!1),n=qa(n,{enumerable:Ya(0,!1)})):(Ba(e,mc)||wc(e,mc,Ya(1,{})),e[mc][i]=!0),xc(e,i,n)):wc(e,i,n)},Uc=function(e,t){Ga(e);var n=Ha(t),i=Ja(n).concat(Bc(n));return fc(i,(function(t){ja&&!Ma(jc,n,t)||Mc(e,t,n[t])})),e},jc=function(e){var t=Ka(e),n=Ma(Ic,this,t);return!(this===yc&&Ba(Oc,t)&&!Ba(kc,t))&&(!(n||!Ba(this,t)||!Ba(Oc,t)||Ba(this,mc)&&this[mc][t])||n)},Vc=function(e,t){var n=Ha(e),i=Ka(t);if(n!==yc||!Ba(Oc,i)||Ba(kc,i)){var r=Ac(n,i);return!r||!Ba(Oc,i)||Ba(n,mc)&&n[mc][i]||(r.enumerable=!0),r}},Fc=function(e){var t=Rc(Ha(e)),n=[];return fc(t,(function(e){Ba(Oc,e)||Ba(oc,e)||Nc(n,e)})),n},Bc=function(e){var t=e===yc,n=Rc(t?kc:Ha(e)),i=[];return fc(n,(function(e){!Ba(Oc,e)||t&&!Ba(yc,e)||Nc(i,Oc[e])})),i};Va||(Sc=function(){if(Wa(bc,this))throw Tc("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?za(arguments[0]):void 0,t=ac(e),n=function(e){this===yc&&Ma(n,kc,e),Ba(this,mc)&&Ba(this[mc],t)&&(this[mc][t]=!1),xc(this,t,Ya(1,e))};return ja&&Pc&&xc(yc,t,{configurable:!0,set:n}),Lc(t,e)},ic(bc=Sc[Ec],"toString",(function(){return vc(this).tag})),ic(Sc,"withoutSetter",(function(e){return Lc(ac(e),e)})),nc.f=jc,ec.f=Mc,tc.f=Uc,$a.f=Vc,Qa.f=Xa.f=Fc,Za.f=Bc,dc.f=function(e){return Lc(cc(e),e)},ja&&rc(bc,"description",{configurable:!0,get:function(){return vc(this).description}})),xa({global:!0,constructor:!0,wrap:!0,forced:!Va,sham:!Va},{Symbol:Sc}),fc(Ja(Dc),(function(e){lc(e)})),xa({target:gc,stat:!0,forced:!Va},{useSetter:function(){Pc=!0},useSimple:function(){Pc=!1}}),xa({target:"Object",stat:!0,forced:!Va,sham:!ja},{create:function(e,t){return void 0===t?qa(e):Uc(qa(e),t)},defineProperty:Mc,defineProperties:Uc,getOwnPropertyDescriptor:Vc}),xa({target:"Object",stat:!0,forced:!Va},{getOwnPropertyNames:Fc}),uc(),hc(Sc,gc),oc[mc]=!0;var Wc=ye&&!!Symbol.for&&!!Symbol.keyFor,Gc=On,Hc=ce,Kc=$e,zc=fi,Yc=Ye,qc=Wc,Jc=Yc("string-to-symbol-registry"),Qc=Yc("symbol-to-string-registry");Gc({target:"Symbol",stat:!0,forced:!qc},{for:function(e){var t=zc(e);if(Kc(Jc,t))return Jc[t];var n=Hc("Symbol")(t);return Jc[t]=n,Qc[n]=t,n}});var Xc=On,Zc=$e,$c=we,ed=Ie,td=Wc,nd=Ye("symbol-to-string-registry");Xc({target:"Symbol",stat:!0,forced:!td},{keyFor:function(e){if(!$c(e))throw TypeError(ed(e)+" is not a symbol");if(Zc(nd,e))return nd[e]}});var id=l([].slice),rd=Wr,sd=N,od=b,ad=fi,cd=l([].push),dd=On,ld=ce,ud=_,hd=x,pd=l,fd=r,md=N,gd=we,Ed=id,_d=function(e){if(sd(e))return e;if(rd(e)){for(var t=e.length,n=[],i=0;i<t;i++){var r=e[i];"string"==typeof r?cd(n,r):"number"!=typeof r&&"Number"!=od(r)&&"String"!=od(r)||cd(n,ad(r))}var s=n.length,o=!0;return function(e,t){if(o)return o=!1,t;if(rd(this))return t;for(var i=0;i<s;i++)if(n[i]===e)return t}}},vd=ye,yd=String,Sd=ld("JSON","stringify"),bd=pd(/./.exec),Td=pd("".charAt),Cd=pd("".charCodeAt),Ad=pd("".replace),wd=pd(1..toString),Rd=/[\uD800-\uDFFF]/g,Id=/^[\uD800-\uDBFF]$/,Nd=/^[\uDC00-\uDFFF]$/,Od=!vd||fd((function(){var e=ld("Symbol")();return"[null]"!=Sd([e])||"{}"!=Sd({a:e})||"{}"!=Sd(Object(e))})),kd=fd((function(){return'"\\udf06\\ud834"'!==Sd("\udf06\ud834")||'"\\udead"'!==Sd("\udead")})),Dd=function(e,t){var n=Ed(arguments),i=_d(t);if(md(i)||void 0!==e&&!gd(e))return n[1]=function(e,t){if(md(i)&&(t=hd(i,this,yd(e),t)),!gd(t))return t},ud(Sd,null,n)},Pd=function(e,t,n){var i=Td(n,t-1),r=Td(n,t+1);return bd(Id,e)&&!bd(Nd,r)||bd(Nd,e)&&!bd(Id,i)?"\\u"+wd(Cd(e,0),16):e};Sd&&dd({target:"JSON",stat:!0,arity:3,forced:Od||kd},{stringify:function(e,t,n){var i=Ed(arguments),r=ud(Od?Dd:Sd,null,i);return kd&&"string"==typeof r?Ad(r,Rd,Pd):r}});var xd=Lo,Ld=Qe;On({target:"Object",stat:!0,forced:!ye||r((function(){xd.f(1)}))},{getOwnPropertySymbols:function(e){var t=xd.f;return t?t(Ld(e)):[]}}),Jo("asyncIterator"),Jo("hasInstance"),Jo("isConcatSpreadable"),Jo("iterator"),Jo("match"),Jo("matchAll"),Jo("replace"),Jo("search"),Jo("species"),Jo("split");var Md=ea;Jo("toPrimitive"),Md();var Ud=ce,jd=da;Jo("toStringTag"),jd(Ud("Symbol"),"Symbol"),Jo("unscopables"),da(p.JSON,"JSON",!0);var Vd,Fd,Bd,Wd=ie.Symbol,Gd={},Hd=k,Kd=$e,zd=Function.prototype,Yd=Hd&&Object.getOwnPropertyDescriptor,qd=Kd(zd,"name"),Jd={EXISTS:qd,PROPER:qd&&"something"===function(){}.name,CONFIGURABLE:qd&&(!Hd||Hd&&Yd(zd,"name").configurable)},Qd=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Xd=$e,Zd=N,$d=Qe,el=Qd,tl=ro("IE_PROTO"),nl=Object,il=nl.prototype,rl=el?nl.getPrototypeOf:function(e){var t=$d(e);if(Xd(t,tl))return t[tl];var n=t.constructor;return Zd(n)&&t instanceof n?n.prototype:t instanceof nl?il:null},sl=r,ol=N,al=ne,cl=vo,dl=rl,ll=Uo,ul=pt("iterator"),hl=!1;[].keys&&("next"in(Bd=[].keys())?(Fd=dl(dl(Bd)))!==Object.prototype&&(Vd=Fd):hl=!0);var pl=!al(Vd)||sl((function(){var e={};return Vd[ul].call(e)!==e}));ol((Vd=pl?{}:cl(Vd))[ul])||ll(Vd,ul,(function(){return this}));var fl={IteratorPrototype:Vd,BUGGY_SAFARI_ITERATORS:hl},ml=fl.IteratorPrototype,gl=vo,El=B,_l=da,vl=Gd,yl=function(){return this},Sl=function(e,t,n,i){var r=t+" Iterator";return e.prototype=gl(ml,{next:El(+!i,n)}),_l(e,r,!1,!0),vl[r]=yl,e},bl=l,Tl=De,Cl=N,Al=String,wl=TypeError,Rl=function(e,t,n){try{return bl(Tl(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Il=rn,Nl=function(e){if("object"==typeof e||Cl(e))return e;throw wl("Can't set "+Al(e)+" as a prototype")},Ol=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Rl(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return Il(n),Nl(i),t?e(n,i):n.__proto__=i,n}}():void 0),kl=On,Dl=x,Pl=Sl,xl=rl,Ll=da,Ml=Uo,Ul=Gd,jl=fl,Vl=Jd.PROPER,Fl=jl.BUGGY_SAFARI_ITERATORS,Bl=pt("iterator"),Wl="keys",Gl="values",Hl="entries",Kl=function(){return this},zl=function(e,t,n,i,r,s,o){Pl(n,t,i);var a,c,d,l=function(e){if(e===r&&m)return m;if(!Fl&&e in p)return p[e];switch(e){case Wl:case Gl:case Hl:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",h=!1,p=e.prototype,f=p[Bl]||p["@@iterator"]||r&&p[r],m=!Fl&&f||l(r),g="Array"==t&&p.entries||f;if(g&&(a=xl(g.call(new e)))!==Object.prototype&&a.next&&(Ll(a,u,!0,!0),Ul[u]=Kl),Vl&&r==Gl&&f&&f.name!==Gl&&(h=!0,m=function(){return Dl(f,this)}),r)if(c={values:l(Gl),keys:s?m:l(Wl),entries:l(Hl)},o)for(d in c)(Fl||h||!(d in p))&&Ml(p,d,c[d]);else kl({target:t,proto:!0,forced:Fl||h},c);return o&&p[Bl]!==m&&Ml(p,Bl,m,{name:r}),Ul[t]=m,c},Yl=function(e,t){return{value:e,done:t}},ql=$,Jl=Gd,Ql=Aa;Zt.f;var Xl=zl,Zl=Yl,$l="Array Iterator",eu=Ql.set,tu=Ql.getterFor($l);Xl(Array,"Array",(function(e,t){eu(this,{type:$l,target:ql(e),index:0,kind:t})}),(function(){var e=tu(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,Zl(void 0,!0)):Zl("keys"==n?i:"values"==n?t[i]:[i,t[i]],!1)}),"values"),Jl.Arguments=Jl.Array;var nu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},iu=p,ru=ui,su=_n,ou=Gd,au=pt("toStringTag");for(var cu in nu){var du=iu[cu],lu=du&&du.prototype;lu&&ru(lu)!==au&&su(lu,au,cu),ou[cu]=ou.Array}var uu=Wd,hu=pt,pu=Zt.f,fu=hu("metadata"),mu=Function.prototype;void 0===mu[fu]&&pu(mu,fu,{value:null}),Jo("dispose"),Jo("metadata");var gu=uu;Jo("asyncDispose");var Eu=l,_u=ce("Symbol"),vu=_u.keyFor,yu=Eu(_u.prototype.valueOf),Su=_u.isRegisteredSymbol||function(e){try{return void 0!==vu(yu(e))}catch(e){return!1}};On({target:"Symbol",stat:!0},{isRegisteredSymbol:Su});for(var bu=Ye,Tu=ce,Cu=l,Au=we,wu=pt,Ru=Tu("Symbol"),Iu=Ru.isWellKnownSymbol,Nu=Tu("Object","getOwnPropertyNames"),Ou=Cu(Ru.prototype.valueOf),ku=bu("wks"),Du=0,Pu=Nu(Ru),xu=Pu.length;Du<xu;Du++)try{var Lu=Pu[Du];Au(Ru[Lu])&&wu(Lu)}catch(e){}var Mu=function(e){if(Iu&&Iu(e))return!0;try{for(var t=Ou(e),n=0,i=Nu(ku),r=i.length;n<r;n++)if(ku[i[n]]==t)return!0}catch(e){}return!1};On({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Mu}),Jo("matcher"),Jo("observable"),On({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Su}),On({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Mu}),Jo("metadataKey"),Jo("patternMatch"),Jo("replaceAll");var Uu=i(gu),ju=l,Vu=xn,Fu=fi,Bu=Q,Wu=ju("".charAt),Gu=ju("".charCodeAt),Hu=ju("".slice),Ku=function(e){return function(t,n){var i,r,s=Fu(Bu(t)),o=Vu(n),a=s.length;return o<0||o>=a?e?"":void 0:(i=Gu(s,o))<55296||i>56319||o+1===a||(r=Gu(s,o+1))<56320||r>57343?e?Wu(s,o):i:e?Hu(s,o,o+2):r-56320+(i-55296<<10)+65536}},zu={codeAt:Ku(!1),charAt:Ku(!0)},Yu=zu.charAt,qu=fi,Ju=Aa,Qu=zl,Xu=Yl,Zu="String Iterator",$u=Ju.set,eh=Ju.getterFor(Zu);Qu(String,"String",(function(e){$u(this,{type:Zu,string:qu(e),index:0})}),(function(){var e,t=eh(this),n=t.string,i=t.index;return i>=n.length?Xu(void 0,!0):(e=Yu(n,i),t.index+=e.length,Xu(e,!1))}));var th=i(Fo.f("iterator"));function nh(e){return nh="function"==typeof Uu&&"symbol"==typeof th?function(e){return typeof e}:function(e){return e&&"function"==typeof Uu&&e.constructor===Uu&&e!==Uu.prototype?"symbol":typeof e},nh(e)}var ih=i(Fo.f("toPrimitive"));function rh(e){var t=function(e,t){if("object"!==nh(e)||null===e)return e;var n=e[ih];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==nh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nh(t)?t:String(t)}function sh(e,t,n){return(t=rh(t))in e?Fr(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oh=Qn("Array").keys,ah=ui,ch=$e,dh=u,lh=oh,uh=Array.prototype,hh={DOMTokenList:!0,NodeList:!0},ph=i((function(e){var t=e.keys;return e===uh||dh(uh,e)&&t===uh.keys||ch(hh,ah(e))?lh:t})),fh=Ie,mh=TypeError,gh=No,Eh=Math.floor,_h=function(e,t){var n=e.length,i=Eh(n/2);return n<8?vh(e,t):yh(e,_h(gh(e,0,i),t),_h(gh(e,i),t),t)},vh=function(e,t){for(var n,i,r=e.length,s=1;s<r;){for(i=s,n=e[s];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==s++&&(e[i]=n)}return e},yh=function(e,t,n,i){for(var r=t.length,s=n.length,o=0,a=0;o<r||a<s;)e[o+a]=o<r&&a<s?i(t[o],n[a])<=0?t[o++]:n[a++]:o<r?t[o++]:n[a++];return e},Sh=_h,bh=r,Th=function(e,t){var n=[][e];return!!n&&bh((function(){n.call(null,t||function(){return 1},1)}))},Ch=de.match(/firefox\/(\d+)/i),Ah=!!Ch&&+Ch[1],wh=/MSIE|Trident/.test(de),Rh=de.match(/AppleWebKit\/(\d+)\./),Ih=!!Rh&&+Rh[1],Nh=On,Oh=l,kh=De,Dh=Qe,Ph=Wn,xh=function(e,t){if(!delete e[t])throw mh("Cannot delete property "+fh(t)+" of "+fh(e))},Lh=fi,Mh=r,Uh=Sh,jh=Th,Vh=Ah,Fh=wh,Bh=ge,Wh=Ih,Gh=[],Hh=Oh(Gh.sort),Kh=Oh(Gh.push),zh=Mh((function(){Gh.sort(void 0)})),Yh=Mh((function(){Gh.sort(null)})),qh=jh("sort"),Jh=!Mh((function(){if(Bh)return Bh<70;if(!(Vh&&Vh>3)){if(Fh)return!0;if(Wh)return Wh<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Gh.push({k:t+i,v:n})}for(Gh.sort((function(e,t){return t.v-e.v})),i=0;i<Gh.length;i++)t=Gh[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));Nh({target:"Array",proto:!0,forced:zh||!Yh||!qh||!Jh},{sort:function(e){void 0!==e&&kh(e);var t=Dh(this);if(Jh)return void 0===e?Hh(t):Hh(t,e);var n,i,r=[],s=Ph(t);for(i=0;i<s;i++)i in t&&Kh(r,t[i]);for(Uh(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Lh(t)>Lh(n)?1:-1}}(e)),n=Ph(r),i=0;i<n;)t[i]=r[i++];for(;i<s;)xh(t,i++);return t}});var Qh=Qn("Array").sort,Xh=u,Zh=Qh,$h=Array.prototype,ep=i((function(e){var t=e.sort;return e===$h||Xh($h,e)&&t===$h.sort?Zh:t})),tp=ce,np=yo,ip=Lo,rp=rn,sp=l([].concat),op=tp("Reflect","ownKeys")||function(e){var t=np.f(rp(e)),n=ip.f;return n?sp(t,n(e)):t},ap=$e,cp=op,dp=O,lp=Zt,up=ne,hp=_n,pp=Error,fp=l("".replace),mp=String(pp("zxcasd").stack),gp=/\n\s*at [^:]*:[^\n]*/,Ep=gp.test(mp),_p=B,vp=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",_p(1,7)),7!==e.stack)})),yp=_n,Sp=function(e,t){if(Ep&&"string"==typeof e&&!pp.prepareStackTrace)for(;t--;)e=fp(e,gp,"");return e},bp=vp,Tp=Error.captureStackTrace,Cp=Gd,Ap=pt("iterator"),wp=Array.prototype,Rp=function(e){return void 0!==e&&(Cp.Array===e||wp[Ap]===e)},Ip=ui,Np=Le,Op=Y,kp=Gd,Dp=pt("iterator"),Pp=function(e){if(!Op(e))return Np(e,Dp)||Np(e,"@@iterator")||kp[Ip(e)]},xp=x,Lp=De,Mp=rn,Up=Ie,jp=Pp,Vp=TypeError,Fp=function(e,t){var n=arguments.length<2?jp(e):t;if(Lp(n))return Mp(xp(n,e));throw Vp(Up(e)+" is not iterable")},Bp=x,Wp=rn,Gp=Le,Hp=function(e,t,n){var i,r;Wp(e);try{if(!(i=Gp(e,"return"))){if("throw"===t)throw n;return n}i=Bp(i,e)}catch(e){r=!0,i=e}if("throw"===t)throw n;if(r)throw i;return Wp(i),n},Kp=Xt,zp=x,Yp=rn,qp=Ie,Jp=Rp,Qp=Wn,Xp=u,Zp=Fp,$p=Pp,ef=Hp,tf=TypeError,nf=function(e,t){this.stopped=e,this.result=t},rf=nf.prototype,sf=function(e,t,n){var i,r,s,o,a,c,d,l=n&&n.that,u=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=Kp(t,l),g=function(e){return i&&ef(i,"normal",e),new nf(!0,e)},E=function(e){return u?(Yp(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(h)i=e.iterator;else if(p)i=e;else{if(!(r=$p(e)))throw tf(qp(e)+" is not iterable");if(Jp(r)){for(s=0,o=Qp(e);o>s;s++)if((a=E(e[s]))&&Xp(rf,a))return a;return new nf(!1)}i=Zp(e,r)}for(c=h?e.next:i.next;!(d=zp(c,i)).done;){try{a=E(d.value)}catch(e){ef(i,"throw",e)}if("object"==typeof a&&a&&Xp(rf,a))return a}return new nf(!1)},of=fi,af=On,cf=u,df=rl,lf=Ol,uf=function(e,t,n){for(var i=cp(t),r=lp.f,s=dp.f,o=0;o<i.length;o++){var a=i[o];ap(e,a)||n&&ap(n,a)||r(e,a,s(t,a))}},hf=vo,pf=_n,ff=B,mf=function(e,t){up(t)&&"cause"in t&&hp(e,"cause",t.cause)},gf=function(e,t,n,i){bp&&(Tp?Tp(e,t):yp(e,"stack",Sp(n,i)))},Ef=sf,_f=function(e,t){return void 0===e?arguments.length<2?"":t:of(e)},vf=pt("toStringTag"),yf=Error,Sf=[].push,bf=function(e,t){var n,i=cf(Tf,this);lf?n=lf(yf(),i?df(this):Tf):(n=i?this:hf(Tf),pf(n,vf,"Error")),void 0!==t&&pf(n,"message",_f(t)),gf(n,bf,n.stack,1),arguments.length>2&&mf(n,arguments[2]);var r=[];return Ef(e,Sf,{that:r}),pf(n,"errors",r),n};lf?lf(bf,yf):uf(bf,yf,{name:!0});var Tf=bf.prototype=hf(yf.prototype,{constructor:ff(1,bf),message:ff(1,""),name:ff(1,"AggregateError")});af({global:!0,constructor:!0,arity:2},{AggregateError:bf});var Cf,Af,wf,Rf,If="undefined"!=typeof process&&"process"==b(process),Nf=ce,Of=Vo,kf=k,Df=pt("species"),Pf=u,xf=TypeError,Lf=function(e,t){if(Pf(t,e))return e;throw xf("Incorrect invocation")},Mf=us,Uf=Ie,jf=TypeError,Vf=rn,Ff=function(e){if(Mf(e))return e;throw jf(Uf(e)+" is not a constructor")},Bf=Y,Wf=pt("species"),Gf=function(e,t){var n,i=Vf(e).constructor;return void 0===i||Bf(n=Vf(i)[Wf])?t:Ff(n)},Hf=TypeError,Kf=function(e,t){if(e<t)throw Hf("Not enough arguments");return e},zf=/(?:ipad|iphone|ipod).*applewebkit/i.test(de),Yf=p,qf=_,Jf=Xt,Qf=N,Xf=$e,Zf=r,$f=to,em=id,tm=Rt,nm=Kf,im=zf,rm=If,sm=Yf.setImmediate,om=Yf.clearImmediate,am=Yf.process,cm=Yf.Dispatch,dm=Yf.Function,lm=Yf.MessageChannel,um=Yf.String,hm=0,pm={},fm="onreadystatechange";Zf((function(){Cf=Yf.location}));var mm=function(e){if(Xf(pm,e)){var t=pm[e];delete pm[e],t()}},gm=function(e){return function(){mm(e)}},Em=function(e){mm(e.data)},_m=function(e){Yf.postMessage(um(e),Cf.protocol+"//"+Cf.host)};sm&&om||(sm=function(e){nm(arguments.length,1);var t=Qf(e)?e:dm(e),n=em(arguments,1);return pm[++hm]=function(){qf(t,void 0,n)},Af(hm),hm},om=function(e){delete pm[e]},rm?Af=function(e){am.nextTick(gm(e))}:cm&&cm.now?Af=function(e){cm.now(gm(e))}:lm&&!im?(Rf=(wf=new lm).port2,wf.port1.onmessage=Em,Af=Jf(Rf.postMessage,Rf)):Yf.addEventListener&&Qf(Yf.postMessage)&&!Yf.importScripts&&Cf&&"file:"!==Cf.protocol&&!Zf(_m)?(Af=_m,Yf.addEventListener("message",Em,!1)):Af=fm in tm("script")?function(e){$f.appendChild(tm("script"))[fm]=function(){$f.removeChild(this),mm(e)}}:function(e){setTimeout(gm(e),0)});var vm={set:sm,clear:om},ym=function(){this.head=null,this.tail=null};ym.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Sm,bm,Tm,Cm,Am,wm=ym,Rm=/ipad|iphone|ipod/i.test(de)&&"undefined"!=typeof Pebble,Im=/web0s(?!.*chrome)/i.test(de),Nm=p,Om=Xt,km=O.f,Dm=vm.set,Pm=wm,xm=zf,Lm=Rm,Mm=Im,Um=If,jm=Nm.MutationObserver||Nm.WebKitMutationObserver,Vm=Nm.document,Fm=Nm.process,Bm=Nm.Promise,Wm=km(Nm,"queueMicrotask"),Gm=Wm&&Wm.value;if(!Gm){var Hm=new Pm,Km=function(){var e,t;for(Um&&(e=Fm.domain)&&e.exit();t=Hm.get();)try{t()}catch(e){throw Hm.head&&Sm(),e}e&&e.enter()};xm||Um||Mm||!jm||!Vm?!Lm&&Bm&&Bm.resolve?((Cm=Bm.resolve(void 0)).constructor=Bm,Am=Om(Cm.then,Cm),Sm=function(){Am(Km)}):Um?Sm=function(){Fm.nextTick(Km)}:(Dm=Om(Dm,Nm),Sm=function(){Dm(Km)}):(bm=!0,Tm=Vm.createTextNode(""),new jm(Km).observe(Tm,{characterData:!0}),Sm=function(){Tm.data=bm=!bm}),Gm=function(e){Hm.head||Sm(),Hm.add(e)}}var zm=Gm,Ym=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},qm=p.Promise,Jm="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Qm=!Jm&&!If&&"object"==typeof window&&"object"==typeof document,Xm=p,Zm=qm,$m=N,eg=Yt,tg=Xr,ng=pt,ig=Qm,rg=Jm,sg=ge,og=Zm&&Zm.prototype,ag=ng("species"),cg=!1,dg=$m(Xm.PromiseRejectionEvent),lg=eg("Promise",(function(){var e=tg(Zm),t=e!==String(Zm);if(!t&&66===sg)return!0;if(!og.catch||!og.finally)return!0;if(!sg||sg<51||!/native code/.test(e)){var n=new Zm((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};if((n.constructor={})[ag]=i,!(cg=n.then((function(){}))instanceof i))return!0}return!t&&(ig||rg)&&!dg})),ug={CONSTRUCTOR:lg,REJECTION_EVENT:dg,SUBCLASSING:cg},hg={},pg=De,fg=TypeError,mg=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw fg("Bad Promise constructor");t=e,n=i})),this.resolve=pg(t),this.reject=pg(n)};hg.f=function(e){return new mg(e)};var gg,Eg,_g=On,vg=If,yg=p,Sg=x,bg=Uo,Tg=da,Cg=function(e){var t=Nf(e);kf&&t&&!t[Df]&&Of(t,Df,{configurable:!0,get:function(){return this}})},Ag=De,wg=N,Rg=ne,Ig=Lf,Ng=Gf,Og=vm.set,kg=zm,Dg=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},Pg=Ym,xg=wm,Lg=Aa,Mg=qm,Ug=ug,jg=hg,Vg="Promise",Fg=Ug.CONSTRUCTOR,Bg=Ug.REJECTION_EVENT,Wg=Lg.getterFor(Vg),Gg=Lg.set,Hg=Mg&&Mg.prototype,Kg=Mg,zg=Hg,Yg=yg.TypeError,qg=yg.document,Jg=yg.process,Qg=jg.f,Xg=Qg,Zg=!!(qg&&qg.createEvent&&yg.dispatchEvent),$g="unhandledrejection",eE=function(e){var t;return!(!Rg(e)||!wg(t=e.then))&&t},tE=function(e,t){var n,i,r,s=t.value,o=1==t.state,a=o?e.ok:e.fail,c=e.resolve,d=e.reject,l=e.domain;try{a?(o||(2===t.rejection&&oE(t),t.rejection=1),!0===a?n=s:(l&&l.enter(),n=a(s),l&&(l.exit(),r=!0)),n===e.promise?d(Yg("Promise-chain cycle")):(i=eE(n))?Sg(i,n,c,d):c(n)):d(s)}catch(e){l&&!r&&l.exit(),d(e)}},nE=function(e,t){e.notified||(e.notified=!0,kg((function(){for(var n,i=e.reactions;n=i.get();)tE(n,e);e.notified=!1,t&&!e.rejection&&rE(e)})))},iE=function(e,t,n){var i,r;Zg?((i=qg.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),yg.dispatchEvent(i)):i={promise:t,reason:n},!Bg&&(r=yg["on"+e])?r(i):e===$g&&Dg("Unhandled promise rejection",n)},rE=function(e){Sg(Og,yg,(function(){var t,n=e.facade,i=e.value;if(sE(e)&&(t=Pg((function(){vg?Jg.emit("unhandledRejection",i,n):iE($g,n,i)})),e.rejection=vg||sE(e)?2:1,t.error))throw t.value}))},sE=function(e){return 1!==e.rejection&&!e.parent},oE=function(e){Sg(Og,yg,(function(){var t=e.facade;vg?Jg.emit("rejectionHandled",t):iE("rejectionhandled",t,e.value)}))},aE=function(e,t,n){return function(i){e(t,i,n)}},cE=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,nE(e,!0))},dE=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Yg("Promise can't be resolved itself");var i=eE(t);i?kg((function(){var n={done:!1};try{Sg(i,t,aE(dE,n,e),aE(cE,n,e))}catch(t){cE(n,t,e)}})):(e.value=t,e.state=1,nE(e,!1))}catch(t){cE({done:!1},t,e)}}};Fg&&(zg=(Kg=function(e){Ig(this,zg),Ag(e),Sg(gg,this);var t=Wg(this);try{e(aE(dE,t),aE(cE,t))}catch(e){cE(t,e)}}).prototype,(gg=function(e){Gg(this,{type:Vg,done:!1,notified:!1,parent:!1,reactions:new xg,rejection:!1,state:0,value:void 0})}).prototype=bg(zg,"then",(function(e,t){var n=Wg(this),i=Qg(Ng(this,Kg));return n.parent=!0,i.ok=!wg(e)||e,i.fail=wg(t)&&t,i.domain=vg?Jg.domain:void 0,0==n.state?n.reactions.add(i):kg((function(){tE(i,n)})),i.promise})),Eg=function(){var e=new gg,t=Wg(e);this.promise=e,this.resolve=aE(dE,t),this.reject=aE(cE,t)},jg.f=Qg=function(e){return e===Kg||void 0===e?new Eg(e):Xg(e)}),_g({global:!0,constructor:!0,wrap:!0,forced:Fg},{Promise:Kg}),Tg(Kg,Vg,!1,!0),Cg(Vg);var lE=pt("iterator"),uE=!1;try{var hE=0,pE={next:function(){return{done:!!hE++}},return:function(){uE=!0}};pE[lE]=function(){return this},Array.from(pE,(function(){throw 2}))}catch(e){}var fE=qm,mE=function(e,t){if(!t&&!uE)return!1;var n=!1;try{var i={};i[lE]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},gE=ug.CONSTRUCTOR||!mE((function(e){fE.all(e).then(void 0,(function(){}))})),EE=x,_E=De,vE=hg,yE=Ym,SE=sf;On({target:"Promise",stat:!0,forced:gE},{all:function(e){var t=this,n=vE.f(t),i=n.resolve,r=n.reject,s=yE((function(){var n=_E(t.resolve),s=[],o=0,a=1;SE(e,(function(e){var c=o++,d=!1;a++,EE(n,t,e).then((function(e){d||(d=!0,s[c]=e,--a||i(s))}),r)})),--a||i(s)}));return s.error&&r(s.value),n.promise}});var bE=On,TE=ug.CONSTRUCTOR;qm&&qm.prototype,bE({target:"Promise",proto:!0,forced:TE,real:!0},{catch:function(e){return this.then(void 0,e)}});var CE=x,AE=De,wE=hg,RE=Ym,IE=sf;On({target:"Promise",stat:!0,forced:gE},{race:function(e){var t=this,n=wE.f(t),i=n.reject,r=RE((function(){var r=AE(t.resolve);IE(e,(function(e){CE(r,t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var NE=x,OE=hg;On({target:"Promise",stat:!0,forced:ug.CONSTRUCTOR},{reject:function(e){var t=OE.f(this);return NE(t.reject,void 0,e),t.promise}});var kE=rn,DE=ne,PE=hg,xE=function(e,t){if(kE(e),DE(t)&&t.constructor===e)return t;var n=PE.f(e);return(0,n.resolve)(t),n.promise},LE=On,ME=qm,UE=ug.CONSTRUCTOR,jE=xE,VE=ce("Promise"),FE=!UE;LE({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return jE(FE&&this===VE?ME:this,e)}});var BE=x,WE=De,GE=hg,HE=Ym,KE=sf;On({target:"Promise",stat:!0,forced:gE},{allSettled:function(e){var t=this,n=GE.f(t),i=n.resolve,r=n.reject,s=HE((function(){var n=WE(t.resolve),r=[],s=0,o=1;KE(e,(function(e){var a=s++,c=!1;o++,BE(n,t,e).then((function(e){c||(c=!0,r[a]={status:"fulfilled",value:e},--o||i(r))}),(function(e){c||(c=!0,r[a]={status:"rejected",reason:e},--o||i(r))}))})),--o||i(r)}));return s.error&&r(s.value),n.promise}});var zE=x,YE=De,qE=ce,JE=hg,QE=Ym,XE=sf,ZE="No one promise resolved";On({target:"Promise",stat:!0,forced:gE},{any:function(e){var t=this,n=qE("AggregateError"),i=JE.f(t),r=i.resolve,s=i.reject,o=QE((function(){var i=YE(t.resolve),o=[],a=0,c=1,d=!1;XE(e,(function(e){var l=a++,u=!1;c++,zE(i,t,e).then((function(e){u||d||(d=!0,r(e))}),(function(e){u||d||(u=!0,o[l]=e,--c||s(new n(o,ZE)))}))})),--c||s(new n(o,ZE))}));return o.error&&s(o.value),i.promise}});var $E=On,e_=qm,t_=r,n_=ce,i_=N,r_=Gf,s_=xE,o_=e_&&e_.prototype;$E({target:"Promise",proto:!0,real:!0,forced:!!e_&&t_((function(){o_.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=r_(this,n_("Promise")),n=i_(e);return this.then(n?function(n){return s_(t,e()).then((function(){return n}))}:e,n?function(n){return s_(t,e()).then((function(){throw n}))}:e)}});var a_=ie.Promise,c_=i(a_);const d_=()=>{};function l_(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:d_};return e.promise=new c_(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const u_=new Map,h_=new Map,p_=new Map;var f_,m_;!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(f_||(f_={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(m_||(m_={}));var g_={exports:{}};!function(e,n){!function(t,i){var r="function",s="undefined",o="object",a="string",c="major",d="model",l="name",u="type",h="vendor",p="version",f="architecture",m="console",g="mobile",E="tablet",_="smarttv",v="wearable",y="embedded",S="Amazon",b="Apple",T="ASUS",C="BlackBerry",A="Browser",w="Chrome",R="Firefox",I="Google",N="Huawei",O="LG",k="Microsoft",D="Motorola",P="Opera",x="Samsung",L="Sharp",M="Sony",U="Xiaomi",j="Zebra",V="Facebook",F="Chromium OS",B="Mac OS",W=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},G=function(e,t){return typeof e===a&&-1!==H(t).indexOf(H(e))},H=function(e){return e.toLowerCase()},K=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},z=function(e,t){for(var n,s,a,c,d,l,u=0;u<t.length&&!d;){var h=t[u],p=t[u+1];for(n=s=0;n<h.length&&!d&&h[n];)if(d=h[n++].exec(e))for(a=0;a<p.length;a++)l=d[++s],typeof(c=p[a])===o&&c.length>0?2===c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):i:this[c[0]]=l?c[1].call(this,l,c[2]):i:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):i):this[c]=l||i;u+=2}},Y=function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(G(t[n][r],e))return"?"===n?i:n}else if(G(t[n],e))return"?"===n?i:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,P+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[l,P]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+A],p],[/\bfocus\/([\w\.]+)/i],[p,[l,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[p,[l,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+A],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,V],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,w+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,w+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,p],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,H]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[h,x],[u,E]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[h,x],[u,g]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[h,b],[u,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[h,b],[u,E]],[/(macintosh);/i],[d,[h,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[h,L],[u,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[h,N],[u,E]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[h,N],[u,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[h,U],[u,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[h,U],[u,E]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[h,"OPPO"],[u,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[h,"Vivo"],[u,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[h,"Realme"],[u,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[h,D],[u,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[h,D],[u,E]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[h,O],[u,E]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[h,O],[u,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[h,"Lenovo"],[u,E]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[h,"Nokia"],[u,g]],[/(pixel c)\b/i],[d,[h,I],[u,E]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[h,I],[u,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[h,M],[u,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[h,M],[u,E]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[h,"OnePlus"],[u,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[h,S],[u,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[h,S],[u,g]],[/(playbook);[-\w\),; ]+(rim)/i],[d,h,[u,E]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[h,C],[u,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[h,T],[u,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[h,T],[u,g]],[/(nexus 9)/i],[d,[h,"HTC"],[u,E]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[d,/_/g," "],[u,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[h,"Acer"],[u,E]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[h,"Meizu"],[u,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,d,[u,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,d,[u,E]],[/(surface duo)/i],[d,[h,k],[u,E]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[h,"Fairphone"],[u,g]],[/(u304aa)/i],[d,[h,"AT&T"],[u,g]],[/\bsie-(\w*)/i],[d,[h,"Siemens"],[u,g]],[/\b(rct\w+) b/i],[d,[h,"RCA"],[u,E]],[/\b(venue[\d ]{2,7}) b/i],[d,[h,"Dell"],[u,E]],[/\b(q(?:mv|ta)\w+) b/i],[d,[h,"Verizon"],[u,E]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[h,"Barnes & Noble"],[u,E]],[/\b(tm\d{3}\w+) b/i],[d,[h,"NuVision"],[u,E]],[/\b(k88) b/i],[d,[h,"ZTE"],[u,E]],[/\b(nx\d{3}j) b/i],[d,[h,"ZTE"],[u,g]],[/\b(gen\d{3}) b.+49h/i],[d,[h,"Swiss"],[u,g]],[/\b(zur\d{3}) b/i],[d,[h,"Swiss"],[u,E]],[/\b((zeki)?tb.*\b) b/i],[d,[h,"Zeki"],[u,E]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],d,[u,E]],[/\b(ns-?\w{0,9}) b/i],[d,[h,"Insignia"],[u,E]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[h,"NextBook"],[u,E]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],d,[u,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],d,[u,g]],[/\b(ph-1) /i],[d,[h,"Essential"],[u,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[h,"Envizen"],[u,E]],[/\b(trio[-\w\. ]+) b/i],[d,[h,"MachSpeed"],[u,E]],[/\btu_(1491) b/i],[d,[h,"Rotor"],[u,E]],[/(shield[\w ]+) b/i],[d,[h,"Nvidia"],[u,E]],[/(sprint) (\w+)/i],[h,d,[u,g]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[h,k],[u,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[h,j],[u,E]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[h,j],[u,g]],[/smart-tv.+(samsung)/i],[h,[u,_]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[h,x],[u,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,O],[u,_]],[/(apple) ?tv/i],[h,[d,b+" TV"],[u,_]],[/crkey/i],[[d,w+"cast"],[h,I],[u,_]],[/droid.+aft(\w)( bui|\))/i],[d,[h,S],[u,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[h,L],[u,_]],[/(bravia[\w ]+)( bui|\))/i],[d,[h,M],[u,_]],[/(mitv-\w{5}) bui/i],[d,[h,U],[u,_]],[/Hbbtv.*(technisat) (.*);/i],[h,d,[u,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,K],[d,K],[u,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,d,[u,m]],[/droid.+; (shield) bui/i],[d,[h,"Nvidia"],[u,m]],[/(playstation [345portablevi]+)/i],[d,[h,M],[u,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[h,k],[u,m]],[/((pebble))app/i],[h,d,[u,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[h,b],[u,v]],[/droid.+; (glass) \d/i],[d,[h,I],[u,v]],[/droid.+; (wt63?0{2,3})\)/i],[d,[h,j],[u,v]],[/(quest( 2| pro)?)/i],[d,[h,V],[u,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[u,E]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,E]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,g]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[p,Y,q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[p,Y,q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,B],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,w+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,F],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,p]]},Q=function(e,n){if(typeof e===o&&(n=e,e=i),!(this instanceof Q))return new Q(e,n).getResult();var m=typeof t!==s&&t.navigator?t.navigator:i,_=e||(m&&m.userAgent?m.userAgent:""),v=m&&m.userAgentData?m.userAgentData:i,y=n?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(J,n):J;return this.getBrowser=function(){var e={};return e[l]=i,e[p]=i,z.call(e,_,y.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:i}(e[p]),m&&m.brave&&typeof m.brave.isBrave==r&&(e[l]="Brave"),e},this.getCPU=function(){var e={};return e[f]=i,z.call(e,_,y.cpu),e},this.getDevice=function(){var e={};return e[h]=i,e[d]=i,e[u]=i,z.call(e,_,y.device),!e[u]&&v&&v.mobile&&(e[u]=g),"Macintosh"==e[d]&&m&&typeof m.standalone!==s&&m.maxTouchPoints&&m.maxTouchPoints>2&&(e[d]="iPad",e[u]=E),e},this.getEngine=function(){var e={};return e[l]=i,e[p]=i,z.call(e,_,y.engine),e},this.getOS=function(){var e={};return e[l]=i,e[p]=i,z.call(e,_,y.os),!e[l]&&v&&"Unknown"!=v.platform&&(e[l]=v.platform.replace(/chrome os/i,F).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return _},this.setUA=function(e){return _=typeof e===a&&e.length>350?K(e,350):e,this},this.setUA(_),this};Q.VERSION="0.7.34",Q.BROWSER=W([l,p,c]),Q.CPU=W([f]),Q.DEVICE=W([d,h,u,m,g,_,E,v,y]),Q.ENGINE=Q.OS=W([l,p]),e.exports&&(n=e.exports=Q),n.UAParser=Q;var X=typeof t!==s&&(t.jQuery||t.Zepto);if(X&&!X.ua){var Z=new Q;X.ua=Z.getResult(),X.ua.get=function(){return Z.getUA()},X.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:t)}(g_,g_.exports);const E_=new(i(g_.exports));let __=E_.getResult(),v_=null;function y_(e){if(!v_){e&&E_.setUA(e),__=E_.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return m_.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return m_.CHROME;case"Safari":case"Mobile Safari":return m_.SAFARI;case"Edge":return m_.EDGE;case"Firefox":return m_.FIREFOX;case"QQBrowser":return m_.QQ;case"Opera":return m_.OPERA;case"WeChat":return m_.WECHAT;default:return e.browser.name||""}}(__),n=function(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}(__),i=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(__),r=__.os.version;if(!(t&&n&&i&&r))return{name:t,version:n,os:i,osVersion:r};v_={name:t,version:n,os:i,osVersion:r}}return v_}function S_(){return y_().os}function b_(){const e=y_();return"".concat(e.os," ").concat(e.osVersion)}function T_(){const e=y_();return!!("WebKit"===__.engine.name&&e.os===f_.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==m_.SAFARI||N_()&&e.name!==m_.SAFARI)}function C_(){const e=y_();if(T_()){if(e.os===f_.MAC_OS)return!0;if(e.os===f_.IOS){const e=__.os.version&&__.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function A_(){return"WebKit"===__.engine.name}function w_(){return y_().name===m_.CHROME}function R_(){return y_().name===m_.SAFARI}function I_(){return y_().name===m_.FIREFOX}function N_(){return y_().os===f_.IOS}function O_(e){const t=y_();return!(t.name!==m_.CHROME||!t.osVersion)&&Number(t.version)>=e}function k_(e){const t=y_();return!(t.name!==m_.EDGE||!t.osVersion)&&Number(t.version)>=e}function D_(e){const t=y_();return!(t.name!==m_.OPERA||!t.osVersion)&&Number(t.version)>=e}function P_(){const e=y_();return!(e.name!==m_.CHROME||!e.osVersion)&&Number(e.version)<=90}function x_(){const e=y_();if(e.os!==f_.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function L_(){const e=y_();if(e.os!==f_.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function M_(){const e=y_();if(e.os!==f_.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function U_(){const e=y_();if(e.os!==f_.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function j_(){return R_()&&navigator.maxTouchPoints>0}function V_(){return y_().name===m_.WECHAT}function F_(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function B_(){const e=y_();return e.name!==m_.EDGE&&e.name!==m_.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function W_(){return S_()===f_.ANDROID}function G_(){const e=y_();return W_()&&(e.name===m_.CHROME||e.name===m_.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}var H_;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED"}(H_||(H_={}));let K_=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),sh(this,"code",void 0),sh(this,"message",void 0),sh(this,"data",void 0),sh(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function z_(e,t){if("boolean"!=typeof e)throw new K_(H_.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function Y_(e,t,n){if(!Ii(n).call(n,e))throw new K_(H_.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>i||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new K_(H_.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(i,"]. integer only"))}function J_(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new K_(H_.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&q_(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&q_(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&q_(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&q_(e.ideal,"".concat(t,".ideal"),1,1/0)}else q_(e,t,1,1/0)}function Q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new K_(H_.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!$_(e,n,i,r))throw new K_(H_.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(i,"].").concat(r?" ASCII characters only.":""))}function X_(e,t){if(!Array.isArray(e))throw new K_(H_.INVALID_PARAMS,"".concat(t," should be an array"))}function Z_(e){return null==e}function $_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!i||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}function ev(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);const i=e.getUint32(t,n),r=e.getUint32(t+4,n),s=Number(!!n),o=Number(!n);return BigInt(i*o+r*s)<<BigInt(32)|BigInt(i*s+r*o)}function tv(e,t,n,i){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,i);const r=Number(n>>BigInt(32)),s=Number(n&BigInt(4294967295));i?(e.setUint32(t+4,r,i),e.setUint32(t,s,i)):(e.setUint32(t,r,i),e.setUint32(t+4,s,i))}var nv,iv;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(nv||(nv={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(iv||(iv={}));const rv=new class{constructor(){sh(this,"_clientSize",null),sh(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),sh(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),sh(this,"getStyle",(e=>window.getComputedStyle(e,null))),sh(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const i=this.getStyle(e),{display:r,visibility:s,opacity:o,filter:a}=i;return("none"===r||Ii(t=["hidden","collapse"]).call(t,s)||Number(o)<.1)&&(n=!1),!!n&&(a&&a.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Ii(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,i]=e;switch(t){case"brightness":(i<.1||i>3)&&(n=!1);break;case"blur":i>3&&(n=!1);break;case"opacity":i<.1&&(n=!1)}})),n)})),sh(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,i=!0;const r=e=>t(e);let s=e;for(;s&&i;)r(s)||(n=!1,i=!1),s=s.parentElement,s||(i=!1);return n})),sh(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),sh(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:i,right:r,top:s,bottom:o}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:i,right:r,top:s,bottom:o,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),sh(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),sh(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),sh(this,"checkCoverForAPoint",((e,t,n)=>{const i=this.elementFromPoint(e,t);return null!==i&&i!==n})),sh(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:i}=this._clientSize,r=e/6,s=t/6,o=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*a+(0===c?.1:4===c?(r*c*a-1e5)/a:r*c)*a)/a,d=(i*a+(0===e?.1:4===e?(s*e*a-1e5)/a:s*e)*a)/a;o.push({x:t,y:d})}return[...o]})),sh(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),sh(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),sh(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:i,clientHeight:r,clientWidth:s,clientMin:o}=this._clientSize;let a,c,d,l;if(e<0)a=0;else{if(!(e<s))return!1;a=e}if(t<0)return!1;if(c=t<s?t:s,n<0)d=0;else{if(!(n<r))return!1;d=n}if(i<0)return!1;l=i<r?i:r;const u=c-a,h=l-d;return this.checkSizeIsVisible(u,h,o)})),sh(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),sh(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(nv.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(nv.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(nv.SIZE)}}return this.returnHiddenResult(nv.STYLE)}return this.returnHiddenResult(iv.UNMOUNTED)}return this.returnHiddenResult(iv.INVALID_HTML_ELEMENT)})),sh(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function sv(e){return(new TextEncoder).encode(e)}const ov=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},av=async e=>{const t=function(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i+=1)n[i]=t.charCodeAt(i);return n}("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),i=sv(e),r=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,i);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(r))},cv=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",sv(e)),16);class dv{constructor(){sh(this,"_events",{}),sh(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],i=this._indexOfListener(n,t);-1!==i&&n.splice(i,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(let s=0;s<t.length;s+=1){const n=t[s];n.once&&this.off(e,n.listener),n.listener.apply(this,i||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let lv=null;function uv(){if(lv)return lv;if(window.electron)return lv=window.electron;if(!window.require)return null;try{return lv=window.require("electron"),lv}catch(e){return null}}var hv,pv,fv,mv,gv,Ev,_v,vv;function yv(e){return q_(e.timeout,"config.timeout",0,1e5),q_(e.timeoutFactor,"config.timeoutFactor",0,100,!1),q_(e.maxRetryCount,"config.maxRetryConfig",0,1/0),q_(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Sv(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function bv(e){return Q_(e.turnServerURL,"turnServerURL"),Q_(e.username,"username"),Q_(e.password,"password"),e.udpport&&q_(e.udpport,"udpport",1,99999,!0),e.forceturn&&z_(e.forceturn,"forceturn"),e.security&&z_(e.security,"security"),e.tcpport&&q_(e.tcpport,"tcpport",1,99999,!0),!0}function Tv(e){return void 0!==e.level&&Y_(e.level,"level",[1,2,3]),void 0!==e.delay&&q_(e.delay,"delay",0,3e3,!0),!0}function Cv(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return 0===e.getListeners(t).length?c_.reject(new K_(H_.UNEXPECTED_ERROR,"can not emit promise")):new c_(((n,r)=>{e.emit(t,...i,n,r)}))}function Av(e,t){if(0===e.getListeners(t).length)return c_.resolve();for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Cv(e,t,...i)}function wv(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Rv(e,t,...i)}function Rv(e,t){let n=null,i=null;for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];if(e.emit(t,...s,(e=>{n=e}),(e=>{i=e})),null!==i)throw i;if(null===n)throw new K_(H_.UNEXPECTED_ERROR,"handler is not sync");return n}!function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(hv||(hv={})),function(e){e.TRACER="tracer"}(pv||(pv={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(fv||(fv={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE"}(mv||(mv={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(gv||(gv={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(Ev||(Ev={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(_v||(_v={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(vv||(vv={}));const Iv=new class extends dv{set networkState(e){this.emit(vv.NETWORK_STATE_CHANGE,e,this._networkState),e===_v.ONLINE?this.emit(vv.ONLINE):e===_v.OFFLINE&&(this.onlineWaiter=new c_((e=>{this.once(vv.ONLINE,(()=>{this.onlineWaiter=void 0,e(_v.ONLINE)}))})),this.emit(vv.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===_v.ONLINE}constructor(){super(),sh(this,"_moduleName","network-indicator"),sh(this,"_networkState",_v.ONLINE),sh(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=_v.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=_v.OFFLINE}))}};var Nv=De,Ov=Qe,kv=z,Dv=Wn,Pv=TypeError,xv=function(e){return function(t,n,i,r){Nv(n);var s=Ov(t),o=kv(s),a=Dv(s),c=e?a-1:0,d=e?-1:1;if(i<2)for(;;){if(c in o){r=o[c],c+=d;break}if(c+=d,e?c<0:a<=c)throw Pv("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=d)c in o&&(r=n(r,o[c],c,s));return r}},Lv=[xv(!1),xv(!0)][0];On({target:"Array",proto:!0,forced:!If&&ge>79&&ge<83||!Th("reduce")},{reduce:function(e){var t=arguments.length;return Lv(this,e,t,t>1?arguments[1]:void 0)}});var Mv=Qn("Array").reduce,Uv=u,jv=Mv,Vv=Array.prototype,Fv=i((function(e){var t=e.reduce;return e===Vv||Uv(Vv,e)&&t===Vv.reduce?jv:t}));function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Wv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gv(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function Hv(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function Kv(e){void 0!==c_?c_.resolve().then(e):setTimeout(e,0)}function zv(e){return JSON.parse(JSON.stringify(e))}function Yv(e){try{return zv(e)}catch(t){return e}}const qv={};function Jv(e,t){qv[t]||(qv[t]=!0,e())}function Qv(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i+=1)n[i]=t.charCodeAt(i);return n}function Xv(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function Zv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=Fv(t).call(t,((e,t)=>e+t.length),0),r=new Uint8Array(new ArrayBuffer(i));let s=0;return t.forEach((e=>{r.set(e,s),s+=e.length})),r}function $v(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function ey(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?$v(e):e.size})),t+138}function ty(e){const t=new K_(H_.TIMEOUT,"timeout");return new c_(((n,i)=>{window.setTimeout((()=>i(t)),e)}))}function ny(e){return new c_((t=>{window.setTimeout(t,e)}))}function iy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+iy(e-n.length,"")}function ry(){return iy(32,"").toUpperCase()}const sy=()=>{},oy=new class{constructor(){sh(this,"fnMap",new Map)}throttleByKey(e,t,n,i){for(var r=arguments.length,s=new Array(r>4?r-4:0),o=4;o<r;o++)s[o-4]=arguments[o];if(this.fnMap.has(t)){const r=this.fnMap.get(t);if(r.threshold!==n){r.fn(...r.args),clearTimeout(r.timer);const o=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:o,args:s,skipFn:i})}else r.skipFn&&r.skipFn(...r.args),this.fnMap.set(t,Wv(Wv({},r),{},{fn:e,args:s,skipFn:i}))}else{const r=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:r,args:s,skipFn:i})}}},ay=oy.throttleByKey.bind(oy);function cy(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function dy(e,t){if(!cy(e)||!cy(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let i=0;i<t.length;i++)n[i]=dy(e[i],t[i]);return n}{const n=Wv({},e);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)?n[i]=dy(e[i],t[i]):n[i]=t[i]);return n}}function ly(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let i=0;for(;e>0&&(n[i]=255&e,e>>=8,i++,!t||i!==t););return n}let uy=1,hy=console;class py{static setLogger(e){hy=e}constructor(e){sh(this,"lockingPromise",c_.resolve()),sh(this,"locks",0),sh(this,"name",""),sh(this,"lockId",void 0),this.lockId=uy++,e&&(this.name=e),hy.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,hy.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));const n=new c_((n=>{t=()=>{this.locks-=1,hy.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:"")),n()}})),i=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),i}}function fy(e,t){return function(n,i,r){const s=r.value;if("function"!=typeof s)throw new Error("Cannot use mutex on object property.");return r.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const r=await n.lock("From ".concat(e,".").concat(i));try{for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return await s.apply(this,a)}finally{r()}},r}}const my={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function gy(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function Ey(e,t,n,i){const r=Object.assign({},my,i);let s=r.timeout;const o=async()=>{await function(e){return new c_((t=>{window.setTimeout(t,e)}))}(s),s*=r.timeoutFactor,s=Math.min(r.maxRetryTimeout,s)};let a=!1;const c=new c_((async(i,s)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<r.maxRetryCount;c+=1){if(a)return s(new K_(H_.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return i(n);if(c+1===r.maxRetryCount)return i(n);await o()}catch(e){if(!n(e,c))return s(e);if(c+1===r.maxRetryCount)return s(e);await o()}}}));return c.cancel=()=>a=!0,c}let _y=class{constructor(e){sh(this,"input",[]),sh(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:Fv(e=this.input).call(e,((e,t)=>e+t))/this.input.length}};var vy,yy={exports:{}},Sy=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},by=Sy,Ty=Object.prototype.toString,Cy=(vy=Object.create(null),function(e){var t=Ty.call(e);return vy[t]||(vy[t]=t.slice(8,-1).toLowerCase())});function Ay(e){return e=e.toLowerCase(),function(t){return Cy(t)===e}}function wy(e){return Array.isArray(e)}function Ry(e){return void 0===e}var Iy=Ay("ArrayBuffer");function Ny(e){return null!==e&&"object"==typeof e}function Oy(e){if("object"!==Cy(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var ky=Ay("Date"),Dy=Ay("File"),Py=Ay("Blob"),xy=Ay("FileList");function Ly(e){return"[object Function]"===Ty.call(e)}var My=Ay("URLSearchParams");function Uy(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),wy(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var jy,Vy=(jy="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return jy&&e instanceof jy}),Fy={isArray:wy,isArrayBuffer:Iy,isBuffer:function(e){return null!==e&&!Ry(e)&&null!==e.constructor&&!Ry(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Ty.call(e)===t||Ly(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Iy(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ny,isPlainObject:Oy,isUndefined:Ry,isDate:ky,isFile:Dy,isBlob:Py,isFunction:Ly,isStream:function(e){return Ny(e)&&Ly(e.pipe)},isURLSearchParams:My,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Uy,merge:function e(){var t={};function n(n,i){Oy(t[i])&&Oy(n)?t[i]=e(t[i],n):Oy(n)?t[i]=e({},n):wy(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)Uy(arguments[i],n);return t},extend:function(e,t,n){return Uy(t,(function(t,i){e[i]=n&&"function"==typeof t?by(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var i,r,s,o={};t=t||{};do{for(r=(i=Object.getOwnPropertyNames(e)).length;r-- >0;)o[s=i[r]]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Cy,kindOfTest:Ay,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var t=e.length;if(Ry(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:Vy,isFileList:xy},By=Fy;function Wy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Gy=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(By.isURLSearchParams(t))i=t.toString();else{var r=[];By.forEach(t,(function(e,t){null!=e&&(By.isArray(e)?t+="[]":e=[e],By.forEach(e,(function(e){By.isDate(e)?e=e.toISOString():By.isObject(e)&&(e=JSON.stringify(e)),r.push(Wy(t)+"="+Wy(e))})))})),i=r.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e},Hy=Fy;function Ky(){this.handlers=[]}Ky.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},Ky.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Ky.prototype.forEach=function(e){Hy.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var zy,Yy,qy=Ky,Jy=Fy;function Qy(){if(Yy)return zy;Yy=1;var e=Fy;function t(e,t,n,i,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}e.inherits(t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var n=t.prototype,i={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){i[e]={value:e}})),Object.defineProperties(t,i),Object.defineProperty(n,"isAxiosError",{value:!0}),t.from=function(i,r,s,o,a,c){var d=Object.create(n);return e.toFlatObject(i,d,(function(e){return e!==Error.prototype})),t.call(d,i.message,r,s,o,a),d.name=i.name,c&&Object.assign(d,c),d},zy=t}var Xy,Zy,$y,eS,tS,nS,iS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};function rS(){if(Zy)return Xy;Zy=1;var e=Fy;return Xy=function(t,n){n=n||new FormData;var i=[];function r(t){return null===t?"":e.isDate(t)?t.toISOString():e.isArrayBuffer(t)||e.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}return function t(s,o){if(e.isPlainObject(s)||e.isArray(s)){if(-1!==i.indexOf(s))throw Error("Circular reference detected in "+o);i.push(s),e.forEach(s,(function(i,s){if(!e.isUndefined(i)){var a,c=o?o+"."+s:s;if(i&&!o&&"object"==typeof i)if(e.endsWith(s,"{}"))i=JSON.stringify(i);else if(e.endsWith(s,"[]")&&(a=e.toArray(i)))return void a.forEach((function(t){!e.isUndefined(t)&&n.append(c,r(t))}));t(i,c)}})),i.pop()}else n.append(o,r(s))}(t),n},Xy}function sS(){if(eS)return $y;eS=1;var e=Qy();return $y=function(t,n,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?n(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):t(i)}}function oS(){if(nS)return tS;nS=1;var e=Fy;return tS=e.isStandardBrowserEnv()?{write:function(t,n,i,r,s,o){var a=[];a.push(t+"="+encodeURIComponent(n)),e.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),e.isString(r)&&a.push("path="+r),e.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},tS}var aS,cS,dS,lS,uS,hS,pS,fS,mS,gS,ES,_S,vS=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},yS=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},SS=function(e,t){return e&&!vS(t)?yS(e,t):t};function bS(){if(cS)return aS;cS=1;var e=Fy,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return aS=function(n){var i,r,s,o={};return n?(e.forEach(n.split("\n"),(function(n){if(s=n.indexOf(":"),i=e.trim(n.substr(0,s)).toLowerCase(),r=e.trim(n.substr(s+1)),i){if(o[i]&&t.indexOf(i)>=0)return;o[i]="set-cookie"===i?(o[i]?o[i]:[]).concat([r]):o[i]?o[i]+", "+r:r}})),o):o},aS}function TS(){if(lS)return dS;lS=1;var e=Fy;return dS=e.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=r(window.location.href),function(n){var i=e.isString(n)?r(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0},dS}function CS(){if(hS)return uS;hS=1;var e=Qy();function t(t){e.call(this,null==t?"canceled":t,e.ERR_CANCELED),this.name="CanceledError"}return Fy.inherits(t,e,{__CANCEL__:!0}),uS=t}function AS(){return fS||(fS=1,pS=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),pS}function wS(){if(gS)return mS;gS=1;var e=Fy,t=sS(),n=oS(),i=Gy,r=SS,s=bS(),o=TS(),a=iS,c=Qy(),d=CS(),l=AS();return mS=function(u){return new Promise((function(h,p){var f,m=u.data,g=u.headers,E=u.responseType;function _(){u.cancelToken&&u.cancelToken.unsubscribe(f),u.signal&&u.signal.removeEventListener("abort",f)}e.isFormData(m)&&e.isStandardBrowserEnv()&&delete g["Content-Type"];var v=new XMLHttpRequest;if(u.auth){var y=u.auth.username||"",S=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";g.Authorization="Basic "+btoa(y+":"+S)}var b=r(u.baseURL,u.url);function T(){if(v){var e="getAllResponseHeaders"in v?s(v.getAllResponseHeaders()):null,n={data:E&&"text"!==E&&"json"!==E?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:e,config:u,request:v};t((function(e){h(e),_()}),(function(e){p(e),_()}),n),v=null}}if(v.open(u.method.toUpperCase(),i(b,u.params,u.paramsSerializer),!0),v.timeout=u.timeout,"onloadend"in v?v.onloadend=T:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(T)},v.onabort=function(){v&&(p(new c("Request aborted",c.ECONNABORTED,u,v)),v=null)},v.onerror=function(){p(new c("Network Error",c.ERR_NETWORK,u,v,v)),v=null},v.ontimeout=function(){var e=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",t=u.transitional||a;u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),p(new c(e,t.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,u,v)),v=null},e.isStandardBrowserEnv()){var C=(u.withCredentials||o(b))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;C&&(g[u.xsrfHeaderName]=C)}"setRequestHeader"in v&&e.forEach(g,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),e.isUndefined(u.withCredentials)||(v.withCredentials=!!u.withCredentials),E&&"json"!==E&&(v.responseType=u.responseType),"function"==typeof u.onDownloadProgress&&v.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(f=function(e){v&&(p(!e||e&&e.type?new d:e),v.abort(),v=null)},u.cancelToken&&u.cancelToken.subscribe(f),u.signal&&(u.signal.aborted?f():u.signal.addEventListener("abort",f))),m||(m=null);var A=l(b);A&&-1===["http","https","file"].indexOf(A)?p(new c("Unsupported protocol "+A+":",c.ERR_BAD_REQUEST,u)):v.send(m)}))},mS}var RS=Fy,IS=function(e,t){Jy.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))},NS=Qy(),OS=iS,kS=rS(),DS={"Content-Type":"application/x-www-form-urlencoded"};function PS(e,t){!RS.isUndefined(e)&&RS.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var xS,LS={transitional:OS,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(xS=wS()),xS),transformRequest:[function(e,t){if(IS(t,"Accept"),IS(t,"Content-Type"),RS.isFormData(e)||RS.isArrayBuffer(e)||RS.isBuffer(e)||RS.isStream(e)||RS.isFile(e)||RS.isBlob(e))return e;if(RS.isArrayBufferView(e))return e.buffer;if(RS.isURLSearchParams(e))return PS(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=RS.isObject(e),r=t&&t["Content-Type"];if((n=RS.isFileList(e))||i&&"multipart/form-data"===r){var s=this.env&&this.env.FormData;return kS(n?{"files[]":e}:e,s&&new s)}return i||"application/json"===r?(PS(t,"application/json"),function(e,t,n){if(RS.isString(e))try{return(t||JSON.parse)(e),RS.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||LS.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&RS.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw NS.from(e,NS.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_S?ES:(_S=1,ES=null)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};RS.forEach(["delete","get","head"],(function(e){LS.headers[e]={}})),RS.forEach(["post","put","patch"],(function(e){LS.headers[e]=RS.merge(DS)}));var MS,US,jS=LS,VS=Fy,FS=jS;function BS(){return US?MS:(US=1,MS=function(e){return!(!e||!e.__CANCEL__)})}var WS=Fy,GS=function(e,t,n){var i=this||FS;return VS.forEach(n,(function(n){e=n.call(i,e,t)})),e},HS=BS(),KS=jS,zS=CS();function YS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zS}var qS,JS,QS=Fy,XS=function(e,t){t=t||{};var n={};function i(e,t){return QS.isPlainObject(e)&&QS.isPlainObject(t)?QS.merge(e,t):QS.isPlainObject(t)?QS.merge({},t):QS.isArray(t)?t.slice():t}function r(n){return QS.isUndefined(t[n])?QS.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!QS.isUndefined(t[e]))return i(void 0,t[e])}function o(n){return QS.isUndefined(t[n])?QS.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function a(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a};return QS.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||r,i=t(e);QS.isUndefined(i)&&t!==a||(n[e]=i)})),n};function ZS(){return JS?qS:(JS=1,qS={version:"0.27.2"})}var $S=ZS().version,eb=Qy(),tb={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){tb[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var nb={};tb.transitional=function(e,t,n){function i(e,t){return"[Axios v"+$S+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new eb(i(r," has been removed"+(t?" in "+t:"")),eb.ERR_DEPRECATED);return t&&!nb[r]&&(nb[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};var ib,rb,sb,ob,ab,cb,db={assertOptions:function(e,t,n){if("object"!=typeof e)throw new eb("options must be an object",eb.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var a=e[s],c=void 0===a||o(a,s,e);if(!0!==c)throw new eb("option "+s+" must be "+c,eb.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new eb("Unknown option "+s,eb.ERR_BAD_OPTION)}},validators:tb},lb=Fy,ub=Gy,hb=qy,pb=function(e){return YS(e),e.headers=e.headers||{},e.data=GS.call(e,e.data,e.headers,e.transformRequest),e.headers=WS.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),WS.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||KS.adapter)(e).then((function(t){return YS(e),t.data=GS.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return HS(t)||(YS(e),t&&t.response&&(t.response.data=GS.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},fb=XS,mb=SS,gb=db,Eb=gb.validators;function _b(e){this.defaults=e,this.interceptors={request:new hb,response:new hb}}_b.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=fb(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&gb.assertOptions(n,{silentJSONParsing:Eb.transitional(Eb.boolean),forcedJSONParsing:Eb.transitional(Eb.boolean),clarifyTimeoutError:Eb.transitional(Eb.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var s,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var a=[pb,void 0];for(Array.prototype.unshift.apply(a,i),a=a.concat(o),s=Promise.resolve(t);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=t;i.length;){var d=i.shift(),l=i.shift();try{c=d(c)}catch(e){l(e);break}}try{s=pb(c)}catch(e){return Promise.reject(e)}for(;o.length;)s=s.then(o.shift(),o.shift());return s},_b.prototype.getUri=function(e){e=fb(this.defaults,e);var t=mb(e.baseURL,e.url);return ub(t,e.params,e.paramsSerializer)},lb.forEach(["delete","get","head","options"],(function(e){_b.prototype[e]=function(t,n){return this.request(fb(n||{},{method:e,url:t,data:(n||{}).data}))}})),lb.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(fb(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}_b.prototype[e]=t(),_b.prototype[e+"Form"]=t(!0)}));var vb=Fy,yb=Sy,Sb=_b,bb=XS,Tb=function e(t){var n=new Sb(t),i=yb(Sb.prototype.request,n);return vb.extend(i,Sb.prototype,n),vb.extend(i,n),i.create=function(n){return e(bb(t,n))},i}(jS);Tb.Axios=Sb,Tb.CanceledError=CS(),Tb.CancelToken=function(){if(rb)return ib;rb=1;var e=CS();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},t((function(t){i.reason||(i.reason=new e(t),n(i.reason))}))}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},t.source=function(){var e;return{token:new t((function(t){e=t})),cancel:e}},ib=t}(),Tb.isCancel=BS(),Tb.VERSION=ZS().version,Tb.toFormData=rS(),Tb.AxiosError=Qy(),Tb.Cancel=Tb.CanceledError,Tb.all=function(e){return Promise.all(e)},Tb.spread=ob?sb:(ob=1,sb=function(e){return function(t){return e.apply(null,t)}}),Tb.isAxiosError=function(){if(cb)return ab;cb=1;var e=Fy;return ab=function(t){return e.isObject(t)&&!0===t.isAxiosError}}(),yy.exports=Tb,yy.exports.default=Tb;var Cb=i(yy.exports);function Ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ab(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Rb,Ib=0,Nb=0;function Ob(e,t,n,i){return new c_(((r,s)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),Ib+=$v(t.data)):n&&(t.data.size?Ib+=t.data.size:t.data instanceof FormData?Ib+=ey(t.data):Ib+=$v(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Cb.request(t).then((e=>{"string"==typeof e.data?Nb+=$v(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Nb+=e.data.byteLength:Nb+=$v(JSON.stringify(e.data)),i&&r({data:e.data,headers:e.headers}),r(e.data)})).catch((e=>{Cb.isCancel(e)?s(new K_(H_.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?s(new K_(H_.NETWORK_TIMEOUT,e.message)):e.response?s(new K_(H_.NETWORK_RESPONSE_ERROR,e.response.status)):s(new K_(H_.NETWORK_ERROR,e.message))}))}))}async function kb(e,t){const n=new Blob([t.data],{type:"buffer"});return await Ob(e,wb(wb({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const Db=()=>"HTTPS"===(Rb||Rb||(Rb=(window.location.protocol.split(":")[0]||"").toUpperCase(),Rb)),Pb=()=>void 0!==window.isSecureContext,xb=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){const e=n[1],t=n[2];return"".concat(e,".").concat(100*(Number(t)+1))}return"4.0.0.999"}("4.20.1"),Lb=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();var Mb;!function(e){e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn"}(Mb||(Mb={}));const Ub="v4.20.1-0-g369af267(2/26/2024, 10:45:44 AM)",jb={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:100,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,USE_XR:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],PLUGIN_INFO:[]};function Vb(e,t,n){var i,r;Ii(i=Object.keys(jb)).call(i,e)&&(!n&&Ii(r=Object.keys(Bb)).call(r,e)||(jb[e]=t,"ENABLE_VIDEO_SEI"===e&&!0===t&&(jb.ENABLE_ENCODED_TRANSFORM=!0)))}function Fb(e){return jb[e]}const Bb={};function Wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wb(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hb,Kb,zb;!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE"}(Hb||(Hb={}));class Yb{constructor(e,t,n,i){sh(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:i,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1,p2pTransport:Mb.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case Hb.SET_SESSION_ID:return Gb(Gb({},e),{},{sessionId:t.sessionId});case Hb.SET_P2P_ID:return Gb(Gb({},e),{},{p2pId:t.p2pId});case Hb.SET_UID:return Gb(Gb({},e),{},{uid:t.uid});case Hb.SET_INT_UID:return Gb(Gb({},e),{},{intUid:t.intUid});case Hb.SET_PUB_ID:return Gb(Gb({},e),{},{pubId:t.pubId});case Hb.KEY_METRIC_CLIENT_CREATED:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{clientCreated:t.metric})});case Hb.KEY_METRIC_JOIN_START:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{joinStart:t.metric})});case Hb.AVOID_JOIN_START:return Gb(Gb({},e),{},{avoidJoinStart:t.avoidJoinStart});case Hb.KEY_METRIC_JOIN_END:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{joinEnd:t.metric})});case Hb.KEY_METRIC_REQUEST_AP_START:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{requestAPStart:t.metric})});case Hb.KEY_METRIC_REQUEST_AP_END:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{requestAPEnd:t.metric})});case Hb.KEY_METRIC_JOIN_GATEWAY_START:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case Hb.KEY_METRIC_JOIN_GATEWAY_END:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case Hb.KEY_METRIC_PEER_CONNECTION_START:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case Hb.KEY_METRIC_PEER_CONNECTION_END:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case Hb.KEY_METRIC_DESCRIPTION_START:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{descriptionStart:t.metric})});case Hb.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case Hb.KEY_METRIC_ICE_CONNECTION_END:return Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case Hb.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,i=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==i?(n[i]=Gb(Gb({},n[i]),t.metric),Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{publish:[...n]})})):Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case Hb.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,i=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==i?(n[i]=Gb(Gb({},n[i]),t.metric),Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{subscribe:[...n]})})):Gb(Gb({},e),{},{keyMetrics:Gb(Gb({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case Hb.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case Hb.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=Gb(Gb({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case Hb.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case Hb.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case Hb.SET_USE_DATACHANNEL:return Gb(Gb({},e),{},{useDataChannel:t.val});case Hb.SET_USE_P2P:return Gb(Gb({},e),{},{useP2P:t.val});case Hb.SET_TRANSPORT_TYPE:return Gb(Gb({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:Hb.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:Hb.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:Hb.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:Hb.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:Hb.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:Hb.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:Hb.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(e){this.dispatch({type:Hb.SET_USE_DATACHANNEL,val:e})}get useDataChannel(){return this.state.useDataChannel}set useP2P(e){this.dispatch({type:Hb.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:Hb.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:Hb.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Hb.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Hb.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Hb.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Hb.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Hb.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Hb.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Hb.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Hb.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Hb.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Hb.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Hb.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,i){this.dispatch({type:Hb.KEY_METRIC_PUBLISH,metric:Gb(Gb({trackId:e,type:t},n&&{publishStart:n}),i&&{publishEnd:i})})}subscribe(e,t,n,i,r,s,o){this.dispatch({type:Hb.KEY_METRIC_SUBSCRIBE,metric:Gb(Gb(Gb(Gb(Gb({userId:e,type:t},n&&{subscribeStart:n}),i&&{subscribeEnd:i}),r&&{firstFrame:r}),s&&{streamAdded:s}),o&&{firstDecoded:o})})}massSubscribe(e,t,n,i){e.forEach((e=>{this.dispatch({type:Hb.KEY_METRIC_SUBSCRIBE,metric:Gb(Gb(Gb({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),i&&{firstFrame:i})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:Hb.RECORD_JOIN_CHANNEL_SERVICE,record:Gb(Gb({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Hb.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Hb.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Hb.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:Hb.AVOID_JOIN_START,avoidJoinStart:e})}}!function(e){e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1"}(Kb||(Kb={})),function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}(zb||(zb={}));const qb=128,Jb=96,Qb=1e3,Xb=10;let Zb=0;const $b=new class extends dv{reportLogUploadError(e){this.emit("REPORT_LOG_UPLOAD",e)}};class eT{constructor(e){sh(this,"logger",void 0),sh(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function tT(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function nT(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const iT={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},rT=Date.now(),sT=e=>{for(const t in iT)if(Object.prototype.hasOwnProperty.call(iT,t)&&iT[t]===e)return t;return"DEFAULT"},oT=new class{constructor(){sh(this,"proxyServerURL",void 0),sh(this,"logLevel",iT.DEBUG),sh(this,"uploadState","collecting"),sh(this,"uploadLogWaitingList",[]),sh(this,"uploadLogUploadingList",[]),sh(this,"uploadErrorCount",0),sh(this,"currentLogID",0),sh(this,"url",void 0),sh(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=[iT.DEBUG].concat(t);this.log.apply(this,i)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=[iT.INFO].concat(t);this.log.apply(this,i)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=[iT.WARNING].concat(t);this.log.apply(this,i)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=[iT.ERROR].concat(t);this.log.apply(this,i)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=[iT.DEBUG].concat(t);this.uploadLog.apply(this,i)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Vb("UPLOAD_LOG",!0)}disableLogUpload(){Vb("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new eT(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-rT<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-rT);const i=Math.max(0,Math.min(4,t[0]));if(t[0]=tT()+" Agora-SDK [".concat(sT(i),"]:"),this.appendLogToWaitingList(i,...t),i<this.logLevel)return;const r=tT()+" %cAgora-SDK [".concat(sT(i),"]:");let s=[];if(!Fb("USE_NEW_LOG"))switch(i){case iT.DEBUG:s=[r,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,s);break;case iT.INFO:s=[r,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,s);break;case iT.WARNING:s=[r,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,s);break;case iT.ERROR:s=[r,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,s)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-rT<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-rT);const i=Math.max(0,Math.min(4,t[0]));t[0]=tT()+" Agora-SDK [".concat(sT(i),"]:"),this.appendLogToWaitingList(i,...t)}appendLogToWaitingList(e){if(!Fb("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Array.isArray(n[0])?n[0][0]=nT()+" Agora-SDK [".concat(sT(e),"]:"):n[0]=nT()+" Agora-SDK [".concat(sT(e),"]:");let r="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),r+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:r,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:xb,process_id:Fb("PROCESS_ID"),payload:JSON.stringify(e)};return Ey((async()=>{const e=await Cb.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(Fb("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Fb("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(e=>(e.response?$b.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?$b.reportLogUploadError({status:e.request.status,message:e.message}):$b.reportLogUploadError({status:-1,message:e.message}),!0)),{timeout:Fb("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Fb("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Fb("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),Fb("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),Fb("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),Fb("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var aT,cT;function dT(e){return Q_(e.reportId,"params.reportId",0,100,!1),Q_(e.category,"params.category",0,100,!1),Q_(e.event,"params.event",0,100,!1),Q_(e.label,"params.label",0,100,!1),q_(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(aT||(aT={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(cT||(cT={}));const lT={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var uT,hT,pT,fT;function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mT(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities"}(uT||(uT={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities"}(hT||(hT={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(pT||(pT={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(fT||(fT={}));class ET{constructor(){sh(this,"baseInfoMap",new Map),sh(this,"proxyServer",void 0),sh(this,"eventUploadTimer",void 0),sh(this,"setSessionIdTimer",void 0),sh(this,"url",void 0),sh(this,"backupUrl",void 0),sh(this,"_appId",void 0),sh(this,"keyEventUploadPendingItems",[]),sh(this,"normalEventUploadPendingItems",[]),sh(this,"apiInvokeUploadPendingItems",[]),sh(this,"apiInvokeCount",0),sh(this,"ltsList",[]),sh(this,"lastSendNormalEventTime",Date.now()),sh(this,"customReportCounterTimer",void 0),sh(this,"customReportCount",0),sh(this,"extApiInvoke",(async e=>{for(const t of e){const e=gT(gT({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:pv.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Fb("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Fb("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void oT.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"));const t=this.baseInfoMap.get(e),n=Date.now(),i=t.startTime;t.startTime=n,oT.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-i,"ms")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const i=Date.now();this.apiInvokeCount+=1;const r=this.apiInvokeCount,s=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:i,options:t.options,states:t.states||null}),o=!!Fb("SHOW_REPORT_INVOKER_LOG");o&&oT.info("".concat(t.name," start"),t.options);let a=!1;ny(t.timeout).then((()=>{a||(this.sendApiInvoke(gT(gT({},s()),{},{error:H_.API_INVOKE_TIMEOUT,success:!1})),oT.debug("".concat(t.name," timeout")))}));const c=new K_(H_.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const i=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(gT(gT({},s()),{},{success:!0},t.reportResult&&{result:e})),o&&oT.info("".concat(t.name," onSuccess")),e};return n?ay(i,t.name+"Success",n,(()=>a=!0)):i()},onError:e=>{const i=()=>{if(a)throw e;a=!0,this.sendApiInvoke(gT(gT({},s()),{},{success:!1,error:e})),o&&oT.info("".concat(t.name," onFailure"),e.toString())};return n?ay(i,t.name+"Error",n,(()=>a=!0)):i()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),i=this.createBaseInfo(e,n);i.cname=t.cname;const r=Object.assign({},{willUploadConsoleLog:Fb("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Lb?"global":"oversea",areas:Fb("AREAS")&&Fb("AREAS").join(",")},t.extend),{stringUid:s,channelProfile:o,channelMode:a,isABTestSuccess:c,lsid:d,clientRole:l}=t,u=Date.now(),h=gT(gT({},i),{},{eventType:uT.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:Ub,lts:u,elapse:u-n,extend:JSON.stringify(r),mode:t.mode,process:Fb("PROCESS_ID"),appType:Fb("APP_TYPE"),success:!0,version:xb,stringUid:s,channelProfile:o,channelMode:a,isABTestSuccess:c,lsid:d,clientType:20,clientRole:l,serviceId:Fb("PROCESS_ID"),extensionID:Fb("PLUGIN_INFO").join(",")||""});this.send({type:hT.SESSION,data:h},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{eventType:uT.JOIN_CHOOSE_SERVER,lts:r,eventElapse:r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:hT.JOIN_CHOOSE_SERVER,data:s},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{eventType:uT.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:r-n.startTime,eventElapse:r-t.lts,extend:JSON.stringify(t.extend)});this.send({type:hT.REQ_USER_ACCOUNT,data:s},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info;t.vid&&(i.vid=t.vid),i.uid=t.uid,i.cid=t.cid;const r=Date.now(),{firstSuccess:s,avoidJoinStartTime:o,isProxy:a,addr:c}=t,d=r-(s&&o?o:n.startTime),l=gT(gT({},i),{},{eventType:uT.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:d,eventElapse:r-t.lts,firstSuccess:s,signalChannel:t.signalChannel}),u=l.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=r),s)this.send({type:hT.JOIN_GATEWAY,data:l},!0);else{let e;if(c)if(a){const t=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),n=c.match(/p=[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split("=")[1]:"",isProxy:a?1:0}}else{const t=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),n=c.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split(/:|p=/g)[1]:"",isProxy:a?1:0}}else e={isSuccess:u,gatewayIp:"",port:"",isProxy:a?1:0};delete l.success,delete l.eventType,delete l.firstSuccess,l.vid=Number(l.vid);const t=Object.assign({},l,e,{eventType:uT.REJOIN_GATEWAY});this.send({type:hT.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=Date.now(),r=gT(gT({},n.info),{},{lts:i,timeout:t,elapse:i-n.startTime});this.send({type:hT.JOIN_CHANNEL_TIMEOUT,data:r},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{eventType:uT.PUBLISH,lts:r,eventElapse:t.eventElapse,elapse:r-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:hT.PUBLISH,data:s},!0)}subscribe(e,t,n){const i=this.baseInfoMap.get(e);if(!i)return;const r=i.info,s=Date.now(),o=gT(gT({},r),{},{eventType:uT.SUBSCRIBE,lts:s,eventElapse:t.eventElapse,elapse:s-i.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?o.peerSuid=t.peerid:o.peer=t.peerid,this.send({type:hT.SUBSCRIBE,data:o},!0)}wsCompressorInit(e){var t;const n=[...ph(t=this.baseInfoMap).call(t)],i=n.length?n[0]:"UnableToGetSid",r=this.baseInfoMap.get(i);if(!r)return;const s=r.info,o=Date.now(),a=gT(gT({},s),{},{eventType:uT.WS_COMPRESSOR_INIT,lts:o,eventElapse:e.eventElapse,elapse:o-r.startTime,status:e.status?1:2});this.send({type:hT.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,n,i){const r=this.baseInfoMap.get(e);if(!r)return;const s=r.info,o=Date.now(),a=gT(gT(gT({},s),i),{},{elapse:o-r.startTime,eventType:t,lts:o,firstDecodeFrame:Math.max(o-r.startTime,0),apEnd:Math.max(i.apEnd-r.startTime,0),apStart:Math.max(i.apStart-r.startTime,0),joinGwEnd:Math.max(i.joinGwEnd-r.startTime,0),joinGwStart:Math.max(i.joinGwStart-r.startTime,0),pcEnd:Math.max(i.pcEnd-r.startTime,0),pcStart:Math.max(i.pcStart-r.startTime,0),subscriberEnd:Math.max(i.subscriberEnd-r.startTime,0),subscriberStart:Math.max(i.subscriberStart-r.startTime,0),videoAddNotify:Math.max(i.videoAddNotify-r.startTime,0)});this.send({type:n,data:a},!0)}firstRemoteFrame(e,t,n,i){const r=this.baseInfoMap.get(e);if(!r)return;const s=r.info,o=Date.now(),a=gT(gT(gT({},s),i),{},{elapse:o-r.startTime,eventType:t,lts:o});this.send({type:n,data:a},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT(gT({},i),t),{},{vid:void 0===i.vid?0:Number(i.vid),elapse:r-n.startTime,eventType:uT.PC_STATS,lts:r});this.send({type:hT.PC_STATS,data:s},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT(gT({},i),t),{},{vid:void 0===i.vid?0:Number(i.vid),eventType:uT.UPDATE_REMOTE_RTPCAPABILITIES,lts:r});this.send({type:hT.UPDATE_REMOTE_RTPCAPABILITIES,data:s},!0)}}onGatewayStream(e,t,n,i){const r=this.baseInfoMap.get(e);if(!r)return;const s=r.info,o=Date.now(),a=gT(gT(gT({},s),i),{},{eventType:t,lts:o});this.send({type:n,data:a},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{eventType:uT.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-n.startTime,success:t.succ});this.send({type:hT.STREAM_SWITCH,data:s},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{eventType:uT.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:hT.REQUEST_PROXY_APPCENTER,data:s},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{eventType:uT.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:hT.REQUEST_PROXY_WORKER_MANAGER,data:s},!0)}setProxyServer(e){this.proxyServer=e,e?oT.debug("reportProxyServerurl: ".concat(e)):oT.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT({},i),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:r,elapse:r-n.startTime,joinChannelSuccessElapse:r-(n.lastJoinSuccessTime||r),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:hT.PEER_PUBLISH_STATUS,data:s},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=function(e,t,n){const i=e[t];if(!i||"string"!=typeof i)return[e];e[t]="";const r=$v(JSON.stringify(e));let s=0;const o=[];let a=0;for(let c=0;c<i.length;c++)a+=i.charCodeAt(c)<=127?1:3,a<=n-r||(o[o.length]=Wv(Wv({},e),{},{[t]:i.substring(s,c)}),s=c,a=i.charCodeAt(c)<=127?1:3);return s!==i.length-1&&(o[o.length]=Wv(Wv({},e),{},{[t]:i.substring(s)})),o}(gT(gT(gT({},i),t),{},{elapse:r-n.startTime,lts:r,productType:"WebRTC"}),"payload",1300);s.forEach((e=>this.send({type:hT.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT(gT({},i),t),{},{elapse:r-n.startTime,lts:r});this.send({type:hT.AP_WORKER_EVENT,data:s},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT(gT({},i),t),{},{elapse:r-n.startTime,lts:r,extend:t.extend||void 0});this.send({type:hT.JOIN_WEB_PROXY_AP,data:s},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const i=n.info,r=Date.now(),s=gT(gT(gT({},i),t),{},{elapse:r-n.startTime,lts:r});this.send({type:hT.WEBSOCKET_QUIT,data:s},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>Fb("CUSTOM_REPORT_LIMIT"))throw new K_(H_.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),i=t.map((t=>({type:hT.USER_ANALYTICS,data:gT(gT({sid:e},t),{},{lts:n})})));try{Fb("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(e){throw oT.error("send custom report message failed",e.toString()),new K_(H_.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=Fb("NOT_REPORT_EVENT");if(e.tag&&Ii(t)&&Ii(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:i,uid:r,cid:s}=n.info;let o;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof K_){const{code:t,message:n}=e.error;o=t||n||e.error.toString()}else o=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:i,cid:s,uid:r,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?o:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:hT.API_INVOKE,data:a},!1),!0}appendSessionId(){ET.__CLIENT_LIST__.forEach((e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>Fb("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],i=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):i.push(t)}e.push(...i);for(const s of[...n]){var r;-1!==this.ltsList.indexOf(s.data.lts)?(s.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(s.data.lts)):(this.ltsList.push(s.data.lts),ep(r=this.ltsList).call(r,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),Fb("ENABLE_EVENT_REPORT")?(n.length&&(Fb("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{Fb("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>Fb("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Fb("NORMAL_EVENT_QUEUE_CAPACITY")),oT.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){Iv.networkState===_v.OFFLINE&&await c_.race([Iv.onlineWaiter,ny(2*my.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=sv(JSON.stringify(e.data)),i=new ArrayBuffer(5),r=(e=>{let t=0;return Object.entries(hT).forEach((n=>{let[i,r]=n;r===e.type&&(t=EventNameToID[i])})),t})(e),s=new DataView(i);s.setUint16(0,n.byteLength,!0),s.setUint8(2,255&r),s.setUint8(3,r>>>8&255),s.setUint8(4,r>>>16&255),t=ov(t,new Uint8Array(i)),t=ov(t,n)})),t},n="event";let i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Fb("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(Fb("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let r=0;r<2;r+=1){1===r&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Fb("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(Fb("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await Ob(i,{timeout:1e4,data:t(e),headers:gT(gT({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===r)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};Iv.networkState===_v.OFFLINE&&await c_.race([Iv.onlineWaiter,ny(2*my.maxRetryTimeout)]);const i=t?"/events/proto-raws":"/events/messages";let r=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Fb("EVENT_REPORT_DOMAIN"),"&p=").concat(Fb("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(Fb("EVENT_REPORT_DOMAIN"),":").concat(Fb("STATS_COLLECTOR_PORT")).concat(i));for(let s=0;s<2;s+=1){1===s&&(r=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Fb("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Fb("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(Fb("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Fb("STATS_COLLECTOR_PORT")).concat(i)));try{t?await kb(r,{timeout:1e4,data:n}):await Ob(r,{timeout:1e4,data:n})}catch(t){if(1===s)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},lT);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),i=n[n.length-1];i&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:i,tag:pv.TRACER}).onSuccess()}}function _T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,i){const r=i.value;if("function"==typeof r){const s=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);i.value=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];let a=i;if(e.argsMap)try{a=e.argsMap(this,...i)}catch(e){oT.warning(e),a=[]}try{JSON.stringify(a)}catch(e){oT.warning("arguments for method ".concat(s,".").concat(String(n)," not serializable for apiInvoke.")),a=[]}const c=(e.report||vT).reportApiInvoke(this._sessionId||null,{name:"".concat(s,".").concat(String(n)),options:a,tag:pv.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=r.apply(this,i);return t instanceof c_?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return i}}sh(ET,"__CLIENT_LIST__",[]);const vT=new ET;$b.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=Iv.networkState,vT.reportApiInvoke(null,{name:"logUploadError",options:e,tag:pv.TRACER})}));const yT=["CHINA","GLOBAL"],ST=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const i=n.join(""),r=[];for(let a=0;a<6;a++)r.push("1");const s=r.join(""),o={};return o[e]=i,o[t]=s,Object.assign(o,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=ST,Lb||(jb.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],jb.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],jb.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],jb.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],jb.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],jb.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],jb.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",jb.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",jb.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",jb.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",jb.AREAS=["NORTH_AMERICA","OVERSEA"]);const bT=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],TT=[];function CT(e,t){return!!t&&TT.some((n=>n.uid===e&&n.channelName===t))}ET.__CLIENT_LIST__=TT;var AT,wT,RT,IT,NT,OT,kT,DT,PT,xT,LT,MT,UT,jT,VT,FT,BT,WT=Qn("Array").values,GT=ui,HT=$e,KT=u,zT=WT,YT=Array.prototype,qT={DOMTokenList:!0,NodeList:!0},JT=i((function(e){var t=e.values;return e===YT||KT(YT,e)&&t===YT.values||HT(qT,GT(e))?zT:t}));function QT(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function XT(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}!function(e){e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY"}(AT||(AT={})),function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(wT||(wT={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(RT||(RT={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(IT||(IT={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(NT||(NT={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(OT||(OT={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(kT||(kT={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(DT||(DT={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream"}(PT||(PT={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag"}(xT||(xT={})),function(e){e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(LT||(LT={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(MT||(MT={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(UT||(UT={})),function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(jT||(jT={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(VT||(VT={}));class ZT extends K_{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),sh(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,oT)}throw(){super.throw(oT)}}function $T(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw oT.error("Invalid Channel Name ".concat(e)),new ZT(H_.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function eC(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||$_(e,1,255)))throw new ZT(H_.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&oT.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(FT||(FT={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(BT||(BT={}));const tC={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},nC={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function iC(e,t){Q_(e.url,"".concat(t,".url"),1,1e3,!1),Z_(e.x)||q_(e.x,"".concat(t,".x"),0,1e4),Z_(e.y)||q_(e.y,"".concat(t,".y"),0,1e4),Z_(e.width)||q_(e.width,"".concat(t,".width"),0,1e4),Z_(e.height)||q_(e.height,"".concat(t,".height"),0,1e4),Z_(e.zOrder)||q_(e.zOrder,"".concat(t,".zOrder"),0,255),Z_(e.alpha)||q_(e.alpha,"".concat(t,".alpha"),0,1,!1)}const rC={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},sC={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var oC,aC,cC,dC,lC,uC,hC,pC,fC,mC,gC,EC,_C,vC;function yC(e){if(!e.channelName)throw new ZT(H_.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new ZT(H_.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Q_(e.token,"info.token",1,2047),eC(e.uid),$T(e.channelName),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(oC||(oC={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(aC||(aC={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(cC||(cC={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(dC||(dC={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(lC||(lC={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(uC||(uC={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(hC||(hC={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(pC||(pC={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(fC||(fC={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(mC||(mC={})),function(e){e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON"}(gC||(gC={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7"}(EC||(EC={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}(_C||(_C={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(vC||(vC={}));const SC=[vC.AFRICA,vC.ASIA,vC.CHINA,vC.EUROPE,vC.GLOBAL,vC.INDIA,vC.JAPAN,vC.NORTH_AMERICA,vC.OCEANIA,vC.OVERSEA,vC.SOUTH_AMERICA];var bC;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(bC||(bC={}));const TC={CHINA:{},ASIA:{CODE:bC.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:bC.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:bC.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:bC.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:bC.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:bC.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:bC.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:bC.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:bC.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:bC.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:bC.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:bC.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:bC.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};var CC,AC,wC,RC,IC,NC,OC,kC,DC,PC,xC,LC,MC,UC,jC,VC,FC,BC,WC,GC,HC,KC,zC,YC;Lb&&(TC.CHINA={CODE:bC.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(CC||(CC={}));class qC extends dv{constructor(e,t){super(),sh(this,"onICEConnectionStateChange",void 0),sh(this,"onConnectionStateChange",void 0),sh(this,"onDTLSTransportStateChange",void 0),sh(this,"onDTLSTransportError",void 0),sh(this,"onICETransportStateChange",void 0),sh(this,"onFirstAudioReceived",void 0),sh(this,"onFirstVideoReceived",void 0),sh(this,"onFirstAudioDecoded",void 0),sh(this,"onFirstVideoDecoded",void 0),sh(this,"onFirstVideoDecodedTimeout",void 0),sh(this,"onSelectedLocalCandidateChanged",void 0),sh(this,"onSelectedRemoteCandidateChanged",void 0)}}class JC extends qC{constructor(e,t){super(e,t)}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(AC||(AC={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(wC||(wC={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY"}(RC||(RC={})),function(e){e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(IC||(IC={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(NC||(NC={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(OC||(OC={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE"}(kC||(kC={})),function(e){e.MUTE_LOCAL_VIDEO="mute_local_video",e.MUTE_LOCAL_AUDIO="mute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.MUTE_REMOTE_VIDEO="mute_remote_video",e.MUTE_REMOTE_AUDIO="mute_remote_audio",e.UNMUTE_REMOTE_VIDEO="unmute_remote_video",e.UNMUTE_REMOTE_AUDIO="unmute_remote_audio"}(DC||(DC={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(PC||(PC={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(xC||(xC={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(LC||(LC={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(MC||(MC={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(UC||(UC={})),function(e){e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation"}(jC||(jC={})),function(e){e[e.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",e[e.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",e[e.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",e[e.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",e[e.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",e[e.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",e[e.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",e[e.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",e[e.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",e[e.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",e[e.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",e[e.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",e[e.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",e[e.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",e[e.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",e[e.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",e[e.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",e[e.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",e[e.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",e[e.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(VC||(VC={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(FC||(FC={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(BC||(BC={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(WC||(WC={})),function(e){e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check"}(GC||(GC={})),function(e){e.ABORT="abort"}(HC||(HC={})),function(e){e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video"}(KC||(KC={})),function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAILED=0]="FAILED"}(zC||(zC={})),function(e){e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed"}(YC||(YC={}));const QC={[RT.ACCESS_POINT]:{[OT.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[OT.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[OT.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[OT.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[OT.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[OT.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[OT.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[RT.UNILBS]:{[NT.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[NT.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[NT.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[NT.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[NT.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[NT.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[NT.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[NT.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[NT.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[NT.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[NT.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[NT.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[RT.STRING_UID_ALLOCATOR]:{[IT.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[IT.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[IT.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function XC(e){const t=QC[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===RT.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}const ZC={[kT.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[kT.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[kT.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[kT.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[kT.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[kT.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[kT.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[kT.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[kT.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[kT.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[kT.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[kT.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[kT.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[kT.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[kT.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[kT.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[kT.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[kT.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[kT.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[kT.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[kT.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[kT.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[kT.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[kT.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[kT.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[kT.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[kT.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[kT.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[kT.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[kT.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[kT.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[kT.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[kT.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[kT.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[kT.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[kT.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[kT.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[kT.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[kT.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[kT.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[kT.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[kT.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[kT.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[kT.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[kT.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[kT.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[kT.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[kT.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[kT.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[kT.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[kT.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[kT.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[kT.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[kT.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[kT.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[kT.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[kT.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[kT.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[kT.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[kT.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[kT.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[kT.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[kT.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function $C(e){return ZC[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nA(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function iA(e,t){if("string"==typeof e)return e;const{proxy:n,host:i,port:r}=e;if(t){const e=Fb("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(i,"/ws/?p=").concat(Number(r)+150):"wss://".concat(i,":").concat(e,"/ws/?p=").concat(Number(r)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(i,"&p=").concat(r):"wss://".concat(i,":").concat(r)}const rA=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,sA=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,oA=/wss:\/\/(.+):([0-9]+)\/?/,aA=/wss:\/\/(.[^\/]+)\/?/;let cA=0;class dA{constructor(e,t){sh(this,"id",0),sh(this,"store",void 0),sh(this,"recordIndex",void 0),sh(this,"websockets",[]),sh(this,"try443PortDuration",2e3),sh(this,"forceCloseWSDuration",5e3),sh(this,"try443PortTimeout",null),sh(this,"forceCloseTimeout",null),sh(this,"isTry443PortFailed",!1),sh(this,"isNormalPortFailed",!1),sh(this,"useDoubleDomain",!1),sh(this,"useProxy",!1),sh(this,"startTime",Date.now()),this.id=++cA,this.try443PortDuration=Fb("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];oT.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...i)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const i=Fb("GATEWAY_DOMAINS"),r=Date.now(),s=[],o=i.find((t=>{var n;return Ii(n=e.host).call(n,t)}));o||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)i.forEach((n=>{a.push(iA(tA(tA({},e),{},{host:e.host.replace(o,n)}),t))}));else{const n=tA({},e);if(t&&o){const e=i.find((e=>e!==o));e&&(n.host=n.host.replace(o,e))}a.push(iA(n,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",s.push(t),this.logger("ws is connecting:",t.url)}))}catch(i){if(this.logger("ws create failed"),s.forEach((e=>e.close())),s.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new ZT(H_.WS_ERR,"init websocket failed! Error: ".concat(i.toString()))}const c=l_();return this.store&&this.store.recordJoinChannelService({urls:s.map((e=>e.url)),service:"gateway"},this.recordIndex),s.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-r,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-r,"ms state: ").concat(e.readyState)),t?this.isTry443PortFailed=nA(s):this.isNormalPortFailed=nA(s),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:gC.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...s),n||(()=>{const n=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return n();y_().os===f_.MAC_OS&&I_()&&n(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,i){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,i;return[,t,n,i]=e.match(rA)||[],t||([,n,i]=e.match(sA)||[]),n&&i||([,n,i]=e.match(oA)||[]),n&&i||([,n]=e.match(aA)||[]),n||oT.warning("un-destructible url: ",e),{proxy:t,host:n,port:i||"443"}}(e)),this.recordIndex=i,this.useProxy=!!e.proxy,n&&this.useProxy&&(oT.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}class uA extends dv{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Ii(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(VT.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(VT.CONNECTED):"closed"===this._state?this.emit(VT.CLOSED):"failed"===this._state&&this.emit(VT.FAILED))}resetReconnectCount(e){oT.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;super(),sh(this,"connectionID",0),sh(this,"currentURLIndex",0),sh(this,"urls",[]),sh(this,"_reconnectMode","tryNext"),sh(this,"reconnectReason",void 0),sh(this,"_initMutex",new py("websocket")),sh(this,"name",void 0),sh(this,"_state","closed"),sh(this,"reconnectInterrupter",void 0),sh(this,"websocket",void 0),sh(this,"retryConfig",void 0),sh(this,"reconnectCount",0),sh(this,"forceCloseTimeout",5e3),sh(this,"onlineReconnectListener",void 0),sh(this,"useCompress",void 0),sh(this,"tryDoubleDomain",!1),sh(this,"use443PortOnly",!1),sh(this,"wsInflateLength",0),sh(this,"wsDeflateLength",0),sh(this,"closeEstablishingWs",(()=>{})),sh(this,"store",void 0),sh(this,"joinGatewayRecordIndex",void 0),this.store=s,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lA(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=i,this.use443PortOnly=r;const{timeout:o,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*o/5)),d=Math.max(1.2,Math.floor(8*a)/10);_v.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d),Iv.on(vv.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===_v.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=d):(this.retryConfig.timeout=o,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=l_(),t=this.urls[this.currentURLIndex];this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(VT.CLOSED,(()=>{e.reject(new K_(H_.WS_DISCONNECT))})),this.once(VT.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void oT.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),oT.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new K_(H_.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new K_(H_.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=l_();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const i=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),oT.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},r=async e=>{var t;if(oT.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new K_(H_.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=wv(this,VT.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,i=await this.reconnectWithAction(t);if("closed"===this.state)return void oT.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!i)return n.reject(new K_(H_.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},s=e=>{this.emit(VT.ON_MESSAGE,e)},o=e=>{oT.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Fb("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=Fb("GATEWAY_WSS_ADDRESS")),oT.debug("[".concat(this.name,"] start connect, url:"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,i&&i(this.websocket.url),this.websocket.onclose=r,this.websocket.onmessage=s,this.websocket.onerror=o,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinGatewayRecordIndex=a}catch(e){const t="closed"===this.state,i=e instanceof K_,s=i&&e.code===H_.WS_ABORT,o=i&&e.code===H_.WS_ERR,c=i?e.message:e&&(e.reason||e.toString());oT.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:s?"aborted":"error",errors:[e]},a),t||o?(n.reject(t?new K_(H_.WS_DISCONNECT,"websocket is closed: ".concat(c)):new K_(H_.WS_ERR,"init websocket failed: ".concat(c))),o&&oT.error("[".concat(this.name,"] init websocket failed: ").concat(c))):r&&r(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;oT.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||Iv.isOnline||!Iv.onlineWaiter||(this.onlineReconnectListener=Iv.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=gy(this.reconnectCount,this.retryConfig);oT.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await c_.race([ny(t),this.onlineReconnectListener||new c_((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const i=async(e,t)=>{this.emit(VT.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)this.emit(VT.RECONNECT_WAITTING_FINISH,e),await i(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);oT.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(VT.RECONNECT_WAITTING_FINISH,e),await i(this.urls[this.currentURLIndex],e)}else"recover"===e&&(oT.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(VT.RECONNECT_WAITTING_FINISH,e),this.urls=await Cv(this,VT.REQUEST_NEW_URLS),this.currentURLIndex=0,await i(this.urls[this.currentURLIndex],e))}catch(n){var r;oT.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const i=null==n||null===(r=n.data)||void 0===r?void 0:r.desc;return Array.isArray(i)&&Ii(i).call(i,"dynamic key expired")?(this.emit(VT.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class hA extends uA{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=l_(),i=function(e,t){return new dA(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{oT.debug("[choose-best-ws] close establishing websockets"),i.closeAllWebsockets(),n.reject(new K_(H_.WS_ABORT,"choose best websocket aborted"))};const r=Fb("GATEWAY_DOMAINS");return oT.debug("[choose-best-ws] currentDomain: ",e,", domains: ",r,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),i.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class pA extends uA{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new c_(((n,i)=>{let r=!1;const s=[];this.closeEstablishingWs=()=>{oT.debug("[choose-best-ws] close establishing websockets"),s.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),i(new K_(H_.WS_ABORT,"choose best websocket aborted"))};const o=Fb("GATEWAY_DOMAINS");let a;const c=e.indexOf("?h="),d=o.find((t=>-1!==c?Ii(e).call(e,t,c):Ii(e).call(e,t)));oT.debug("[choose-best-ws] currentDomain: ",d,", domains: ",o);let l=!this.tryDoubleDomain||!d;if(!l&&d){var u;const h=Date.now();try{o.forEach((t=>{const n=-1===c?e.replace(d,t):e.substr(0,c)+e.substr(c).replace(d,t),i=new WebSocket(n);i.binaryType="arraybuffer",s.push(i),oT.debug("[choose-best-ws] ws is connecting:",i.url)}))}catch(e){for(oT.debug("[choose-best-ws] ws create failed, fallback to single url"),s.forEach((e=>e.close()));s.length;)s.pop();l=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:s.map((e=>e.url)),service:"gateway"},t),s.forEach((e=>{e.onopen=()=>{if(r)return;const t=Date.now()-h;oT.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),s.filter((t=>t!==e)).forEach((e=>{oT.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),r=!0,n(e)},e.onclose=e=>{a=e,r||s.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(oT.debug("[choose-best-ws] all websocket is closed"),r=!0,i(a))},e.onmessage=t=>{oT.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),ny(this.forceCloseTimeout).then((()=>{s.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(l){var h;let r;oT.debug("[choose-best-ws] use single url: ",e),null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:[e],service:"gateway"},t);try{r=new WebSocket(e),s.push(r),r.binaryType="arraybuffer"}catch(e){const n=new K_(H_.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return oT.error("[".concat(this.name,"]").concat(n)),void i(n)}r.onopen=()=>{n(r)},r.onclose=e=>{i(e)},r.onmessage=e=>{oT.debug("[choose-best-ws]".concat(r.url," onmessage: ").concat(e.data))},ny(this.forceCloseTimeout).then((()=>{r&&r.readyState!==WebSocket.OPEN&&r.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class fA extends dv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===DT.CONNECTED?this.emit(PT.WS_CONNECTED):e===DT.RECONNECTING?this.emit(PT.WS_RECONNECTING,this._websocketReconnectReason):e===DT.CLOSED&&this.emit(PT.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),sh(this,"_disconnectedReason",void 0),sh(this,"_websocketReconnectReason",void 0),sh(this,"_connectionState",DT.CLOSED),sh(this,"reconnectToken",void 0),sh(this,"websocket",void 0),sh(this,"openConnectionTime",void 0),sh(this,"clientId",void 0),sh(this,"lastMsgTime",Date.now()),sh(this,"uploadCache",[]),sh(this,"uploadCacheInterval",void 0),sh(this,"rttRolling",new _y(5)),sh(this,"pingpongTimer",void 0),sh(this,"wsInflateDataTimer",void 0),sh(this,"pingpongTimeoutCount",0),sh(this,"joinResponse",void 0),sh(this,"multiIpOption",void 0),sh(this,"initError",void 0),sh(this,"spec",void 0),sh(this,"store",void 0),sh(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(PT.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===MT.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===MT.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(mv.UID_BANNED);break;case 15:this.close(mv.IP_BANNED);break;case 16:this.close(mv.CHANNEL_BANNED)}if(t._type===MT.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case kT.ERR_LICENSE_MISSING:this.close(mv.LICENSE_MISSING);break;case kT.ERR_LICENSE_EXPIRED:this.close(mv.LICENSE_EXPIRED);break;case kT.ERR_LICENSE_MINUTES_EXCEEDED:this.close(mv.LICENSE_MINUTES_EXCEEDED);break;case kT.ERR_LICENSE_PERIOD_INVALID:this.close(mv.LICENSE_PERIOD_INVALID);break;case kT.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(mv.LICENSE_MULTIPLE_SDK_SERVICE);break;case kT.ERR_LICENSE_ILLEGAL:this.close(mv.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new hA("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Fb("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Fb("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===DT.CONNECTED&&this.reconnect("retry",Ev.OFFLINE)}))}async request(e,t,n,i){const r=iy(6,""),s={_id:r,_type:e,_message:t},o=this.websocket.connectionID,a=()=>new c_(((t,n)=>{if(this.connectionState===DT.CONNECTED)return t();const i=()=>{this.off(PT.WS_CLOSED,r),t()},r=()=>{this.off(PT.WS_CONNECTED,i),n(new ZT(H_.WS_ABORT))};this.once(PT.WS_CONNECTED,i),this.once(PT.WS_CLOSED,r),e!==xT.PUBLISH&&e!==xT.PUBLISH_DATASTREAM&&e!==xT.SUBSCRIBE&&e!==xT.SUBSCRIBE_DATASTREAM&&e!==xT.UNSUBSCRIBE&&e!==xT.UNSUBSCRIBE_DATASTREAM&&e!==xT.UNPUBLISH&&e!==xT.UNPUBLISH_DATASTREAM&&e!==xT.CONTROL&&e!==xT.RESTART_ICE||this.once(PT.DISCONNECT_P2P,(()=>{n(new ZT(H_.DISCONNECT_P2P))})),e!==xT.PUBLISH&&e!==xT.RESTART_ICE||this.once(PT.ABORT_P2P_EXECUTION,(()=>{n(new ZT(H_.DISCONNECT_P2P))}))}));if(this.connectionState!==DT.CONNECTING&&this.connectionState!==DT.RECONNECTING||e===xT.JOIN||e===xT.REJOIN||await a(),this.websocket.sendMessage(s,!0),i)return;const c=new c_(((n,i)=>{let s=!1;const a=(i,r)=>{s=!0,n({isSuccess:"success"===i,message:r||{}}),this.off(PT.WS_CLOSED,c),this.off(PT.WS_RECONNECTING,c),this.emit(PT.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(r),a);const c=()=>{i(new ZT(H_.WS_ABORT,"type: ".concat(e))),this.off(PT.WS_CLOSED,c),this.off(PT.WS_RECONNECTING,c),this.off("res-@".concat(r),a)};this.once(PT.WS_CLOSED,c),this.once(PT.WS_RECONNECTING,c),ny(Fb("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==o||s||(oT.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(PT.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(i){if(this.connectionState===DT.CLOSED||e===xT.LEAVE)throw new ZT(H_.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?i.throw():e===xT.JOIN||e===xT.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=$C(l),h=new ZT(H_.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(d.message.error_str),{code:l,data:d.message});return"success"===u.action?d.message:(oT.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(l,", message: ").concat(u.desc,", action: ").concat(u.action)),l===kT.ERR_TOO_MANY_BROADCASTERS?e===xT.JOIN||e===xT.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(l===kT.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,oT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Ev.MULTI_IP)):this.reconnect(u.action,Ev.SERVER_ERROR),e===xT.JOIN||e===xT.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new c_((n=>{const i=r=>{(!t||t(r))&&(this.off(e,i),n(r))};this.on(e,i)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void oT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(LT.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=Fb("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==DT.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Fb("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new c_(((t,n)=>{this.once(PT.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(PT.WS_CLOSED,(()=>n(this.initError||new ZT(H_.WS_ABORT)))),this.connectionState=DT.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||mv.LEAVE,this.connectionState=DT.CLOSED,oT.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===mv.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new hA("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Fb("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Fb("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(PT.ABORT_P2P_EXECUTION);const e=await Cv(this,PT.REQUEST_JOIN_INFO),t=await this.request(xT.JOIN,e);if(!t)return this.emit(PT.REPORT_JOIN_GATEWAY,gC.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(PT.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=DT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new ZT(H_.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=Rv(this,PT.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(xT.REJOIN,e);return!!t&&(this.connectionState=DT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(MT.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(MT.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(MT.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(MT.MUTE_AUDIO,{uid:e.uid}):this.emit(MT.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(MT.MUTE_VIDEO,{uid:e.uid}):this.emit(MT.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(MT.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(MT.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(MT.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(MT.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(MT.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){oT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=$C(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(mv.UID_BANNED),void this.close()):void this.reconnect(t.action,Ev.SERVER_ERROR);oT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Fb("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(oT.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>Fb("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Ev.TIMEOUT):this.request(xT.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Fb("REPORT_STATS")&&this.send(xT.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(LT.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(VT.RECONNECT_WAITTING_FINISH,(e=>{this.emit(PT.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(VT.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(PT.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(VT.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(VT.CLOSED,(()=>{this.connectionState=DT.CLOSED})),this.websocket.on(VT.FAILED,(()=>{this._disconnectedReason=mv.NETWORK_ERROR,this.connectionState=DT.CLOSED})),this.websocket.on(VT.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===DT.CONNECTED?this.connectionState=DT.RECONNECTING:this.connectionState=DT.CONNECTING})),this.websocket.on(VT.WILL_RECONNECT,((e,t,n)=>{const i=Rv(this,PT.IS_P2P_DISCONNECTED),r=i||"retry"!==e;i&&"retry"===e&&(oT.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=gC.P2P_DISCONNECTED),r&&(oT.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(PT.REPORT_JOIN_GATEWAY,t||gC.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(PT.NEED_RENEW_SESSION),this.emit(PT.DISCONNECT_P2P)),n(e)})),this.websocket.on(VT.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{oT.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",Ev.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(PT.REPORT_JOIN_GATEWAY,e.message||e.code||gC.UNKNOWN_REASON,this.url||""),e instanceof ZT&&e.code===H_.UNEXPECTED_RESPONSE&&e.data.code===kT.ERR_NO_AUTHORIZED)return oT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Ev.SERVER_ERROR);oT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Ev.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(VT.REQUEST_NEW_URLS,((e,t)=>{Cv(this,PT.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(VT.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(MT.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var mA="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",gA=Q,EA=fi,_A=mA,vA=l("".replace),yA=RegExp("^["+_A+"]+"),SA=RegExp("(^|[^"+_A+"])["+_A+"]+$"),bA=function(e){return function(t){var n=EA(gA(t));return 1&e&&(n=vA(n,yA,"")),2&e&&(n=vA(n,SA,"$1")),n}},TA={start:bA(1),end:bA(2),trim:bA(3)},CA=Jd.PROPER,AA=r,wA=mA,RA=TA.trim;On({target:"String",proto:!0,forced:function(e){return AA((function(){return!!wA[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||CA&&wA[e].name!==e}))}("trim")},{trim:function(){return RA(this)}});var IA,NA,OA=Qn("String").trim,kA=u,DA=OA,PA=String.prototype,xA=i((function(e){var t=e.trim;return"string"==typeof e||e===PA||kA(PA,e)&&t===PA.trim?DA:t}));function LA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function MA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LA(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UA(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(Fb("TURN_DOMAIN")):(oT.info("Unidentified as ip: ".concat(e,", use as host")),e)}function jA(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(Fb("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=Fb("GATEWAY_DOMAINS");let i=n[1]&&Ii(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:r,ip:s}=e;if(t)return{address:"".concat(t,".").concat(n[i++%n.length],":").concat(r)};const o=/^[\.\:\d]+$/.test(s),a=o?"".concat(s.replace(/[^\d]/g,"-"),".").concat(n[i++%n.length],":").concat(r):"".concat(s,":").concat(r);return o||oT.info("Unidentified as ip: ".concat(s,", use as host")),{ip:s,port:r,address:a}}))}(e.addresses,t),i=Array.isArray(e.detail)&&e.detail[18];if(i&&"string"==typeof i){const e=i.split(";");for(let t=0;t<e.length;t++){var r;const i=xA(r=e[t]).call(r);n[t]&&i&&(n[t].ip6=i)}}return{gatewayAddrs:n,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function VA(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function FA(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(VA(t.width),"x").concat(VA(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function BA(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function WA(e,t){let n,i,r;switch(t){case IA.CHOOSE_SERVER:i=4096,r="choose server";break;case IA.CLOUD_PROXY:i=1048576,r="proxy";break;case IA.CLOUD_PROXY_5:i=4194304,r="proxy5";break;case IA.CLOUD_PROXY_FALLBACK:i=4194310,r="proxy fallback";break;default:throw new ZT(H_.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===i&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>MA(MA({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:MA(MA({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new ZT(H_.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(r," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function GA(e,t){return await c_.all(e.addresses.map((async e=>({address:UA(e.ip),tcpport:e.port,udpport:e.port,username:t&&Fb("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():ST.username,password:t&&Fb("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await cv(t.toString()):ST.password}))))}function HA(e,t){const n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return n?Math.max(n/VA(e.height),1):(oT.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function KA(e){let{candidateType:t,relayProtocol:n,type:i,address:r,port:s,protocol:o}=e;return"local-candidate"===i?{candidateType:t,relayProtocol:n,protocol:o}:{candidateType:t,relayProtocol:n,address:r,port:s,protocol:o}}function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(IA||(IA={}));class YA extends dv{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Ii(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(UC.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(UC.CONNECTED):"closed"===this._state?this.emit(UC.CLOSED):"failed"===this._state&&this.emit(UC.FAILED))}constructor(e,t,n,i){super(),sh(this,"connectionID",0),sh(this,"currentURLIndex",0),sh(this,"reconnectReason",void 0),sh(this,"_reconnectMode","tryNext"),sh(this,"_name",void 0),sh(this,"_state","closed"),sh(this,"_retryConfig",void 0),sh(this,"_reconnectCount",0),sh(this,"_forceCloseTimeout",5e3),sh(this,"_onlineReconnectListener",void 0),sh(this,"_closeEstablishingTransmitter",(()=>{})),sh(this,"_store",void 0),sh(this,"_joinChannelServiceRecordIndex",void 0),sh(this,"_useCompress",void 0),sh(this,"_inflateLength",0),sh(this,"_deflateLength",0),this._store=i,this._name=e,this._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zA(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this._useCompress=n}resetReconnectCount(e){oT.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const e=this._transmitter;t?setTimeout((()=>e.close()),500):e.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(e,t){if(!this._transmitter)return void oT.warning("[".concat(this._name,"] can not reconnect, no websocket"));var n;void 0!==e&&(this.reconnectMode=e),oT.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));const i=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),i&&i.bind(this._transmitter)({code:9999,reason:t})}getInflateData(){const e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}setInflateData(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(NA||(NA={}));class qA{constructor(e,t,n){sh(this,"version",1),sh(this,"initialRTO",void 0),sh(this,"maxBatchAckCount",void 0),sh(this,"maxRTO",void 0),sh(this,"initialRTT",void 0),sh(this,"ID",void 0),sh(this,"rtt",void 0),sh(this,"packetNumber",1),sh(this,"rtoRatioMap",new Map),sh(this,"timeoutMap",new Map),sh(this,"unorderedPacketQueue",[]),sh(this,"batchAckPacketQueue",[]),sh(this,"lastOrderedPacketNumber",0),sh(this,"batchAckTimer",void 0),sh(this,"sendImpl",void 0),sh(this,"receiveImpl",void 0),this.sendImpl=e,this.receiveImpl=t,this.ID=iy(7,"transmitter-"),this.initialRTO=void 0!==(null==n?void 0:n.initialRTO)?n.initialRTO:Fb("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:Fb("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:Fb("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==n?void 0:n.maxBatchAckCount)?n.maxBatchAckCount:Fb("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==n?void 0:n.maxRTO)?n.maxRTO:Fb("TRANSMITTER_MAX_RTO")}packetize(e,t){return{type:NA.Default,version:this.version,packetNumber:t,payload:e}}serialize(e){switch(e.type){case NA.Default:{let t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;const n=new ArrayBuffer(t.length+15),i=new DataView(n);return i.setUint16(0,e.version),i.setUint8(2,e.type),i.setUint32(3,e.packetNumber),tv(i,7,BigInt(e.sendTs)),new Uint8Array(i.buffer).set(t,15),n}case NA.Ack:{const t=new ArrayBuffer(16),n=new DataView(t);return n.setUint16(0,e.version),n.setUint8(2,e.type),n.setUint32(3,e.maxAckPacketNumber),n.setUint8(7,e.shift),tv(n,8,BigInt(e.ackSendTs)),t}}}deserialize(e){const t=new DataView(e),n=t.getUint16(0),i=t.getUint8(2);switch(i){case NA.Default:{const r=t.getUint32(3),s=ev(t,7),o=e.slice(15),a=(new TextDecoder).decode(o);return{version:n,type:i,packetNumber:r,sendTs:Number(s),payload:a}}case NA.Ack:{const e=t.getUint32(3),r=t.getUint8(7),s=ev(t,8);return{version:n,type:i,maxAckPacketNumber:e,shift:r,ackSendTs:Number(s)}}default:throw oT.error("[".concat(this.ID,"] Unrecognized packet type ").concat(i)),new Error("Unrecognized packet type ".concat(i))}}sendMessage(e){const t=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;const n=this.calculateRTO(t),i=window.setTimeout((()=>{this.resendMessage(t)}),n);this.timeoutMap.set(t.packetNumber,i),this.sendPacket(t)}onData(e){const t=this.deserialize(e);t.type===NA.Default?this.ack(t):t.type===NA.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((e=>{let[t,n]=e;window.clearTimeout(n)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}resendMessage(e){const t=this.calculateRTO(e),n=window.setTimeout((()=>{this.resendMessage(e)}),t);this.timeoutMap.set(e.packetNumber,n),this.sendPacket(e)}calculateRTO(e){const t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;{const n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n}}updateRTT(e,t){const n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8}ack(e){if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((()=>{this.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){const e=this.unorderedPacketQueue[0];if(!e){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(e.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:NA.Ack,version:this.version};this.sendPacket(t)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:NA.Ack,version:this.version};this.sendPacket(t)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:NA.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}sendPacket(e){e.type===NA.Default&&(e.sendTs=Math.round(performance.now()));const t=this.serialize(e);this.sendImpl(t)}clearRTO(e){for(let t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){const e=this.timeoutMap.get(t);void 0!==e&&window.clearTimeout(e),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}class JA extends YA{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),sh(this,"_initMutex",void 0),sh(this,"_reconnectInterrupter",void 0),sh(this,"_url",void 0),sh(this,"_transmitter",void 0),sh(this,"_addresses",void 0),sh(this,"_reliableTransmission",void 0),this._initMutex=new py("datachannel");const{timeout:n,timeoutFactor:i}=t,r=Math.max(300,Math.floor(3*n/5)),s=Math.max(1.2,Math.floor(8*i)/10);_v.ONLINE&&(this._retryConfig.timeout=r,this._retryConfig.timeoutFactor=s),Iv.on(vv.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===_v.ONLINE?(this._retryConfig.timeout=r,this._retryConfig.timeoutFactor=s):(this._retryConfig.timeout=n,this._retryConfig.timeoutFactor=i))}))}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this._forceCloseTimeout=t;const n=(t,n)=>{this._addresses=e,this.currentURLIndex=this._addresses.findIndex((e=>e.fingerprint||Fb("FINGERPRINT")));const i=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(i).then(t).catch(n),this.once(UC.CLOSED,(()=>n(new ZT(H_.WS_DISCONNECT)))),this.once(UC.CONNECTED,(()=>t()))};return this._initMutex.lock().then((e=>new c_(((e,t)=>{n(e,t)})).then((()=>{e()})).catch((()=>{e()}))))}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new ZT(H_.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new ZT(H_.WS_ERR,"send datachannel signal message error"+e.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(e){const t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}createTransmitterConnection(e){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new c_(((t,n)=>{var i;const r=()=>{oT.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),t()},s=async e=>{var i;if(null===(i=this._closeEstablishingTransmitter)||void 0===i||i.call(this),oT.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const i=wv(this,UC.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,r=await this.reconnectWithAction(i);if("closed"===this.state)return void oT.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!r)return n(new ZT(H_.WS_DISCONNECT,"datachannel reconnect failed: ".concat(e.code))),void this.close(!0);t()}else n(new ZT(H_.WS_DISCONNECT,"datachannel close: ".concat(e.code))),this.close()},o=e=>{var t;null===(t=this._reliableTransmission)||void 0===t||t.onData(e.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),oT.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(e)));const a=null===(i=this._store)||void 0===i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),c=Date.now();Cv(this,UC.TO_CONNECT_DATACHANNEL,e).then((e=>{var t,n;if(!e)throw new Error("transmissonInfo not exist yet");const{transmitter:i,close:d}=e;this._transmitter=i,null===(t=this._store)||void 0===t||t.signalChannelOpen();const l=Date.now()-c;oT.debug("[choose dc] dc open cost ".concat(l,"ms")),this._reliableTransmission=new qA((e=>{var t;this._transmitter&&"open"===this._transmitter.readyState&&(null===(t=this._transmitter)||void 0===t||t.send(e))}),(e=>{"string"==typeof e&&this.emit(UC.ON_MESSAGE,e)})),this._closeEstablishingTransmitter=()=>{var e;null===(e=this._reliableTransmission)||void 0===e||e.close(),this._reliableTransmission=void 0,d()},r&&r(),i.onclose=s,i.onmessage=o,null===(n=this._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this._joinChannelServiceRecordIndex=a})).catch((e=>{var t;if(null===(t=this._store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof ZT&&e.code===H_.WS_ABORT?"aborted":"error",errors:[e]},a),"closed"!==this.state){if(e instanceof ZT&&e.code===H_.WS_ERR){const t=new ZT(H_.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return oT.error("[".concat(this._name,"]").concat(t)),void n(t)}s&&s(e)}else n(new ZT(H_.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount)return!1;if(!this._addresses)return!1;if("closed"===this.state)return!1;this._onlineReconnectListener||Iv.networkState!==_v.OFFLINE||(this._onlineReconnectListener=Iv.onlineWaiter&&Iv.onlineWaiter.then((()=>{this._onlineReconnectListener=void 0})));let n=!0;if(this._reconnectInterrupter=()=>{n=!1},t){const t=gy(this._reconnectCount,this._retryConfig);oT.debug("[".concat(this._name,"] wait ").concat(t,"ms to reconnect datachannel, mode: ").concat(e)),await c_.race([ny(t),this._onlineReconnectListener||new c_((()=>{}))])}if("closed"===this.state||!n)return!1;this._reconnectCount+=1;const i=async(e,t)=>{this.emit(UC.RECONNECT_CREATE_CONNECTION,t),await this.createTransmitterConnection(e)};try{if("retry"===e){const t=this._addresses[this.currentURLIndex];this.emit(UC.RECONNECT_WAITTING_FINISH,e),await i(t,e)}else if("tryNext"===e){this.currentURLIndex+=1;for(let e=this.currentURLIndex;e<this._addresses.length;e++){if(this._addresses[e].fingerprint||Fb("FINGERPRINT")){this.currentURLIndex=e;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return oT.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);oT.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const t=this._addresses[this.currentURLIndex];this.emit(UC.RECONNECT_WAITTING_FINISH,e),await i(t,e)}else"recover"===e&&(oT.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(UC.RECONNECT_WAITTING_FINISH,e),this.emit(UC.FAILBACK));return!0}catch(n){var r,s;return oT.error("[".concat(this._name,"] reconnect failed"),n.toString()),null!=n&&null!==(r=n.data)&&void 0!==r&&r.desc&&Array.isArray(n.data.desc)&&n.data.desc.length&&Ii(s=n.data.desc).call(s,"dynamic key expired")?(this.emit(UC.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(e,t)}}}class QA extends dv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===DT.CONNECTED?this.emit(PT.WS_CONNECTED):e===DT.RECONNECTING?this.emit(PT.WS_RECONNECTING,this._websocketReconnectReason):e===DT.CLOSED&&this.emit(PT.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),sh(this,"_disconnectedReason",void 0),sh(this,"_websocketReconnectReason",void 0),sh(this,"_connectionState",DT.CLOSED),sh(this,"reconnectToken",void 0),sh(this,"websocket",void 0),sh(this,"openConnectionTime",void 0),sh(this,"clientId",void 0),sh(this,"lastMsgTime",Date.now()),sh(this,"uploadCache",[]),sh(this,"uploadCacheInterval",void 0),sh(this,"rttRolling",new _y(5)),sh(this,"pingpongTimer",void 0),sh(this,"inflateDataTimer",void 0),sh(this,"pingpongTimeoutCount",0),sh(this,"joinResponse",void 0),sh(this,"multiIpOption",void 0),sh(this,"initError",void 0),sh(this,"spec",void 0),sh(this,"store",void 0),sh(this,"onWebsocketMessage",(e=>{if(e instanceof ArrayBuffer)return void this.emit(PT.ON_BINARY_DATA,e);const t=JSON.parse(e);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===MT.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===MT.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close(mv.UID_BANNED);break;case 15:this.close(mv.IP_BANNED);break;case 16:this.close(mv.CHANNEL_BANNED)}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new JA("gateway-".concat(this.clientId),this.spec.retryConfig,!0,t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===DT.CONNECTED&&this.reconnect("retry",MC.OFFLINE)}))}async request(e,t,n,i){const r=iy(6,""),s={_id:r,_type:e,_message:t},o=this.websocket.connectionID,a=()=>new c_(((t,n)=>{if(this.connectionState===DT.CONNECTED)return t();const i=()=>{this.off(PT.WS_CLOSED,r),t()},r=()=>{this.off(PT.WS_CONNECTED,i),n(new ZT(H_.WS_ABORT))};this.once(PT.WS_CONNECTED,i),this.once(PT.WS_CLOSED,r),e!==xT.PUBLISH&&e!==xT.SUBSCRIBE&&e!==xT.UNSUBSCRIBE&&e!==xT.UNPUBLISH&&e!==xT.CONTROL&&e!==xT.RESTART_ICE||this.once(PT.DISCONNECT_P2P,(()=>{n(new ZT(H_.DISCONNECT_P2P))})),e!==xT.PUBLISH&&e!==xT.RESTART_ICE||this.once(PT.ABORT_P2P_EXECUTION,(()=>{n(new ZT(H_.DISCONNECT_P2P))}))}));if(this.connectionState!==DT.CONNECTING&&this.connectionState!==DT.RECONNECTING||e===xT.JOIN||e===xT.REJOIN||await a(),e===xT.LEAVE&&(this.websocket.unbindDcCloseEventListener(),i=!0),this.websocket.sendMessage(s,!0,!1),i)return;const c=new c_(((n,i)=>{let s=!1;const a=(i,r)=>{s=!0,n({isSuccess:"success"===i,message:r||{}}),this.off(PT.WS_CLOSED,c),this.off(PT.WS_RECONNECTING,c),this.emit(PT.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(r),a);const c=()=>{i(new ZT(H_.WS_ABORT,"type: ".concat(e))),this.off(PT.WS_CLOSED,c),this.off(PT.WS_RECONNECTING,c),this.off("res-@".concat(r),a)};this.once(PT.WS_CLOSED,c),this.once(PT.WS_RECONNECTING,c),ny(Fb("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==o||s||(oT.warning("dc request timeout, type: ".concat(e)),this.emit(PT.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(i){if(this.connectionState===DT.CLOSED||e===xT.LEAVE)throw new ZT(H_.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?i.throw():e===xT.JOIN||e===xT.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=$C(l),h=new ZT(H_.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(d.message.error_str),{code:l,data:d.message});return"success"===u.action?d.message:(oT.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(l,", message: ").concat(u.desc,", action: ").concat(u.action)),l===kT.ERR_TOO_MANY_BROADCASTERS?e===xT.JOIN||e===xT.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(l===kT.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,oT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",MC.MULTI_IP)):this.reconnect(u.action,MC.SERVER_ERROR),e===xT.JOIN||e===xT.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new c_((n=>{const i=r=>{(!t||t(r))&&(this.off(e,i),n(r))};this.on(e,i)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void oT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(LT.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=Fb("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==DT.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Fb("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new c_(((n,i)=>{this.once(PT.WS_CONNECTED,(()=>n(this.joinResponse))),this.once(PT.WS_CLOSED,(()=>i(this.initError||new ZT(H_.WS_ABORT)))),this.connectionState=DT.CONNECTING,this.websocket.init(e).catch(i),this.websocket.once(UC.FAILBACK,(()=>{void 0===this.openConnectionTime&&i(new ZT(H_.INIT_DATACHANNEL_TIMEOUT))})),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval((()=>{this.handleInflateData()}),2e4),setTimeout((()=>{t&&void 0===this.openConnectionTime&&(oT.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),i(new ZT(H_.INIT_DATACHANNEL_TIMEOUT)))}),Fb("DC_JOIN_WITH_FAILBACK"))}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||mv.LEAVE,this.connectionState=DT.CLOSED,oT.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===mv.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new JA("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(PT.ABORT_P2P_EXECUTION);const e=await Cv(this,PT.DATACHANNEL_CONNECTING),t=await this.request(xT.JOIN,e);if(!t)return this.emit(PT.REPORT_JOIN_GATEWAY,H_.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(PT.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=DT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new ZT(H_.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=Rv(this,PT.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(xT.REJOIN,e);return!!t&&(this.connectionState=DT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(MT.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(MT.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(MT.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(MT.MUTE_AUDIO,{uid:e.uid}):this.emit(MT.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(MT.MUTE_VIDEO,{uid:e.uid}):this.emit(MT.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(MT.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(MT.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(MT.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(MT.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(MT.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){oT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=$C(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(mv.UID_BANNED),void this.close()):void this.reconnect(t.action,MC.SERVER_ERROR);oT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Fb("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(oT.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>Fb("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",MC.TIMEOUT):this.request(xT.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Fb("REPORT_STATS")&&this.send(xT.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleInflateData(){const{inflateLength:e,deflateLength:t}=this.websocket.getInflateData();0!==e&&0!==t&&this.upload(LT.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(UC.RECONNECT_WAITTING_FINISH,(e=>{this.emit(PT.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(UC.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(PT.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(UC.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(UC.CLOSED,(()=>{this.connectionState=DT.CLOSED})),this.websocket.on(UC.FAILED,(()=>{this._disconnectedReason=mv.NETWORK_ERROR,this.connectionState=DT.CLOSED})),this.websocket.on(UC.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===DT.CONNECTED?this.connectionState=DT.RECONNECTING:this.connectionState=DT.CONNECTING})),this.websocket.on(UC.WILL_RECONNECT,((e,t)=>{if(Rv(this,PT.IS_P2P_DISCONNECTED)&&"retry"===e)return oT.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(PT.NEED_RENEW_SESSION),this.emit(PT.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(oT.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(PT.NEED_RENEW_SESSION),this.emit(PT.DISCONNECT_P2P)),t(e)})),this.websocket.on(UC.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{oT.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",MC.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(PT.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof ZT&&e.code===H_.UNEXPECTED_RESPONSE&&e.data.code===kT.ERR_NO_AUTHORIZED)return oT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",MC.SERVER_ERROR);oT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",MC.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(UC.REQUEST_NEW_URLS,((e,t)=>{Cv(this,PT.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(UC.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(MT.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(UC.TO_CONNECT_DATACHANNEL,(async(e,t,n)=>Cv(this,PT.DATACHANNEL_PRECONNECT,e).then(t).catch(n))),this.websocket.on(UC.FAILBACK,(()=>{void 0!==this.openConnectionTime&&this.emit(PT.DATACHANNEL_FAILBACK)}))}}class XA extends dv{constructor(e,t){super(),sh(this,"signal",void 0),sh(this,"token",void 0),sh(this,"tokenTimeout",void 0),sh(this,"tokenInterval",void 0),sh(this,"_sequence",0),sh(this,"userMap",new Map),sh(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===DT.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*Fb("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,i,r){var s,o,a;if(0===this.userMap.size)return;const c=Array.from(JT(s=this.userMap).call(s))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),i=null!==(o=i)&&void 0!==o?o:iy(6,""),r=null!==(a=r)&&void 0!==a?a:this._sequence++;const d={_id:i,_type:e,_seq:r,_message:t,token:"".concat(this.token,"_").concat(c)};Fb("SHOW_P2P_LOG")&&oT.debug("send message",d,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(d)).forEach((e=>{this.signal.request(xT.DATA_STREAM,{payload:Xv(this.encoder.encode(e))})}));const l=new c_(((t,r)=>{const s=window.setTimeout((()=>{this.off("res-@".concat(i,"_ack"),o),this.off("res-@".concat(i),c),this.off(HC.ABORT,a),oT.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(i)),0===this.userMap.size?r(new K_(H_.INVALID_REMOTE_USER)):r(new K_(H_.TIMEOUT))}),Fb("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),o=()=>{s&&window.clearTimeout(s),this.off(HC.ABORT,a),n&&t()},a=()=>{s&&window.clearTimeout(s),this.off("res-@".concat(i,"_ack"),o),this.off("res-@".concat(i),c),r(new K_(H_.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(i)))};this.once(HC.ABORT,a),this.once("res-@".concat(i,"_ack"),o);const c=(n,c)=>{l=!0,s&&window.clearTimeout(s),this.off("res-@".concat(i,"_ack"),o),this.off(HC.ABORT,a),"success"===n?t(c):r(new K_(H_.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(i)))};let l=!1;n||(this.once("res-@".concat(i),c),ny(Fb("SIGNAL_REQUEST_TIMEOUT")).then((()=>{l||oT.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(i,", ").concat(d))})))}));try{return await l}catch(s){if(s.code===H_.TIMEOUT)return await this.send(e,t,n,i,r);throw s}}onMessage(e){var t;const{_uid:n}=e;let i,r=this.userMap.get(n);if(r)i=r.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==GC.CHECK)return;const{token:t}=e;i=new Map,r={uid:n,isStart:!0,token:t,splitMessageMap:i,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,r),this.signal.emit(MT.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var s;const{id:t,total:r}=e,o=null!==(s=i.get(t))&&void 0!==s?s:[];if(o.push(e),i.has(t)||i.set(t,o),o.length!==r)return;{const r=ep(o).call(o,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");i.delete(t),(e=JSON.parse(r))._uid=n}}const{_type:o,token:a}=e;if(Ii(t=[GC.ACK,GC.CHECK]).call(t,o))return o===GC.CHECK&&this.handleCheckToken(r,a),void this.receiveMessage(e);a==="".concat(r.token,"_").concat(this.token)?this.handleReceivedMessage(e):oT.debug('Receive unexpected message", '.concat(a,", cur_token: ").concat(r.token,"_").concat(this.token),e)}check(){const e={_id:iy(6,""),token:this.token,_type:GC.CHECK};Fb("SHOW_P2P_LOG")&&oT.debug("send message",e),this.signal.request(xT.DATA_STREAM,{payload:Xv(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:GC.ACK,token:this.token};Fb("SHOW_P2P_LOG")&&oT.debug("send message",t),this.signal.request(xT.DATA_STREAM,{payload:Xv(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(GC.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const i=t.get(n);t.delete(n),this.receiveMessage(i),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:i}=e,r=this.userMap.get(n),{receivedMessagesMap:s,isStart:o,nextExpectedSequenceNumber:a}=r;if(i<a)return this.ack(e._id),void oT.debug("[external-signal] receive old message, seq: ".concat(i,", ").concat(e._message));s.set(i,e),o&&i===a&&(this.receiveMessage(e),s.delete(a),r.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:i,_uid:r}=e;if(Fb("SHOW_P2P_LOG")&&oT.debug("receive message",e),t){let s;switch(e._type!==GC.ACK&&(i&&(s=JSON.parse(i)),this.ack(e._id)),e._type){case GC.CANDIDATE:case GC.CONTROL:this.signal.emit(n,s,r);break;case GC.PUBLISH:case GC.UNPUBLISH:case GC.RESTART_ICE:case GC.CALL:s.uid=r,Cv(this.signal,n,s).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case GC.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case GC.RESPONSE:{const{success:e,message:n}=s;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<XA.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),i=iy(6,"");let r=0,s=800;const o=Math.ceil(e.length/s);for(;e.length>0;){r++;const a={id:i,index:r,total:o,payload:e.slice(0,s),token:"".concat(this.token,"_").concat(n)};JSON.stringify(a).length>XA.MAX_MESSAGE_SIZE?s-=50:(t.push(a),e=e.slice(s))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(oT.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{oT.debug("token timeout, ".concat(t)),this.reset(e.uid)}),Fb("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await Cv(this.signal,GC.CALL,void 0),t=await this.send(GC.CALL,e);this.signal.emit(PT.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(HC.ABORT),this.signal.emit(MT.ON_USER_OFFLINE,{uid:n.uid,reason:YC.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(oT.debug("change local token from ".concat(t," to ").concat(t)),this.token=iy(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(HC.ABORT)}}sh(XA,"MAX_SIZE",1),sh(XA,"MAX_MESSAGE_SIZE",1024);class ZA extends dv{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===DT.CONNECTED?this.emit(PT.WS_CONNECTED):e===DT.RECONNECTING?this.emit(PT.WS_RECONNECTING,this._websocketReconnectReason):e===DT.CLOSED&&this.emit(PT.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),sh(this,"_disconnectedReason",void 0),sh(this,"_websocketReconnectReason",void 0),sh(this,"_connectionState",DT.CLOSED),sh(this,"reconnectToken",void 0),sh(this,"p2pToken",void 0),sh(this,"websocket",void 0),sh(this,"openConnectionTime",void 0),sh(this,"clientId",void 0),sh(this,"lastMsgTime",Date.now()),sh(this,"uploadCache",[]),sh(this,"uploadCacheInterval",void 0),sh(this,"rttRolling",new _y(5)),sh(this,"pingpongTimer",void 0),sh(this,"pingpongTimeoutCount",0),sh(this,"joinResponse",void 0),sh(this,"multiIpOption",void 0),sh(this,"initError",void 0),sh(this,"spec",void 0),sh(this,"store",void 0),sh(this,"_external_signal",void 0),sh(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(PT.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case MT.ON_DATA_STREAM:return void this.handleDataStream(t._message);case MT.MUTE_AUDIO:case MT.MUTE_VIDEO:case MT.ON_P2P_LOST:case MT.ON_USER_ONLINE:return;case MT.ON_USER_OFFLINE:const{uid:e}=t._message;return oT.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===MT.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===MT.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(mv.UID_BANNED);break;case 15:this.close(mv.IP_BANNED);break;case 16:this.close(mv.CHANNEL_BANNED)}if(t._type===MT.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case kT.ERR_LICENSE_MISSING:this.close(mv.LICENSE_MISSING);break;case kT.ERR_LICENSE_EXPIRED:this.close(mv.LICENSE_EXPIRED);break;case kT.ERR_LICENSE_MINUTES_EXCEEDED:this.close(mv.LICENSE_MINUTES_EXCEEDED);break;case kT.ERR_LICENSE_PERIOD_INVALID:this.close(mv.LICENSE_PERIOD_INVALID);break;case kT.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(mv.LICENSE_MULTIPLE_SDK_SERVICE);break;case kT.ERR_LICENSE_ILLEGAL:this.close(mv.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new hA("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Fb("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Fb("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===DT.CONNECTED&&this.reconnect("retry",Ev.OFFLINE)})),this.p2pToken=iy(6,""),this._external_signal=new XA(this,this.p2pToken)}async request(e,t,n,i){const r=iy(6,""),s={_id:r,_type:e,_message:t},o=this.websocket.connectionID,a=()=>new c_(((e,t)=>{if(this.connectionState===DT.CONNECTED)return e();const n=()=>{this.off(PT.WS_CLOSED,i),e()},i=()=>{this.off(PT.WS_CONNECTED,n),t(new K_(H_.WS_ABORT))};this.once(PT.WS_CONNECTED,n),this.once(PT.WS_CLOSED,i)}));if(this.connectionState!==DT.CONNECTING&&this.connectionState!==DT.RECONNECTING||e===xT.JOIN||e===xT.REJOIN||await a(),this.websocket.sendMessage(s,!0),i)return;const c=new c_(((n,i)=>{let s=!1;const a=(i,r)=>{s=!0,n({isSuccess:"success"===i,message:r||{}}),this.off(PT.WS_CLOSED,c),this.off(PT.WS_RECONNECTING,c),this.emit(PT.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(r),a);const c=()=>{i(new K_(H_.WS_ABORT,"type: ".concat(e))),this.off(PT.WS_CLOSED,c),this.off(PT.WS_RECONNECTING,c),this.off("res-@".concat(r),a)};this.once(PT.WS_CLOSED,c),this.once(PT.WS_RECONNECTING,c),ny(Fb("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==o||s||(oT.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(PT.REQUEST_TIMEOUT,e,t))}))}));let d=null;try{d=await c}catch(i){if(this.connectionState===DT.CLOSED||e===xT.LEAVE)throw new K_(H_.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?i.throw():e===xT.JOIN||e===xT.REJOIN?null:(await a(),await this.request(e,t))}if(d.isSuccess)return d.message;const l=Number(d.message.error_code||d.message.code),u=$C(l),h=new K_(H_.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(d.message.error_str),{code:l,data:d.message});return"success"===u.action?d.message:(oT.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(l,", message: ").concat(u.desc,", action: ").concat(u.action)),l===kT.ERR_TOO_MANY_BROADCASTERS?e===xT.JOIN||e===xT.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(l===kT.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,oT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Ev.MULTI_IP)):this.reconnect(u.action,Ev.SERVER_ERROR),e===xT.JOIN||e===xT.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new c_((n=>{const i=r=>{(!t||t(r))&&(this.off(e,i),n(r))};this.on(e,i)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void oT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(LT.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=Fb("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==DT.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),Fb("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new c_(((t,n)=>{this.once(PT.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(PT.WS_CLOSED,(()=>n(this.initError||new K_(H_.WS_ABORT)))),this.connectionState=DT.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||mv.LEAVE,this.connectionState=DT.CLOSED,oT.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===mv.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new hA("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Fb("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Fb("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents()),this.p2pToken=iy(6,""),this._external_signal.clear(),this._external_signal=new XA(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(PT.ABORT_P2P_EXECUTION);const e=await Cv(this,PT.REQUEST_JOIN_INFO),t=await this.request(xT.JOIN,e);if(!t)return this.emit(PT.REPORT_JOIN_GATEWAY,H_.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(PT.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=DT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=Qv(e.payload),i=(new TextDecoder).decode(n),r=JSON.parse(i);"total"in r&&"id"in r||Ii(t=Object.values(GC)).call(t,r._type)?(r._uid=e.uid,this._external_signal.onMessage(r)):this.emit(MT.ON_DATA_STREAM,e)}catch(t){this.emit(MT.ON_DATA_STREAM,e)}}handleNotification(e){oT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=$C(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(mv.UID_BANNED),void this.close()):void this.reconnect(t.action,Ev.SERVER_ERROR);oT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=Fb("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(oT.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>Fb("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Ev.TIMEOUT):this.request(xT.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),Fb("REPORT_STATS")&&this.send(xT.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(VT.RECONNECT_WAITTING_FINISH,(e=>{this.emit(PT.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(VT.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(PT.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(VT.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(VT.CLOSED,(()=>{this.connectionState=DT.CLOSED})),this.websocket.on(VT.FAILED,(()=>{this._disconnectedReason=mv.NETWORK_ERROR,this.connectionState=DT.CLOSED})),this.websocket.on(VT.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===DT.CONNECTED?this.connectionState=DT.RECONNECTING:this.connectionState=DT.CONNECTING})),this.websocket.on(VT.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(oT.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(PT.NEED_RENEW_SESSION)):oT.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(VT.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(PT.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof K_&&e.code===H_.UNEXPECTED_RESPONSE&&e.data.code===kT.ERR_NO_AUTHORIZED)return oT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Ev.SERVER_ERROR);oT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Ev.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(VT.REQUEST_NEW_URLS,((e,t)=>{Cv(this,PT.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(VT.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(MT.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$A(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const tw=new Map;class nw extends dv{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(mC.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(mC.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){oT.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),sh(this,"store",void 0),sh(this,"joinInfo",void 0),sh(this,"key",void 0),sh(this,"ntpOffset",0),sh(this,"signal",void 0),sh(this,"role",void 0),sh(this,"inChannelInfo",{joinAt:null,duration:0}),sh(this,"spec",void 0),sh(this,"_state","DISCONNECTED"),sh(this,"_statsCollector",void 0),sh(this,"_disconnectedReason",void 0),sh(this,"isSignalRecover",!1),sh(this,"hasChangeBGPAddress",!1),sh(this,"trafficStatsInterval",void 0),sh(this,"networkQualityInterval",void 0),sh(this,"_joinGatewayStartTime",0),sh(this,"_signalTimeout",!1),sh(this,"_clientRoleOptions",void 0),sh(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new ZA(ew(ew({},t),{},{retryConfig:t.websocketRetryConfig}),e):this.store.useDataChannel?new QA(ew(ew({},t),{},{retryConfig:t.websocketRetryConfig}),e):new fA(ew(ew({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){if(this.signal instanceof QA){let t=!1;"disabled"!==e.cloudProxyServer?(oT.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(e.cloudProxyServer,")")),t=!0):"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length>255||"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length<22?(oT.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),t=!0):e.apResponse.addresses.some((e=>e.fingerprint))||Fb("FINGERPRINT")||(oT.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),t=!0),t&&this.resetSignal()}this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const i=Date.now();let r=tw.get(e.cname);if(r||(r=new Map,tw.set(e.cname,r)),this._isProactiveJoin=!0,r.has(e.uid)){const t=new ZT(H_.UID_CONFLICT);throw vT.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:this.signal instanceof QA?"1":"0"}),this._isProactiveJoin=!1,t}r.set(e.uid,!0),this.joinInfo=e,this.key=t;let s=0;this.joinGatewayStartTime=i;const o=e.proxyServer;try{let t;if(oT.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof QA?"datachannel":"websocket"," join uid ").concat(s)),this.signal instanceof QA)t=await this.signal.init(e.apResponse.addresses,n);else{const i=e.gatewayAddrs.map((t=>{let{address:n}=t;const[i,r]=n.split(":"),s={host:i,port:r};return e.proxyServer&&(s.proxy=e.proxyServer),s}));t=await this.signal.init(i,n)}s=t.uid,oT.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof QA?"datachannel":"websocket"," join uid ").concat(s," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){if(t&&t.code===H_.INIT_WEBSOCKET_TIMEOUT)throw oT.warning("[".concat(this.store.clientId,"] User join failed"),t.toString()),t;if(t&&t.code===H_.INIT_DATACHANNEL_TIMEOUT)throw oT.warning("[".concat(this.store.clientId,"] User join datachannel failed"),t.toString()),this.resetSignal(),t;throw oT.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),vT.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!o,signalChannel:this.signal instanceof QA?"1":"0"}),this._isProactiveJoin=!1,r.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),oT.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{oT.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(mC.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(mC.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(mC.NETWORK_QUALITY,{uplinkNetworkQuality:BA(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:BA(this._statsCollector.trafficStats.B_dnq)}):this.emit(mC.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),s}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==mv.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==DT.CONNECTED||await function(e,t){return t===1/0?e:c_.race([e,ty(t)])}(this.signal.request(xT.LEAVE,void 0,!0),3e3)}catch(e){oT.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==mv.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:Fb("PUB_EXTEND"),twcc:!!Fb("PUBLISH_TWCC"),rtx:!!Fb("USE_PUB_RTX")};try{return(await this.signal.request(xT.PUBLISH,i,!0))._message}catch(i){if(n&&i.data&&i.data.code===kT.ERR_PUBLISH_REQUEST_INVALID)return oT.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),i.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw i}}async publishDataChannel(e,t,n){var i;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(i=t.maxRetransmits)&&void 0!==i?i:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(xT.PUBLISH_DATASTREAM,r,!0)}catch(i){if(n&&i.data&&i.data.code===kT.ERR_PUBLISH_REQUEST_INVALID)return oT.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),i.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw i}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(xT.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){oT.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await c_.all(e.map((e=>this.signal.request(xT.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){oT.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const i={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Fb("SUBSCRIBE_TWCC"),rtx:!!Fb("USE_SUB_RTX")||void 0,extend:Fb("SUB_EXTEND"),svc:Array.isArray(Fb("SVC"))&&0!==Fb("SVC").length?Fb("SVC"):void 0};try{return await this.signal.request(xT.PRE_SUBSCRIBE,i,!0)}catch(i){if(n&&i.data&&i.data.code===kT.ERR_SUBSCRIBE_REQUEST_INVALID)return oT.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),i.toString()),this.presubscribe(e,t,!1);throw i}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const i={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Fb("SUBSCRIBE_TWCC"),rtx:!!Fb("USE_SUB_RTX"),extend:Fb("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(Fb("SVC"))&&0!==Fb("SVC").length?Fb("SVC"):void 0};try{return(await this.signal.request(xT.SUBSCRIBE,i,!0))._message}catch(i){if(n&&i.data&&i.data.code===kT.ERR_SUBSCRIBE_REQUEST_INVALID)return oT.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),i.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw i}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const i={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(xT.SUBSCRIBE_DATASTREAM,i,!0)}catch(i){if(n&&i.data&&i.data.code===kT.ERR_SUBSCRIBE_REQUEST_INVALID)return oT.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),i.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw i}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!Fb("USE_SUB_RTX")};try{return await this.signal.request(xT.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===kT.ERR_SUBSCRIBE_REQUEST_INVALID)return oT.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,i=e.height,r=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(r=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(r=!1)),"number"!=typeof i&&(i=i.exact||i.ideal||i.max||i.min||0,t||(r=!1)),r?{stream_type:0,width:n,height:i,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(xT.SET_VIDEO_PROFILE,t);oT.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(xT.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){oT.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new ZT(H_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await c_.all(e.map((e=>this.signal.request(xT.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){oT.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(xT.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){oT.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:i}=e;return{gatewayEstablishParams:await this.signal.request(xT.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:i}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(xT.GATEWAY_INFO)}async renewToken(e){await this.signal.request(xT.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n,i=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,i=1):i=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:i=0,await this.signal.request(xT.SET_CLIENT_ROLE,{role:e,level:i,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(xT.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(xT.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(xT.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(xT.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(xT.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.signal instanceof ZA)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),ew({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(xT.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=tw.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:ST.username,password:ST.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(ew(ew({},ST),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(xT.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&Kv((()=>{this.emit(mC.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new ZT(H_.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=Fb("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);const i=ew({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:xb,browser:navigator.userAgent,process_id:Fb("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:Fb("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:Fb("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Fb("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof Fb("SUBSCRIBE_AUDIO_FILTER_TOPN")?Fb("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof Fb("ENABLE_PUBLISH_AUDIO_FILTER")?Fb("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof Fb("ENABLE_USER_LICENSE_CHECK")?Fb("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===Fb("USE_PUB_RTX")||!0===Fb("USE_SUB_RTX")||void 0,disableFEC:Fb("DISABLE_FEC"),enableNTPReport:!!Fb("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!Fb("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:"boolean"==typeof Fb("ENABLE_DATASTREAM_2")?Fb("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!Fb("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:"boolean"==typeof Fb("USE_XR")?Fb("USE_XR"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(i.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(i.aes_mode=this.joinInfo.aesmode,Fb("ENCRYPT_AES")?(i.aes_secret=this.joinInfo.aespassword,i.aes_encrypt=!0):i.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(i.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(i.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(i.default_video_stream=this.joinInfo.defaultVideoStream),i}getRejoinMessage(){if(!this.joinInfo)throw new ZT(H_.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(PT.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Ii(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&vT.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(PT.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(PT.WS_RECONNECTING,(e=>{this.joinInfo&&vT.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Ev.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",vT.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(PT.WS_CLOSED,(e=>{let t;switch(e){case mv.LEAVE:t=Ev.LEAVE;break;case mv.UID_BANNED:case mv.IP_BANNED:case mv.CHANNEL_BANNED:case mv.SERVER_ERROR:t=Ev.SERVER_ERROR;break;case mv.FALLBACK:t=Ev.FALLBACK;break;case mv.LICENSE_MISSING:case mv.LICENSE_EXPIRED:case mv.LICENSE_MINUTES_EXCEEDED:case mv.LICENSE_PERIOD_INVALID:case mv.LICENSE_MULTIPLE_SDK_SERVICE:case mv.LICENSE_ILLEGAL:case mv.TOKEN_EXPIRE:t=e;break;default:t=Ev.NETWORK_ERROR}oT.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+Ev.NETWORK_ERROR)),this.joinInfo&&vT.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===mv.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==mv.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(PT.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(oT.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),vT.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof QA?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void oT.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));Vb("EVENT_REPORT_DOMAIN",e[1]),Vb("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Vb("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(MT.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(PT.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new ZT(H_.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Cv(this,mC.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(PT.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:n,dtlsParameters:i,rtpCapabilities:r}=await Cv(this,mC.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:i,rtpCapabilities:r,version:"2"}}))})),this.signal.on(PT.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(PT.REPORT_JOIN_GATEWAY,((e,t)=>{this.joinInfo&&(vT.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof QA?"1":"0"}),this._isProactiveJoin=!1)})),this.signal.on(PT.IS_P2P_DISCONNECTED,(e=>{e(Rv(this,mC.IS_P2P_DISCONNECTED))})),this.signal.on(PT.DISCONNECT_P2P,(()=>{this.emit(mC.DISCONNECT_P2P)})),this.signal.on(PT.NEED_RENEW_SESSION,(()=>{this.emit(mC.NEED_RENEW_SESSION)})),this.signal.on(PT.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(PT.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(PT.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(mC.JOIN_RESPONSE,e,t)})),this.signal.on(PT.DATACHANNEL_PRECONNECT,(async(e,t,n)=>{this.updateTurnConfigFromSignal();const i=this.getCurrentGatewayAddress();return Cv(this,mC.DATACHANNEL_PRECONNECT,e,i).then(t).catch(n)})),this.signal.on(PT.DATACHANNEL_CONNECTING,(async e=>{const{iceParameters:t,dtlsParameters:n,rtpCapabilities:i}=await Cv(this,mC.REQUEST_DC_CONNECTION_PARAMS);e(this.getJoinMessage({ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:i,version:"2"}}))})),this.signal.on(PT.DATACHANNEL_FAILBACK,(()=>{oT.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(mC.DATACHANNEL_FAILBACK)}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(xT.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(xT.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw oT.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(xT.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(xT.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw oT.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(xT.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===fC.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(xT.CONTROL,n,!0,!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===fC.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(xT.CONTROL,n,!0,!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===wC.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(xT.CONTROL,n,!0,!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===wC.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(xT.CONTROL,n,!0,!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(xT.RESTART_ICE,t,!0)}catch(e){throw oT.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Ev.P2P_FAILED)}getCurrentGatewayAddress(){var e;if(!Fb("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(xT.SET_PARAMETER,{enablePublishAudioFilter:e})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(mv.FALLBACK)),this.store.useDataChannel=!1,this.signal=new fA(ew(ew({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(mC.RESET_SIGNAL,_C.websocket)}}let iw=0,rw=0;function sw(e,t,n,i){return new c_(((r,s)=>{t.timeout=t.timeout||Fb("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),iw+=$v(t.data)):n&&(t.data.size?iw+=t.data.size:t.data instanceof FormData?iw+=ey(t.data):iw+=$v(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Cb.request(t).then((e=>{"string"==typeof e.data?rw+=$v(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?rw+=e.data.byteLength:rw+=$v(JSON.stringify(e.data)),i&&r({data:e.data,headers:e.headers}),r(e.data)})).catch((e=>{Cb.isCancel(e)?s(new ZT(H_.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?s(new ZT(H_.NETWORK_TIMEOUT,e.message)):e.response?s(new ZT(H_.NETWORK_RESPONSE_ERROR,e.response.status)):s(new ZT(H_.NETWORK_ERROR,e.message))}))}))}!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var i,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},s=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var i=e[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(o("Symbol",(function(e){function t(e,t){this.A=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<t.length;i++){var o=s[t[i]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&r(o.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{var d;e:{var l={};try{l.__proto__={a:!0},d=l.a;break e}catch(e){}d=!1}i=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var u=i;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function m(e){this.g=new h,this.G=e}function g(e,t,n,i){try{var r=t.call(e.g.j,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.m=!1,r;var s=r.value}catch(t){return e.g.j=null,e.g.s(t),E(e)}return e.g.j=null,i.call(e.g,s),E(e)}function E(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?g(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),E(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function v(e,t){return t=new _(new m(t)),u&&e.prototype&&u(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},m.prototype.o=function(e){return p(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),E(this))},m.prototype.s=function(e){return p(this.g),this.g.j?g(this,this.g.j.throw,e,this.g.o):(this.g.s(e),E(this))},o("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var y=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},S=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},b=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},T=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},C="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,A=C.FormData,w=C.XMLHttpRequest&&C.XMLHttpRequest.prototype.send,R=C.Request&&C.fetch,I=C.navigator&&C.navigator.sendBeacon,N=C.Element&&C.Element.prototype,O=C.Symbol&&Symbol.toStringTag;O&&(Blob.prototype[O]||(Blob.prototype[O]="Blob"),"File"in C&&!File.prototype[O]&&(File.prototype[O]="File"));try{new File([],"")}catch(e){C.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),O&&Object.defineProperty(e,O,{value:"File"}),e}}var k=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},D=function(e){this.i=[];var t=this;e&&y(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];y(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?y(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?S(e.value):e.value,t.append(e.name,n))}))};if((e=D.prototype).append=function(e,t,n){T(arguments,2),this.i.push(b(e,t,n))},e.delete=function(e){T(arguments,1);var t=[];e=String(e),y(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return v(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){T(arguments,1);for(var n=c(this),i=n.next();!i.done;i=n.next()){var r=c(i.value);i=r.next().value,r=r.next().value,e.call(t,r,i,this)}},e.get=function(e){T(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){T(arguments,1);var t=[];return e=String(e),y(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){T(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,i,r=this;return v(e,(function(e){if(1==e.h&&(t=c(r),n=t.next()),3!=e.h)return n.done?void(e.h=0):(i=n.value,f(e,c(i).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){T(arguments,2),e=String(e);var i=[],r=b(e,t,n),s=!0;y(this.i,(function(t){t[0]===e?s&&(s=!i.push(r)):i.push(t)})),s&&i.push(r),this.i=i},e.values=function e(){var t,n,i,r,s=this;return v(e,(function(e){if(1==e.h&&(t=c(s),n=t.next()),3!=e.h)return n.done?void(e.h=0):(i=n.value,(r=c(i)).next(),f(e,r.next().value));n=t.next(),e.h=2}))},D.prototype._asNative=function(){for(var e=new A,t=c(this),n=t.next();!n.done;n=t.next()){var i=c(n.value);n=i.next().value,i=i.next().value,e.append(n,i)}return e},D.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,i){return"string"==typeof e?t.push(n+k(S(i))+'"\r\n\r\n'+S(e)+"\r\n"):t.push(n+k(S(i))+'"; filename="'+k(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},D.prototype[Symbol.iterator]=function(){return this.entries()},D.prototype.toString=function(){return"[object FormData]"},N&&!N.matches&&(N.matches=N.matchesSelector||N.mozMatchesSelector||N.msMatchesSelector||N.oMatchesSelector||N.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),O&&(D.prototype[O]="FormData"),w){var P=C.XMLHttpRequest.prototype.setRequestHeader;C.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},C.XMLHttpRequest.prototype.send=function(e){e instanceof D?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),w.call(this,e)):w.call(this,e)}}R&&(C.fetch=function(e,t){return t&&t.body&&t.body instanceof D&&(t.body=t.body._blob()),R.call(this,e,t)}),I&&(C.navigator.sendBeacon=function(e,t){return t instanceof D&&(t=t._asNative()),I.call(this,e,t)}),C.FormData=D}}();const ow=()=>{const e=Fb("AREAS");return 0===e.length&&e.push(vC.GLOBAL),Fv(e).call(e,((e,t,n)=>{const i=aw(t);return i?0===n?i:"".concat(e,",").concat(i):e}),"")},aw=e=>e===vC.OVERSEA?"".concat(bC.ASIA,",").concat(bC.EUROPE,",").concat(bC.AFRICA,",").concat(bC.NORTH_AMERICA,",").concat(bC.SOUTH_AMERICA,",").concat(bC.OCEANIA):bC[e],cw=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=TC[e],i=Object.keys(n);i&&i.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},dw={GLOBAL:{ASIA:[vC.CHINA,vC.JAPAN,vC.INDIA,vC.KOREA,vC.HKMC],EUROPE:[],NORTH_AMERICA:[vC.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},lw=Object.keys(dw[vC.GLOBAL]),uw=[vC.CHINA,vC.NORTH_AMERICA,vC.EUROPE,vC.ASIA,vC.JAPAN,vC.INDIA,vC.OCEANIA,vC.SOUTH_AMERICA,vC.AFRICA,vC.KOREA,vC.HKMC,vC.US],hw=function(e,t){let n=[];if(Ii(e).call(e,vC.GLOBAL)){const s=[vC.GLOBAL,vC.OVERSEA],o=Object.keys(TC);if(t===vC.GLOBAL)throw new ZT(H_.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===vC.CHINA)n=[vC.OVERSEA];else if(r=t,Ii(lw).call(lw,r)){const e=(i=t,dw[vC.GLOBAL][i]||[]),r=[...s,t,...e];n=o.filter((e=>!Ii(r).call(r,e)))}else if(function(e){let t=!1;return lw.forEach((n=>{var i;Ii(i=dw[vC.GLOBAL][n]).call(i,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return lw.forEach((n=>{var i;Ii(i=dw[vC.GLOBAL][n]).call(i,e)&&(t=n)})),t}(t),i=[...s,e,t];n=o.filter((e=>!Ii(i).call(i,e)))}else n=e;n=function(e){const t=[];return uw.forEach((n=>{Ii(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Ii(uw).call(uw,e))))}(n)}else n=e;var i,r;return n};function pw(e){var t,n;if(!e&&Ii(t=Fb("AREAS")).call(t,vC.EXTENSIONS))return oT.debug("update area from ap : reset"),void fw(yT,!0);if(!Ii(n=Fb("AREAS")).call(n,vC.GLOBAL)||!e)return;let i=TC.EXTENSIONS;i&&(i={CODE:aw(vC.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},oT.debug("update area from ap success: ".concat(e,",config is "),i),Vb("AREAS",[vC.EXTENSIONS],!0),Object.keys(i).map((e=>{Vb(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})))}function fw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vT.reportApiInvoke(null,{name:hv.SET_AREA,options:e,tag:pv.TRACER});try{let i=[];if("string"==typeof e&&(i=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Ii(SC).call(SC,e))throw new ZT(H_.INVALID_PARAMS,"invalid area code")})),i=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new ZT(H_.INVALID_PARAMS,"area code is needed");let r=t;"string"==typeof t&&(r=[t]),i=n?hw(r,n):r}if(!t){if(Bb.AREAS){const e=new ZT(H_.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void oT.warning("setArea is prohibited because of config-distribute")}if(Ii(i).call(i,vC.GLOBAL)&&Fb("AREAS")===vC.EXTENSIONS){const e=new ZT(H_.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void oT.warning("setArea is prohibited because of ap extensions")}}Vb("AREAS",i,t);const r=cw(i);Object.keys(r).map((e=>{Vb(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})),oT.debug("set area success:",i.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mw(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Ew=1;function _w(e,t,n,i,r){Ew+=1;const s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:Ew,requestId:Ew,version:xb,cname:n.cname},o={service_name:t,json_body:JSON.stringify(s)};let a,c,d=e[0];return Ey((async()=>{a=Date.now();const e=await sw(d,{data:o,cancelToken:i,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new ZT(H_.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw oT.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new ZT(H_.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw oT.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new ZT(H_.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw oT.error(e.toString()),e}const r=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(Fb("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return Fb("LIVE_STREAMING_ADDRESS")&&(r.addressList=Fb("LIVE_STREAMING_ADDRESS")instanceof Array?Fb("LIVE_STREAMING_ADDRESS"):[Fb("LIVE_STREAMING_ADDRESS")]),gw(gw({},r),{},{responseTime:c})}),((i,r)=>(vT.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(i.addressList),firstSuccess:0===r,responseTime:c,serverIp:e[r%e.length]}),!1)),((i,r)=>(vT.apworkerEvent(n.sid,{success:!1,sc:i.data&&i.data.code||200,serviceName:t,responseTime:c,serverIp:e[r%e.length]}),!!(i.code!==H_.OPERATION_ABORTED&&i.code!==H_.UNEXPECTED_RESPONSE||i.data&&i.data.retry)&&(d=e[(r+1)%e.length],!0))),r)}let vw=1;function yw(e,t,n,i){let{url:r,areaCode:s}=e;const o=Date.now();let a;const[c,d]=Aw(t,s,[IA.CHOOSE_SERVER]);let l=Iv.networkState;return Ey((async()=>{l&&Iv.networkState===_v.OFFLINE&&Iv.onlineWaiter&&await c_.race([Iv.onlineWaiter,ny(i&&i.maxRetryTimeout||my.maxRetryTimeout)]),l=Iv.networkState;const{data:e,headers:s}=await sw(r,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);a="1"===s.http3?1:-1,vT.reportResourceTiming(r,t.sid),bw(e,r,t,o,[IA.CHOOSE_SERVER],a);const d=WA(e,IA.CHOOSE_SERVER);return Tw(d),jA(d,r)}),(e=>(e&&vT.joinChooseServer(t.sid,{lts:o,succ:!0,csAddr:r,opid:d,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[IA.CHOOSE_SERVER].toString(),isHttp3:a}),!1)),(e=>e.code!==H_.OPERATION_ABORTED&&(e.code===H_.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(vT.joinChooseServer(t.sid,{lts:o,succ:!1,csAddr:r,serverList:null,opid:d,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[IA.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:l}),isHttp3:a}),oT.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))),i)}function Sw(e,t,n,i){let r,{url:s,areaCode:o,serviceIds:a}=e;const c=Date.now(),[d,l]=Aw(t,o,a);let u;return Ey((async()=>{u&&Iv.networkState===_v.OFFLINE&&Iv.onlineWaiter&&await c_.race([Iv.onlineWaiter,ny(i&&i.maxRetryTimeout||my.maxRetryTimeout)]),u=Iv.networkState;const{data:e,headers:o}=await sw(s,{data:d,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);r="1"===o.http3?1:-1,vT.reportResourceTiming(s,t.sid),bw(e,s,t,c,a,r);const l=WA(e,IA.CHOOSE_SERVER),h=WA(e,"proxy5"===t.cloudProxyServer?IA.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?IA.CLOUD_PROXY:IA.CLOUD_PROXY_FALLBACK);return Tw(l),{gatewayInfo:jA(l,s),proxyInfo:h,url:s}}),(e=>(e.gatewayInfo&&vT.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:s,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:l,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:r}),e.proxyInfo&&vT.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:s,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==H_.OPERATION_ABORTED&&(e.code===H_.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(vT.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:s,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:u})}),oT.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),i)}const bw=(e,t,n,i,r,s)=>{const o=[],a=o=>{4096===o.flag?vT.joinChooseServer(n.sid,{lts:i,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:o.error.message,csIp:o.error.data&&o.error.data.csIp,unilbsServerIds:r.toString(),isHttp3:s}):1048576!==o.flag&&4194304!==o.flag&&4194310!==o.flag||vT.joinWebProxyAP(n.sid,{lts:i,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:o.error.code,eventType:n.cloudProxyServer,unilbsServerIds:r.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)oT.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new ZT(H_.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};o.push(n),a(n)}if(0!==n){const i=XC(n),r={error:new ZT(H_.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?oT.warning(r.error.toString()):o.push(r),a(r)}})),o.length)throw oT.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(o.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new ZT(H_.CAN_NOT_GET_GATEWAY_SERVER,o.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!o.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(o.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},Tw=e=>{var t,n,i,r;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new ZT(H_.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(Fb("AP_AREA")&&(null!==(i=e.detail)&&void 0!==i&&i[23]&&"string"==typeof(null===(r=e.detail)||void 0===r?void 0:r[23])?pw(e.detail[23].toLowerCase()):pw()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let i=0;i<n.length;i++){var s;const t=xA(s=n[i]).call(s);e.addresses[i]&&n&&(e.addresses[i].fingerprint=t)}}if(Fb("GATEWAY_ADDRESS")&&Fb("GATEWAY_ADDRESS").length>0){oT.debug("assign gateway address to",Fb("GATEWAY_ADDRESS"));const t=Fb("GATEWAY_ADDRESS").map((t=>{var n,i;const r=null!==(n=null===(i=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===i?void 0:i.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:r}}));e.addresses=t}},Cw=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=XC(t.buffer.code);throw new ZT(H_.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw oT.debug("update ticket request received ap response without response body:",t),new ZT(H_.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},Aw=(e,t,n)=>{const i=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:i,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:gw({6:e.stringUid,11:t,12:Fb("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};r.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const s=new FormData;return s.append("request",JSON.stringify(r)),[s,i]},ww=(e,t)=>{const n=Math.floor(Math.random()*10**12),i={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},r=new FormData;return r.append("request",JSON.stringify(i)),[r,n]};let Rw=0;function Iw(e){return c_.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const Nw=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:i,allFailedhandler:r,promisesCollector:s}=e,o=0;const a=t;let c,d=0;const l=async()=>{const e=(()=>{const e=o*a,t=e+a;return n.slice(e,t).map(i)})();s&&s.push(...e);try{c=await Iw(e)}catch(e){if(d+=a,o++,!(d>=n.length))return void await l();r(e)}e.forEach((e=>e.cancel()))};return await l(),c};async function Ow(e,t,n,i){const r=async function(e,t,n,i){let r=null;const s=[],o=async()=>{const r=Fb("WEBCS_DOMAIN").slice(0,Fb("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:ow()}))),o=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:r.map((e=>e.url))}),a=await Nw({fragementLength:Fb("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:i=>(oT.debug("[".concat(e.clientId,"] Connect to choose_server:"),i.url),yw(i,e,t,n)),allFailedhandler:e=>{throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},o),e[0]},promisesCollector:s});return i.recordJoinChannelService({endTs:Date.now(),status:"success"},o),a},a=async()=>{if(await ny(1e3),null!==r)return r;const o=Fb("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:ow()}))),a=i.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((e=>e.url))}),c=await Nw({fragementLength:Fb("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:i=>(oT.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),i.url),yw(i,e,t,n)),allFailedhandler:e=>{throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:s});return i.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return r=await Iw([o(),a()]),s.length&&s.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}(e,t,n,i);return{gatewayInfo:await r}}async function kw(e,t,n,i,r){const s=e.cloudProxyServer;if("disabled"===s){if(!i)return;if(e.useLocalAccessPoint)return await Ow(e,t,n,r);if(Fb("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:i,proxyInfo:s}=await xw(e,t,n,r);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:i};const a=s.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||ST.tcpport,udpport:e.udpport||ST.udpport,username:e.username||ST.username,password:e.password||ST.password,forceturn:!1,security:!0})));if(r.useP2P){var o;const t=null!==(o=e.uid)&&void 0!==o?o:i.uid,n="glb:".concat(t.toString()),r=await cv(n),c=s.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||ST.tcpport,udpport:e.udpport||ST.udpport,username:n,password:r,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:"manual",servers:a},{gatewayInfo:i}}return await Ow(e,t,n,r)}const{proxyInfo:a,gatewayInfo:c}=await xw(e,t,n,r),d={gatewayInfo:c},l=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===s?void 0:e.tcpport?e.tcpport:ST.tcpport,udpport:"proxy4"===s?void 0:e.udpport?e.udpport:ST.udpport,username:e.username||ST.username,password:e.password||ST.password,forceturn:"proxy4"!==s,security:"proxy5"===s})));if(r.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,n="glb:".concat(t.toString()),i=await cv(n),r=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===s?void 0:e.tcpport||ST.tcpport,udpport:"proxy4"===s?void 0:e.udpport||ST.udpport,username:n,password:i,forceturn:"proxy4"!==s,security:"proxy5"===s})));l.push(...r)}return e.turnServer={mode:"manual",servers:l},oT.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(s)),d}async function Dw(e,t,n,i,r){const s=Fb("ACCOUNT_REGISTER").slice(0,Fb("AJAX_REQUEST_CONCURRENT"));let o=[];o=t.proxyServer?s.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):s.map((e=>"https://".concat(e,"/api/v1")));const a=null==r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:o});try{const s=await async function(e,t,n,i,r){const s=Date.now(),o={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await Ey((()=>sw(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:o,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,i)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw oT.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),vT.reqUserAccount(o.sid,{lts:s,success:!1,serverAddr:a,stringUid:o.string_uid,uid:n.uid,errorCode:H_.INVALID_UINT_UID_FROM_STRING_UID,extend:o}),new ZT(H_.INVALID_UINT_UID_FROM_STRING_UID);return vT.reqUserAccount(o.sid,{lts:s,success:!0,serverAddr:a,stringUid:o.string_uid,uid:n.uid,errorCode:null,extend:o}),!1}const r=XC(n.code);return r.retry&&(a=e[(i+1)%e.length]),vT.reqUserAccount(o.sid,{lts:s,success:!1,serverAddr:a,stringUid:o.string_uid,uid:n.uid,errorCode:r.desc,extend:o}),r.retry}),((t,n)=>t.code!==H_.OPERATION_ABORTED&&(vT.reqUserAccount(o.sid,{lts:s,success:!1,serverAddr:a,stringUid:o.string_uid,uid:null,errorCode:t.code,extend:o}),a=e[(n+1)%e.length],!0)),r);if(0!==c.code){const e=XC(c.code);throw new ZT(H_.UNEXPECTED_RESPONSE,e.desc)}return c}(o,e,t,n,i);return null==r||r.recordJoinChannelService({status:"success",endTs:Date.now()},a),s.uid}catch(e){throw null==r||r.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function Pw(e,t,n){const i=Fb("CDS_AP").slice(0,Fb("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),r=i.map((i=>function(e,t,n,i){const r=y_(),s={flag:64,cipher_method:0,features:{device:r.name,system:r.os,system_general:navigator.userAgent,vendor:t.appId,version:xb,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return Ey((()=>sw(e,{data:s,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==H_.OPERATION_ABORTED),i)}(i,e,t,n)));let s=null,o=null,a={};try{s=await Iw(r)}catch(e){if(e.code===H_.OPERATION_ABORTED)throw e;o=e}if(r.forEach((e=>e.cancel())),vT.reportApiInvoke(e.sid,{name:hv.REQUEST_CONFIG_DISTRIBUTE,options:{error:o,res:s}}).onSuccess(),s&&s.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),i={};return n.forEach((e=>{var n;const r=xA(n=e.slice(4)).call(n),s=JSON.parse(t[e])[1];i[r]=s})),i}(s)}catch(e){}return a}async function xw(e,t,n,i){const r=Fb("PROXY_SERVER_TYPE3"),s=(e,t,n)=>{let i=n||r;return Array.isArray(i)&&(i=t%2==0?r[1]:r[0]),"https://".concat(i,"/ap/?url=").concat(e)};let o=null;const a=[],c=async()=>{const r=Fb("WEBCS_DOMAIN").slice(0,Fb("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let i;return i="disabled"===e.cloudProxyServer&&e.proxyServer?s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:i,areaCode:ow(),serviceIds:[IA.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?IA.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?IA.CLOUD_PROXY:IA.CLOUD_PROXY_FALLBACK]}})),o=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:r.map((e=>e.url))}),c=await Nw({fragementLength:Fb("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:i=>(oT.debug("[".concat(e.clientId,"] Connect to choose_server:"),i.url),Sw(i,e,t,n)),allFailedhandler:e=>{throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},o),e[0]},promisesCollector:a});return i.recordJoinChannelService({endTs:Date.now(),status:"success"},o),c},d=async()=>{if(await ny(1e3),null!==o)return o;const r=Fb("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let i;return i="disabled"===e.cloudProxyServer&&e.proxyServer?s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:i,areaCode:ow(),serviceIds:[IA.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?IA.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?IA.CLOUD_PROXY:IA.CLOUD_PROXY_FALLBACK]}})),c=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:r.map((e=>e.url))}),d=await Nw({fragementLength:Fb("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:i=>(oT.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),i.url),Sw(i,e,t,n)),allFailedhandler:e=>{throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return i.recordJoinChannelService({endTs:Date.now(),status:"success"},c),d};let l,u,h;try{({gatewayInfo:l,proxyInfo:u,url:h}=await Iw([c(),d()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!l||!u)throw new ZT(H_.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=h,"disabled"!==e.cloudProxyServer&&Array.isArray(r)&&h){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(h)[1];Ii(r).call(r,t)&&(e.proxyServer=t,oT.setProxyServer(t),vT.setProxyServer(t))}return o={gatewayInfo:l,proxyInfo:await GA(u,l.uid)},o}async function Lw(e,t,n,i){const r=Fb("UAP_AP").slice(0,Fb("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await _w(r,e,t,n,i)}async function Mw(e,t,n){const i=Fb("UAP_AP").slice(0,Fb("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),r=i.map((i=>function(e,t,n,i){const r={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:xb,cname:t.cname,uid:t.uid.toString(),requestId:vw,seq:vw};vw+=1;const s={service_name:"tele_channel",json_body:JSON.stringify(r)};return Ey((async()=>{const t=await sw(e,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new ZT(H_.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw oT.error(e.toString()),e}const i=JSON.parse(t.json_body);if(200!==i.code){const e=new ZT(H_.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(i.code,", reason: ").concat(i.reason));throw oT.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new ZT(H_.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw oT.error(e.toString()),e}return{vid:i.vid,workerToken:i.workerToken,addressList:(Fb("CHANNEL_MEDIA_RELAY_SERVERS")||i.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(Fb("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==H_.OPERATION_ABORTED&&e.code!==H_.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),i)}(i,e,t,n)));try{const e=await Iw(r);return r.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function Uw(e,t,n){let i=null;const r=[],s=async s=>{const o=Fb(s?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return s&&(await ny(1e3),null!==i)?i:await Nw({fragementLength:Fb("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:i=>(oT.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(s?"backup":""," choose_server:"),i),function(e,t,n,i){const[r]=ww(t,[IA.CHOOSE_SERVER]);let s=Iv.networkState;return Ey((async()=>{s&&Iv.networkState===_v.OFFLINE&&Iv.onlineWaiter&&await c_.race([Iv.onlineWaiter,ny(i&&i.maxRetryTimeout||my.maxRetryTimeout)]),s=Iv.networkState;const t=await sw(e,{data:r,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return Cw(t,e)}),(()=>!1),(e=>e.code!==H_.OPERATION_ABORTED&&(e.code===H_.UPDATE_TICKET_FAILED?e.data.retry:(oT.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),i)}(i,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:r})};try{return i=await Iw([s(!1),s(!0)]),r.length&&r.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jw(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Fw extends dv{get isSuccess(){return!!this.configs}constructor(){super(),sh(this,"configs",void 0),sh(this,"joinInfo",void 0),sh(this,"cancelToken",void 0),sh(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),sh(this,"interval",void 0),sh(this,"mutex",new py("config-distribute")),sh(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),Fb("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),Fb("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,vT.reportApiInvoke(null,{options:void 0,name:hv.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:pv.TRACER}).onSuccess(JSON.stringify(Bb))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void oT.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await Pw(this.joinInfo,this.cancelToken,this.retryConfig),oT.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new ZT(H_.NETWORK_RESPONSE_ERROR,e);oT.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(CC.UPDATE_BITRATE_LIMIT,e):this.emit(CC.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&Vw({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const n=ep(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let r=0;r<n.length;r++)for(let t=n.length-1;t>r;t--){const i=n[t];if("number"==typeof e[i].__priority){const r=e[i].__priority,s=n[t-1];if("number"==typeof e[s].__priority){if(!(r>e[s].__priority))continue;{const e=i;n[t]=n[t-1],n[t-1]=e}}else{const e=i;n[t]=n[t-1],n[t-1]=e}}}const i={};n.forEach((t=>{const n=e[t],r=n.__expires;Object.keys(n).forEach((e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(i,e)||(i[e]=Vw({value:n[e]},r&&{expires:r}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":if(Object.prototype.hasOwnProperty.call(jb,n)){const{value:i,expires:r}=e[n];if(r&&r<=t)return;Bb[n]=i,jb[n]=i,oT.debug("Update global parameters from config distribute",n,i)}}}))}catch(t){oT.error("Error update config immediately: ".concat(e),t.message)}}(i);const e=JSON.stringify(i),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),oT.debug("Caching global parameters ".concat(e))}catch(e){oT.error("Error caching global parameters:",e.message)}}}const Bw={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1};function Ww(){return Bw}var Gw;function Hw(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function Kw(e,t,n,i,r){return{width:e,height:t,frameRate:n,bitrateMin:i,bitrateMax:r}}function zw(e,t,n,i,r){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:i,bitrateMax:r}}function Yw(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}!function(e){e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(Gw||(Gw={}));const qw={"90p":Kw(160,90),"90p_1":Kw(160,90),"120p":Kw(160,120,15,30,65),"120p_1":Kw(160,120,15,30,65),"120p_3":Kw(120,120,15,30,50),"120p_4":Kw(212,120),"180p":Kw(320,180,15,30,140),"180p_1":Kw(320,180,15,30,140),"180p_3":Kw(180,180,15,30,100),"180p_4":Kw(240,180,15,30,120),"240p":Kw(320,240,15,40,200),"240p_1":Kw(320,240,15,40,200),"240p_3":Kw(240,240,15,40,140),"240p_4":Kw(424,240,15,40,220),"360p":Kw(640,360,15,80,400),"360p_1":Kw(640,360,15,80,400),"360p_3":Kw(360,360,15,80,260),"360p_4":Kw(640,360,30,80,600),"360p_6":Kw(360,360,30,80,400),"360p_7":Kw(480,360,15,80,320),"360p_8":Kw(480,360,30,80,490),"360p_9":Kw(640,360,15,80,800),"360p_10":Kw(640,360,24,80,800),"360p_11":Kw(640,360,24,80,1e3),"480p":Kw(640,480,15,100,500),"480p_1":Kw(640,480,15,100,500),"480p_2":Kw(640,480,30,100,1e3),"480p_3":Kw(480,480,15,100,400),"480p_4":Kw(640,480,30,100,750),"480p_6":Kw(480,480,30,100,600),"480p_8":Kw(848,480,15,100,610),"480p_9":Kw(848,480,30,100,930),"480p_10":Kw(640,480,10,100,400),"720p":Kw(1280,720,15,120,1130),"720p_auto":Kw(1280,720,30,900,3e3),"720p_1":Kw(1280,720,15,120,1130),"720p_2":Kw(1280,720,30,120,2e3),"720p_3":Kw(1280,720,30,120,1710),"720p_5":Kw(960,720,15,120,910),"720p_6":Kw(960,720,30,120,1380),"1080p":Kw(1920,1080,15,120,2080),"1080p_1":Kw(1920,1080,15,120,2080),"1080p_2":Kw(1920,1080,30,120,3e3),"1080p_3":Kw(1920,1080,30,120,3150),"1080p_5":Kw(1920,1080,60,120,4780),"1440p":Kw(2560,1440,30,120,4850),"1440p_1":Kw(2560,1440,30,120,4850),"1440p_2":Kw(2560,1440,60,120,7350),"4k":Kw(3840,2160,30,120,8910),"4k_1":Kw(3840,2160,30,120,8910),"4k_3":Kw(3840,2160,60,120,13500)},Jw=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],Qw={"480p":zw(640,480,5),"480p_1":zw(640,480,5),"480p_2":zw(640,480,30),"480p_3":zw(640,480,15),"720p":zw(1280,720,5),"720p_auto":Kw(1280,720,30,900,3e3),"720p_1":zw(1280,720,5),"720p_2":zw(1280,720,30),"720p_3":zw(1280,720,15),"1080p":zw(1920,1080,5),"1080p_1":zw(1920,1080,5),"1080p_2":zw(1920,1080,30),"1080p_3":zw(1920,1080,15)},Xw={"1SL1TL":Yw(1,1),"3SL3TL":Yw(3,3),"2SL3TL":Yw(2,3)};function Zw(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},qw[e]):e}function $w(e){return"string"==typeof e?Object.assign({},Qw[e]):e}function eR(e){return"string"==typeof e?Object.assign({},Xw[e]):e}const tR={speech_low_quality:Hw(16e3,!1),speech_standard:Hw(32e3,!1,18),music_standard:Hw(48e3,!1),standard_stereo:Hw(48e3,!0,56),high_quality:Hw(48e3,!1,128),high_quality_stereo:Hw(48e3,!0,192)};function nR(e){return"string"==typeof e?Object.assign({},tR[e]):e}const iR=[];function rR(e){return Y_(e,"mediaSource",["screen","window","application"]),!0}var sR,oR,aR,cR,dR,lR,uR,hR,pR,fR;!function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(sR||(sR={})),function(e){e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream"}(oR||(oR={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(aR||(aR={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(cR||(cR={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(dR||(dR={})),function(e){e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received"}(lR||(lR={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(uR||(uR={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed"}(hR||(hR={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(pR||(pR={})),function(e){e.UPDATE_TRACK_SOURCE="update-track-source"}(fR||(fR={}));const mR={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},gR={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},ER={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},_R={uplinkNetworkQuality:0,downlinkNetworkQuality:0},vR={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var yR,SR,bR,TR,CR,AR;!function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(yR||(yR={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(SR||(SR={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(bR||(bR={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(TR||(TR={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(CR||(CR={})),function(e){e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen"}(AR||(AR={}));const wR={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};var RR;!function(e){e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error"}(RR||(RR={}));class IR extends dv{constructor(e,t){super(),sh(this,"_ID",void 0),sh(this,"_rtpTransceiver",void 0),sh(this,"_lowRtpTransceiver",void 0),sh(this,"_hints",[]),sh(this,"_isClosed",!1),sh(this,"_originMediaStreamTrack",void 0),sh(this,"_mediaStreamTrack",void 0),sh(this,"_external",{}),this._ID=t||iy(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,function(e){Ii(iR).call(iR,e)||iR.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=vT.reportApiInvoke(null,{name:hv.GET_MEDIA_STREAM_TRACK,options:[],tag:pv.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===aR.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=iR.indexOf(e);-1!==t&&iR.splice(t,1)}(this),this.emit(uR.CLOSED),this.removeAllListeners(lR.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===aR.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(lR.TRANSCEIVER_UPDATED,e,t)}}class NR extends IR{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),sh(this,"_enabled",!0),sh(this,"_muted",!1),sh(this,"_isExternalTrack",!1),sh(this,"_isClosed",!1),sh(this,"_enabledMutex",void 0),sh(this,"processor",void 0),sh(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new py("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,oT.debug("[".concat(this.getTrackId(),"] close")),this.emit(sR.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Av(this,sR.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){oT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(uR.TRACK_ENDED)}stateCheck(e,t){if(oT.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),z_(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new K_(H_.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",oT);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new K_(H_.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",oT)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():c_.resolve([])}}function OR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const kR=window.AudioContext||window.webkitAudioContext;let DR=null;const PR=new class extends dv{constructor(){super(...arguments),sh(this,"prevState",void 0),sh(this,"curState",void 0),sh(this,"currentTime",void 0),sh(this,"currentTimeStuckAt",void 0),sh(this,"interruptDetectorTrack",void 0),sh(this,"onLocalAudioTrackMute",(()=>{oT.info("ios15-interruption-start"),this.emit(Gw.IOS_15_16_INTERRUPTION_START)})),sh(this,"onLocalAudioTrackUnmute",(async()=>{oT.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?oT.info("ios15-interruption-end-canceled"):(DR&&await DR.suspend(),this.emit(Gw.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){oT.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){oT.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function xR(){if(!kR)return void oT.error("your browser is not support web audio");oT.info("create audio context");const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OR(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Fb("WEBAUDIO_INIT_OPTIONS"));oT.debug("audio context init option:",JSON.stringify(e)),DR=new kR(e),PR.curState=DR.state,DR.onstatechange=()=>{PR.prevState=PR.curState,PR.curState=DR?DR.state:void 0;const{prevState:e,curState:t}=PR,n="running"===t,i="interrupted"===t,r="running"===e,s="suspended"===e,o="interrupted"===e,a=y_().osVersion;(N_()||j_())&&r&&i&&(oT.info("ios".concat(a,"-interruption-start")),PR.emit(Gw.IOS_INTERRUPTION_START)),(N_()||j_())&&(s||o)&&n&&(oT.info("ios".concat(a,"-interruption-end")),PR.emit(Gw.IOS_INTERRUPTION_END)),e!==t&&PR.emit(Gw.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=DR)||void 0===e?void 0:e.currentTime;PR.currentTime!==t?(PR.currentTimeStuckAt&&(oT.debug("AudioContext current time resume at ".concat(t)),PR.currentTimeStuckAt=void 0),PR.currentTime=t):(t!==PR.currentTimeStuckAt&&(vT.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:pv.TRACER}).onSuccess(),oT.warning("AudioContext current time stuck at ".concat(t))),PR.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,i=!1,r=!1,s=!1;function o(t){"running"===e.state?a(!1):N_()||j_()?"suspended"===e.state&&(a(!0),t&&e.resume().then(d,d)):"closed"!==e.state&&(a(!0),t&&e.resume().then(d,d))}function a(e){if(i!==e){i=e;for(let n=0,i=t;n<i.length;n+=1){const t=i[n];e?window.addEventListener(t,l,{capture:!0,passive:!0}):window.removeEventListener(t,l,{capture:!0,passive:!0})}}}function c(){o(!0)}function d(){o(!1)}function l(){o(!0)}function u(e){if(!s)if(n.paused)if(e){let t;h(!1),s=!0;try{t=n.play(),t?t.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch(e){p()}}else h(!0);else h(!1)}function h(e){if(r!==e){r=e;for(let n=0,i=t;n<i.length;n++){const t=i[n];e?window.addEventListener(t,f,{capture:!0,passive:!0}):window.removeEventListener(t,f,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),s=!1,u(!1)}function f(){u(!0)}if(N_()){const t=e.createMediaStreamDestination(),i=document.createElement("div");i.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=i.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,u(!0)}PR.on(Gw.STATE_CHANGE,c),o(!1)}(DR)}function LR(){if(!DR){if(xR(),!DR)throw new K_(H_.NOT_SUPPORTED,"can not create audio context");return DR}return DR}function MR(e){if(function(){if(null!==UR)return UR;const e=LR(),t=e.createBufferSource(),n=e.createGain(),i=e.createGain();t.connect(n),t.connect(i),t.disconnect(n);let r=!1;try{t.disconnect(n)}catch(e){r=!0}return t.disconnect(),UR=r,r}())return;const t=e.connect,n=e.disconnect;e.connect=(n,i,r)=>{var s;return e._inputNodes||(e._inputNodes=[]),Ii(s=e._inputNodes).call(s,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,i,r)):t.call(e,n,i)),e},e.disconnect=(i,r,s)=>{n.call(e),i?Gv(e._inputNodes,i):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let UR=null;function jR(e,t){let n=!1;const i=1/t;if(Fb("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*i)}else{const t=LR();let r=t.createGain();r.gain.value=0,r.connect(t.destination);const s=()=>{if(n)return void(r=null);const o=t.createOscillator();o.onended=s,o.connect(r),o.start(0),o.stop(t.currentTime+i),e(t.currentTime)};s()}return()=>{n=!0}}class VR{constructor(){sh(this,"context",void 0),sh(this,"analyserNode",void 0),sh(this,"sourceNode",void 0),this.context=LR(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||N_()||j_()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=Fv(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){oT.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class FR extends dv{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),sh(this,"outputNode",void 0),sh(this,"outputTrack",void 0),sh(this,"isPlayed",!1),sh(this,"context",void 0),sh(this,"audioBufferNode",void 0),sh(this,"destNode",void 0),sh(this,"audioOutputLevel",0),sh(this,"volumeLevelAnalyser",void 0),sh(this,"_processedNode",void 0),sh(this,"playNode",void 0),sh(this,"isDestroyed",!1),sh(this,"onNoAudioInput",void 0),sh(this,"isNoAudioInput",!1),sh(this,"_noAudioInputCount",0),this.context=LR(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),MR(this.outputNode),this.volumeLevelAnalyser=new VR}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(pR.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Ww().webAudioMediaStreamDest)throw new K_(H_.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&Kv((()=>{PR.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;N_()||j_()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let i=!1;for(let r=0;r<n.length;r++)0!==n[r]&&(i=!0);return i?(this.isNoAudioInput=!1,!0):(await ny(200),await this.checkHasAudioInput(e?e+1:1)&&i)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class BR extends FR{get isFreeze(){return!1}constructor(e,t,n){var i;if(super(),sh(this,"sourceNode",void 0),sh(this,"track",void 0),sh(this,"clonedTrack",void 0),sh(this,"audioElement",void 0),sh(this,"isCurrentTrackCloned",!1),sh(this,"isRemoteTrack",!1),sh(this,"originVolumeLevelAnalyser",void 0),sh(this,"rebuildWebAudio",(async()=>{if(oT.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void oT.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>oT.info("resume success"))),oT.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),MR(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),MR(this.outputNode),this.emit(pR.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new K_(H_.UNEXPECTED_ERROR);this.track=e;const r=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(r),MR(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,oT.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));MR(t),this.originVolumeLevelAnalyser=new VR,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=r;const s=y_();t&&s.os===f_.IOS&&Number(null===(i=s.osVersion)||void 0===i?void 0:i.split(".")[0])<15&&(PR.on(Gw.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),MR(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(pR.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),PR.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),oT.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));MR(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function WR(e,t,n){const i=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,r={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:i(t.height,1080),maxWidth:i(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(r.video.mandatory.maxFrameRate=t.frameRate.max,r.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(r.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(r)}async function GR(e,t){const n=await HR(e.mediaSource),{sourceId:i,audio:r}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new c_(((n,i)=>{const r=document.createElement("div");r.innerText="share screen",r.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const d=document.createElement("button");d.innerHTML="cancel",d.setAttribute("style","width: 85px;"),d.onclick=()=>{document.body.removeChild(h);const e=new Error("NotAllowedError");e.name="NotAllowedError",i(e)};let l=t;const u=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=l,e.onchange=()=>{l=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(d),s.appendChild(o),s.appendChild(a),s.appendChild(c);const h=document.createElement("div");h.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),h.appendChild(r),h.appendChild(s),document.body.appendChild(h),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let i=e.thumbnail;try{const{width:e}=i.getSize();e>1920&&(i=i.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+i.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(h),n({sourceId:e.id,audio:l})},a.appendChild(t)}}))}))}(n,t);return await WR(i,e,r)}async function HR(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=uv();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new K_(H_.ELECTRON_IS_NULL);let i=null;try{var r;i=(null===(r=n.desktopCapturer)||void 0===r?void 0:r.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){i=null}i&&i.then||(i=new c_(((e,i)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?i(t):e(n)}))})));try{return await i}catch(e){throw new K_(H_.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}function KR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const zR=new py("safari");let YR=!1,qR=!1;async function JR(e,t){let n=0,i=null;for(;n<2;)try{i=await QR(e,t,n>0);break}catch(e){if(e instanceof K_)throw oT.error("[".concat(t,"] ").concat(e.toString())),e;const i=XR(e.name||e.code||e,e.message);if(i.code===H_.MEDIA_OPTION_INVALID){oT.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await ny(500);continue}throw oT.error("[".concat(t,"] ").concat(i.toString())),i}if(!i)throw new K_(H_.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return i}async function QR(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new K_(H_.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const i=Ww(),r=new MediaStream;if(e.audioSource&&r.addTrack(e.audioSource),e.videoSource&&r.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return oT.debug("Using Video Source/ Audio Source"),r;if(e.screen)if(uv())e.screen.sourceId?ZR(r,await WR(e.screen.sourceId,e.screen,e.screenAudio)):ZR(r,await GR(e.screen,e.screenAudio));else if(w_()&&e.screen.extensionId&&e.screen.mandatory){if(!i.getStreamFromExtension)throw new K_(H_.NOT_SUPPORTED,"This browser does not support screen sharing");oT.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(o=e.screen.extensionId,a=t,new c_(((e,t)=>{try{chrome.runtime.sendMessage(o,{getStream:!0},(n=>{if(!n||!n.streamId)return oT.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new K_(H_.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){oT.error("[".concat(a,"] AgoraRTC screensharing plugin is not accessible(").concat(o,")"),e.toString()),t(new K_(H_.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,ZR(r,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(i.getDisplayMedia){var s;e.screen.mediaSource&&rR(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(s=e.screen.displaySurface)&&void 0!==s?s:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:i,surfaceSwitching:o,systemAudio:a}=e.screen,c={selfBrowserSurface:i,surfaceSwitching:o,systemAudio:a};!i&&delete c.selfBrowserSurface,!o&&delete c.surfaceSwitching,!a&&delete c.systemAudio,oT.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:!!e.screenAudio,controls:c}));const d=await navigator.mediaDevices.getDisplayMedia(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KR(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:n,audio:!!e.screenAudio},c));ZR(r,d)}else{if(!I_())throw oT.error("[".concat(t,"] This browser does not support screenSharing")),new K_(H_.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&rR(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};oT.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),ZR(r,await navigator.mediaDevices.getUserMedia(n))}}var o,a;if(!e.video&&!e.audio)return r;let c={video:e.video,audio:e.audio},d=Fb("MEDIA_DEVICE_CONSTRAINTS");if(d)try{"string"==typeof d&&(d=JSON.parse(d)),c=dy(c,d)}catch(e){}oT.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),y_();let l,u=null;(R_()||N_()||T_())&&(u=await zR.lock());try{l=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(YR=!0),c.video&&(qR=!0),ZR(r,l),u&&u(),r}function XR(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new K_(H_.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new K_(H_.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new K_(H_.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new K_(H_.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new K_(H_.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new K_(H_.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return oT.error("getUserMedia unexpected error",e),new K_(H_.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function ZR(e,t){const n=e.getVideoTracks()[0],i=e.getAudioTracks()[0],r=t.getVideoTracks()[0],s=t.getAudioTracks()[0];s&&(i&&e.removeTrack(i),e.addTrack(s)),r&&(n&&e.removeTrack(n),e.addTrack(r))}const $R=new class extends dv{get state(){return this._state}set state(e){e!==this._state&&(this.emit(TR.STATE_CHANGE,e),this._state=e)}constructor(){super(),sh(this,"_state",bR.IDLE),sh(this,"isAccessMicrophonePermission",!1),sh(this,"isAccessCameraPermission",!1),sh(this,"lastAccessMicrophonePermission",!1),sh(this,"lastAccessCameraPermission",!1),sh(this,"checkdeviceMatched",!1),sh(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(Fb("ENUMERATE_DEVICES_INTERVAL")||(W_()||S_()===f_.HARMONY_OS)&&B_())&&this.updateDevicesInfo()}),Fb("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>oT.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new K_(H_.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const i=await navigator.mediaDevices.enumerateDevices(),r=this.checkMediaDeviceInfoIsOk(i);let s=!this.isAccessMicrophonePermission&&e,o=!this.isAccessCameraPermission&&t;r.audio&&(s=!1),r.video&&(o=!1);let a=null,c=null,d=null;if(!n&&(s||o)){if(zR.isLocked&&(oT.debug("[device manager] wait GUM lock"),(await zR.lock())(),oT.debug("[device manager] GUM unlock")),YR&&(s=!1,this.isAccessMicrophonePermission=!0),qR&&(o=!1,this.isAccessCameraPermission=!0),oT.debug("[device manager] check media device permissions",e,t,s,o),s&&o){try{d=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=XR(e.name||e.code||e,e.message);if(t.code===H_.PERMISSION_DENIED)throw t;oT.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(s){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=XR(e.name||e.code||e,e.message);if(t.code===H_.PERMISSION_DENIED)throw t;oT.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(o){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=XR(e.name||e.code||e,e.message);if(t.code===H_.PERMISSION_DENIED)throw t;oT.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}oT.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),d&&d.getTracks().forEach((e=>e.stop())),a=null,c=null,d=null,new K_(H_.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new K_(H_.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=bR.INITING;try{await this.updateDevicesInfo(),this.state=bR.INITEND}catch(e){throw oT.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=bR.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new K_(H_.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?oT.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):oT.warning("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):oT.debug("[device-check] default input or output not found")}const i=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const i=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(i?i.state:"INACTIVE")){const i={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),i),n.push(i)}i&&(i.updateAt=t)})),this.deviceInfoMap.forEach(((e,i)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==bR.INITEND)return i.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(i.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(TR.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(TR.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(TR.PLAYOUT_DEVICE_CHANGED,e)}})),i.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),i.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),i={audio:!1,video:!1};for(const r of t)if(r.label&&r.deviceId){i.audio=!0;break}for(const r of n)if(r.label&&r.deviceId){i.video=!0;break}return i}};let eI=!1;const tI=new class extends dv{constructor(){super(...arguments),sh(this,"onAutoplayFailed",void 0),sh(this,"onAudioAutoplayFailed",void 0)}};function nI(){if(y_(),!eI){const e=t=>{t.preventDefault(),eI=!1,G_()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};eI=!0,G_()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),oT.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),tI.onAutoplayFailed?tI.onAutoplayFailed():tI.onAudioAutoplayFailed?oT.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):oT.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),tI.emit("autoplay-failed")}}function iI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sI(e,t,n,i){if(!e)return;const r=vT.getBaseInfoBySessionId(e);if(!r)return;const s=r.info,o=Date.now(),a=rI(rI({},s),{},{vid:void 0===s.vid?0:Number(s.vid),lts:o,elapse:o-r.startTime,cbRegistered:tI.onAutoplayFailed||tI.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:i,extend:void 0});vT.send({type:hT.AUTOPLAY_FAILED,data:a},!0)}const oI=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],aI=new class{constructor(){sh(this,"onAutoplayFailed",void 0),sh(this,"elementMap",new Map),sh(this,"elementStateMap",new Map),sh(this,"elementsNeedToResume",[]),sh(this,"sinkIdMap",new Map),sh(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,i]=t;const r=this.elementStateMap.get(n),s=i.srcObject.getAudioTracks()[0],o=s&&s.readyState;if(oT.debug("resume after interrupted, ele: ".concat(r," audio: ").concat(o," ").concat(e)),"live"===o){if(e)return i.pause(),void i.play();if("running"===PR.curState)return L_()?(i.pause(),void i.play()):void(r&&"paused"===r&&i.play())}}))})),sh(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const i=n.srcObject.getAudioTracks()[0];i&&"live"===i.readyState&&(oT.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),PR.on(Gw.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),PR.on(Gw.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),PR.on(Gw.STATE_CHANGE,(()=>{N_()&&"suspended"===PR.prevState&&"running"===PR.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new K_(H_.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,i){if(this.elementMap.has(t))return;const r=document.createElement("audio");r.autoplay=!0,r.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,r),this.elementMap.set(t,r),this.elementStateMap.set(t,CR.INIT),this.setVolume(t,n);const s=this.sinkIdMap.get(t);if(s)try{r.setSinkId(s).catch((e=>{oT.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){oT.warning("[".concat(t,"] set sink id failed"),e.toString())}const o=r.play();o&&o.then&&o.catch((e=>{i&&sI(i,"audio",e.message,t),oT.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(oT.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(r),Kv((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),nI()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){oI.forEach((n=>{t.addEventListener(n,(n=>{const i=this.elementStateMap.get(e),r="pause"===n.type?"paused":n.type;if(oT.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(r)),"error"===n.type){const n=null==t?void 0:t.error;n&&oT.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,r)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{oT.debug("Auto resume audio element success")})).catch((e=>{oT.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new c_((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{G_()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function cI(){return function(e,t,n){const i=n.value;return"function"==typeof i&&(n.value=function(){this._isClosed&&new K_(H_.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",oT);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=i.apply(this,t);return r instanceof c_?new c_(((e,t)=>{r.then(e).catch(t)})):r}),n}}function dI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function lI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class uI extends dv{constructor(e){super(),sh(this,"name","VideoProcessorDestination"),sh(this,"ID","0"),sh(this,"_source",void 0),sh(this,"videoContext",void 0),sh(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new K_(H_.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new K_(H_.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(yR.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(yR.ON_TRACK,void 0)}}class hI extends dv{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),sh(this,"constraintsMap",new Map),sh(this,"statsRegistry",[]),sh(this,"usageRegistry",[]),sh(this,"trackId",void 0),sh(this,"direction",void 0),sh(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await Cv(this,SR.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return oT.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Av(this,SR.REQUEST_UPDATE_CONSTRAINTS,Array.from(JT(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return oT.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Av(this,SR.REQUEST_UPDATE_CONSTRAINTS,Array.from(JT(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:i,cb:r}of this.statsRegistry)try{const s=r();e.push({processorID:t,processorName:n,type:i,stats:s})}catch(e){oT.error(new K_(H_.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof c_&&(n=await n),e.push(lI(lI({},n),{},{direction:this.direction}))}catch(e){oT.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class pI extends dv{constructor(e){super(),sh(this,"name","AudioProcessorDestination"),sh(this,"ID","0"),sh(this,"inputTrack",void 0),sh(this,"inputNode",void 0),sh(this,"audioProcessorContext",void 0),sh(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new K_(H_.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new K_(H_.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(yR.ON_TRACK,void 0),this.emit(yR.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(yR.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(yR.ON_NODE,this.inputNode))}}class fI extends dv{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),sh(this,"constraintsMap",new Map),sh(this,"statsRegistry",[]),sh(this,"audioContext",void 0),sh(this,"trackId",void 0),sh(this,"direction",void 0),sh(this,"usageRegistry",[]),sh(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return Cv(this,SR.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return oT.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Av(this,SR.REQUEST_UPDATE_CONSTRAINTS,Array.from(JT(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Av(this,SR.REQUEST_UPDATE_CONSTRAINTS,Array.from(JT(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:i,cb:r}of this.statsRegistry)try{const s=r();e.push({processorID:t,processorName:n,type:i,stats:s})}catch(e){oT.error(new K_(H_.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof c_&&(n=await n),e.push(lI(lI({},n),{},{direction:this.direction}))}catch(e){oT.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class mI extends dv{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),sh(this,"context",void 0),sh(this,"processSourceNode",void 0),sh(this,"outputTrack",void 0),sh(this,"processedNode",void 0),sh(this,"clonedTrack",void 0),sh(this,"outputNode",void 0),this.outputNode=new gI}setVolume(){}createOutputTrack(){throw new K_(H_.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class gI{disconnect(){}connect(){}}function EI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class vI extends NR{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?aI.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,i){super(e,n),sh(this,"trackMediaType","audio"),sh(this,"_encoderConfig",void 0),sh(this,"_trackSource",void 0),sh(this,"_enabled",!0),sh(this,"_volume",100),sh(this,"_useAudioElement",!0),sh(this,"_bypassWebAudio",!1),sh(this,"processor",void 0),sh(this,"_processorContext",void 0),sh(this,"_processorDestination",void 0),sh(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!i,this._trackSource=new mI,Fb("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),Fb("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),R_()&&!DR?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){q_(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&aI.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void oT.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Av(this,sR.NEED_REPLACE_TRACK,this).then((()=>{oT.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{oT.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!w_()&&Fb("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new K_(H_.NOT_SUPPORTED,"your browser does not support setting the audio output device");await aI.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await Av(this,sR.NEED_ENABLE_TRACK,this),oT.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),oT.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await Av(this,sR.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),oT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,oT.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Av(this,sR.NEED_MUTE_TRACK,this):await Av(this,sR.NEED_UNMUTE_TRACK,this))}getStats(){return Jv((()=>{oT.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),wv(this,sR.GET_STATS)||_I({},mR)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(pR.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(pR.ON_AUDIO_BUFFER),this._source.on(pR.ON_AUDIO_BUFFER,(t=>e(t)))}play(){oT.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(oT.debug("[".concat(this.getTrackId(),"] start audio playback in element")),aI.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){oT.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?aI.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];oT.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&aI.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Av(this,sR.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return c_.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new K_(H_.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new K_(H_.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(yR.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await Av(this,sR.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Av(this,sR.NEED_REPLACE_TRACK,this))})),e.on(yR.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(yR.ON_TRACK),e.removeAllListeners(yR.ON_NODE)}bindProcessorContextEvents(e){e.on(SR.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(SR.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof mI&&(this._trackSource=new BR(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new fI(this._source.context,this.getTrackId(),"local"),t=new pI(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(pR.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(aI.stop(this.getTrackId()),this._source.play()),Av(this,sR.NEED_REPLACE_MIXING_TRACK,this).then((()=>{oT.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{oT.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}QT([_T({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),XT("design:type",Function),XT("design:paramtypes",[Number]),XT("design:returntype",void 0)],vI.prototype,"setVolume",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],vI.prototype,"setPlaybackDevice",null),QT([fy("LocalAudioTrack","_enabledMutex"),_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean,Object,Boolean]),XT("design:returntype",c_)],vI.prototype,"setEnabled",null),QT([fy("LocalAudioTrack","_enabledMutex"),_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean]),XT("design:returntype",c_)],vI.prototype,"setMuted",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",Object)],vI.prototype,"getStats",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[Object,Number]),XT("design:returntype",void 0)],vI.prototype,"setAudioFrameCallback",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],vI.prototype,"play",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],vI.prototype,"stop",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],vI.prototype,"close",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",Object)],vI.prototype,"pipe",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],vI.prototype,"unpipe",null);class yI extends vI{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,i){super(e,t.encoderConfig?nR(t.encoderConfig):{},i,Fb("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),sh(this,"_config",void 0),sh(this,"_deviceName","default"),sh(this,"_constraints",void 0),sh(this,"_originalConstraints",void 0),sh(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(L_()||M_())&&PR.bindInterruptDetectorTrack(this)}async setDevice(e){if(oT.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await $R.getDeviceById(e),n={};n.audio=_I({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let i=null;try{i=await JR(n,this.getTrackId())}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),i=await JR({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await $R.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}oT.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return oT.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){var i;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(i=this._source.clonedTrack)||void 0===i||i.stop(),n||(this._enabled=!1);try{await Av(this,sR.NEED_DISABLE_TRACK,this)}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const r=_I({},this._constraints),s=$R.searchDeviceIdByName(this._deviceName);s&&!r.deviceId&&(r.deviceId=s);try{n||(this._enabled=!0);const e=await JR({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Av(this,sR.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),oT.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}oT.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(L_()||M_())&&PR.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((N_()||j_())&&this._enabled&&!this._isClosed&&PR.duringInterruption){const e=async()=>{PR.off(Gw.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(oT.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};PR.on(Gw.IOS_INTERRUPTION_END,e)}else oT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(uR.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=$R.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await JR({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(SR.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(SR.REQUEST_UPDATE_CONSTRAINTS)}}QT([_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],yI.prototype,"setDevice",null),QT([fy("MicrophoneAudioTrack","_enabledMutex"),_T({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean,Boolean,Boolean]),XT("design:returntype",c_)],yI.prototype,"setEnabled",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],yI.prototype,"close",null);class SI extends vI{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,i){super(t.createOutputTrack(),n,i),sh(this,"source",void 0),sh(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(pR.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(uR.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){q_(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}QT([_T({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",void 0)],SI.prototype,"startProcessAudioBuffer",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],SI.prototype,"pauseProcessAudioBuffer",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Number]),XT("design:returntype",void 0)],SI.prototype,"seekAudioBuffer",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],SI.prototype,"resumeProcessAudioBuffer",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],SI.prototype,"stopProcessAudioBuffer",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],SI.prototype,"close",null),QT([_T({argsMap:e=>[e.getTrackId()]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Number]),XT("design:returntype",void 0)],SI.prototype,"setAudioBufferPlaybackSpeed",null);class bI extends vI{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=LR().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,iy(8,"track-mix-")),sh(this,"trackList",void 0),sh(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(oT.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):oT.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){oT.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Gv(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof bI?t.emit(lR.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}function TI(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=Zw(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!F_()&&n.frameRate&&(t.frameRate=n.frameRate),y_().name===m_.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),I_()&&(t.frameRate={ideal:30,max:30}),t}function CI(e){const t={};if(F_()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,w_()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const n=nR(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),W_()&&(t.sampleRate=void 0),t}class AI extends FR{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(pR.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),sh(this,"audioBuffer",void 0),sh(this,"sourceNode",void 0),sh(this,"startPlayTime",0),sh(this,"startPlayOffset",0),sh(this,"pausePlayTime",0),sh(this,"options",void 0),sh(this,"currentLoopCount",0),sh(this,"currentPlaybackSpeed",100),sh(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):oT.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const wI=new Map;async function RI(e,t){let n=null;if("string"==typeof e){const t=wI.get(e);if(t)return oT.debug("use cached audio resource: ",e),t;try{n=(await Ey((()=>Cb.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new K_(H_.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new c_(((t,n)=>{const i=new FileReader;i.onload=e=>{e.target?t(e.target.result):n(new K_(H_.READ_LOCAL_AUDIO_FILE_ERROR))},i.onerror=()=>{n(new K_(H_.READ_LOCAL_AUDIO_FILE_ERROR))},i.readAsArrayBuffer(e)}));n=await t}const i=await function(e){const t=LR();return new c_(((n,i)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{i(new K_(H_.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&wI.set(e,i),i}const II=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new c_(((n,i)=>{t.toBlob((async e=>{if(t.remove(),e){const i=await NI(e);n({buffer:i,width:t.width,height:t.height})}else i(new K_(H_.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},NI=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};function OI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class DI{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(oT.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(oT.debug("[".concat(this.trackId,"] video-status change ").concat(this._videoState," => ").concat(e)),this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){sh(this,"trackId",void 0),sh(this,"config",void 0),sh(this,"onFirstVideoFrameDecoded",void 0),sh(this,"onVideoStateChanged",void 0),sh(this,"freezeTimeCounterList",[]),sh(this,"renderFreezeAccTime",0),sh(this,"isKeepLastFrame",!1),sh(this,"timeUpdatedCount",0),sh(this,"freezeTime",0),sh(this,"playbackTime",0),sh(this,"lastTimeUpdatedTime",0),sh(this,"autoplayFailed",!1),sh(this,"videoTrack",void 0),sh(this,"videoElement",void 0),sh(this,"cacheVideoElement",void 0),sh(this,"_videoState",AR.VideoStateStopped),sh(this,"videoElementCheckInterval",void 0),sh(this,"videoElementFreezeTimeout",void 0),sh(this,"_videoElementStatus",CR.NONE),sh(this,"isGettingVideoDimensions",!1),sh(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return oT.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),sh(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===PR.curState&&(oT.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(b_())),U_()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),sh(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=CR.PLAYING;break;case"loadeddata":if(this.videoState=AR.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=CR.CANPLAY;break;case"stalled":this.videoElementStatus=CR.STALLED;break;case"suspend":this.videoElementStatus=CR.SUSPEND;break;case"pause":this.videoElementStatus=CR.PAUSED,N_()||j_()||R_()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(oT.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=CR.WAITING;break;case"abort":this.videoElementStatus=CR.ABORT;break;case"ended":this.videoElementStatus=CR.ENDED;break;case"emptied":this.videoElementStatus=CR.EMPTIED;break;case"error":{this.videoElementStatus=CR.ERROR;const e=this.videoElement.error;e&&oT.error("[".concat(this.trackId,"] media error, code: ").concat(e.code,", message: ").concat(e.message));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,QI.lastVisibleTime<QI.lastHiddenTime||n<QI.lastHiddenTime||n<QI.lastVisibleTime)return;for(t>Fb("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),sh(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(oT.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(b_())),U_()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),PR.on(Gw.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),PR.on(Gw.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&sI(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(oT.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):oT.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=y_();if(("Safari"===n.name&&15===Number(n.version)||L_())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return oT.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const i=n.getContext("2d");return i?(i.drawImage(this.videoElement,0,0,n.width,n.height),new c_(((i,r)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await NI(e);i({buffer:t,width:n.width,height:n.height})}else r(new K_(H_.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await II(e)}destroy(){PR.off(Gw.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),PR.off(Gw.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=AR.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=CR.INIT,!this.videoElementCheckInterval&&(PI.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=CR.DESTROYED)}),1e3),Fb("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const i=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",i),this.videoElementFreezeTimeout=window.setTimeout(r,Fb("VIDEO_FREEZE_DURATION")))},r=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===AR.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=AR.VideoStateFrozen:document.addEventListener("visibilitychange",i))},s=(e,t)=>{if(this.videoElementStatus===CR.PLAYING){if(n){const e=t.presentationTime-n.presentationTime;this.videoState===AR.VideoStateStarting&&(this.videoState=AR.VideoStateDecoding),this.videoState===AR.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(r,Fb("VIDEO_FREEZE_DURATION"))),e<Fb("VIDEO_FREEZE_DURATION")&&this.videoState===AR.VideoStateFrozen&&(this.videoState=AR.VideoStateDecoding),e>Fb("VIDEO_FREEZE_DURATION")&&QI.lastVisibleTime>=QI.lastHiddenTime&&n.timestamp>QI.lastVisibleTime&&n.timestamp>QI.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=kI(kI({},t),{},{timestamp:e})}var i,o;Fb("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(i=(o=this.videoElement).requestVideoFrameCallback)||void 0===i||i.call(o,s))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,s)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),W_()&&(this.videoElement.poster="noposter");const n=y_();"Safari"===n.name&&15===Number(n.version)||L_()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,I_()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,I_()&&this.videoElement.load());const i=this.videoElement.play();void 0!==i&&i.catch((e=>{oT.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){PI.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=CR.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{oT.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{oT.error(e)})),this.autoplayFailed=!1,G_()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};G_()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),nI()}}const PI=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class xI extends DI{constructor(e){super(e),sh(this,"container",void 0),sh(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await II(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",Fb("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function LI(e){return new c_(((t,n)=>{let i=!1;const r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.autoplay=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(r);const s=N_()?"canplay":"playing";r.addEventListener(s,(()=>{const e=r.videoWidth,n=r.videoHeight;!e&&I_()||(i=!0,r.srcObject=null,r.remove(),t([e,n]))})),r.srcObject=new MediaStream([e]),r.play().catch(sy),setTimeout((()=>{i||(r.srcObject=null,r.remove(),t([r.videoWidth,r.videoHeight]))}),4e3)}))}const MI=async(e,t,n)=>{const i=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){const t="0123456789abcdef";function n(e){let n,i="";for(n=0;n<=3;n++)i+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return i}function i(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,r,s,o){return i(function(e,t){return e<<t|e>>>32-t}(i(i(t,e),i(r,o)),s),n)}function s(e,t,n,i,s,o,a){return r(t&n|~t&i,e,t,s,o,a)}function o(e,t,n,i,s,o,a){return r(t&i|n&~i,e,t,s,o,a)}function a(e,t,n,i,s,o,a){return r(t^n^i,e,t,s,o,a)}function c(e,t,n,i,s,o,a){return r(n^(t|~i),e,t,s,o,a)}const d=function(e){let t;const n=1+(e.length+8>>6),i=new Array(16*n);for(t=0;t<16*n;t++)i[t]=0;for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<t%4*8;return i[t>>2]|=128<<t%4*8,i[16*n-2]=8*e.length,i}(e);let l,u,h,p,f,m=1732584193,g=-271733879,E=-1732584194,_=271733878;for(l=0;l<d.length;l+=16)u=m,h=g,p=E,f=_,m=s(m,g,E,_,d[l+0],7,-680876936),_=s(_,m,g,E,d[l+1],12,-389564586),E=s(E,_,m,g,d[l+2],17,606105819),g=s(g,E,_,m,d[l+3],22,-1044525330),m=s(m,g,E,_,d[l+4],7,-176418897),_=s(_,m,g,E,d[l+5],12,1200080426),E=s(E,_,m,g,d[l+6],17,-1473231341),g=s(g,E,_,m,d[l+7],22,-45705983),m=s(m,g,E,_,d[l+8],7,1770035416),_=s(_,m,g,E,d[l+9],12,-1958414417),E=s(E,_,m,g,d[l+10],17,-42063),g=s(g,E,_,m,d[l+11],22,-1990404162),m=s(m,g,E,_,d[l+12],7,1804603682),_=s(_,m,g,E,d[l+13],12,-40341101),E=s(E,_,m,g,d[l+14],17,-1502002290),g=s(g,E,_,m,d[l+15],22,1236535329),m=o(m,g,E,_,d[l+1],5,-165796510),_=o(_,m,g,E,d[l+6],9,-1069501632),E=o(E,_,m,g,d[l+11],14,643717713),g=o(g,E,_,m,d[l+0],20,-373897302),m=o(m,g,E,_,d[l+5],5,-701558691),_=o(_,m,g,E,d[l+10],9,38016083),E=o(E,_,m,g,d[l+15],14,-660478335),g=o(g,E,_,m,d[l+4],20,-405537848),m=o(m,g,E,_,d[l+9],5,568446438),_=o(_,m,g,E,d[l+14],9,-1019803690),E=o(E,_,m,g,d[l+3],14,-187363961),g=o(g,E,_,m,d[l+8],20,1163531501),m=o(m,g,E,_,d[l+13],5,-1444681467),_=o(_,m,g,E,d[l+2],9,-51403784),E=o(E,_,m,g,d[l+7],14,1735328473),g=o(g,E,_,m,d[l+12],20,-1926607734),m=a(m,g,E,_,d[l+5],4,-378558),_=a(_,m,g,E,d[l+8],11,-2022574463),E=a(E,_,m,g,d[l+11],16,1839030562),g=a(g,E,_,m,d[l+14],23,-35309556),m=a(m,g,E,_,d[l+1],4,-1530992060),_=a(_,m,g,E,d[l+4],11,1272893353),E=a(E,_,m,g,d[l+7],16,-155497632),g=a(g,E,_,m,d[l+10],23,-1094730640),m=a(m,g,E,_,d[l+13],4,681279174),_=a(_,m,g,E,d[l+0],11,-358537222),E=a(E,_,m,g,d[l+3],16,-722521979),g=a(g,E,_,m,d[l+6],23,76029189),m=a(m,g,E,_,d[l+9],4,-640364487),_=a(_,m,g,E,d[l+12],11,-421815835),E=a(E,_,m,g,d[l+15],16,530742520),g=a(g,E,_,m,d[l+2],23,-995338651),m=c(m,g,E,_,d[l+0],6,-198630844),_=c(_,m,g,E,d[l+7],10,1126891415),E=c(E,_,m,g,d[l+14],15,-1416354905),g=c(g,E,_,m,d[l+5],21,-57434055),m=c(m,g,E,_,d[l+12],6,1700485571),_=c(_,m,g,E,d[l+3],10,-1894986606),E=c(E,_,m,g,d[l+10],15,-1051523),g=c(g,E,_,m,d[l+1],21,-2054922799),m=c(m,g,E,_,d[l+8],6,1873313359),_=c(_,m,g,E,d[l+15],10,-30611744),E=c(E,_,m,g,d[l+6],15,-1560198380),g=c(g,E,_,m,d[l+13],21,1309151649),m=c(m,g,E,_,d[l+4],6,-145523070),_=c(_,m,g,E,d[l+11],10,-1120210379),E=c(E,_,m,g,d[l+2],15,718787259),g=c(g,E,_,m,d[l+9],21,-343485551),m=i(m,u),g=i(g,h),E=i(E,p),_=i(_,f);return n(m)+n(g)+n(E)+n(_)}(""+t+n)).slice(0,16),r=i.slice(0,12),s=await window.crypto.subtle.importKey("raw",i,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},s,e))},UI=async(e,t,n)=>await MI(e.buffer,t,n);function jI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function VI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class FI extends NR{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==CR.PLAYING)}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,i,r,s){if(super(e,r),sh(this,"trackMediaType","video"),sh(this,"_player",void 0),sh(this,"isUseScaleResolutionDownBy",!1),sh(this,"_videoVisibleTimer",null),sh(this,"_statsTimer",null),sh(this,"_previousVideoVisibleStatus",void 0),sh(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),sh(this,"_encoderConfig",void 0),sh(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),sh(this,"_optimizationMode",void 0),sh(this,"_videoHeight",void 0),sh(this,"_videoWidth",void 0),sh(this,"_forceBitrateLimit",void 0),sh(this,"_enabled",!0),sh(this,"processorDestination",void 0),sh(this,"_processorContext",void 0),R_()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=i,this._hints=s||[],-1===this._hints.indexOf(oR.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t,n){const i=y_();return!(i.name!==e||!i.osVersion)&&(n?Number(i.version)>=t&&Number(i.version)<=n:Number(i.version)===t)}(m_.CHROME,115)&&-1!==S_().indexOf("Windows")){const t=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&Ww().supportWebRTCInsertableStream){const n=new MediaStreamTrackProcessor(e),i=new MediaStreamTrackGenerator({kind:"video"});let r,s,o=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),r&&(r.close(),r=void 0),e.stop(),s=void 0,i.removeEventListener("ended",a)};let c=window.setInterval((()=>{if(s&&r&&Date.now()-o>(null!=t?t:1e3))try{"live"===i.readyState?s.enqueue(r.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const d=new TransformStream({transform:(e,t)=>{"live"===i.readyState?(s=t,o=Date.now(),void 0===r?(r=e,t.enqueue(e.clone())):(t.enqueue(r),r=e)):e.close()}});return i.addEventListener("ended",a),n.readable.pipeThrough(d).pipeTo(i.writable),i}}(e);t&&(oT.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(oR.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new hI(this.getTrackId(),"local"),this.processorDestination=new uI(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(oT.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}oT.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=VI(VI(VI({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new DI(n):this._player=new xI(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(uR.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),Fb("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oT.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Av(this,sR.NEED_DISABLE_TRACK,this)}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void oT.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Av(this,sR.NEED_ENABLE_TRACK,this)}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}oT.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,oT.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Av(this,sR.NEED_MUTE_TRACK,this):await Av(this,sR.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new K_(H_.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if("720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=Zw(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=TI({encoderConfig:e});(R_()||N_()||j_())&&(t.deviceId=void 0),oT.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new K_(H_.UNEXPECTED_ERROR,e.toString());throw oT.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(oR.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Av(this,sR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(oT)}}getStats(){return Jv((()=>{oT.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),wv(this,sR.GET_STATS)||VI({},gR)}async setBeautyEffect(e){oT.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await II(e)}async setBitrateLimit(e){if(oT.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Av(this,sR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(oT)}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void oT.error(H_.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await Av(this,sR.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=t,oT.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}oT.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return oT.error(H_.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,oT.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){LI(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(sy)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new K_(H_.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");oT.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=Zw(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(oR.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Av(this,sR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(oT)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;null==this._encoderConfig.frameRate&&(this._encoderConfig.frameRate=n);const{bitrateMax:i,bitrateMin:r}=this._encoderConfig;if(null==r||null==i){const{max:s,min:o}=function(e,t,n,i,r){const s=Fb("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===s)return{min:i,max:r};if(void 0===r){var o;const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));r="STANDARD_BITRATE"===s?4*a:2*a,i=null!==(o=i)&&void 0!==o?o:a}else{var a;i=null!==(a=i)&&void 0!==a?a:Math.floor(r/10)}return{min:i,max:r}}(e,t,n,r,i);this._encoderConfig.bitrateMin=o,this._encoderConfig.bitrateMax=s,oT.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(s,", brMin: ").concat(o,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),i={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:r,slot:s}=i;if(this.isPlaying&&r instanceof HTMLVideoElement&&s instanceof HTMLElement){const e=rv.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new K_(H_.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new K_(H_.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=VI(VI({},n),Zw(e))),n=Yv(n);const i=iy(8,"track-video-cloned-"),r=new FI(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,Yv(this._scalabilityMode),this._optimizationMode,i,Yv(this._hints));return e&&n&&r.setEncoderConfiguration(n),oT.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(t)),r}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new K_(H_.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new K_(H_.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}startMonitorStats(){if(!R_()&&!N_())return;this._statsTimer&&window.clearInterval(this._statsTimer);let e=2,t=Jw[e],n=-1,i=Date.now();const r=e=>{e>2||e<0||(i=Date.now(),t=Jw[e],this.setSenderConfiguration(t))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval((()=>{const s=this.getStats(),o=wv(this,sR.GET_RTC_STATS);if(s.sendPackets>0&&o){-1===n&&(n=Date.now());const a=Date.now();if(a-n<1e3||a-i<Fb("PROFILE_SWITCH_INTERVAL"))return;const c=s.sendFrameRate,d=.6*t.frameRate,l=.9*t.frameRate;"number"==typeof c&&c>0&&c<d?e>0&&(e--,r(e),oT.debug("[".concat(this.getTrackId(),"] step down for fps ").concat(c,", switchProfile to ").concat(e))):o.OutgoingAvailableBandwidth<t.bitrateMin?e>0&&(e--,r(e),oT.debug("[".concat(this.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(o.OutgoingAvailableBandwidth,", bitrateMin ").concat(t.bitrateMin,", switchProfile to ").concat(e))):"number"==typeof c&&c>l&&e<Jw.length-1&&o.OutgoingAvailableBandwidth>1.2*Jw[e+1].bitrateMin&&(e++,r(e),oT.debug("[".concat(this.getTrackId(),"] step up for fps ").concat(c,", OutgoingAvailableBandwidth ").concat(o.OutgoingAvailableBandwidth,", switchProfile to ").concat(e)))}}),Fb("CHECK_LOCAL_STATS_INTERVAL"))}sendSeiData(e){if(Jv((()=>{vT.reportApiInvoke(null,{name:hv.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:pv.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!Fb("ENABLE_VIDEO_SEI")||!Fb("ENABLE_ENCODED_TRANSFORM"))return void oT.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new K_(H_.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void oT.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const i=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===i?this.safeEmit("sei-to-send",e):oT.warning("SEI is not supported by ".concat(i))}bindProcessorDestinationEvents(){this.processorDestination.on(yR.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await Av(this,sR.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Av(this,sR.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(yR.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(SR.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(SR.REQUEST_CONSTRAINTS)}}QT([_T({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Object,Object]),XT("design:returntype",void 0)],FI.prototype,"play",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],FI.prototype,"stop",null),QT([fy("LocalVideoTrack","_enabledMutex"),_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean,Boolean]),XT("design:returntype",c_)],FI.prototype,"setEnabled",null),QT([fy("LocalVideoTrack","_enabledMutex"),_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean]),XT("design:returntype",c_)],FI.prototype,"setMuted",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Object,Boolean]),XT("design:returntype",c_)],FI.prototype,"setEncoderConfiguration",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",Object)],FI.prototype,"getStats",null),QT([_T({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean,Object]),XT("design:returntype",c_)],FI.prototype,"setBeautyEffect",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",ImageData)],FI.prototype,"getCurrentFrameData",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[String,Number]),XT("design:returntype",c_)],FI.prototype,"getCurrentFrameImage",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],FI.prototype,"setBitrateLimit",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],FI.prototype,"setOptimizationMode",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",void 0)],FI.prototype,"setScalabiltyMode",null),QT([cI(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],FI.prototype,"updateMediaStreamTrackResolution",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",Object)],FI.prototype,"pipe",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],FI.prototype,"unpipe",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],FI.prototype,"close",null),QT([_T({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),XT("design:type",Function),XT("design:paramtypes",[MediaStreamTrack,Boolean]),XT("design:returntype",c_)],FI.prototype,"replaceTrack",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],FI.prototype,"startMonitorStats",null);class BI extends FI{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,i,r,s){super(e,Zw(t.encoderConfig),i,r,s),sh(this,"_config",void 0),sh(this,"_originalConstraints",void 0),sh(this,"_constraints",void 0),sh(this,"_enabled",!0),sh(this,"_deviceName","default"),sh(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(L_()||M_())&&!function(){const e=y_();if(e.os!==f_.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&V_()&&this._enabled&&!this._isClosed&&(oT.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=Zw(this._config.encoderConfig),PR.on(Gw.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),PR.on(Gw.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(oT.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await $R.getDeviceById(e),n={};n.video=VI({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await JR(n,this.getTrackId())}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),i=await JR({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await $R.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}oT.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){oT.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:VI(VI({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await JR(t,this.getTrackId())}catch(t){throw oT.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await JR({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=VI({},t.video),oT.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await JR({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await Av(this,sR.NEED_ENABLE_TRACK,this)}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),oT.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await Av(this,sR.NEED_DISABLE_TRACK,this)}catch(e){throw oT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}oT.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new K_(H_.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");"720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=Zw(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const n=zv(this._config);n.encoderConfig=e;const i=TI(n);(R_()||N_()||j_())&&(i.deviceId=void 0),oT.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(e){const t=new K_(H_.UNEXPECTED_ERROR,e.toString());throw oT.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=i,this._originalConstraints=i,this._encoderConfig=e,-1===this._hints.indexOf(oR.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Av(this,sR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(oT)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((N_()||j_())&&this._enabled&&!this._isClosed&&PR.duringInterruption){const e=async()=>{PR.off(Gw.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(oT.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};PR.on(Gw.IOS_INTERRUPTION_END,e)}else oT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(uR.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=$R.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await JR({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),PR.off(Gw.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),PR.off(Gw.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=VI(VI({},n),Zw(e))),n=Yv(n);const i=iy(8,"track-cam-cloned-"),r=new BI(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,Yv(VI(VI({},this._config),{},{encoderConfig:n})),Yv(this._constraints),Yv(this._scalabilityMode),this._optimizationMode,i);return e&&n&&r.setEncoderConfiguration(n),oT.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(t)),r}bindProcessorContextEvents(){this.processorContext.on(SR.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(SR.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function GI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HI(e,t,n,i){n.optimizationMode&&(i&&i.width&&i.height?(n.encoderConfig=GI(GI({},i),{},{bitrateMin:i.bitrateMin,bitrateMax:i.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?oT.debug("[".concat(e,"] set content hint to"),n.optimizationMode):oT.debug("[".concat(e,"] set content hint failed")))):oT.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function KI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function zI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}QT([_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],BI.prototype,"setDevice",null),QT([fy("CameraVideoTrack","_enabledMutex"),_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Boolean,Boolean]),XT("design:returntype",c_)],BI.prototype,"setEnabled",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t]}),cI(),XT("design:type",Function),XT("design:paramtypes",[Object,Boolean]),XT("design:returntype",c_)],BI.prototype,"setEncoderConfiguration",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],BI.prototype,"close",null);class YI extends IR{getUserId(){return this._userId}constructor(e,t,n,i){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(i.clientId,"_").concat(iy(5,""))),sh(this,"_userId",void 0),sh(this,"_uintId",void 0),sh(this,"_isDestroyed",!1),sh(this,"store",void 0),sh(this,"processor",void 0),this._userId=t,this._uintId=n,this.store=i}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,oT.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}class qI extends YI{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==CR.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,i){super(e,t,n,i),sh(this,"_videoVisibleTimer",null),sh(this,"_previousVideoVisibleStatus",void 0),sh(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),sh(this,"trackMediaType","video"),sh(this,"_videoWidth",void 0),sh(this,"_videoHeight",void 0),sh(this,"_player",void 0),sh(this,"processorDestination",void 0),sh(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new hI(this.getTrackId(),"remote"),this.processorDestination=new uI(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Jv((()=>{oT.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),wv(this,sR.GET_STATS)||zI({},vR)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(oT.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}oT.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=zI(zI({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new DI(n):this._player=new xI(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(hR.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(hR.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(hR.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),Fb("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oT.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){LI(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(sy)}_updatePlayerSource(){oT.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),i={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:r,slot:s}=i;if(this.isPlaying&&r instanceof HTMLVideoElement&&s instanceof HTMLElement){const e=rv.checkOneElementVisible(r),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new K_(H_.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new K_(H_.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(yR.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(yR.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(lR.SEI_RECEIVED,e)}}QT([_T({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),XT("design:type",Function),XT("design:paramtypes",[Object,Object]),XT("design:returntype",void 0)],qI.prototype,"play",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],qI.prototype,"stop",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",Object)],qI.prototype,"pipe",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],qI.prototype,"unpipe",null);class JI extends YI{get isPlaying(){return this._useAudioElement?aI.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,i){super(e,t,n,i),sh(this,"trackMediaType","audio"),sh(this,"_source",void 0),sh(this,"_useAudioElement",!0),sh(this,"_volume",100),sh(this,"processorContext",void 0),sh(this,"processorDestination",void 0),sh(this,"_played",!1),sh(this,"_bypassWebAudio",!1),Fb("DISABLE_WEBAUDIO")?(this._source=new mI,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new BR(e,!0),Fb("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(pR.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(hR.FIRST_FRAME_DECODED)})),this.processorContext=new fI(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new pI(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(pR.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(pR.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(pR.ON_AUDIO_BUFFER),this._source.on(pR.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?aI.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!w_()&&Fb("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new K_(H_.NOT_SUPPORTED,"your browser does not support setting the audio output device");await aI.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Jv((()=>{oT.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),wv(this,sR.GET_STATS)||zI({},ER)}play(){oT.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(oT.debug("[".concat(this.getTrackId(),"] use audio element to play")),aI.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){oT.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?aI.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];oT.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&aI.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new K_(H_.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new K_(H_.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new K_(H_.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(yR.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(yR.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(yR.ON_TRACK),this.processorDestination.removeAllListeners(yR.ON_NODE)}}QT([_T({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),XT("design:type",Function),XT("design:paramtypes",[Number]),XT("design:returntype",void 0)],JI.prototype,"setVolume",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t]}),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],JI.prototype,"setPlaybackDevice",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],JI.prototype,"play",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],JI.prototype,"stop",null),QT([_T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",Object)],JI.prototype,"pipe",null),QT([_T({argsMap:e=>[e.getTrackId()]}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],JI.prototype,"unpipe",null);const QI=new class extends dv{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),sh(this,"_lastHiddenTime",0),sh(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),oT.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};function XI(e){let t=e.length;for(;--t>=0;)e[t]=0}const ZI=256,$I=286,eN=30,tN=15,nN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),iN=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),rN=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),sN=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oN=new Array(576);XI(oN);const aN=new Array(60);XI(aN);const cN=new Array(512);XI(cN);const dN=new Array(256);XI(dN);const lN=new Array(29);XI(lN);const uN=new Array(eN);function hN(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let pN,fN,mN;function gN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}XI(uN);const EN=e=>e<256?cN[e]:cN[256+(e>>>7)],_N=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},vN=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,_N(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},yN=(e,t,n)=>{vN(e,n[2*t],n[2*t+1])},SN=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},bN=(e,t,n)=>{const i=new Array(16);let r,s,o=0;for(r=1;r<=tN;r++)o=o+n[r-1]<<1,i[r]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=SN(i[t]++,t))}},TN=e=>{let t;for(t=0;t<$I;t++)e.dyn_ltree[2*t]=0;for(t=0;t<eN;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},CN=e=>{e.bi_valid>8?_N(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},AN=(e,t,n,i)=>{const r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},wN=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&AN(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!AN(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},RN=(e,t,n)=>{let i,r,s,o,a=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+a++],i+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===i?yN(e,r,t):(s=dN[r],yN(e,s+ZI+1,t),o=nN[s],0!==o&&(r-=lN[s],vN(e,r,o)),i--,s=EN(i),yN(e,s,n),o=iN[s],0!==o&&(i-=uN[s],vN(e,i,o)))}while(a<e.sym_next);yN(e,256,t)},IN=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,d=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=d=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[2*c+1]);for(t.max_code=d,o=e.heap_len>>1;o>=1;o--)wN(e,n,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],wN(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*c]=n[2*o]+n[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=c,e.heap[1]=c++,wN(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,l,u,h,p,f,m=0;for(h=0;h<=tN;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)l=e.heap[d],h=n[2*n[2*l+1]+1]+1,h>c&&(h=c,m++),n[2*l+1]=h,l>i||(e.bl_count[h]++,p=0,l>=a&&(p=o[l-a]),f=n[2*l],e.opt_len+=f*(h+p),s&&(e.static_len+=f*(r[2*l+1]+p)));if(0!==m){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--)for(l=e.bl_count[h];0!==l;)u=e.heap[--d],u>i||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),l--)}})(e,t),bN(n,d,e.bl_count)},NN=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,c=7,d=4;for(0===o&&(c=138,d=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<c&&r===o||(a<d?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=r,0===o?(c=138,d=3):r===o?(c=6,d=3):(c=7,d=4))},ON=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,c=7,d=4;for(0===o&&(c=138,d=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<c&&r===o)){if(a<d)do{yN(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(yN(e,r,e.bl_tree),a--),yN(e,16,e.bl_tree),vN(e,a-3,2)):a<=10?(yN(e,17,e.bl_tree),vN(e,a-3,3)):(yN(e,18,e.bl_tree),vN(e,a-11,7));a=0,s=r,0===o?(c=138,d=3):r===o?(c=6,d=3):(c=7,d=4)}};let kN=!1;const DN=(e,t,n,i)=>{vN(e,0+(i?1:0),3),CN(e),_N(e,n),_N(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var PN=e=>{kN||((()=>{let e,t,n,i,r;const s=new Array(16);for(n=0,i=0;i<28;i++)for(lN[i]=n,e=0;e<1<<nN[i];e++)dN[n++]=i;for(dN[n-1]=i,r=0,i=0;i<16;i++)for(uN[i]=r,e=0;e<1<<iN[i];e++)cN[r++]=i;for(r>>=7;i<eN;i++)for(uN[i]=r<<7,e=0;e<1<<iN[i]-7;e++)cN[256+r++]=i;for(t=0;t<=tN;t++)s[t]=0;for(e=0;e<=143;)oN[2*e+1]=8,e++,s[8]++;for(;e<=255;)oN[2*e+1]=9,e++,s[9]++;for(;e<=279;)oN[2*e+1]=7,e++,s[7]++;for(;e<=287;)oN[2*e+1]=8,e++,s[8]++;for(bN(oN,287,s),e=0;e<eN;e++)aN[2*e+1]=5,aN[2*e]=SN(e,5);pN=new hN(oN,nN,257,$I,tN),fN=new hN(aN,iN,0,eN,tN),mN=new hN(new Array(0),rN,0,19,7)})(),kN=!0),e.l_desc=new gN(e.dyn_ltree,pN),e.d_desc=new gN(e.dyn_dtree,fN),e.bl_desc=new gN(e.bl_tree,mN),e.bi_buf=0,e.bi_valid=0,TN(e)},xN=(e,t,n,i)=>{let r,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<ZI;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),IN(e,e.l_desc),IN(e,e.d_desc),o=(e=>{let t;for(NN(e,e.dyn_ltree,e.l_desc.max_code),NN(e,e.dyn_dtree,e.d_desc.max_code),IN(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*sN[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?DN(e,t,n,i):4===e.strategy||s===r?(vN(e,2+(i?1:0),3),RN(e,oN,aN)):(vN(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(vN(e,t-257,5),vN(e,n-1,5),vN(e,i-4,4),r=0;r<i;r++)vN(e,e.bl_tree[2*sN[r]+1],3);ON(e,e.dyn_ltree,t-1),ON(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),RN(e,e.dyn_ltree,e.dyn_dtree)),TN(e),i&&CN(e)},LN=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(dN[n]+ZI+1)]++,e.dyn_dtree[2*EN(t)]++),e.sym_next===e.sym_end),MN={_tr_init:PN,_tr_stored_block:DN,_tr_flush_block:xN,_tr_tally:LN,_tr_align:e=>{vN(e,2,3),yN(e,256,oN),(e=>{16===e.bi_valid?(_N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},UN=(e,t,n,i)=>{let r=65535&e|0,s=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+t[i++]|0,s=s+r|0}while(--o);r%=65521,s%=65521}return r|s<<16|0};const jN=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var VN=(e,t,n,i)=>{const r=jN,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[255&(e^t[o])];return-1^e},FN={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},BN={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:WN,_tr_stored_block:GN,_tr_flush_block:HN,_tr_tally:KN,_tr_align:zN}=MN,{Z_NO_FLUSH:YN,Z_PARTIAL_FLUSH:qN,Z_FULL_FLUSH:JN,Z_FINISH:QN,Z_BLOCK:XN,Z_OK:ZN,Z_STREAM_END:$N,Z_STREAM_ERROR:eO,Z_DATA_ERROR:tO,Z_BUF_ERROR:nO,Z_DEFAULT_COMPRESSION:iO,Z_FILTERED:rO,Z_HUFFMAN_ONLY:sO,Z_RLE:oO,Z_FIXED:aO,Z_DEFAULT_STRATEGY:cO,Z_UNKNOWN:dO,Z_DEFLATED:lO}=BN,uO=286,hO=30,pO=19,fO=2*uO+1,mO=15,gO=258,EO=262,_O=42,vO=113,yO=666,SO=(e,t)=>(e.msg=FN[t],t),bO=e=>2*e-(e>4?9:0),TO=e=>{let t=e.length;for(;--t>=0;)e[t]=0},CO=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)};let AO=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const wO=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},RO=(e,t)=>{HN(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,wO(e.strm)},IO=(e,t)=>{e.pending_buf[e.pending++]=t},NO=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},OO=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=UN(e.adler,t,r,n):2===e.state.wrap&&(e.adler=VN(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},kO=(e,t)=>{let n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-EO?e.strstart-(e.w_size-EO):0,d=e.window,l=e.w_mask,u=e.prev,h=e.strstart+gO;let p=d[s+o-1],f=d[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,d[n+o]===f&&d[n+o-1]===p&&d[n]===d[s]&&d[++n]===d[s+1]){s+=2,n++;do{}while(d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&s<h);if(i=gO-(h-s),s=h-gO,i>o){if(e.match_start=t,o=i,i>=a)break;p=d[s+o-1],f=d[s+o]}}}while((t=u[t&l])>c&&0!=--r);return o<=e.lookahead?o:e.lookahead},DO=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-EO)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),CO(e),i+=t),0===e.strm.avail_in)break;if(n=OO(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=AO(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=AO(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<EO&&0!==e.strm.avail_in)},PO=(e,t)=>{let n,i,r,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>r&&(n=r),n<s&&(0===n&&t!==QN||t===YN||n!==i+e.strm.avail_in))break;o=t===QN&&n===i+e.strm.avail_in?1:0,GN(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,wO(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(OO(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==YN&&t!==QN&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(OO(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,s=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=s||(i||t===QN)&&t!==YN&&0===e.strm.avail_in&&i<=r)&&(n=i>r?r:i,o=t===QN&&0===e.strm.avail_in&&n===i?1:0,GN(e,e.block_start,n,o),e.block_start+=n,wO(e.strm)),o?3:1)},xO=(e,t)=>{let n,i;for(;;){if(e.lookahead<EO){if(DO(e),e.lookahead<EO&&t===YN)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=AO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-EO&&(e.match_length=kO(e,n)),e.match_length>=3)if(i=KN(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=AO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=AO(e,e.ins_h,e.window[e.strstart+1]);else i=KN(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(RO(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===QN?(RO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(RO(e,!1),0===e.strm.avail_out)?1:2},LO=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<EO){if(DO(e),e.lookahead<EO&&t===YN)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=AO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-EO&&(e.match_length=kO(e,n),e.match_length<=5&&(e.strategy===rO||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=KN(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=AO(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(RO(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=KN(e,0,e.window[e.strstart-1]),i&&RO(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=KN(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===QN?(RO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(RO(e,!1),0===e.strm.avail_out)?1:2};function MO(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const UO=[new MO(0,0,0,0,PO),new MO(4,4,8,4,xO),new MO(4,5,16,8,xO),new MO(4,6,32,32,xO),new MO(4,4,16,16,LO),new MO(8,16,32,32,LO),new MO(8,16,128,128,LO),new MO(8,32,128,256,LO),new MO(32,128,258,1024,LO),new MO(32,258,258,4096,LO)];function jO(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lO,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*fO),this.dyn_dtree=new Uint16Array(2*(2*hO+1)),this.bl_tree=new Uint16Array(2*(2*pO+1)),TO(this.dyn_ltree),TO(this.dyn_dtree),TO(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(mO+1),this.heap=new Uint16Array(2*uO+1),TO(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*uO+1),TO(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const VO=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==_O&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==vO&&t.status!==yO?1:0},FO=e=>{if(VO(e))return SO(e,eO);e.total_in=e.total_out=0,e.data_type=dO;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?_O:vO,e.adler=2===t.wrap?0:1,t.last_flush=-2,WN(t),ZN},BO=e=>{const t=FO(e);var n;return t===ZN&&((n=e.state).window_size=2*n.w_size,TO(n.head),n.max_lazy_match=UO[n.level].max_lazy,n.good_match=UO[n.level].good_length,n.nice_match=UO[n.level].nice_length,n.max_chain_length=UO[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},WO=(e,t,n,i,r,s)=>{if(!e)return eO;let o=1;if(t===iO&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>9||n!==lO||i<8||i>15||t<0||t>9||s<0||s>aO||8===i&&1!==o)return SO(e,eO);8===i&&(i=9);const a=new jO;return e.state=a,a.strm=e,a.status=_O,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,BO(e)};var GO=(e,t)=>{if(VO(e)||t>XN||t<0)return e?SO(e,eO):eO;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===yO&&t!==QN)return SO(e,0===e.avail_out?nO:eO);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(wO(e),0===e.avail_out)return n.last_flush=-1,ZN}else if(0===e.avail_in&&bO(t)<=bO(i)&&t!==QN)return SO(e,nO);if(n.status===yO&&0!==e.avail_in)return SO(e,nO);if(n.status===_O&&0===n.wrap&&(n.status=vO),n.status===_O){let t=lO+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=sO||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,NO(n,t),0!==n.strstart&&(NO(n,e.adler>>>16),NO(n,65535&e.adler)),e.adler=1,n.status=vO,wO(e),0!==n.pending)return n.last_flush=-1,ZN}if(57===n.status)if(e.adler=0,IO(n,31),IO(n,139),IO(n,8),n.gzhead)IO(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),IO(n,255&n.gzhead.time),IO(n,n.gzhead.time>>8&255),IO(n,n.gzhead.time>>16&255),IO(n,n.gzhead.time>>24&255),IO(n,9===n.level?2:n.strategy>=sO||n.level<2?4:0),IO(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(IO(n,255&n.gzhead.extra.length),IO(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=VN(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(IO(n,0),IO(n,0),IO(n,0),IO(n,0),IO(n,0),IO(n,9===n.level?2:n.strategy>=sO||n.level<2?4:0),IO(n,3),n.status=vO,wO(e),0!==n.pending)return n.last_flush=-1,ZN;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=VN(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,wO(e),0!==n.pending)return n.last_flush=-1,ZN;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=VN(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=VN(e.adler,n.pending_buf,n.pending-i,i)),wO(e),0!==n.pending)return n.last_flush=-1,ZN;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,IO(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=VN(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=VN(e.adler,n.pending_buf,n.pending-i,i)),wO(e),0!==n.pending)return n.last_flush=-1,ZN;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,IO(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=VN(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(wO(e),0!==n.pending))return n.last_flush=-1,ZN;IO(n,255&e.adler),IO(n,e.adler>>8&255),e.adler=0}if(n.status=vO,wO(e),0!==n.pending)return n.last_flush=-1,ZN}if(0!==e.avail_in||0!==n.lookahead||t!==YN&&n.status!==yO){let i=0===n.level?PO(n,t):n.strategy===sO?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(DO(e),0===e.lookahead)){if(t===YN)return 1;break}if(e.match_length=0,n=KN(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(RO(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===QN?(RO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(RO(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===oO?((e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=gO){if(DO(e),e.lookahead<=gO&&t===YN)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+gO;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=gO-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=KN(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=KN(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(RO(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===QN?(RO(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(RO(e,!1),0===e.strm.avail_out)?1:2})(n,t):UO[n.level].func(n,t);if(3!==i&&4!==i||(n.status=yO),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),ZN;if(2===i&&(t===qN?zN(n):t!==XN&&(GN(n,0,0,!1),t===JN&&(TO(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),wO(e),0===e.avail_out))return n.last_flush=-1,ZN}return t!==QN?ZN:n.wrap<=0?$N:(2===n.wrap?(IO(n,255&e.adler),IO(n,e.adler>>8&255),IO(n,e.adler>>16&255),IO(n,e.adler>>24&255),IO(n,255&e.total_in),IO(n,e.total_in>>8&255),IO(n,e.total_in>>16&255),IO(n,e.total_in>>24&255)):(NO(n,e.adler>>>16),NO(n,65535&e.adler)),wO(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ZN:$N)},HO=(e,t)=>{let n=t.length;if(VO(e))return eO;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==_O||i.lookahead)return eO;if(1===r&&(e.adler=UN(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(TO(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,DO(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=AO(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,DO(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,ZN},KO={deflateInit:(e,t)=>WO(e,t,lO,15,8,cO),deflateInit2:WO,deflateReset:BO,deflateResetKeep:FO,deflateSetHeader:(e,t)=>VO(e)||2!==e.state.wrap?eO:(e.state.gzhead=t,ZN),deflate:GO,deflateEnd:e=>{if(VO(e))return eO;const t=e.state.status;return e.state=null,t===vO?SO(e,tO):ZN},deflateSetDictionary:HO,deflateInfo:"pako deflate (from Nodeca project)"};const zO=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var YO={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)zO(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let t=e[i];n.set(t,r),r+=t.length}return n}};let qO=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){qO=!1}const JO=new Uint8Array(256);for(let n=0;n<256;n++)JO[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;JO[254]=JO[254]=1;var QO={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const s=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){s[r++]=t;continue}let o=JO[t];if(o>4)s[r++]=65533,i+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&i<n;)t=t<<6|63&e[i++],o--;o>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&qO)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(s,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+JO[e[n]]>t?n:t}},XO=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ZO=Object.prototype.toString,{Z_NO_FLUSH:$O,Z_SYNC_FLUSH:ek,Z_FULL_FLUSH:tk,Z_FINISH:nk,Z_OK:ik,Z_STREAM_END:rk,Z_DEFAULT_COMPRESSION:sk,Z_DEFAULT_STRATEGY:ok,Z_DEFLATED:ak}=BN;function ck(e){this.options=YO.assign({level:sk,method:ak,chunkSize:16384,windowBits:15,memLevel:8,strategy:ok},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new XO,this.strm.avail_out=0;let n=KO.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ik)throw new Error(FN[n]);if(t.header&&KO.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?QO.string2buf(t.dictionary):"[object ArrayBuffer]"===ZO.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=KO.deflateSetDictionary(this.strm,e),n!==ik)throw new Error(FN[n]);this._dict_set=!0}}function dk(e,t){const n=new ck(t);if(n.push(e,!0),n.err)throw n.msg||FN[n.err];return n.result}ck.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?nk:$O,"string"==typeof e?n.input=QO.string2buf(e):"[object ArrayBuffer]"===ZO.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===ek||s===tk)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=KO.deflate(n,s),r===rk)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=KO.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ik;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ck.prototype.onData=function(e){this.chunks.push(e)},ck.prototype.onEnd=function(e){e===ik&&(this.result=YO.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var lk={Deflate:ck,deflate:dk,deflateRaw:function(e,t){return(t=t||{}).raw=!0,dk(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,dk(e,t)},constants:BN};const uk=16209;var hk=function(e,t){let n,i,r,s,o,a,c,d,l,u,h,p,f,m,g,E,_,v,y,S,b,T,C,A;const w=e.state;n=e.next_in,C=e.input,i=n+(e.avail_in-5),r=e.next_out,A=e.output,s=r-(t-e.avail_out),o=r+(e.avail_out-257),a=w.dmax,c=w.wsize,d=w.whave,l=w.wnext,u=w.window,h=w.hold,p=w.bits,f=w.lencode,m=w.distcode,g=(1<<w.lenbits)-1,E=(1<<w.distbits)-1;e:do{p<15&&(h+=C[n++]<<p,p+=8,h+=C[n++]<<p,p+=8),_=f[h&g];t:for(;;){if(v=_>>>24,h>>>=v,p-=v,v=_>>>16&255,0===v)A[r++]=65535&_;else{if(!(16&v)){if(0==(64&v)){_=f[(65535&_)+(h&(1<<v)-1)];continue t}if(32&v){w.mode=16191;break e}e.msg="invalid literal/length code",w.mode=uk;break e}y=65535&_,v&=15,v&&(p<v&&(h+=C[n++]<<p,p+=8),y+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=C[n++]<<p,p+=8,h+=C[n++]<<p,p+=8),_=m[h&E];n:for(;;){if(v=_>>>24,h>>>=v,p-=v,v=_>>>16&255,!(16&v)){if(0==(64&v)){_=m[(65535&_)+(h&(1<<v)-1)];continue n}e.msg="invalid distance code",w.mode=uk;break e}if(S=65535&_,v&=15,p<v&&(h+=C[n++]<<p,p+=8,p<v&&(h+=C[n++]<<p,p+=8)),S+=h&(1<<v)-1,S>a){e.msg="invalid distance too far back",w.mode=uk;break e}if(h>>>=v,p-=v,v=r-s,S>v){if(v=S-v,v>d&&w.sane){e.msg="invalid distance too far back",w.mode=uk;break e}if(b=0,T=u,0===l){if(b+=c-v,v<y){y-=v;do{A[r++]=u[b++]}while(--v);b=r-S,T=A}}else if(l<v){if(b+=c+l-v,v-=l,v<y){y-=v;do{A[r++]=u[b++]}while(--v);if(b=0,l<y){v=l,y-=v;do{A[r++]=u[b++]}while(--v);b=r-S,T=A}}}else if(b+=l-v,v<y){y-=v;do{A[r++]=u[b++]}while(--v);b=r-S,T=A}for(;y>2;)A[r++]=T[b++],A[r++]=T[b++],A[r++]=T[b++],y-=3;y&&(A[r++]=T[b++],y>1&&(A[r++]=T[b++]))}else{b=r-S;do{A[r++]=A[b++],A[r++]=A[b++],A[r++]=A[b++],y-=3}while(y>2);y&&(A[r++]=A[b++],y>1&&(A[r++]=A[b++]))}break}}break}}while(n<i&&r<o);y=p>>3,n-=y,p-=y<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<o?o-r+257:257-(r-o),w.hold=h,w.bits=p};const pk=15,fk=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mk=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gk=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ek=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var _k=(e,t,n,i,r,s,o,a)=>{const c=a.bits;let d,l,u,h,p,f,m=0,g=0,E=0,_=0,v=0,y=0,S=0,b=0,T=0,C=0,A=null;const w=new Uint16Array(16),R=new Uint16Array(16);let I,N,O,k=null;for(m=0;m<=pk;m++)w[m]=0;for(g=0;g<i;g++)w[t[n+g]]++;for(v=c,_=pk;_>=1&&0===w[_];_--);if(v>_&&(v=_),0===_)return r[s++]=20971520,r[s++]=20971520,a.bits=1,0;for(E=1;E<_&&0===w[E];E++);for(v<E&&(v=E),b=1,m=1;m<=pk;m++)if(b<<=1,b-=w[m],b<0)return-1;if(b>0&&(0===e||1!==_))return-1;for(R[1]=0,m=1;m<pk;m++)R[m+1]=R[m]+w[m];for(g=0;g<i;g++)0!==t[n+g]&&(o[R[t[n+g]]++]=g);if(0===e?(A=k=o,f=20):1===e?(A=fk,k=mk,f=257):(A=gk,k=Ek,f=0),C=0,g=0,m=E,p=s,y=v,S=0,u=-1,T=1<<v,h=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){I=m-S,o[g]+1<f?(N=0,O=o[g]):o[g]>=f?(N=k[o[g]-f],O=A[o[g]-f]):(N=96,O=0),d=1<<m-S,l=1<<y,E=l;do{l-=d,r[p+(C>>S)+l]=I<<24|N<<16|O|0}while(0!==l);for(d=1<<m-1;C&d;)d>>=1;if(0!==d?(C&=d-1,C+=d):C=0,g++,0==--w[m]){if(m===_)break;m=t[n+o[g]]}if(m>v&&(C&h)!==u){for(0===S&&(S=v),p+=E,y=m-S,b=1<<y;y+S<_&&(b-=w[y+S],!(b<=0));)y++,b<<=1;if(T+=1<<y,1===e&&T>852||2===e&&T>592)return 1;u=C&h,r[u]=v<<24|y<<16|p-s|0}}return 0!==C&&(r[p+C]=m-S<<24|64<<16|0),a.bits=v,0};const{Z_FINISH:vk,Z_BLOCK:yk,Z_TREES:Sk,Z_OK:bk,Z_STREAM_END:Tk,Z_NEED_DICT:Ck,Z_STREAM_ERROR:Ak,Z_DATA_ERROR:wk,Z_MEM_ERROR:Rk,Z_BUF_ERROR:Ik,Z_DEFLATED:Nk}=BN,Ok=16180,kk=16190,Dk=16191,Pk=16192,xk=16194,Lk=16199,Mk=16200,Uk=16206,jk=16209,Vk=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Fk(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bk=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ok||t.mode>16211?1:0},Wk=e=>{if(Bk(e))return Ak;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ok,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,bk},Gk=e=>{if(Bk(e))return Ak;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Wk(e)},Hk=(e,t)=>{let n;if(Bk(e))return Ak;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ak:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,Gk(e))},Kk=(e,t)=>{if(!e)return Ak;const n=new Fk;e.state=n,n.strm=e,n.window=null,n.mode=Ok;const i=Hk(e,t);return i!==bk&&(e.state=null),i};let zk,Yk,qk=!0;const Jk=e=>{if(qk){zk=new Int32Array(512),Yk=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_k(1,e.lens,0,288,zk,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_k(2,e.lens,0,32,Yk,0,e.work,{bits:5}),qk=!1}e.lencode=zk,e.lenbits=9,e.distcode=Yk,e.distbits=5},Qk=(e,t,n,i)=>{let r;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),(i-=r)?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0};var Xk=(e,t)=>{let n,i,r,s,o,a,c,d,l,u,h,p,f,m,g,E,_,v,y,S,b,T,C=0;const A=new Uint8Array(4);let w,R;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bk(e)||!e.output||!e.input&&0!==e.avail_in)return Ak;n=e.state,n.mode===Dk&&(n.mode=Pk),o=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,d=n.hold,l=n.bits,u=a,h=c,T=bk;e:for(;;)switch(n.mode){case Ok:if(0===n.wrap){n.mode=Pk;break}for(;l<16;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,A[0]=255&d,A[1]=d>>>8&255,n.check=VN(n.check,A,2,0),d=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=jk;break}if((15&d)!==Nk){e.msg="unknown compression method",n.mode=jk;break}if(d>>>=4,l-=4,b=8+(15&d),0===n.wbits&&(n.wbits=b),b>15||b>n.wbits){e.msg="invalid window size",n.mode=jk;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:Dk,d=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(n.flags=d,(255&n.flags)!==Nk){e.msg="unknown compression method",n.mode=jk;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=jk;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&4&n.wrap&&(A[0]=255&d,A[1]=d>>>8&255,n.check=VN(n.check,A,2,0)),d=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}n.head&&(n.head.time=d),512&n.flags&&4&n.wrap&&(A[0]=255&d,A[1]=d>>>8&255,A[2]=d>>>16&255,A[3]=d>>>24&255,n.check=VN(n.check,A,4,0)),d=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&4&n.wrap&&(A[0]=255&d,A[1]=d>>>8&255,n.check=VN(n.check,A,2,0)),d=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&4&n.wrap&&(A[0]=255&d,A[1]=d>>>8&255,n.check=VN(n.check,A,2,0)),d=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+p),b)),512&n.flags&&4&n.wrap&&(n.check=VN(n.check,i,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;p=0;do{b=i[s+p++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b))}while(b&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=VN(n.check,i,p,s)),a-=p,s+=p,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;p=0;do{b=i[s+p++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b))}while(b&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=VN(n.check,i,p,s)),a-=p,s+=p,b)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=jk;break}d=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Dk;break;case 16189:for(;l<32;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}e.adler=n.check=Vk(d),d=0,l=0,n.mode=kk;case kk:if(0===n.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=d,n.bits=l,Ck;e.adler=n.check=1,n.mode=Dk;case Dk:if(t===yk||t===Sk)break e;case Pk:if(n.last){d>>>=7&l,l-=7&l,n.mode=Uk;break}for(;l<3;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}switch(n.last=1&d,d>>>=1,l-=1,3&d){case 0:n.mode=16193;break;case 1:if(Jk(n),n.mode=Lk,t===Sk){d>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=jk}d>>>=2,l-=2;break;case 16193:for(d>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=jk;break}if(n.length=65535&d,d=0,l=0,n.mode=xk,t===Sk)break e;case xk:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;r.set(i.subarray(s,s+p),o),a-=p,s+=p,c-=p,o+=p,n.length-=p;break}n.mode=Dk;break;case 16196:for(;l<14;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(n.nlen=257+(31&d),d>>>=5,l-=5,n.ndist=1+(31&d),d>>>=5,l-=5,n.ncode=4+(15&d),d>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=jk;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}n.lens[I[n.have++]]=7&d,d>>>=3,l-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},T=_k(0,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid code lengths set",n.mode=jk;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[d&(1<<n.lenbits)-1],g=C>>>24,E=C>>>16&255,_=65535&C,!(g<=l);){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(_<16)d>>>=g,l-=g,n.lens[n.have++]=_;else{if(16===_){for(R=g+2;l<R;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(d>>>=g,l-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=jk;break}b=n.lens[n.have-1],p=3+(3&d),d>>>=2,l-=2}else if(17===_){for(R=g+3;l<R;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}d>>>=g,l-=g,b=0,p=3+(7&d),d>>>=3,l-=3}else{for(R=g+7;l<R;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}d>>>=g,l-=g,b=0,p=11+(127&d),d>>>=7,l-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=jk;break}for(;p--;)n.lens[n.have++]=b}}if(n.mode===jk)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=jk;break}if(n.lenbits=9,w={bits:n.lenbits},T=_k(1,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid literal/lengths set",n.mode=jk;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},T=_k(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,T){e.msg="invalid distances set",n.mode=jk;break}if(n.mode=Lk,t===Sk)break e;case Lk:n.mode=Mk;case Mk:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=d,n.bits=l,hk(e,h),o=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,d=n.hold,l=n.bits,n.mode===Dk&&(n.back=-1);break}for(n.back=0;C=n.lencode[d&(1<<n.lenbits)-1],g=C>>>24,E=C>>>16&255,_=65535&C,!(g<=l);){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(E&&0==(240&E)){for(v=g,y=E,S=_;C=n.lencode[S+((d&(1<<v+y)-1)>>v)],g=C>>>24,E=C>>>16&255,_=65535&C,!(v+g<=l);){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}d>>>=v,l-=v,n.back+=v}if(d>>>=g,l-=g,n.back+=g,n.length=_,0===E){n.mode=16205;break}if(32&E){n.back=-1,n.mode=Dk;break}if(64&E){e.msg="invalid literal/length code",n.mode=jk;break}n.extra=15&E,n.mode=16201;case 16201:if(n.extra){for(R=n.extra;l<R;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;C=n.distcode[d&(1<<n.distbits)-1],g=C>>>24,E=C>>>16&255,_=65535&C,!(g<=l);){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(0==(240&E)){for(v=g,y=E,S=_;C=n.distcode[S+((d&(1<<v+y)-1)>>v)],g=C>>>24,E=C>>>16&255,_=65535&C,!(v+g<=l);){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}d>>>=v,l-=v,n.back+=v}if(d>>>=g,l-=g,n.back+=g,64&E){e.msg="invalid distance code",n.mode=jk;break}n.offset=_,n.extra=15&E,n.mode=16203;case 16203:if(n.extra){for(R=n.extra;l<R;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=jk;break}n.mode=16204;case 16204:if(0===c)break e;if(p=h-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=jk;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=r,f=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{r[o++]=m[f++]}while(--p);0===n.length&&(n.mode=Mk);break;case 16205:if(0===c)break e;r[o++]=n.length,c--,n.mode=Mk;break;case Uk:if(n.wrap){for(;l<32;){if(0===a)break e;a--,d|=i[s++]<<l,l+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?VN(n.check,r,h,o-h):UN(n.check,r,h,o-h)),h=c,4&n.wrap&&(n.flags?d:Vk(d))!==n.check){e.msg="incorrect data check",n.mode=jk;break}d=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break e;a--,d+=i[s++]<<l,l+=8}if(4&n.wrap&&d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=jk;break}d=0,l=0}n.mode=16208;case 16208:T=Tk;break e;case jk:T=wk;break e;case 16210:return Rk;default:return Ak}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=d,n.bits=l,(n.wsize||h!==e.avail_out&&n.mode<jk&&(n.mode<Uk||t!==vk))&&Qk(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?VN(n.check,r,h,e.next_out-h):UN(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Dk?128:0)+(n.mode===Lk||n.mode===xk?256:0),(0===u&&0===h||t===vk)&&T===bk&&(T=Ik),T},Zk={inflateReset:Gk,inflateReset2:Hk,inflateResetKeep:Wk,inflateInit:e=>Kk(e,15),inflateInit2:Kk,inflate:Xk,inflateEnd:e=>{if(Bk(e))return Ak;let t=e.state;return t.window&&(t.window=null),e.state=null,bk},inflateGetHeader:(e,t)=>{if(Bk(e))return Ak;const n=e.state;return 0==(2&n.wrap)?Ak:(n.head=t,t.done=!1,bk)},inflateSetDictionary:(e,t)=>{const n=t.length;let i,r,s;return Bk(e)?Ak:(i=e.state,0!==i.wrap&&i.mode!==kk?Ak:i.mode===kk&&(r=1,r=UN(r,t,n,0),r!==i.check)?wk:(s=Qk(e,t,n,n),s?(i.mode=16210,Rk):(i.havedict=1,bk)))},inflateInfo:"pako inflate (from Nodeca project)"},$k=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const eD=Object.prototype.toString,{Z_NO_FLUSH:tD,Z_FINISH:nD,Z_OK:iD,Z_STREAM_END:rD,Z_NEED_DICT:sD,Z_STREAM_ERROR:oD,Z_DATA_ERROR:aD,Z_MEM_ERROR:cD}=BN;function dD(e){this.options=YO.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new XO,this.strm.avail_out=0;let n=Zk.inflateInit2(this.strm,t.windowBits);if(n!==iD)throw new Error(FN[n]);if(this.header=new $k,Zk.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=QO.string2buf(t.dictionary):"[object ArrayBuffer]"===eD.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Zk.inflateSetDictionary(this.strm,t.dictionary),n!==iD)))throw new Error(FN[n])}function lD(e,t){const n=new dD(t);if(n.push(e),n.err)throw n.msg||FN[n.err];return n.result}dD.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?nD:tD,"[object ArrayBuffer]"===eD.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Zk.inflate(n,o),s===sD&&r&&(s=Zk.inflateSetDictionary(n,r),s===iD?s=Zk.inflate(n,o):s===aD&&(s=sD));n.avail_in>0&&s===rD&&n.state.wrap>0&&0!==e[n.next_in];)Zk.inflateReset(n),s=Zk.inflate(n,o);switch(s){case oD:case aD:case sD:case cD:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===rD))if("string"===this.options.to){let e=QO.utf8border(n.output,n.next_out),t=n.next_out-e,r=QO.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==iD||0!==a){if(s===rD)return s=Zk.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},dD.prototype.onData=function(e){this.chunks.push(e)},dD.prototype.onEnd=function(e){e===iD&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=YO.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var uD={Inflate:dD,inflate:lD,inflateRaw:function(e,t){return(t=t||{}).raw=!0,lD(e,t)},ungzip:lD,constants:BN};const{Deflate:hD,deflate:pD,deflateRaw:fD,gzip:mD}=lk,{Inflate:gD,inflate:ED,inflateRaw:_D,ungzip:vD}=uD;var yD,SD=pD,bD=ED;!function(e){e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE"}(yD||(yD={}));class TD{constructor(){sh(this,"_sequence",0),sh(this,"_startTime",Date.now()),sh(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const i={id:0,length:4,data:n.buffer},r={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[i]};t.commonPacketHeader.extension=1,t.extension=r,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;Fb("SHOW_DATASTREAM2_LOG")&&oT.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),i=new Uint8Array(n),r=new DataView(n);let s=0;if(r.setUint16(s,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),s+=2,r.setUint32(s,t.commonPacketHeader.sequence,!0),s+=4,r.setUint16(s,t.commonStreamHeader,!0),s+=2,t.extension){const e=this.serializeExtension(t.extension);i.set(new Uint8Array(e),s),s+=e.byteLength}if(i.set(new Uint8Array(t.payload),s),s+=t.payload.byteLength,s!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const i=t.getUint16(n,!0);n+=2;const r={length:16383&i,reserved:(16384&i)>>14,extension:(32768&i)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let s,o;if(n+=4,Fb("SHOW_DATASTREAM2_LOG")&&oT.debug("receive data header: ".concat(JSON.stringify(r))),t.getUint16(n,!0),n+=2,r.extension){o=this.deserializeExtension(e.slice(n)),n+=2+o.length,s=e.slice(n);let t=!1;if(o.datas.length>0){const e=o.datas.find((e=>0===e.id));e&&(t=1==(1&new DataView(e.data).getUint32(0,!0)))}s=t?this.decompress(s):s}else s=e.slice(8);return s}serializeExtension(e){const{profile:t,length:n,datas:i}=e,r=new ArrayBuffer(n+2),s=new Uint8Array(r),o=new DataView(r);let a=0;if(o.setUint8(a++,t),o.setUint8(a++,n),i.forEach((e=>{t?(o.setUint8(a++,e.id),o.setUint8(a++,e.length),s.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(o.setUint8(a++,e.id|e.length<<4),s.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==n+2)throw Error("serialize extension error, is ".concat(a,"!==").concat(n+2));return r}deserializeExtension(e){const t=new DataView(e);let n=0;const i=t.getUint8(n);n++;const r=t.getUint8(n);n++;const s=i===yD.TWO_BYTE,o=[],a=new DataView(e,2);let c=0;for(;c<r;){let e=0,t=0,n=new ArrayBuffer(0);s?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(n=a.buffer.slice(c+2,c+2+t),c+=n.byteLength),o.push({id:e,length:t,data:n})}if(c!==r)throw Error("parse error");return{profile:i,length:r,datas:o}}decompress(e){return bD(new Uint8Array(e))}compress(e){return SD(new Uint8Array(e))}}class CD extends dv{constructor(e,t){super(),sh(this,"_version",1),sh(this,"_type",3),sh(this,"_config",void 0),sh(this,"_originDataChannel",void 0),sh(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),sh(this,"_dataStreamPacketHandler",void 0),sh(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader(),this._dataStreamPacketHandler=new TD}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return Fb("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new c_(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new K_(H_.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new K_(H_.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new K_(H_.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[RR.OPEN,RR.CLOSE,RR.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,i]=t;e.removeEventListener(n,i)})),this._datachannelEventMap.clear()}}class AD extends CD{constructor(e){super(e),sh(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(Fb("SHOW_DATASTREAM2_LOG")&&oT.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let i=e.data.slice(this._dataStreamPacketHeader.byteLength);i=this._dataStreamPacketHandler.deserialize(i),this.emit(RR.MESSAGE,i)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class wD extends CD{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}var RD=r,ID=pt("iterator"),ND=!RD((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),i="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),i+=n+e})),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ID]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})),OD=Uo,kD=On,DD=p,PD=x,xD=l,LD=k,MD=ND,UD=Uo,jD=Vo,VD=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:OD(e,i,t[i],n);return e},FD=da,BD=Sl,WD=Aa,GD=Lf,HD=N,KD=$e,zD=Xt,YD=ui,qD=rn,JD=ne,QD=fi,XD=vo,ZD=B,$D=Fp,eP=Pp,tP=Kf,nP=Sh,iP=pt("iterator"),rP="URLSearchParams",sP=rP+"Iterator",oP=WD.set,aP=WD.getterFor(rP),cP=WD.getterFor(sP),dP=Object.getOwnPropertyDescriptor,lP=function(e){if(!LD)return DD[e];var t=dP(DD,e);return t&&t.value},uP=lP("fetch"),hP=lP("Request"),pP=lP("Headers"),fP=hP&&hP.prototype,mP=pP&&pP.prototype,gP=DD.RegExp,EP=DD.TypeError,_P=DD.decodeURIComponent,vP=DD.encodeURIComponent,yP=xD("".charAt),SP=xD([].join),bP=xD([].push),TP=xD("".replace),CP=xD([].shift),AP=xD([].splice),wP=xD("".split),RP=xD("".slice),IP=/\+/g,NP=Array(4),OP=function(e){return NP[e-1]||(NP[e-1]=gP("((?:%[\\da-f]{2}){"+e+"})","gi"))},kP=function(e){try{return _P(e)}catch(t){return e}},DP=function(e){var t=TP(e,IP," "),n=4;try{return _P(t)}catch(e){for(;n;)t=TP(t,OP(n--),kP);return t}},PP=/[!'()~]|%20/g,xP={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},LP=function(e){return xP[e]},MP=function(e){return TP(vP(e),PP,LP)},UP=BD((function(e,t){oP(this,{type:sP,iterator:$D(aP(e).entries),kind:t})}),"Iterator",(function(){var e=cP(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),!0),jP=function(e){this.entries=[],this.url=null,void 0!==e&&(JD(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===yP(e,0)?RP(e,1):e:QD(e)))};jP.prototype={type:rP,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,r,s,o,a,c=eP(e);if(c)for(n=(t=$D(e,c)).next;!(i=PD(n,t)).done;){if(s=(r=$D(qD(i.value))).next,(o=PD(s,r)).done||(a=PD(s,r)).done||!PD(s,r).done)throw EP("Expected sequence with length 2");bP(this.entries,{key:QD(o.value),value:QD(a.value)})}else for(var d in e)KD(e,d)&&bP(this.entries,{key:d,value:QD(e[d])})},parseQuery:function(e){if(e)for(var t,n,i=wP(e,"&"),r=0;r<i.length;)(t=i[r++]).length&&(n=wP(t,"="),bP(this.entries,{key:DP(CP(n)),value:DP(SP(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],bP(n,MP(e.key)+"="+MP(e.value));return SP(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var VP=function(){GD(this,FP);var e=oP(this,new jP(arguments.length>0?arguments[0]:void 0));LD||(this.size=e.entries.length)},FP=VP.prototype;if(VD(FP,{append:function(e,t){var n=aP(this);tP(arguments.length,2),bP(n.entries,{key:QD(e),value:QD(t)}),LD||this.length++,n.updateURL()},delete:function(e){for(var t=aP(this),n=tP(arguments.length,1),i=t.entries,r=QD(e),s=n<2?void 0:arguments[1],o=void 0===s?s:QD(s),a=0;a<i.length;){var c=i[a];if(c.key!==r||void 0!==o&&c.value!==o)a++;else if(AP(i,a,1),void 0!==o)break}LD||(this.size=i.length),t.updateURL()},get:function(e){var t=aP(this).entries;tP(arguments.length,1);for(var n=QD(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){var t=aP(this).entries;tP(arguments.length,1);for(var n=QD(e),i=[],r=0;r<t.length;r++)t[r].key===n&&bP(i,t[r].value);return i},has:function(e){for(var t=aP(this).entries,n=tP(arguments.length,1),i=QD(e),r=n<2?void 0:arguments[1],s=void 0===r?r:QD(r),o=0;o<t.length;){var a=t[o++];if(a.key===i&&(void 0===s||a.value===s))return!0}return!1},set:function(e,t){var n=aP(this);tP(arguments.length,1);for(var i,r=n.entries,s=!1,o=QD(e),a=QD(t),c=0;c<r.length;c++)(i=r[c]).key===o&&(s?AP(r,c--,1):(s=!0,i.value=a));s||bP(r,{key:o,value:a}),LD||(this.size=r.length),n.updateURL()},sort:function(){var e=aP(this);nP(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=aP(this).entries,i=zD(e,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new UP(this,"keys")},values:function(){return new UP(this,"values")},entries:function(){return new UP(this,"entries")}},{enumerable:!0}),UD(FP,iP,FP.entries,{name:"entries"}),UD(FP,"toString",(function(){return aP(this).serialize()}),{enumerable:!0}),LD&&jD(FP,"size",{get:function(){return aP(this).entries.length},configurable:!0,enumerable:!0}),FD(VP,rP),kD({global:!0,constructor:!0,forced:!MD},{URLSearchParams:VP}),!MD&&HD(pP)){var BP=xD(mP.has),WP=xD(mP.set),GP=function(e){if(JD(e)){var t,n=e.body;if(YD(n)===rP)return t=e.headers?new pP(e.headers):new pP,BP(t,"content-type")||WP(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),XD(e,{body:ZD(0,QD(n)),headers:ZD(0,t)})}return e};if(HD(uP)&&kD({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return uP(e,arguments.length>1?GP(arguments[1]):{})}}),HD(hP)){var HP=function(e){return GD(this,fP),new hP(e,arguments.length>1?GP(arguments[1]):{})};fP.constructor=HP,HP.prototype=fP,kD({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:HP})}}var KP,zP={URLSearchParams:VP,getState:aP},YP=k,qP=l,JP=x,QP=r,XP=Ys,ZP=Lo,$P=L,ex=Qe,tx=z,nx=Object.assign,ix=Object.defineProperty,rx=qP([].concat),sx=!nx||QP((function(){if(YP&&1!==nx({b:1},nx(ix({},"a",{enumerable:!0,get:function(){ix(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=nx({},e)[n]||XP(nx({},t)).join("")!=i}))?function(e,t){for(var n=ex(e),i=arguments.length,r=1,s=ZP.f,o=$P.f;i>r;)for(var a,c=tx(arguments[r++]),d=s?rx(XP(c),s(c)):XP(c),l=d.length,u=0;l>u;)a=d[u++],YP&&!JP(o,c,a)||(n[a]=c[a]);return n}:nx,ox=rn,ax=Hp,cx=Xt,dx=x,lx=Qe,ux=function(e,t,n,i){try{return i?t(ox(n)[0],n[1]):t(n)}catch(t){ax(e,"throw",t)}},hx=Rp,px=us,fx=Wn,mx=Yr,gx=Fp,Ex=Pp,_x=Array,vx=l,yx=2147483647,Sx=/[^\0-\u007E]/,bx=/[.\u3002\uFF0E\uFF61]/g,Tx="Overflow: input needs wider integers to process",Cx=RangeError,Ax=vx(bx.exec),wx=Math.floor,Rx=String.fromCharCode,Ix=vx("".charCodeAt),Nx=vx([].join),Ox=vx([].push),kx=vx("".replace),Dx=vx("".split),Px=vx("".toLowerCase),xx=function(e){return e+22+75*(e<26)},Lx=function(e,t,n){var i=0;for(e=n?wx(e/700):e>>1,e+=wx(e/t);e>455;)e=wx(e/35),i+=36;return wx(i+36*e/(e+38))},Mx=function(e){var t=[];e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=Ix(e,n++);if(r>=55296&&r<=56319&&n<i){var s=Ix(e,n++);56320==(64512&s)?Ox(t,((1023&r)<<10)+(1023&s)+65536):(Ox(t,r),n--)}else Ox(t,r)}return t}(e);var n,i,r=e.length,s=128,o=0,a=72;for(n=0;n<e.length;n++)(i=e[n])<128&&Ox(t,Rx(i));var c=t.length,d=c;for(c&&Ox(t,"-");d<r;){var l=yx;for(n=0;n<e.length;n++)(i=e[n])>=s&&i<l&&(l=i);var u=d+1;if(l-s>wx((yx-o)/u))throw Cx(Tx);for(o+=(l-s)*u,s=l,n=0;n<e.length;n++){if((i=e[n])<s&&++o>yx)throw Cx(Tx);if(i==s){for(var h=o,p=36;;){var f=p<=a?1:p>=a+26?26:p-a;if(h<f)break;var m=h-f,g=36-f;Ox(t,Rx(xx(f+m%g))),h=wx(m/g),p+=36}Ox(t,Rx(xx(h))),a=Lx(o,u,d==c),o=0,d++}}o++,s++}return Nx(t,"")},Ux=On,jx=k,Vx=ND,Fx=p,Bx=Xt,Wx=l,Gx=Uo,Hx=Vo,Kx=Lf,zx=$e,Yx=sx,qx=function(e){var t=lx(e),n=px(this),i=arguments.length,r=i>1?arguments[1]:void 0,s=void 0!==r;s&&(r=cx(r,i>2?arguments[2]:void 0));var o,a,c,d,l,u,h=Ex(t),p=0;if(!h||this===_x&&hx(h))for(o=fx(t),a=n?new this(o):_x(o);o>p;p++)u=s?r(t[p],p):t[p],mx(a,p,u);else for(l=(d=gx(t,h)).next,a=n?new this:[];!(c=dx(l,d)).done;p++)u=s?ux(d,r,[c.value,p],!0):c.value,mx(a,p,u);return a.length=p,a},Jx=No,Qx=zu.codeAt,Xx=function(e){var t,n,i=[],r=Dx(kx(Px(e),bx,"."),".");for(t=0;t<r.length;t++)n=r[t],Ox(i,Ax(Sx,n)?"xn--"+Mx(n):n);return Nx(i,".")},Zx=fi,$x=da,eL=Kf,tL=zP,nL=Aa,iL=nL.set,rL=nL.getterFor("URL"),sL=tL.URLSearchParams,oL=tL.getState,aL=Fx.URL,cL=Fx.TypeError,dL=Fx.parseInt,lL=Math.floor,uL=Math.pow,hL=Wx("".charAt),pL=Wx(/./.exec),fL=Wx([].join),mL=Wx(1..toString),gL=Wx([].pop),EL=Wx([].push),_L=Wx("".replace),vL=Wx([].shift),yL=Wx("".split),SL=Wx("".slice),bL=Wx("".toLowerCase),TL=Wx([].unshift),CL="Invalid scheme",AL="Invalid host",wL="Invalid port",RL=/[a-z]/i,IL=/[\d+-.a-z]/i,NL=/\d/,OL=/^0x/i,kL=/^[0-7]+$/,DL=/^\d+$/,PL=/^[\da-f]+$/i,xL=/[\0\t\n\r #%/:<>?@[\\\]^|]/,LL=/[\0\t\n\r #/:<>?@[\\\]^|]/,ML=/^[\u0000-\u0020]+/,UL=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,jL=/[\t\n\r]/g,VL=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)TL(t,e%256),e=lL(e/256);return fL(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,s=0;s<8;s++)0!==e[s]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=s),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=mL(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},FL={},BL=Yx({},FL,{" ":1,'"':1,"<":1,">":1,"`":1}),WL=Yx({},BL,{"#":1,"?":1,"{":1,"}":1}),GL=Yx({},WL,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),HL=function(e,t){var n=Qx(e,0);return n>32&&n<127&&!zx(t,e)?e:encodeURIComponent(e)},KL={ftp:21,file:null,http:80,https:443,ws:80,wss:443},zL=function(e,t){var n;return 2==e.length&&pL(RL,hL(e,0))&&(":"==(n=hL(e,1))||!t&&"|"==n)},YL=function(e){var t;return e.length>1&&zL(SL(e,0,2))&&(2==e.length||"/"===(t=hL(e,2))||"\\"===t||"?"===t||"#"===t)},qL=function(e){return"."===e||"%2e"===bL(e)},JL={},QL={},XL={},ZL={},$L={},eM={},tM={},nM={},iM={},rM={},sM={},oM={},aM={},cM={},dM={},lM={},uM={},hM={},pM={},fM={},mM={},gM=function(e,t,n){var i,r,s,o=Zx(e);if(t){if(r=this.parse(o))throw cL(r);this.searchParams=null}else{if(void 0!==n&&(i=new gM(n,!0)),r=this.parse(o,null,i))throw cL(r);(s=oL(new sL)).bindURL(this),this.searchParams=s}};gM.prototype={type:"URL",parse:function(e,t,n){var i,r,s,o,a,c=this,d=t||JL,l=0,u="",h=!1,p=!1,f=!1;for(e=Zx(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=_L(e,ML,""),e=_L(e,UL,"$1")),e=_L(e,jL,""),i=qx(e);l<=i.length;){switch(r=i[l],d){case JL:if(!r||!pL(RL,r)){if(t)return CL;d=XL;continue}u+=bL(r),d=QL;break;case QL:if(r&&(pL(IL,r)||"+"==r||"-"==r||"."==r))u+=bL(r);else{if(":"!=r){if(t)return CL;u="",d=XL,l=0;continue}if(t&&(c.isSpecial()!=zx(KL,u)||"file"==u&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&KL[c.scheme]==c.port&&(c.port=null));u="","file"==c.scheme?d=cM:c.isSpecial()&&n&&n.scheme==c.scheme?d=ZL:c.isSpecial()?d=nM:"/"==i[l+1]?(d=$L,l++):(c.cannotBeABaseURL=!0,EL(c.path,""),d=pM)}break;case XL:if(!n||n.cannotBeABaseURL&&"#"!=r)return CL;if(n.cannotBeABaseURL&&"#"==r){c.scheme=n.scheme,c.path=Jx(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,d=mM;break}d="file"==n.scheme?cM:eM;continue;case ZL:if("/"!=r||"/"!=i[l+1]){d=eM;continue}d=iM,l++;break;case $L:if("/"==r){d=rM;break}d=hM;continue;case eM:if(c.scheme=n.scheme,r==KP)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Jx(n.path),c.query=n.query;else if("/"==r||"\\"==r&&c.isSpecial())d=tM;else if("?"==r)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Jx(n.path),c.query="",d=fM;else{if("#"!=r){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Jx(n.path),c.path.length--,d=hM;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Jx(n.path),c.query=n.query,c.fragment="",d=mM}break;case tM:if(!c.isSpecial()||"/"!=r&&"\\"!=r){if("/"!=r){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,d=hM;continue}d=rM}else d=iM;break;case nM:if(d=iM,"/"!=r||"/"!=hL(u,l+1))continue;l++;break;case iM:if("/"!=r&&"\\"!=r){d=rM;continue}break;case rM:if("@"==r){h&&(u="%40"+u),h=!0,s=qx(u);for(var m=0;m<s.length;m++){var g=s[m];if(":"!=g||f){var E=HL(g,GL);f?c.password+=E:c.username+=E}else f=!0}u=""}else if(r==KP||"/"==r||"?"==r||"#"==r||"\\"==r&&c.isSpecial()){if(h&&""==u)return"Invalid authority";l-=qx(u).length+1,u="",d=sM}else u+=r;break;case sM:case oM:if(t&&"file"==c.scheme){d=lM;continue}if(":"!=r||p){if(r==KP||"/"==r||"?"==r||"#"==r||"\\"==r&&c.isSpecial()){if(c.isSpecial()&&""==u)return AL;if(t&&""==u&&(c.includesCredentials()||null!==c.port))return;if(o=c.parseHost(u))return o;if(u="",d=uM,t)return;continue}"["==r?p=!0:"]"==r&&(p=!1),u+=r}else{if(""==u)return AL;if(o=c.parseHost(u))return o;if(u="",d=aM,t==oM)return}break;case aM:if(!pL(NL,r)){if(r==KP||"/"==r||"?"==r||"#"==r||"\\"==r&&c.isSpecial()||t){if(""!=u){var _=dL(u,10);if(_>65535)return wL;c.port=c.isSpecial()&&_===KL[c.scheme]?null:_,u=""}if(t)return;d=uM;continue}return wL}u+=r;break;case cM:if(c.scheme="file","/"==r||"\\"==r)d=dM;else{if(!n||"file"!=n.scheme){d=hM;continue}if(r==KP)c.host=n.host,c.path=Jx(n.path),c.query=n.query;else if("?"==r)c.host=n.host,c.path=Jx(n.path),c.query="",d=fM;else{if("#"!=r){YL(fL(Jx(i,l),""))||(c.host=n.host,c.path=Jx(n.path),c.shortenPath()),d=hM;continue}c.host=n.host,c.path=Jx(n.path),c.query=n.query,c.fragment="",d=mM}}break;case dM:if("/"==r||"\\"==r){d=lM;break}n&&"file"==n.scheme&&!YL(fL(Jx(i,l),""))&&(zL(n.path[0],!0)?EL(c.path,n.path[0]):c.host=n.host),d=hM;continue;case lM:if(r==KP||"/"==r||"\\"==r||"?"==r||"#"==r){if(!t&&zL(u))d=hM;else if(""==u){if(c.host="",t)return;d=uM}else{if(o=c.parseHost(u))return o;if("localhost"==c.host&&(c.host=""),t)return;u="",d=uM}continue}u+=r;break;case uM:if(c.isSpecial()){if(d=hM,"/"!=r&&"\\"!=r)continue}else if(t||"?"!=r)if(t||"#"!=r){if(r!=KP&&(d=hM,"/"!=r))continue}else c.fragment="",d=mM;else c.query="",d=fM;break;case hM:if(r==KP||"/"==r||"\\"==r&&c.isSpecial()||!t&&("?"==r||"#"==r)){if(".."===(a=bL(a=u))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"==r||"\\"==r&&c.isSpecial()||EL(c.path,"")):qL(u)?"/"==r||"\\"==r&&c.isSpecial()||EL(c.path,""):("file"==c.scheme&&!c.path.length&&zL(u)&&(c.host&&(c.host=""),u=hL(u,0)+":"),EL(c.path,u)),u="","file"==c.scheme&&(r==KP||"?"==r||"#"==r))for(;c.path.length>1&&""===c.path[0];)vL(c.path);"?"==r?(c.query="",d=fM):"#"==r&&(c.fragment="",d=mM)}else u+=HL(r,WL);break;case pM:"?"==r?(c.query="",d=fM):"#"==r?(c.fragment="",d=mM):r!=KP&&(c.path[0]+=HL(r,FL));break;case fM:t||"#"!=r?r!=KP&&("'"==r&&c.isSpecial()?c.query+="%27":c.query+="#"==r?"%23":HL(r,FL)):(c.fragment="",d=mM);break;case mM:r!=KP&&(c.fragment+=HL(r,BL))}l++}},parseHost:function(e){var t,n,i;if("["==hL(e,0)){if("]"!=hL(e,e.length-1))return AL;if(t=function(e){var t,n,i,r,s,o,a,c=[0,0,0,0,0,0,0,0],d=0,l=null,u=0,h=function(){return hL(e,u)};if(":"==h()){if(":"!=hL(e,1))return;u+=2,l=++d}for(;h();){if(8==d)return;if(":"!=h()){for(t=n=0;n<4&&pL(PL,h());)t=16*t+dL(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,d>6)return;for(i=0;h();){if(r=null,i>0){if(!("."==h()&&i<4))return;u++}if(!pL(NL,h()))return;for(;pL(NL,h());){if(s=dL(h(),10),null===r)r=s;else{if(0==r)return;r=10*r+s}if(r>255)return;u++}c[d]=256*c[d]+r,2!=++i&&4!=i||d++}if(4!=i)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;c[d++]=t}else{if(null!==l)return;u++,l=++d}}if(null!==l)for(o=d-l,d=7;0!=d&&o>0;)a=c[d],c[d--]=c[l+o-1],c[l+--o]=a;else if(8!=d)return;return c}(SL(e,1,-1)),!t)return AL;this.host=t}else if(this.isSpecial()){if(e=Xx(e),pL(xL,e))return AL;if(t=function(e){var t,n,i,r,s,o,a,c=yL(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=c[i]))return e;if(s=10,r.length>1&&"0"==hL(r,0)&&(s=pL(OL,r)?16:8,r=SL(r,8==s?1:2)),""===r)o=0;else{if(!pL(10==s?DL:8==s?kL:PL,r))return e;o=dL(r,s)}EL(n,o)}for(i=0;i<t;i++)if(o=n[i],i==t-1){if(o>=uL(256,5-t))return null}else if(o>255)return null;for(a=gL(n),i=0;i<n.length;i++)a+=n[i]*uL(256,3-i);return a}(e),null===t)return AL;this.host=t}else{if(pL(LL,e))return AL;for(t="",n=qx(e),i=0;i<n.length;i++)t+=HL(n[i],FL);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return zx(KL,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&zL(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,i=e.password,r=e.host,s=e.port,o=e.path,a=e.query,c=e.fragment,d=t+":";return null!==r?(d+="//",e.includesCredentials()&&(d+=n+(i?":"+i:"")+"@"),d+=VL(r),null!==s&&(d+=":"+s)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?o[0]:o.length?"/"+fL(o,"/"):"",null!==a&&(d+="?"+a),null!==c&&(d+="#"+c),d},setHref:function(e){var t=this.parse(e);if(t)throw cL(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new EM(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+VL(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Zx(e)+":",JL)},getUsername:function(){return this.username},setUsername:function(e){var t=qx(Zx(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=HL(t[n],GL)}},getPassword:function(){return this.password},setPassword:function(e){var t=qx(Zx(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=HL(t[n],GL)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?VL(e):VL(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,sM)},getHostname:function(){var e=this.host;return null===e?"":VL(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,oM)},getPort:function(){var e=this.port;return null===e?"":Zx(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=Zx(e))?this.port=null:this.parse(e,aM))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+fL(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,uM))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=Zx(e))?this.query=null:("?"==hL(e,0)&&(e=SL(e,1)),this.query="",this.parse(e,fM)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=Zx(e))?("#"==hL(e,0)&&(e=SL(e,1)),this.fragment="",this.parse(e,mM)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var EM=function(e){var t=Kx(this,_M),n=eL(arguments.length,1)>1?arguments[1]:void 0,i=iL(t,new gM(e,!1,n));jx||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},_M=EM.prototype,vM=function(e,t){return{get:function(){return rL(this)[e]()},set:t&&function(e){return rL(this)[t](e)},configurable:!0,enumerable:!0}};if(jx&&(Hx(_M,"href",vM("serialize","setHref")),Hx(_M,"origin",vM("getOrigin")),Hx(_M,"protocol",vM("getProtocol","setProtocol")),Hx(_M,"username",vM("getUsername","setUsername")),Hx(_M,"password",vM("getPassword","setPassword")),Hx(_M,"host",vM("getHost","setHost")),Hx(_M,"hostname",vM("getHostname","setHostname")),Hx(_M,"port",vM("getPort","setPort")),Hx(_M,"pathname",vM("getPathname","setPathname")),Hx(_M,"search",vM("getSearch","setSearch")),Hx(_M,"searchParams",vM("getSearchParams")),Hx(_M,"hash",vM("getHash","setHash"))),Gx(_M,"toJSON",(function(){return rL(this).serialize()}),{enumerable:!0}),Gx(_M,"toString",(function(){return rL(this).serialize()}),{enumerable:!0}),aL){var yM=aL.createObjectURL,SM=aL.revokeObjectURL;yM&&Gx(EM,"createObjectURL",Bx(yM,aL)),SM&&Gx(EM,"revokeObjectURL",Bx(SM,aL))}$x(EM,"URL"),Ux({global:!0,constructor:!0,forced:!Vx,sham:!jx},{URL:EM});var bM=On,TM=r,CM=Kf,AM=fi,wM=ND,RM=ce("URL");bM({target:"URL",stat:!0,forced:!(wM&&TM((function(){RM.canParse()})))},{canParse:function(e){var t=CM(arguments.length,1),n=AM(e),i=t<2||void 0===arguments[1]?void 0:AM(arguments[1]);try{return!!new RM(n,i)}catch(e){return!1}}});var IM=i(ie.URL);function NM(){const e=new Blob([atob("ZnVuY3Rpb24gZShlKXtjb25zdCB0PW5ldyBEYXRhVmlldyhlLmRhdGEpO2lmKDA9PT10LmdldFVpbnQ4KDApJiYwPT09dC5nZXRVaW50OCgxKSYmMD09PXQuZ2V0VWludDgoMikmJjE9PT10LmdldFVpbnQ4KDMpJiY2PT09dC5nZXRVaW50OCg0KSl7bGV0IG49NixyPTAsbz0wO2Zvcig7MjU1PT09KG89dC5nZXRVaW50OChuKyspKTspcis9MjU1O3IrPW87Y29uc3QgYT1mdW5jdGlvbihlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLG89W10sYT0wO2Zvcig7YTxuOylhKzM8biYmMD09PXJbYV0mJjA9PT1yW2ErMV0mJjM9PT1yW2ErMl0mJigwPT09clthKzNdfHwxPT09clthKzNdfHwyPT09clthKzNdfHwzPT09clthKzNdKT8oby5wdXNoKHJbYV0sclthKzFdLHJbYSszXSksYSs9NCk6KG8ucHVzaChyW2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShvKX0oZS5kYXRhLG4scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfXJldHVybiBudWxsfWZ1bmN0aW9uIHQoZSx0KXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5sZW5ndGg7bGV0IG49W10scj0wO2Zvcig7cjx0OylyKzI8dCYmMD09PWVbcl0mJjA9PT1lW3IrMV0mJigwPT09ZVtyKzJdfHwxPT09ZVtyKzJdfHwyPT09ZVtyKzJdfHwzPT09ZVtyKzJdKT8obi5wdXNoKGVbcl0sZVtyKzFdLDMsZVtyKzJdKSxyKz0zKToobi5wdXNoKGVbcl0pLHIrKyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG4pfSh0KSxyPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihyLzI1NSksYT1yJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK3IrZS5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBpPTA7Zm9yKDtpPG87KXNbNitpXT0yNTUsaSsrO3JldHVybiBzWzYraV09YSxpKysscy5zZXQobiw2K2kpLHMuc2V0KG5ldyBVaW50OEFycmF5KGUpLDYraStyKSxzLmJ1ZmZlcn1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpPi0xJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikmJihzZWxmLm9ucnRjdHJhbnNmb3JtPW49Pntjb25zdCByPW4udHJhbnNmb3JtZXI7bGV0IG89W107ci5vcHRpb25zLnBvcnQub25tZXNzYWdlPWU9PntlLmRhdGEuc2VpJiZvLnB1c2goZS5kYXRhLnNlaSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBhPXIucmVhZGFibGUuZ2V0UmVhZGVyKCkscz1yLndyaXRhYmxlLmdldFdyaXRlcigpOyJyeCI9PT1yLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2EucmVhZCgpLnRoZW4oKHI9PntpZighci5kb25lKXtpZihyLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7YS5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1vLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>IM.revokeObjectURL(e)),0),new Worker(IM.createObjectURL(e))}const OM=new Map,kM=new Map;async function DM(e){if(!Ww().supportWebRTCEncodedTransform)return void oT.warning("browser not support audio encoded transform");if(kM.has(e))return;const t={track:e.track};if(w_()){if(!e.createEncodedStreams)return void oT.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void oT.error("create audio-encoded-streams error",e&&e.message)}const r=new TransformStream({transform(i,r){t.controller||(t.controller=r),e.track&&e.track.id!==t.track.id&&(oT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),r.enqueue(i)}});i.readable.pipeThrough(r).pipeTo(i.writable)}else if(R_()){if("undefined"==typeof RTCRtpScriptTransform)return void oT.warning("browser not support RTCRtpScriptTransform");const i=NM(),r=new MessageChannel;await new c_((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(i,{name:"rx",port:r.port2},[r.port2]);e.transform=s,await new c_((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),r.port1.onmessage=i=>{var r;i.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==t.track.id&&(oT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=i}function n(){e.track.removeEventListener("ended",n),function(e){const t=kM.get(e);if(t){kM.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){oT.warning(e&&e.message)}}}(e)}kM.set(e,t),e.track.addEventListener("ended",n)}function PM(e){const t=new DataView(e.data);if(0===t.getUint8(0)&&0===t.getUint8(1)&&0===t.getUint8(2)&&1===t.getUint8(3)&&6===t.getUint8(4)){let n=6,i=0,r=0;for(;255===(r=t.getUint8(n++));)i+=255;i+=r;const s=function(e,t,n){let i=new Uint8Array(e,t,n),r=[],s=0;for(;s<n;)s+3<n&&0===i[s]&&0===i[s+1]&&3===i[s+2]&&(0===i[s+3]||1===i[s+3]||2===i[s+3]||3===i[s+3])?(r.push(i[s],i[s+1],i[s+3]),s+=4):(r.push(i[s]),s++);return new Uint8Array(r)}(e.data,n,i);return new Uint8Array(s)}return null}function xM(e,t){const n=function(e){const t=e.length;let n=[],i=0;for(;i<t;)i+2<t&&0===e[i]&&0===e[i+1]&&(0===e[i+2]||1===e[i+2]||2===e[i+2]||3===e[i+2])?(n.push(e[i],e[i+1],3,e[i+2]),i+=3):(n.push(e[i]),i++);return new Uint8Array(n)}(t),i=n.length,r=Math.floor(i/255),s=i%255,o=new Uint8Array(6+r+1+i+e.byteLength);o[0]=0,o[1]=0,o[2]=0,o[3]=1,o[4]=6,o[5]=101;let a=0;for(;a<r;)o[6+a]=255,a++;return o[6+a]=s,a++,o.set(n,6+a),o.set(new Uint8Array(e),6+a+i),o.buffer}const LM=new Map,MM=new Map;async function UM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ww().supportWebRTCEncodedTransform)return void oT.warning("browser not support video encoded transform");if(!e.track)return;if(MM.has(e)){const n=MM.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(w_()){if(!e.createEncodedStreams)return void oT.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void oT.error("create video-encoded-streams error",e&&e.message)}const r=new TransformStream({transform(t,r){n.controller||(n.controller=r),e.track&&e.track.id!==n.track.id&&(oT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",i),n.track=e.track,n.track.addEventListener("ended",i));const s=PM(t);s&&n.onSei&&n.onSei(s),r.enqueue(t)}});t.readable.pipeThrough(r).pipeTo(t.writable)}else if(R_()){if("undefined"==typeof RTCRtpScriptTransform)return void oT.warning("browser not support RTCRtpScriptTransform");const t=NM(),r=new MessageChannel;await new c_((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(t,{name:"rx",port:r.port2},[r.port2]);e.transform=s,await new c_((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),r.port1.onmessage=t=>{var r;t.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==n.track.id?(oT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",i),n.track=e.track,n.track.addEventListener("ended",i)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function i(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",i)}!function(e){const t=MM.get(e);if(t){MM.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){oT.warning(e&&e.message)}}}(e)}MM.set(e,n),e.track.addEventListener("ended",i)}!function(){const e=y_();Bw.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Bw.getStreamFromExtension=e.name===m_.CHROME&&Number(e.version)>34,Bw.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),Bw.supportMinBitrate=e.name===m_.CHROME||e.name===m_.EDGE,Bw.supportSetRtpSenderParameters=function(){const e=y_();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!B_()||!(!R_()&&!T_())||e.name===m_.FIREFOX&&Number(e.version)>=64)}(),e.name===m_.SAFARI&&(Number(e.version)>=14?Bw.supportDualStream=!0:Bw.supportDualStream=!1),Bw.webAudioMediaStreamDest=function(){const e=y_();return!(e.name===m_.SAFARI&&Number(e.version)<12)}(),Bw.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,Bw.supportWebGL="undefined"!=typeof WebGLRenderingContext,Bw.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,B_()||(Bw.webAudioWithAEC=!0),Bw.supportShareAudio=function(){const e=y_();return(e.os===f_.WIN_10||e.os===f_.WIN_81||e.os===f_.WIN_7||e.os===f_.LINUX||e.os===f_.MAC_OS||e.os===f_.CHROMIUM_OS)&&e.name===m_.CHROME&&Number(e.version)>=74}(),Bw.supportDataChannel=!!(O_(76)||function(e){const t=y_();return!(t.name!==m_.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){const t=y_();return!(t.name!==m_.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14)),Bw.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!I_()&&!!e&&e.prototype.setConfiguration instanceof Function}(),Bw.supportWebRTCEncodedTransform=function(){const e=y_();return"Chrome"===e.name&&Number(e.version)>=86||"Safari"===e.name&&Number(e.version)>=15}(),Bw.supportWebRTCInsertableStream=function(){const e=y_();return(e.name===m_.CHROME||e.name===m_.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),Kv((()=>{Bw.supportDualStreamEncoding=function(){const e=y_();return!!Fb("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&Fb("CHROME_DUAL_STREAM_USE_ENCODING"))}(),oT.info("browser compatibility",JSON.stringify(Bw),JSON.stringify(e))}))}();class jM extends dv{constructor(){super(...arguments),sh(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(Fb("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const i=this.resultStorage.get(e);if(i&&(i.result.push(n),i.result.length>=5)){var r;const n=Ii(r=i.result).call(r,!0);i.isPrevNormal&&!n&&this.emit("exception",VM[e],e,t),!i.isPrevNormal&&n&&this.emit("exception",VM[e]+2e3,e+"_RECOVER",t),i.isPrevNormal=n,i.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof bI&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=VA(t._encoderConfig.frameRate));const i=e.captureFrameRate;return!n||!i||!(n>10&&i<5||n<10&&n>=5&&i<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof bI&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const VM={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},FM=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function BM(e,t){this.v=e,this.k=t}function WM(e){return new BM(e,0)}var GM=a_,HM=hg;On({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=HM.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var KM=hg,zM=Ym;On({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=KM.f(this),n=zM(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var YM=i(GM),qM=Fo.f("asyncIterator"),JM=i(qM);function QM(e){var t,n;function i(t,n){try{var s=e[t](n),o=s.value,a=o instanceof BM;YM.resolve(a?o.v:o).then((function(n){if(a){var c="return"===t?"return":"next";if(!o.k||n.done)return i(c,n);n=e[c](n).value}r(s.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new YM((function(s,o){var a={key:e,arg:r,resolve:s,reject:o,next:null};n?n=n.next=a:(t=n=a,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function XM(e){return function(){return new QM(e.apply(this,arguments))}}QM.prototype["function"==typeof Uu&&JM||"@@asyncIterator"]=function(){return this},QM.prototype.next=function(e){return this._invoke("next",e)},QM.prototype.throw=function(e){return this._invoke("throw",e)},QM.prototype.return=function(e){return this._invoke("return",e)};var ZM=i(ie.Object.getOwnPropertySymbols),$M=On,eU=Yn.indexOf,tU=Th,nU=A([].indexOf),iU=!!nU&&1/nU([1],1,-0)<0;$M({target:"Array",proto:!0,forced:iU||!tU("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return iU?nU(this,e,t)||0:eU(this,e,t)}});var rU=Qn("Array").indexOf,sU=u,oU=rU,aU=Array.prototype,cU=i((function(e){var t=e.indexOf;return e===aU||sU(aU,e)&&t===aU.indexOf?oU:t})),dU=Qe,lU=Ys;On({target:"Object",stat:!0,forced:r((function(){lU(1)}))},{keys:function(e){return lU(dU(e))}});var uU=i(ie.Object.keys);function hU(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=uU(e);for(i=0;i<s.length;i++)n=s[i],cU(t).call(t,n)>=0||(r[n]=e[n]);return r}(e,t);if(ZM){var s=ZM(e);for(i=0;i<s.length;i++)n=s[i],cU(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var pU={exports:{}};!function(e,t){e.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>b,Printer:()=>R,parse:()=>k,print:()=>D});const i="\n",r="".concat("\r").concat(i),s=" ";let o;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function d(e){return c(e)||e>="\x80"&&e<="\xff"}function l(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function u(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function m(e){return h(e)||a(e)||"+"===e||"/"===e}function g(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function E(e){return h(e)||a(e)||"+"===e||"/"===e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(o||(o={}));class S{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===i)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,s)}consumeOneOrMore(e,t,n){let i=t;for(;n(e[i]);)i++;if(i-t==0)throw new Error("Invalid rule at ".concat(t,"."));return i}consumeSpace(e,t){if(e[t]===s)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let i=0;i<4;i++)if(n=this.consumeDecimalUChar(e,n),3!==i){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let r=0;r<3&&a(e[n]);r++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const i=parseInt(e.slice(t,n));if(i>=0&&i<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((i=e[t+n])>="0"&&i<="9"||i>="a"&&i<="f"||i>="A"&&i<="F")){if(0===n)throw new Error("Invalid hex 4");break}var i;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||h(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,d)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const i=e.slice(t,n),r=parseInt(i);if(r<224||r>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let s=0;s<3;s++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!u(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!u(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,l)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(u(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,s)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let i=0;i<n.length;i++){if(t+i>=e.length)throw new Error("consume exceeding value length");if(e[t+i]!==n[i])throw new Error("consume ".concat(n," failed at ").concat(i))}return t+n.length}consumeTill(e,t,n){let i=t;for(;i<e.length&&("string"!=typeof n||e[i]!==n)&&("function"!=typeof n||!n(e[i]));)i++;return i}}class b extends S{constructor(){super(),y(this,"records",[]),y(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!e.trim())).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),i=this.parseOrigin(),r=this.parseSessionName(),s=this.parseInformation(),o=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),d=this.parseConnection(),l=this.parseBandWidth(),u=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:i,sessionName:r,information:s,uri:o,emails:a,phones:c,connection:d,bandwidths:l,timeFields:u,key:h,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===i)return"\r"===e[t-1]?r:i;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new C;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==o.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>l(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new A(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==o.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>l(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===o.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===o.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let i=!1;"-"===e.value[e.cur]&&(i=!0,e.cur+=1);const r=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:r,back:i})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==o.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),i=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:i}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==o.BANDWIDTH)break;{const n=this.extractOneOrMore(t,l);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const i=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:i}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==o.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==o.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const s=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:i,nettype:r,addrtype:s,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===o.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==o.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===o.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==o.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==o.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===o.CONNECTION){const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const i=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:i}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const i=[];for(i.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,i.push(this.extract(e,this.consumeToken));if(0===i.length)throw new Error("Invalid proto");const r=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:i,fmts:r}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===o.TIME;){const t=this.parseTime(),n=this.parseRepeat(),i=this.parseZone();e.push({time:t,repeats:n,zones:i})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===o.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),i=this.parseConnections(),r=this.parseBandWidth(),s=this.parseKey(),o=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:i,bandwidths:r,key:s,attributes:o})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===o.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const s=t.call(this,e.value,e.cur,...i),o=e.value.slice(e.cur,s);return e.cur=s,o}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),i=e.value.slice(e.cur,n);return e.cur=n,i}consumeSpaceForRecord(e){if(e.value[e.cur]!==s)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class T extends S{constructor(){super(...arguments),y(this,"attributes",void 0),y(this,"digested",!1)}extractOneOrMore(e,t,n){const i=this.consumeOneOrMore(e.attValue,e._cur,t),r=e.attValue.slice(e._cur,i),[s,o]=n||[];if("number"==typeof s&&r.length<s)throw new Error("error in length, should be more or equal than ".concat(s," characters."));if("number"==typeof o&&r.length>o)throw new Error("error in length, should be less or equal than ".concat(o," characters."));return e._cur=i,r}consumeAttributeSpace(e){if(e.attValue[e._cur]!==s)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const s=t.call(this,e.attValue,e._cur,...i),o=e.attValue.slice(e._cur,s);return e._cur=s,o}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,m,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,m,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,m));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,s),r=v(v({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:i});this.peekChar(e)===s&&(this.consumeAttributeSpace(e),r.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(r)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class C extends T{constructor(){super(...arguments),y(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===s;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,E),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===s;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const i=this.extractOneOrMore(e,(e=>e!==s&&f(e)));n.push({name:t,value:i})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===s&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,s);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class A extends T{constructor(e){super(),y(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,m,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const r=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const o=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const d=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const l={foundation:t,componentId:n,transport:i,priority:r,connectionAddress:o,port:d,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),l.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),l.relPort=this.extract(e,this.consumePort));this.peekChar(e)===s;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),l.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(l)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:i,port:r});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const i={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),i.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const r=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));r?r.rtpMap=i:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:i,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let i;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),i=this.extract(e,this.consumeTill));const r=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));r?r.attributes[n]=i:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:i}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,s);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),i={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=t.trim();const r="string"==typeof n?n.trim():null;"string"==typeof t&&t.length>0&&(i[t]=r)}));const r=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));r?r.fmtp={parameters:i}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:i}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const i=this.extract(e,this.consumeTill,";");for(t[n]=i;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const i=this.extract(e,this.consumeTill,";");t[n]=i}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,s),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,s);let i;if("trr-int"===n)i={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===s&&(t.additional=this.extract(e,this.consumeTill))),i=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(i);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(i):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[i]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,l),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,l,[1,64])};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,l,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>h(e)||a(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===s){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===s&&this.extract(e,this.consume,s)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const i={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(i);break}default:{const i={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),i.val=this.extract(e,this.consumeTill,";")),n.params.push(i)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(){w(this,"eol",r)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new N(this.eol).print(e)}printMediaAttributes(e){return new O(this.eol).print(e)}}class I{constructor(e){w(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(s)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(s).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(s).concat(e.extensionName).concat(e.extensionAttributes?"".concat(s).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class N extends I{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(s).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(s).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(s,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(s).concat(e)))),t+this.eol}}class O extends I{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(s).concat(e.componentId).concat(s).concat(e.transport).concat(s).concat(e.priority).concat(s).concat(e.connectionAddress).concat(s).concat(e.port).concat(s,"typ").concat(s).concat(e.type).concat(e.relAddr?"".concat(s,"raddr").concat(s).concat(e.relAddr):"").concat(e.relPort?"".concat(s,"rport").concat(s).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(s).concat(t).concat(s).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(s)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const i of t)n+=this.printRtpMap(i.payloadType,i.rtpMap),n+=this.printFmtp(i.payloadType,i.fmtp),n+=i.rtcpFeedbacks.map((e=>this.printRTCPFeedback(i.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(s).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(s).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(s).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(s),i=t;return"trr-int"===i.type?n+="ttr-int".concat(s).concat(i.interval):(n+="".concat(i.type),i.parameter&&(n+="".concat(s).concat(i.parameter),i.additional&&(n+="".concat(s).concat(i.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(s).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(s).concat(e.netType)),e.addressType&&(t+="".concat(s).concat(e.addressType)),e.address&&(t+="".concat(s).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(s).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(s).concat(e.direction);return e.payloads&&(t+="".concat(s,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(s).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(s).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function k(e){return(new b).parse(e)}function D(e,t){return(new R).print(e,t)}}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})()}(pU);var fU=pU.exports;function mU(e){if(Array.isArray(e))return e.map((e=>e));if(!gU(e))return e;const t={};for(const n in e){const i=e[n];gU(i)||Array.isArray(i)?t[n]=mU(i):t[n]=i}return t}function gU(e){return!("object"!=typeof e||Array.isArray(e)||!e)}class EU{constructor(e){sh(this,"input",[]),sh(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const _U={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},vU={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:_U,remoteCandidate:_U}},yU={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},SU={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},bU={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},TU={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function CU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function AU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class wU{constructor(e,t){sh(this,"onFirstVideoReceived",void 0),sh(this,"onFirstVideoDecoded",void 0),sh(this,"onFirstAudioReceived",void 0),sh(this,"onFirstVideoDecodedTimeout",void 0),sh(this,"onFirstAudioDecoded",void 0),sh(this,"onSelectedLocalCandidateChanged",void 0),sh(this,"onSelectedRemoteCandidateChanged",void 0),sh(this,"videoIsReady",!1),sh(this,"videoIsReady2",{}),sh(this,"pc",void 0),sh(this,"options",void 0),sh(this,"intervalTimer",void 0),sh(this,"stats",mU(vU)),sh(this,"isFirstVideoReceived",{}),sh(this,"isFirstVideoDecoded",{}),sh(this,"isFirstAudioReceived",{}),sh(this,"isFirstAudioDecoded",{}),sh(this,"isFirstVideoDecodedTimeout",{}),sh(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new c_((e=>{e({local:AU({},_U),remote:AU({},_U)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let i=0,r=0,s=0,o=0;for(const a of n)e[a].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][a][n]||!this.lossRateWindowStats[0][a][n])return;const c=this.lossRateWindowStats[t-1][a][n].packets-this.lossRateWindowStats[0][a][n].packets,d=this.lossRateWindowStats[t-1][a][n].packetsLost-this.lossRateWindowStats[0][a][n].packetsLost;"videoSend"===a||"audioSend"===a?(i+=c,s+=d):(r+=c,o+=d),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||d<=0?0:d/(c+d)}));e.sendPacketLossRate=i<=0||s<=0?0:s/(i+s),e.recvPacketLossRate=r<=0||o<=0?0:o/(r+o)}}function RU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function IU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class NU extends wU{constructor(){super(...arguments),sh(this,"_stats",vU),sh(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=mU(vU);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const i=t.find((e=>"VideoBwe"===e.type));i&&this.processBandwidthStats(i),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Ii(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=mU(SU);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=mU(yU),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const i=n.stats,r=Date.now()-n.lts;t.framesDecodeFreezeTime=i.framesDecodeFreezeTime,t.framesDecodeInterval=i.framesDecodeInterval,t.framesDecodeCount>i.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=r,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:IU({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=mU(TU);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=mU(bU);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new c_(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}}function OU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class DU extends wU{constructor(){super(...arguments),sh(this,"_stats",vU),sh(this,"report",void 0),sh(this,"lastDecodeVideoReceiverStats",new Map),sh(this,"lastVideoFramesRecv",new Map),sh(this,"lastVideoFramesSent",new Map),sh(this,"lastVideoFramesDecode",new Map),sh(this,"lastVideoJBDelay",new Map),sh(this,"lastAudioJBDelay",new Map),sh(this,"mediaBytesSent",new Map),sh(this,"mediaBytesRetransmit",new Map),sh(this,"mediaBytesTargetEncode",new Map),sh(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=mU(vU),this.report.forEach((e=>{switch(e.type){case wT.OUTBOUND:case wT.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,i=!t&&!("frameWidth"in e);e.type===wT.OUTBOUND?"audio"===t||i?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===wT.INBOUND&&("audio"===t||i?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case wT.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case wT.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:kU({},_U),remote:kU({},_U)};return e.forEach((n=>{let i;if(n.type===wT.TRANSPORT&&(i=e.get(n.selectedCandidatePairId)),n.type===wT.CANDIDATE_PAIR&&n.selected&&(i=n),i){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(i.localCandidateId){const r=e.get(i.localCandidateId);r&&n(t.local,r)}if(i.remoteCandidateId){const r=e.get(i.remoteCandidateId);r&&n(t.remote,r)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===wT.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===wT.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===wT.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(kU({},t),kU({},this.stats.selectedCandidatePair.localCandidate)),e.type===wT.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(kU({},t),kU({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=mU(TU),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=mU(yU),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),i=this.lastVideoFramesDecode.get(t.ssrc),r=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const i=n.stats,s=r-n.lts;t.framesDecodeFreezeTime=i.framesDecodeFreezeTime,t.framesDecodeInterval=i.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&s>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>i.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=s,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<i.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}i&&r-i.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-i.count)/((r-i.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:t.decodeFrameRate})):i?t.decodeFrameRate=i.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:kU({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=mU(SU),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new EU(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new EU(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new EU(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const i=e.framesEncoded-n.lastFrameCount,r=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*r/i}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,wT.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=mU(bU),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,wT.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const i=Array.from(JT(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return i?i.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var i,r,s,o;const a=t?this.report.get(t):void 0,c=null!==(i=null==a?void 0:a.framesSent)&&void 0!==i?i:e.framesSent;if("number"!=typeof c)return;let d=null!==(r=null==a?void 0:a.frameWidth)&&void 0!==r?r:e.frameWidth,l=null!==(s=null==a?void 0:a.frameHeight)&&void 0!==s?s:e.frameHeight,u=null!==(o=null==a?void 0:a.framesPerSecond)&&void 0!==o?o:e.framesPerSecond;if("number"==typeof d&&"number"==typeof l||(d=0,l=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:d,height:l,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,n){var i,r,s,o,a;const c=t?this.report.get(t):void 0,d=null!==(i=null==c?void 0:c.framesReceived)&&void 0!==i?i:e.framesReceived,l=null!==(r=null==c?void 0:c.frameWidth)&&void 0!==r?r:e.frameWidth,u=null!==(s=null==c?void 0:c.frameHeight)&&void 0!==s?s:e.frameHeight,h=null!==(o=null==c?void 0:c.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof d){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=d;let i=0;e&&t-e.lts>=800?(i=Math.round((d-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:d,lts:t,rate:i})):e?i=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:d,lts:t,rate:0}),n.receivedFrame={width:l||0,height:u||0,frameRate:i||0},n.decodedFrame={width:l||0,height:u||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:l||0,height:u||0,frameRate:n.decodeFrameRate||0}}if(h&&p){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const i=p-e.jitterBufferEmittedCount;i>0&&(t=1e3*(h-e.jitterBufferDelay)/i),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var i,r,s,o;const a=t?this.report.get(t):void 0,c=null!==(i=null!==(r=null==a?void 0:a.echoReturnLoss)&&void 0!==r?r:e.echoReturnLoss)&&void 0!==i?i:0,d=null!==(s=null!==(o=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==o?o:e.echoReturnLossEnhancement)&&void 0!==s?s:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=d}processAudioTrackReceiverStats(e,t,n){var i,r,s,o,a,c,d;const l=t?this.report.get(t):void 0,u=null!==(i=null==l?void 0:l.removedSamplesForAcceleration)&&void 0!==i?i:e.removedSamplesForAcceleration,h=null!==(r=null==l?void 0:l.totalSamplesReceived)&&void 0!==r?r:e.totalSamplesReceived,p=null!==(s=null==l?void 0:l.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,f=null!==(o=null==l?void 0:l.jitterBufferEmittedCount)&&void 0!==o?o:e.jitterBufferEmittedCount,m=null!==(a=null==l?void 0:l.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,g=null!==(c=null==l?void 0:l.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,E=null!==(d=null==l?void 0:l.concealedSamples)&&void 0!==d?d:e.concealedSamples;if(u&&h&&(n.accelerateRate=u/h),p&&f){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const i=f-e.jitterBufferEmittedCount;i>0&&(t=1e3*(p-e.jitterBufferDelay)/i),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=m;let _=1920;g&&h&&(_=h/g/50,n.receivedFrames=Math.round(h/_)),E&&(n.droppedFrames=Math.round(E/_))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const i=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*i/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}class PU extends wU{updateStats(){return c_.resolve()}}function xU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const s=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return s?s<76?new NU(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i,firstVideoDecodedTimeout:r}):new DU(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i,firstVideoDecodedTimeout:r}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof c_}(e)?new DU(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i,firstVideoDecodedTimeout:r}):new PU(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i,firstVideoDecodedTimeout:r})}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function MU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;const{filterRTX:r,filterVideoFec:s,filterAudioFec:o,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:d}=n;let l=[],u=[],h=[],p=[],f=!1,m=!1;if(fU.parse(e).mediaDescriptions.forEach((e=>{i&&i!==e.attributes.direction||("video"!==e.media.mediaType||f||(u=e.attributes.payloads,p=e.attributes.extmaps,f=!0),"audio"!==e.media.mediaType||m||(l=e.attributes.payloads,h=e.attributes.extmaps,m=!0))})),!p||0===u.length)throw new Error("Cannot get video capabilities from SDP.");if(!h||0===l.length)throw new Error("Cannot get audio capabilities from SDP.");u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:"rrtr"})})),l.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),d&&e.rtcpFeedbacks.push({type:"rrtr"})})),r&&(l=l.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),s&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),o&&(l=l.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(null==a?void 0:a.length)>0&&(l=l.filter((e=>{var t;return Ii(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0&&(u=u.filter((e=>{var t;return Ii(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})));const g=Fb("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(u=u.filter((e=>!(e.rtpMap&&Ii(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:l,videoCodecs:u,audioExtensions:h,videoExtensions:p}}function jU(e){const t=fU.parse(e);let n,i;for(const r of t.mediaDescriptions){if(!n){const e=r.attributes.iceUfrag,t=r.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!i){const e=r.attributes.fingerprints;e.length>0&&(i={fingerprints:e})}}if(!i&&t.attributes.fingerprints.length>0&&(i={fingerprints:t.attributes.fingerprints}),!i||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:i}}function VU(e,t){const n=[],i=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),r=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),s=e.attributes.ssrcs;if(r)r.ssrcIds.forEach((e=>{var r;const s=null===(r=i.find((t=>t.ssrcIds[0]===e)))||void 0===r?void 0:r.ssrcIds[1];n.push({ssrcId:e,rtx:t?s:void 0})}));else if(i.length>0){const e=i[0].ssrcIds[0],r=i[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?r:void 0})}else{if(0===s.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:s[0].ssrcId})}return n}function FU(e,t){const{cname:n}=e;let i;t&&t.ip&&"number"==typeof t.port?(i=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],oT.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(i.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),oT.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):i=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}})));const r={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},s={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let o;switch(e.dtlsParameters.role){case"server":o="passive";break;case"client":o="active";break;case"auto":o="actpass"}return{dtlsParameters:r,iceParameters:s,candidates:i,rtpCapabilities:XU(e.rtpCapabilities),setup:o,cname:n}}function BU(e,t,n){const i=[],r=[];return e.forEach((e=>{let{ssrcId:s,rtx:o}=e;const a=iy(8,"track-"),c={ssrcId:s,attributes:MU({label:a,mslabel:n=n||iy(10,""),msid:"".concat(n," ").concat(a)},t&&{cname:t})};if(i.push(c),void 0!==o){const e={ssrcId:o,attributes:MU({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},t&&{cname:t})};i.push(e),r.push({semantic:"FID",ssrcIds:[s,o]})}})),e.length>1&&r.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:i,ssrcGroups:r}}function WU(e,t){t instanceof vI&&e.attributes.payloads.forEach((e=>{var n;const i=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!i||-1===["opus","pcmu","pcma","g722"].indexOf(i))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const r=t._encoderConfig;r&&"pcmu"!==i&&"pcma"!==i&&"g722"!==i&&(r.bitrate&&!I_()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*r.bitrate))),r.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(r.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(r.sampleRate)),r.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function GU(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function HU(e,t){var n;if(!(t instanceof FI&&t._encoderConfig&&-1===t._hints.indexOf(oR.SCREEN_TRACK)))return;const i=t._encoderConfig;Ww().supportMinBitrate&&i.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Ii(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))})),Ww().supportMinBitrate&&!Ii(n=t._hints).call(n,oR.LOW_STREAM)&&i.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Ii(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(Fb("X_GOOGLE_START_BITRATE")||Math.floor(i.bitrateMax)))}))}function KU(e){if("video"!==e.media.mediaType)return;const t=y_();if(t.name!==m_.SAFARI&&t.os!==f_.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function zU(e,t,n){if(!t)return;let i,r;if("video"===e.media.mediaType?(i=n.videoExtensions,r=n.videoCodecs):(i=n.audioExtensions,r=n.audioCodecs),!0===t.twcc){const t=i.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(r,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=i.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(r,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function YU(e,t,n){if(I_())return;if("video"!==e.media.mediaType)return;if(!(t instanceof FI))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!Fb("SIMULCAST"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const i="vp8"===n?2:t._scalabilityMode.numSpatialLayers,r=e.attributes.ssrcs[0],s=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===r.ssrcId)),o={semantic:"SIM",ssrcIds:[r.ssrcId]};for(let a=1;a<i;a++)e.attributes.ssrcs.push({ssrcId:r.ssrcId+a,attributes:zv(r.attributes)}),o.ssrcIds.push(r.ssrcId+a),s&&(e.attributes.ssrcs.push({ssrcId:s.ssrcIds[1]+a,attributes:zv(r.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[r.ssrcId+a,s.ssrcIds[1]+a]}));e.attributes.ssrcGroups.unshift(o)}async function qU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const i=(await n.createOffer()).sdp,{send:r,recv:s,sendrecv:o}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=UU(n,e,t,"sendonly"),r=UU(n,e,t,"recvonly"),s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(QU(i,r,"videoExtensions",s,o,a),QU(i,r,"videoCodecs",s,o,a),QU(i,r,"audioExtensions",s,o,a),QU(i,r,"audioCodecs",s,o,a),Fb("RAISE_H264_BASELINE_PRIORITY")){const e=a.videoCodecs.findIndex((e=>{var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){oT.debug("raising H264 baseline profile priority");const n=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,n)}-1!==t&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==t&&Fb("FILTER_SEND_H264_BASELINE")&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))}}return{send:s,recv:o,sendrecv:a}}(e,t,i);try{n.close()}catch(e){}return{send:r,recv:s,sendrecv:o}}function JU(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=UU(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(QU(e,t,"videoExtensions",n,i,r),QU(e,t,"videoCodecs",n,i,r),QU(e,t,"audioExtensions",n,i,r),QU(e,t,"audioCodecs",n,i,r),Fb("RAISE_H264_BASELINE_PRIORITY")){const e=r.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=r.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){oT.debug("raising H264 baseline profile priority");const n=r.videoCodecs[e];r.videoCodecs.splice(e,1),r.videoCodecs.splice(t,0,n)}-1!==t&&(i.videoCodecs=i.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:i,sendrecv:r}}function QU(e,t,n,i,r,s){if("videoExtensions"===n||"audioExtensions"===n){const o=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return o.push(n),!0}))?s[n].push(e):i[n].push(e)})),void t[n].forEach(((e,t)=>{-1===o.indexOf(t)&&r[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const o=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return o.push(n),!0}))?s[n].push(e):i[n].push(e)})),void t[n].forEach(((e,t)=>{-1===o.indexOf(t)&&r[n].push(e)}))}}function XU(e){const{send:t,recv:n,sendrecv:i}=e;if(!i){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let r,s;return t?(r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r.audioCodecs=[...t.audioCodecs,...i.audioCodecs],r.videoCodecs=[...t.videoCodecs,...i.videoCodecs],r.audioExtensions=[...t.audioExtensions,...i.audioExtensions],r.videoExtensions=[...t.videoExtensions,...i.videoExtensions]):r=i,n?(s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s.audioCodecs=[...n.audioCodecs,...i.audioCodecs],s.videoCodecs=[...n.videoCodecs,...i.videoCodecs],s.audioExtensions=[...n.audioExtensions,...i.audioExtensions],s.videoExtensions=[...n.videoExtensions,...i.videoExtensions]):s=i,{send:r,recv:s}}function ZU(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function $U(e){e.mediaDescriptions.forEach((e=>{"video"!==e.media.mediaType&&"audio"!==e.media.mediaType||e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))}))}function ej(e,t,n,i){let r=[];if(e===wC.VIDEO){if(Fb("H264_PROFILE_LEVEL_ID")&&"h264"===i&&(r=t.videoCodecs.filter((e=>{var t;return Ii(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,i)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===Fb("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(r)||0===r.length){let e=[];const s=[],o=[];n.videoCodecs.forEach((t=>{var n,r,a;Ii(n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(n,i)&&e.push(t),Ii(r=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(r,"vp8")&&s.push(t),Ii(a=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(a,"h264")&&o.push(t)})),0===e.length&&(0!==s.length?(e=s,oT.warning("codec ".concat(i," not included in rtpCapabilities, fallback to default payloads: vp8"))):0!==o.length&&(e=o,oT.warning("codec ".concat(i," not included in rtpCapabilities, fallback to default payloads: h264")))),0!==e.length&&(r=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(Fb("USE_PUB_RTX")){const e=r.map((e=>e.payloadType.toString())),n=t.videoCodecs.filter((t=>t.rtpMap&&"rtx"===t.rtpMap.encodingName&&Ii(e).call(e,t.fmtp&&t.fmtp.parameters.apt||"")));r=[...r,...n]}0===r.length&&(oT.warning("codec ".concat(i," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),r=t.videoCodecs)}else r=t.audioCodecs.filter((e=>{var t;return Ii(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,i)})),0===r.length&&(oT.warning("codec ".concat(i," not included in rtpCapabilities, fallback to opus")),r=t.audioCodecs.filter((e=>{var t;return Ii(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return r}let tj=class{get localCapabilities(){return zv(this._localCapabilities)}get rtpCapabilities(){return zv(this._rtpCapabilities)}get candidates(){return zv(this._candidates)}get iceParameters(){return zv(this._iceParameters)}get dtlsParameters(){return zv(this._dtlsParameters)}constructor(e){sh(this,"sessionDesc",void 0),sh(this,"_localCapabilities",void 0),sh(this,"_rtpCapabilities",void 0),sh(this,"_candidates",void 0),sh(this,"_iceParameters",void 0),sh(this,"_dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname","o/i14u9pJrxRKAsu"),sh(this,"firefoxSsrcMidMap",new Map),e=zv(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:i,remoteRTPCapabilities:r,localCapabilities:s,direction:o,setup:a,videoCodec:c,audioCodec:d}=e;let l;this.setup=a,l=o===jT.RECEIVE_ONLY?fU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):fU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=r,this._candidates=i,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s;const u=o===jT.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=o===jT.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=o===jT.RECEIVE_ONLY?r.send.videoCodecs:ej(wC.VIDEO,u,h,c),f=o===jT.RECEIVE_ONLY?r.send.audioCodecs:ej(wC.AUDIO,u,h,d);for(const m of l.mediaDescriptions){if(m.attributes.iceUfrag=t.iceUfrag,m.attributes.icePwd=t.icePwd,m.attributes.fingerprints=n.fingerprints,m.attributes.candidates=i,m.attributes.setup=this.setup,"application"===m.media.mediaType&&(m.attributes.sctpPort="5000"),"video"===m.media.mediaType&&(m.media.fmts=p.map((e=>e.payloadType.toString(10))),m.attributes.payloads=p,m.attributes.extmaps=u.videoExtensions,Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:4e4,rtx:Fb("USE_SUB_RTX")?40001:void 0}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}if("audio"===m.media.mediaType&&(m.media.fmts=f.map((e=>e.payloadType.toString(10))),m.attributes.payloads=f,m.attributes.extmaps=u.audioExtensions,ZU(m),Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:2e4}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return fU.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,i,r){n=n.replace(/ /g,"-");const{ssrcs:s,ssrcGroups:o}=BU(t,this.cname,Fb("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(s);if(a){if(I_()&&this.firefoxSsrcMidMap.set(s[0].ssrcId,a.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,s,i);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,s,o,"sendonly",i,r),this.updateBundleMids()):(n=zv(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=s,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),I_()&&this.firefoxSsrcMidMap.set(s[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const i=[];return e.forEach((e=>{const r=e._mediaStreamTrack.kind,s=this.findAvailableRecvMediaIndex(r);let o,a=!1;-1===s?(a=!0,o=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(o=zv(this.sessionDesc.mediaDescriptions[s]),o.attributes.direction="recvonly"),i.push({mid:o.attributes.mid,needCreateTransceiver:a})})),i}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:i,port:r,type:s,relatedAddress:o,relatedPort:a,priority:c}=new RTCIceCandidate(e),d={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=i?i:"",port:r?r+"":"",type:s?s+"":"",relAddr:null!=o?o:"",relPort:a?a+"":"",extension:{}};this.candidates.some((e=>e.priority===d.priority&&e.connectionAddress===d.connectionAddress&&e.port===d.port))||(this._candidates.push(d),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,i,r){const s=e._mediaStreamTrack.kind,o=this.rtpCapabilities.recv,a=ej(s,o,this.localCapabilities.send,s===wC.AUDIO?r:i),c=s===wC.VIDEO?o.videoExtensions:o.audioExtensions,d="".concat(++this.currentMidIndex);let l={media:{mediaType:s,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};l=this.mungRecvMediaDsec(l,e);const u=this.findFirstClosedMedia(s);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Ii(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Ii(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((i=>{const r=i.media.mediaType===e&&"0"!==i.media.port&&("sendonly"===i.attributes.direction||"sendrecv"===i.attributes.direction)&&0===i.attributes.ssrcs.length;if(I_()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==i.attributes.mid&&"1"!==i.attributes.mid)||!(!e||e!==i.attributes.mid)}return!1}return r&&i.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=zv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,i,r,s){const o=this.rtpCapabilities.send,a=e===wC.VIDEO?o.videoCodecs:o.audioCodecs,c=e===wC.VIDEO?o.videoExtensions:o.audioExtensions;I_()&&(r="".concat(++this.currentMidIndex));let d={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:r}};d=this.mungSendMediaDesc(d,s);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}mungRecvMediaDsec(e,t,n){const i=zv(e);return GU(i),WU(i,t),HU(i,t),KU(i),zU(i,n,this.localCapabilities.send),i}mungSendMediaDesc(e,t){const n=zv(e);return zU(n,t,this.localCapabilities.recv),ZU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>I_()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const nj=["sdp"];function ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ij(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let sj=class e extends qC{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,i){super(t,n),sh(this,"direction",void 0),sh(this,"name",void 0),sh(this,"store",void 0),sh(this,"spec",void 0),sh(this,"peerConnection",void 0),sh(this,"initialOffer",void 0),sh(this,"transport",void 0),sh(this,"statsFilter",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"localCandidateAddress",null),sh(this,"useXR",Fb("USE_XR")),sh(this,"filter",{filterRTX:!Fb("USE_PUB_RTX")&&!Fb("USE_SUB_RTX"),filterVideoFec:Fb("FILTER_VIDEO_FEC"),filterAudioFec:Fb("FILTER_AUDIO_FEC")}),sh(this,"extension",{useXR:this.useXR}),sh(this,"_isInRestartIce",!1),sh(this,"mutex",new py("P2PConnection-mutex")),sh(this,"onLocalCandidate",void 0),sh(this,"remoteSDP",void 0),sh(this,"pendingCandidates",[]),sh(this,"localCapabilities",void 0),sh(this,"isReady",!1),sh(this,"restartCnt",0),sh(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=i?i:jT.SEND_ONLY,this.name=this.direction===jT.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=xU(this.peerConnection,Fb("STATS_UPDATE_INTERVAL"),void 0,I_()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await qU(this.filter,this.extension);if(this.localCapabilities=XU(t),e){const{sdp:t}=e,n=hU(e,nj),i=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=UU(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(QU(t,e,"videoExtensions",n,i,r),QU(t,e,"videoCodecs",n,i,r),QU(t,e,"audioExtensions",n,i,r),QU(t,e,"audioCodecs",n,i,r),Fb("RAISE_H264_BASELINE_PRIORITY")){const e=r.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=r.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){oT.debug("raising H264 baseline profile priority");const n=r.videoCodecs[e];r.videoCodecs.splice(e,1),r.videoCodecs.splice(t,0,n)}-1!==t&&Fb("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:i,sendrecv:r}}(this.filter,this.extension,t);this.remoteSDP=new tj({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const s=jU(r.sdp);await this.peerConnection.setLocalDescription(r);const o=await JU(this.filter,this.extension,r.sdp);this.localCapabilities=XU(o);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),rj(rj({},s),{},{sdp:r.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=jU(e.sdp);return this.initialOffer=e,rj(rj({},t),{},{sdp:e.sdp})}}catch(e){throw new K_(H_.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:i}=e,r=await JU(this.filter,this.extension,t);this.remoteSDP=new tj({remoteIceParameters:n,remoteDtlsParameters:i,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const s=this.peerConnection.getTransceivers()[0];null!=s&&s.sender&&s.sender.transport&&this.tryBindTransportEvents(s.sender.transport)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new K_(H_.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var i=this;return XM((function*(){const r=yield WM(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=[],s=i.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(s[t].needCreateTransceiver){const t=i.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});r.push(t),e._updateRtpTransceiver(t)}else{const n=i.peerConnection.getTransceivers().find((e=>e.mid===s[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[t].mid));r.push(n),e._updateRtpTransceiver(n)}})),I_()&&!0===Fb("SIMULCAST")&&(yield WM(i.applySimulcastForFirefox(r,e)));const o=s.map((e=>e.mid)),a=yield WM(i.peerConnection.createOffer()),c=i.mungSendOfferSDP(a.sdp,e,o),d=fU.parse(c),l=o.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return VU(t,Fb("USE_PUB_RTX"))})),u=r.map(((e,t)=>{const n=o[t];return{localSSRC:l[t],id:n}}));yield WM(i.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield u}catch(e){const n=i.remoteSDP.toString();throw yield WM(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield WM(i.peerConnection.setRemoteDescription({type:"answer",sdp:n})),yield WM(i.stopSending(o,!0)),e}yield WM(i.applySimulcastEncodings(r,e)),yield WM(i.applySendEncodings(r,e));const h=i.remoteSDP.toString(),p=i.logSDPExchange(c,"offer","local","send");return null==p||p(h),yield WM(i.setRemoteDescription({type:"answer",sdp:h})),r.map(((e,t)=>{const n=o[t];return{localSSRC:l[t],id:n}}))}catch(e){throw e instanceof K_?e:new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();null==i||i(r),await this.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:r,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,i);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(i.sdp,r,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),oT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else oT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const o=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!o||null===o.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,mid:o.mid,transceiver:o}}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:r,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,i);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(i.sdp,r,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),oT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else oT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===Mb.Auto&&(this.store.p2pTransport=Mb.SdRtn,Ww().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,Ww().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=jU(e.sdp);return this.store.descriptionStart(),this.direction===jT.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===jT.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=jU(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),null==s||s(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?I_()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:i}=t.getSelectedCandidatePair();return{local:rj(rj({},_U),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:rj(rj({},_U),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Ii(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(this.localCandidateAddress=e.candidate.address,null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):(this.allCandidatesReceived=!0,oT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={iceServers:[]};var s;return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Sv(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,i)),Fb("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,i)),Ii(s=[Mb.Relay,Mb.SdRtn]).call(s,n)&&(r.iceTransportPolicy="relay"),Fb("FORCE_TURN_TCP")?r.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(r.iceTransportPolicy="relay")})))),Fb("ENABLE_ENCODED_TRANSFORM")&&Ww().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),oT.debug("P2PConnection p2pTransport is ".concat(n)),r}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=[],r=e.filter((e=>e.tcpport));oT.debug("P2PConnection turnServers is ".concat(r,", current index is ").concat(n));const s=r.length>n?r[n]:r[0];switch(t){case Mb.SdRtn:const t=e.filter((e=>{var t;return Ii(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),r=t.length>n?t[n]:t[0];r&&(i.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(UA(r.turnServerURL),":").concat(r.tcpport,"?transport=udp")}),i.push({username:r.username,credential:r.password,credentialType:"password",urls:"turns:".concat(UA(r.turnServerURL),":").concat(r.tcpport,"?transport=tcp")}));break;case Mb.Relay:s&&(i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=udp")}),i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(UA(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}));break;default:s&&(i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=udp")}),i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(UA(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}),i.push({username:s.username,credential:s.password,credentialType:"password",urls:"stun:".concat(s.turnServerURL,":").concat(s.tcpport)}))}return i}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();oT.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return oT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return oT.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Ww().supportSetRtpSenderParameters)return oT.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const i={},r={};switch(e._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(e._encoderConfig){var s;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:i}=e._encoderConfig;t&&(r.maxBitrate=1e3*t),Ii(s=e._hints).call(s,oR.LOW_STREAM)&&(n&&(r.maxFramerate=VA(n)),i&&i>=1&&(r.scaleResolutionDownBy=i))}if(Fb("DSCP_TYPE")&&B_()){var o;const e=Fb("DSCP_TYPE");Ii(o=["very-low","low","medium","high"]).call(o,e)&&(r.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];I_()&&!c&&(i.encodings=[r]),c&&Object.assign(c,r),Object.assign(a,i),oT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!Ww().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const i=e[n],r=t[n];r instanceof FI&&!this.isVP8Simulcast(r)&&await this.updateRtpSenderEncodings(r,i.sender)}}catch(e){oT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const i=fU.parse(e);return t.forEach(((e,t)=>{const r=n[t],s=i.mediaDescriptions.find((e=>e.attributes.mid===r));s&&(WU(s,e),YU(s,e,this.store.codec))})),fU.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var i;null===(i=this.onFirstVideoDecoded)||void 0===i||i.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,i,r,s,o;const c=e[a],d=t[a];if(d instanceof FI&&!Ii(n=d._hints).call(n,oR.LOW_STREAM)&&null!==(i=d._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(s=d._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(o=d._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!I_()&&e.length===t.length)for(let n=0;n<e.length;n++){const i=t[n];if(i instanceof FI&&this.isVP8Simulcast(i)){const t=e[n],r={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const o=t.sender.getParameters();await t.sender.setParameters(Object.assign(o,r))}}}isVP8Simulcast(e){var t,n,i,r,s;return!!(e instanceof FI&&Fb("SIMULCAST")&&"vp8"===this.store.codec&&!Ii(t=e._hints).call(t,oR.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(i=e._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(s=e._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1)}logSDPExchange(e,t,n,i){if(Fb("SDP_LOGGING"))return oT.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(i,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",i)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==i||i(r),await this.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==i||i(r),await this.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n,i;if(t=null!==(n=t)&&void 0!==n?n:null===(i=this.currentRemoteDescription)||void 0===i?void 0:i.sdp){var r;const n=null===(r=fU.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===r?void 0:r.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Ii(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const i=fU.parse(e),r=i.mediaDescriptions.find((e=>e.attributes.mid===t));return r&&(n===wC.AUDIO&&"audio"===r.media.mediaType&&ZU(r),this.useXR&&$U(i)),fU.print(i)}};function oj(e,t,n){const i=e[t];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return await i.apply(this,s)}finally{n()}},n}function aj(e,t){let n=document.createElement("video"),i=document.createElement("canvas");n.setAttribute("style","display:none"),i.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),i.width=VA(t.width),i.height=VA(t.height);const r=VA(t.framerate||15);document.body.append(n),document.body.append(i);let s=e._mediaStreamTrack;n.srcObject=new MediaStream([s]),n.play();const o=i.getContext("2d");if(!o)throw new ZT(H_.UNEXPECTED_ERROR,"can not get canvas context");const a=Ww(),c=i.captureStream(a.supportRequestFrame?0:r).getVideoTracks()[0];c.canvas||(c.canvas=i),i.startCapture=()=>{if(!n)return i.stopCapture&&i.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,r=i.width*t;Math.abs(r-i.height)>=2&&(oT.debug("adjust low stream resolution","".concat(i.width,"x").concat(i.height," -> ").concat(i.width,"x").concat(r)),i.height=r)}o.drawImage(n,0,0,i.width,i.height),c.requestFrame&&c.requestFrame(),s!==e._mediaStreamTrack&&(s=e._mediaStreamTrack,n.srcObject=new MediaStream([s]))},i.stopCapture=jR((()=>i.startCapture&&i.startCapture()),r);const d=c.stop;return c.stop=()=>{d.call(c),n&&(n.remove(),n.srcObject=null,n=null),i&&(i.width=0,i.remove(),i.stopCapture&&i.stopCapture(),i.startCapture=void 0,i.stopCapture=void 0,i=null),oT.debug("clean low stream renderer")},c}var cj,dj,lj,uj,hj,pj,fj,mj,gj,Ej,_j;QT([oj,XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],sj.prototype,"establish",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],sj.prototype,"connect",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[String,Array,String,String]),XT("design:returntype",c_)],sj.prototype,"receive",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[String,Array,String,String]),XT("design:returntype",c_)],sj.prototype,"mockReceive",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],sj.prototype,"stopReceiving",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],sj.prototype,"restartICE",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],sj.prototype,"close",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],sj.prototype,"updateEncoderConfig",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],sj.prototype,"updateSendParameters",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[NR,String]),XT("design:returntype",c_)],sj.prototype,"replaceTrack",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],sj.prototype,"muteLocal",null),QT([oj,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],sj.prototype,"unmuteLocal",null),function(e){e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH"}(cj||(cj={})),function(e){e[e.HEIGHT=2072]="HEIGHT",e[e.FRAME_RATE=2074]="FRAME_RATE",e[e.WIDTH=2076]="WIDTH"}(dj||(dj={})),function(e){e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM"}(lj||(lj={})),function(e){e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH"}(uj||(uj={})),function(e){e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY"}(hj||(hj={})),function(e){e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER"}(pj||(pj={})),function(e){e[e.PCM_LEVEL=2104]="PCM_LEVEL"}(fj||(fj={})),function(e){e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED"}(mj||(mj={})),function(e){e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES"}(gj||(gj={})),function(e){e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL"}(Ej||(Ej={})),function(e){e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE"}(_j||(_j={}));const vj=1e3,yj=3;function Sj(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function bj(e){const t={[_j.CONN_TYPE]:0,[_j.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[_j.CONN_TYPE]=1),"tcp"===n&&(t[_j.CONN_TYPE]=3),"tls"===n&&(t[_j.CONN_TYPE]=4);break}case"srflx":t[_j.CONN_TYPE]=2}return t}class Tj extends dv{constructor(e){super(),sh(this,"store",void 0),sh(this,"uploadWRTCStatsTimer",void 0),sh(this,"uploadOutboundDenoiserStatsTimer",void 0),sh(this,"uploadExtStatsTimer",void 0),sh(this,"uploadExtUsageStatsTimer",void 0),sh(this,"uploadInboundExtStatsTimer",void 0),sh(this,"requestStats",void 0),sh(this,"requestTransportStats",void 0),sh(this,"requestLocalMedia",void 0),sh(this,"requestRemoteMedia",void 0),sh(this,"requestAllTracks",void 0),sh(this,"requestVideoIsReady",void 0),sh(this,"requestUploadStats",void 0),sh(this,"requestUpload",void 0),sh(this,"uploadOutboundStarted",!1),sh(this,"uploadInboundStarted",!1),sh(this,"uploadTransportStarted",!1),sh(this,"uploadExtensionUsageStarted",!1),sh(this,"lastRecvStats",void 0),sh(this,"lastSendStats",void 0),sh(this,"lastFullRecvStats",void 0),sh(this,"lastFullSendStats",void 0),sh(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,n;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(n=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!n&&this.uploadInboundStarted&&(n=this.requestStats(!0)),t||n){const i={};if(this.uploadTransportStarted&&t){const r=this.getTransportStats(t,n,e);r&&(i.misc=[r])}if(this.uploadOutboundStarted&&t){const n=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);n&&(i.outbound=[n])}if(this.uploadInboundStarted&&n){const t=this.getInboundStats(n,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(i.inbound=t)}this.requestUploadStats(i)}this.lastRecvStats=n,this.lastSendStats=t,e||(this.lastFullRecvStats=n,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==yj),++e===yj+1&&(e=1)}),vj)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(n)return null==e.rtt?void 0:{addition:{[_j.RTT]:e.rtt,[_j.CONN_TYPE]:void 0}};const i=bj(e);if(this.store.useP2P){if(t){const e=bj(t);i[_j.CONN_TYPE]+=e[_j.CONN_TYPE]<<3}i[_j.CONN_TYPE]+=110}else i[_j.CONN_TYPE]+=100;return{addition:i}}getOutboundStats(e,t,n){if(!this.requestUploadStats||!this.requestLocalMedia)return;const i=this.requestLocalMedia();if(!i||0===i.length)return;let r,s,o;return i.forEach((i=>{let[a,{track:c,ssrcs:d}]=i;switch(a){case NC.LocalVideoLowTrack:case NC.LocalVideoTrack:if(a===NC.LocalVideoTrack){const i=function(e,t,n,i,r){const s=t.videoSend.find((t=>t.ssrc===e));if(!s)return;const o={},{sentFrame:a,inputFrame:c}=s;if(c&&a){const e=c.frameRate,t=a.frameRate;o[lj.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(Sj(o,lj.QP_SUM,s.qpSumPerFrame),r)return o;switch(a&&(Sj(o,lj.HEIGHT,a.height),Sj(o,lj.WIDTH,a.width),Sj(o,lj.FRAME_RATE,a.frameRate)),o[lj.DISABLED]=i._originMediaStreamTrack&&!i._originMediaStreamTrack.enabled||i._mediaStreamTrack&&!i._mediaStreamTrack.enabled?1:0,s.adaptionChangeReason){case"none":o[lj.ADAPTATION]=0;break;case"cpu":o[lj.ADAPTATION]=1;break;case"bandwidth":o[lj.ADAPTATION]=2;break;case"other":o[lj.ADAPTATION]=3}o[lj.PLAYER_STATUS]=wR[i._player?i._player.videoElementStatus:"uninit"],Sj(o,lj.NACKS,s.nacksCount),Sj(o,lj.PLIS,s.plisCount),Sj(o,lj.FIRS,s.firsCount),Sj(o,lj.AVG_ENCODE,s.avgEncodeMs);const d=n&&n.videoSend.find((t=>t.ssrc===e));if(d){let e=r?vj:vj*yj;d.timestamp&&s.timestamp&&(e=s.timestamp-d.timestamp),null!=d.packets&&null!=s.packets&&Sj(o,lj.PACKAGE_RATE,1e3*(s.packets-d.packets)/e),null!=s.packetsLost&&null!=d.packetsLost&&Sj(o,lj.PACKAGE_LOST,s.packetsLost-d.packetsLost),null!=d.bytes&&null!=s.bytes&&Sj(o,lj.BITRATE,8*(s.bytes-d.bytes)/e)}return o}(d[0].ssrcId,e,t,c,n),r=n?null:function(e,t,n){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return null;const r={},s=i.inputFrame,o=s&&s.height||n&&n._videoHeight||0,a=s&&s.width||n&&n._videoWidth||0,c=s&&s.frameRate||0;return Sj(r,cj.HEIGHT,o),Sj(r,cj.WIDTH,a),Sj(r,cj.FRAME_RATE,c),r}(d[0].ssrcId,e,c),o=n?null:function(e){const t={};return Sj(t,lj.RETRANSMIT,e.bitrate.retransmit),Sj(t,lj.TARGET_ENCODED,e.bitrate.targetEncoded),Sj(t,lj.ACTUAL_ENCODED,e.bitrate.actualEncoded),Sj(t,lj.TRANSMIT,e.bitrate.transmit),Sj(t,lj.BANDWIDTH,e.sendBandwidth),t}(e);s=Object.assign({},i,r,o)}else o=n?void 0:function(e,t,n){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return;const r={},s=i.sentFrame;if(s&&(Sj(r,uj.HEIGHT,s.height),Sj(r,uj.WIDTH,s.width),Sj(r,uj.FRAME_RATE,s.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=vj*yj;t.timestamp&&i.timestamp&&(e=i.timestamp-t.timestamp),null!=t.packets&&null!=i.packets&&Sj(r,uj.PACKAGE_RATE,1e3*(i.packets-t.packets)/e),null!=i.packetsLost&&null!=t.packetsLost&&Sj(r,uj.PACKAGE_LOST,i.packetsLost-t.packetsLost),null!=t.bytes&&null!=i.bytes&&Sj(r,uj.BITRATE,8*(i.bytes-t.bytes)/e)}}return r}(d[0].ssrcId,e,t);break;case NC.LocalAudioTrack:r=n?void 0:function(e,t,n,i){const r=t.audioSend.find((t=>t.ssrc===e));if(!r)return;const s={};s[mj.DISABLED]=i._originMediaStreamTrack&&!i._originMediaStreamTrack.enabled||i._mediaStreamTrack&&!i._mediaStreamTrack.enabled?1:0;const o=i._source.getAccurateVolumeLevel(),a=r.inputLevel;Sj(s,mj.LEVEL,100*(null==a?o:a)),Sj(s,fj.PCM_LEVEL,100*o),Sj(s,mj.AEC_RETURN_LOSS,r.aecReturnLoss),Sj(s,mj.AEC_RETURN_LOSS_ENH,r.aecReturnLossEnhancement),s[mj.FREEZE]=0;const c=n&&n.audioSend.find((t=>t.ssrc===e));if(c){let e=vj*yj;c.timestamp&&r.timestamp&&(e=r.timestamp-c.timestamp),null!=c.bytes&&null!=r.bytes&&Sj(s,mj.BITRATE,8*(r.bytes-c.bytes)/e),null!=c.packets&&null!=r.packets&&Sj(s,mj.PACKAGE_RATE,1e3*(r.packets-c.packets)/e)}return s}(d[0].ssrcId,e,t,c)}})),{high:s,low:o,audio:r}}getInboundStats(e,t,n){if(!this.requestRemoteMedia)return;const i=this.requestRemoteMedia()||[],r=[];return i.forEach((i=>{let[s,o]=i;const a={peer:s.uid};if(o.has(wC.VIDEO)&&s.videoTrack){const i=s._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(s._videoSSRC)||!1,r=s.videoTrack?function(e,t,n,i,r,s,o){const a=t.videoRecv.find((t=>t.ssrc===e));if(!a)return;const c={},{receivedFrame:d,outputFrame:l,decodeFrameRate:u}=a,h=n&&n.videoRecv.find((t=>t.ssrc===e));if(c[hj.FREEZE]=r&&Lj.isRemoteVideoFreeze(i,a,h)?1:0,Sj(c,pj.FRAME_RATE_DECODE,u),Sj(c,hj.QP_SUM,a.qpSumPerFrame),a.framesRateFirefox&&Sj(c,hj.FRAME_RATE,a.framesRateFirefox),d&&Sj(c,hj.FRAME_RATE,d.frameRate),h){const e=t.timestamp-n.timestamp||(o?vj:yj*vj);null!=a.packetsLost&&null!=h.packetsLost&&Sj(c,hj.PACKAGE_LOST,a.packetsLost-h.packetsLost),null!=h.bytes&&null!=a.bytes&&Sj(c,hj.BITRATE,8*(a.bytes-h.bytes)/e),null!=h.packets&&null!=a.packets&&Sj(c,hj.PACKAGE_RATE,1e3*(a.packets-h.packets)/e)}if(o)return c;if(d?(Sj(c,hj.HEIGHT,d.height),Sj(c,hj.WIDTH,d.width)):i&&(Sj(c,hj.HEIGHT,i._videoHeight||0),Sj(c,hj.WIDTH,i._videoWidth||0)),l&&Sj(c,pj.FRAME_RATE_RENDER,l.frameRate),Sj(c,hj.JITTER_BUFFER,a.jitterBufferMs),Sj(c,hj.CURRENT_DELAY,a.currentDelayMs),Sj(c,hj.FIRS,a.firsCount),Sj(c,hj.NACKS,a.nacksCount),Sj(c,hj.PLIS,a.plisCount),i){c[hj.DISABLED]=i._originMediaStreamTrack.enabled&&i._mediaStreamTrack.enabled?0:1;const e=i._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n}=e;if(t&&t.length>0&&Sj(c,pj.FREEZE_TIME,t.splice(0,1)[0]),s&&"visible"===QI.visibility){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),Sj(c,pj.FREEZE_TIME_RENDER,t)}}}if(c[hj.PLAYER_STATUS]=wR[i._player?i._player.videoElementStatus:"uninit"],h&&void 0!==a.totalInterFrameDelay&&void 0!==a.totalSquaredInterFrameDelay&&void 0!==h.totalInterFrameDelay&&void 0!==h.totalSquaredInterFrameDelay){const e=a.totalInterFrameDelay-h.totalInterFrameDelay,t=a.totalSquaredInterFrameDelay-h.totalSquaredInterFrameDelay,n=a.framesDecodeCount-h.framesDecodeCount,i=e/n*1e3,r=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(r)&&i+r>Math.max(3*i,i+150)&&(c[hj.I_FRAME_DELAY]=r)}return c}(s._videoSSRC,e,t,s.videoTrack,!0===i,this.needUploadRenderFreezeTime,n):void 0;r&&(a.video=r)}if(o.has(wC.AUDIO)&&s.audioTrack){const i=s.audioTrack?function(e,t,n,i,r){const s=t.audioRecv.find((t=>t.ssrc===e));if(!s)return;const o={},a=n&&n.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:d}=s;var l;if(Sj(o,gj.JITTER,s.jitterMs),null!=c&&null!=d&&(o[gj.FREEZE]=0===(l=c)||100*d/l>20?1:0),a){const e=t.timestamp-n.timestamp||(r?vj:vj*yj);null!=s.packets&&null!=a.packets&&Sj(o,gj.PACKAGE_RATE,1e3*(s.packets-a.packets)/e),null!=a.bytes&&null!=s.bytes&&Sj(o,gj.BITRATE,8*(s.bytes-a.bytes)/e),null!=s.packetsLost&&null!=a.packetsLost&&Sj(o,gj.PACKAGE_LOST,s.packetsLost-a.packetsLost)}if(r)return o;const u=i._source.getAccurateVolumeLevel(),h=s.outputLevel;if(Sj(o,Ej.LEVEL,100*(null==h?u:h)),Sj(o,gj.PCM_LEVEL,100*u),i&&(o[gj.DISABLED]=i._originMediaStreamTrack.enabled&&i._mediaStreamTrack.enabled?0:1),Sj(o,gj.JITTER_BUFFER,s.jitterBufferMs),Sj(o,gj.CURRENT_DELAY,s.jitterBufferMs),o[gj.PLAYER_STATUS]=wR[aI.getPlayerState(i.getTrackId())],a){const e=s.concealedSamples-a.concealedSamples;e>0&&Sj(o,gj.CONCEALED_SAMPLES,e)}return o}(s._audioSSRC,e,t,s.audioTrack,n):void 0;i&&(a.audio=i)}(a.video||a.audio)&&r.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,r}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof yI));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(LT.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(wC.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(wC.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:Fb("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let i=[];const r=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of r)!e.muted&&e.enabled&&(i=i.concat(await e.getProcessorUsage()));const s=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of s)c.has(wC.VIDEO)&&e.videoTrack&&(i=i.concat(await e.videoTrack.getProcessorUsage())),c.has(wC.AUDIO)&&e.audioTrack&&(i=i.concat(await e.audioTrack.getProcessorUsage()));if(0===i.length)return;n.details=function(e,t){const n={};for(const{id:o,value:a,level:c,direction:d}of e){var i;const e=null!==(i=t.get(o))&&void 0!==i?i:0,l=2===a?e+Fb("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var r,s;t.set(o,l),n[o]?(2===a&&(n[o].value=a),c>n[o].level&&(n[o].level=c),"remote"===d&&(n[o].remoteUidCount+=1),n[o].totalTs=null!==(r=t.get(o))&&void 0!==r?r:0):n[o]={value:a,level:c,remoteUidCount:"local"===d?0:1,totalTs:null!==(s=t.get(o))&&void 0!==s?s:0}}return Object.keys(n).map((e=>{const{level:t,value:i,totalTs:r}=n[e];return{id:e,level:t,value:i,totalTs:r}}))}(i,e);const o=Date.now(),a=o>t?o:t+1;this.requestUpload&&this.requestUpload(LT.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:a})}),Fb("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class Cj{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){sh(this,"uid",void 0),sh(this,"_uintid",void 0),sh(this,"_trust_in_room_",!0),sh(this,"_trust_audio_enabled_state_",!0),sh(this,"_trust_video_enabled_state_",!0),sh(this,"_trust_audio_mute_state_",!0),sh(this,"_trust_video_mute_state_",!0),sh(this,"_audio_muted_",!1),sh(this,"_video_muted_",!1),sh(this,"_audio_enabled_",!0),sh(this,"_video_enabled_",!0),sh(this,"_audio_added_",!1),sh(this,"_video_added_",!1),sh(this,"_is_pre_created",!1),sh(this,"_video_pre_subscribed",!1),sh(this,"_audio_pre_subscribed",!1),sh(this,"_trust_video_stream_added_state_",!0),sh(this,"_trust_audio_stream_added_state_",!0),sh(this,"_audioTrack",void 0),sh(this,"_videoTrack",void 0),sh(this,"_dataChannels",[]),sh(this,"_audioSSRC",void 0),sh(this,"_videoSSRC",void 0),sh(this,"_audioOrtc",void 0),sh(this,"_videoOrtc",void 0),sh(this,"_cname",void 0),sh(this,"_rtxSsrcId",void 0),sh(this,"_videoMid",void 0),sh(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}var Aj;function wj(e,t){var n;let i;switch(t){case NC.LocalAudioTrack:i=fC.Audio;break;case NC.LocalVideoTrack:i=Ii(n=e._hints).call(n,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalVideoLowTrack:i=fC.Low}return i}function Rj(e){const t=Ww();if(e.some((e=>e._bypassWebAudio)))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function Ij(e,t){Rj(e);const n=t||new bI;return e.forEach((e=>n.addAudioTrack(e))),n}function Nj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(Aj||(Aj={}));class kj extends dv{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(kC.StateChange,t,this._state)}constructor(e,t){super(),sh(this,"store",void 0),sh(this,"statsUploader",void 0),sh(this,"sendConnection",void 0),sh(this,"recvConnection",void 0),sh(this,"localTrackMap",new Map),sh(this,"remoteUserMap",new Map),sh(this,"localDataChannels",[]),sh(this,"pendingLocalTracks",[]),sh(this,"pendingRemoteTracks",[]),sh(this,"statsCollector",void 0),sh(this,"dtlsFailedCount",0),sh(this,"sendMutex",new py("P2PChannel2-send-mutex")),sh(this,"recvMutex",new py("P2PChannel2-recv-mutex")),sh(this,"_state",OC.Disconnected),sh(this,"_restartStates",["disconnected","failed"]),sh(this,"reconnectInterval",void 0),sh(this,"uploadUnplinkStarted",!1),sh(this,"uploadDownlinkStarted",!1),sh(this,"uplinkStateUploadInterval",void 0),sh(this,"downlinkStatsUploadInterval",void 0),sh(this,"handleMuteLocalTrack",(async(e,t,n)=>{const i=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==OC.Connected)return void n(new K_(H_.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const i=this.filterTobeMutedTracks(e);if(0===i.length)return void t();const o=i.find((e=>"videoLowTrack"===e[0]));o&&o[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(i.map((e=>{let[,{id:t}]=e;return t})));let a=!1;var r,s;a="video"===e.trackMediaType?!(null===(r=this.localTrackMap.get(NC.LocalAudioTrack))||void 0===r||!r.track._muted):void 0===(null===(s=this.localTrackMap.get(NC.LocalVideoTrack))||void 0===s?void 0:s.id);const c=this.createMuteMessage(i);await Av(this,kC.RequestMuteLocal,c);const d="video"===e.trackMediaType?KC.MUTE_LOCAL_VIDEO:KC.MUTE_LOCAL_AUDIO;await Av(this,kC.RequestP2PMuteLocal,{action:d,message:c,isMuteAll:a}),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const i=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==OC.Connected)return void n(new K_(H_.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const i=this.filterTobeUnmutedTracks(e);if(0===i.length)return void t();await this.sendConnection.unmuteLocal(i.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnmuteMessage(i),s="video"===e.trackMediaType?KC.UNMUTE_LOCAL_VIDEO:KC.UNMUTE_LOCAL_AUDIO;await Av(this,kC.RequestP2PMuteLocal,{action:s,message:r}),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const i=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const n=this.localTrackMap.get(NC.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==OC.Connected)return void t();const{id:i,track:r}=n;i&&(await this.sendConnection.updateSendParameters(i,r),await this.sendConnection.updateEncoderConfig(i,r),this.emit(kC.UpdateVideoEncoder,r)),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleSetOptimizationMode",(async(e,t,n)=>{const i=await this.sendMutex.lock("Locking from P2PChannel2.handleSetOptimizationMode");try{const n=this.localTrackMap.get(NC.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==OC.Connected)return;const{id:i,track:r}=n;i&&await this.sendConnection.updateSendParameters(i,r),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleReplaceTrack",(async(e,t,n,i)=>{let r;oT.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof i&&i||(r=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==OC.Connected)return void t();if(await(null===(s=this.sendConnection)||void 0===s?void 0:s.replaceTrack(e,n[1].id)),n[0]===NC.LocalVideoTrack&&Ww().supportDualStreamEncoding){const t=this.localTrackMap.get(NC.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new c_(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var o;null===(o=r)||void 0===o||o()}})),sh(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),sh(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),sh(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),sh(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new Tj(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),Fb("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e,t,n,i,r,s){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(oT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new sj(e,this.store,jT.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const i=await this.recvConnection.establish(t);return{iceParameters:i.iceParameters,dtlsParameters:i.dtlsParameters,sdp:i.sdp}}{this.state=OC.New,this.sendConnection&&(oT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new sj(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new K_(H_.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=OC.Connected}async addRemoteCandidate(e,t){if(t===jT.RECEIVE_ONLY){if(!this.sendConnection)throw new K_(H_.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new K_(H_.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var i=this;return XM((function*(){const r=yield WM(i.sendMutex.lock("From P2PChannel.publish"));try{if(!i.sendConnection||i.state!==OC.Connected){i.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===i.pendingLocalTracks.indexOf(e)));return void(i.pendingLocalTracks=i.pendingLocalTracks.concat(t))}i.store.pubId=i.store.pubId+1,FM.markPublishStart(i.store.clientId,i.store.pubId);const r=i.filterTobePublishedTracks(e,t,n);if(0===r.length)return void(yield WM(i.tryToUnmuteAudio(e)));r.forEach((e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===NC.LocalAudioTrack?"audio":"video",r)})),i.bindLocalTrackEvents(r);const s=yield WM(i.sendConnection.send(r.map((e=>{let{track:t}=e;return t})),i.store.codec,i.store.audioCodec)),o=(yield WM(s.next())).value,a=i.createGatewayPublishMessage(r,o);try{yield a}catch(e){throw s.throw(e),(null==e?void 0:e.code)===H_.WS_ABORT&&r.forEach((e=>{let{track:t}=e;-1===i.pendingLocalTracks.indexOf(t)&&i.pendingLocalTracks.push(t)})),i.unbindLocalTrackEvents(r),e}yield WM(s.next()),r.forEach((e=>{let{type:t}=e;i.statsCollector.addLocalStats(t)})),i.statsUploader.startUploadOutboundStats(),i.assignLocalTracks(r,o),r.forEach((e=>{let{track:t,type:n}=e;const r=Date.now();i.store.publish(t.getTrackId(),n===NC.LocalAudioTrack?"audio":"video",void 0,r)})),i.startUploadUplinkState()}finally{r()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==OC.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Ii(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const i=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===OC.Connected)return n&&n[1].track.close(),i;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[i,{track:r,ssrcs:s}]=n;const o={stream_type:wj(r,i),ssrcs:s};r._muted||!r._enabled?e.push(o):t.push(o)})),e.length>0&&e.forEach((e=>{Av(this,kC.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{Av(this,kC.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return XM((function*(){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(oT.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Cv(this,kC.RequestRePublish,this.pendingLocalTracks),this.emit(kC.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,i){var r;if(!this.recvConnection)throw new K_(H_.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(r=this.remoteUserMap.get(e))&&void 0!==r&&r.has(t))return;const{track:s,mid:o,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),i);t===wC.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new JI(s,e.uid,e._uintid,this.store),oT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new qI(s,e.uid,e._uintid,this.store),oT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,o):this.remoteUserMap.set(e,new Map([[t,o]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const d=this.pendingRemoteTracks.findIndex((n=>{let{user:i,kind:r}=n;return i.uid===e.uid&&t===r}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(kC.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,i){if(!this.recvConnection)throw new K_(H_.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),i)}async unsubscribe(e,t,n){const i=this.pendingRemoteTracks.filter((n=>{let{user:i,kind:r}=n;return void 0!==t?i.uid===e.uid&&t===r:i.uid===e.uid}));if(i.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||i.forEach((t=>{let{kind:n}=t;var i;if(n===wC.AUDIO)null===(i=e._audioTrack)||void 0===i||i._destroy(),e._audioTrack=void 0;else if(n===wC.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const r=this.filterTobeUnSubscribedTracks(e,t);0!==r.length&&(await this.recvConnection.stopReceiving(r.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),r.forEach((e=>{let[t,{kind:i}]=e;var r,s;if(i===wC.VIDEO&&t._videoSSRC&&(null===(r=this.recvConnection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),i===wC.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(s=t._videoTrack)||void 0===s||s._destroy(),t._videoTrack=void 0);else if(i===wC.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0)}})),r.forEach((e=>{let[,{kind:t}]=e;Av(this,kC.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[wC.VIDEO,wC.AUDIO].forEach((e=>{t.has(e)?Av(this,kC.RequestP2PUnmuteRemote,e):Av(this,kC.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new K_(H_.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void oT.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void oT.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const i=t===wC.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==i&&this.recvConnection.setStatsRemoteVideoIsReady(i,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||oT.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):oT.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(NC.LocalAudioTrack);if((null==t?void 0:t.track)instanceof bI){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==NC.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===NC.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===NC.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,i,r){if(e){const n=this.localTrackMap.get(NC.LocalAudioTrack),s=i?this.localTrackMap.get(NC.LocalVideoLowTrack):this.localTrackMap.get(NC.LocalVideoTrack);vT.publish(this.store.sessionId,{eventElapse:FM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==s?void 0:s.track.getTrackLabel(),screenshare:-1!==(null==s?void 0:s.track._hints.indexOf(oR.SCREEN_TRACK)),audio:!!n,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var s;n||(n=[]);const o=n.find((e=>e instanceof vI)),a=i?null===(s=this.localTrackMap.get(NC.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((e=>e instanceof FI));vT.publish(this.store.sessionId,{eventElapse:FM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(oR.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,n,i){const r=i===wC.VIDEO?n._videoSSRC:n._audioSSRC;r&&vT.subscribe(this.store.sessionId,{succ:e,ec:t,video:i===wC.VIDEO,audio:i===wC.AUDIO,peerid:n.uid,subscribeRequestid:i===wC.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:FM.measureFromSubscribeStart(this.store.clientId,r)})}reset(){oT.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new py("P2PChannel2-send-mutex"),this.sendMutex=new py("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(NC.LocalAudioTrack);if((null==e?void 0:e.track)instanceof bI){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=OC.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(NC.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(NC.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof FI||t&&t.track instanceof vI?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(NC.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=ep(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(oT.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=OC.Reconnecting,Fb("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:i}]=e;switch(n){case NC.LocalVideoTrack:Ii(t=i._hints).call(t,oR.LOW_STREAM)?i.close():this.pendingLocalTracks.push(i);break;case NC.LocalAudioTrack:i instanceof bI?this.pendingLocalTracks=this.pendingLocalTracks.concat(i.trackList):this.pendingLocalTracks.push(i);case NC.LocalVideoLowTrack:}})),this.emit(kC.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(kC.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),oT.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:i,kind:r}=n;if((e instanceof Cj?e.uid:e)===i.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,i;if(e===jT.SEND_ONLY){if(!this.sendConnection)throw new K_(H_.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),i=this.sendConnection}else{if(!this.recvConnection)throw new K_(H_.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),i=this.recvConnection}try{if(t){const e=await i.restartICE(t);return i.isInRestartIce=!1,e}{const e=await i.restartICE();if(e){const t=await Cv(this,kC.RequestP2PRestartICE,{direction:jT.RECEIVE_ONLY,iceParameter:e});await i.restartICE(t),i.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(NC.LocalVideoTrack),n=this.localTrackMap.get(NC.LocalAudioTrack),i=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),r=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!i||!r)return 1;const s=wv(this,kC.NeedSignalRTT),o=i?i.rttMs:void 0,a=r?r.rttMs:void 0,c=o&&a?(o+a)/2:o||a,d=(c&&s?(c+s)/2:c||s)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,u=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(oR.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return bT[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[i]=n;const r=i._audioSSRC,s=i._videoSSRC,o=e.audioRecv.find((e=>e.ssrc===r)),a=e.videoRecv.find((e=>e.ssrc===s));if(!o&&!a)return void(t+=1);const c=wv(this,kC.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,u=o?o.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*l/1500;u&&(p=.6*h*100/50+.2*l/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new c_(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const i=[],r=Ww(),s=this.getAllTracks();e=Hv(e=e.filter((e=>-1===s.indexOf(e))));let o=!1,a=!1;for(const c of e){if(c instanceof FI&&(this.localTrackMap.has(NC.LocalVideoTrack)||o?new K_(H_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(i.push({track:c,type:NC.LocalVideoTrack}),o=!0),t)){const e=this.getLowVideoTrack(c,n);i.push({track:e,type:NC.LocalVideoLowTrack})}if(c instanceof vI){const e=this.localTrackMap.get(NC.LocalAudioTrack);if(e){if(!(e.track instanceof bI))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=i.find((e=>{let{type:t}=e;return t===NC.LocalAudioTrack}));if(!(e.track instanceof bI))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!r.webAudioMediaStreamDest||c instanceof bI||c._bypassWebAudio)i.push({track:c,type:NC.LocalAudioTrack});else{const e=new bI;e.addAudioTrack(c),i.push({track:e,type:NC.LocalAudioTrack})}a=!0}}}return i}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Hv(e=e.filter((e=>-1!==n.indexOf(e))));for(const i of e){if(i instanceof vI){const e=this.localTrackMap.get(NC.LocalAudioTrack);if(!e)continue;e.track instanceof bI?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([NC.LocalAudioTrack,e]),e.track.close())):t.push([NC.LocalAudioTrack,e])}if(i instanceof FI){const e=this.localTrackMap.get(NC.LocalVideoTrack);if(!e)continue;t.push([NC.LocalVideoTrack,e]);const n=this.localTrackMap.get(NC.LocalVideoLowTrack);n&&t.push([NC.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case NC.LocalVideoTrack:t.addListener(sR.GET_STATS,this.handleGetLocalVideoStats),t.addListener(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(sR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(sR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case NC.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case NC.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof bI?e.trackList.forEach((e=>{e.addListener(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(sR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(sR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case NC.LocalVideoTrack:t.off(sR.GET_STATS,this.handleGetLocalVideoStats),t.off(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(sR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(sR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case NC.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case NC.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof bI?e.trackList.forEach((e=>{e.off(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(sR.GET_STATS,this.handleGetLocalAudioStats),e.off(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(sR.GET_STATS,this.handleGetLocalAudioStats),e.off(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof qI&&t.addListener(sR.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof JI&&t.addListener(sR.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(sR.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(wC.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(wC.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var i;let r,{track:s,type:o}=e;switch(o){case NC.LocalAudioTrack:r=fC.Audio;break;case NC.LocalVideoTrack:r=Ii(i=s._hints).call(i,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalVideoLowTrack:r=fC.Low}return{kind:o===NC.LocalAudioTrack?wC.AUDIO:wC.VIDEO,stream_type:r,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:s.muted||!s.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[i,{track:r,ssrcs:s,id:o}]=e;switch(i){case NC.LocalVideoTrack:n=Ii(t=r._hints).call(t,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalAudioTrack:n=fC.Audio;break;case NC.LocalVideoLowTrack:n=fC.Low}return{stream_type:n,ssrcs:s,mid:o}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:i,type:r}=e;this.localTrackMap.set(r,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(kC.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Ii(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await ny(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),vT.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:pv.TRACER}).onSuccess(),this.emit(kC.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(i=n.audioTrack)||void 0===i||i.emit(hR.FIRST_FRAME_DECODED),vT.firstRemoteFrame(this.store.sessionId,uT.FIRST_AUDIO_DECODE,hT.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&vT.firstRemoteFrame(this.store.sessionId,uT.FIRST_AUDIO_RECEIVED,hT.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&vT.firstRemoteFrame(this.store.sessionId,uT.FIRST_VIDEO_RECEIVED,hT.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,i="relay"===t.candidateType;"unknown"!==t.candidateType&&n===i||this.emit(kC.ConnectionTypeChange,n),oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(KA(t))," -> ").concat(JSON.stringify(KA(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(KA(t))," -> ").concat(JSON.stringify(KA(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(kC.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===jT.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,oT.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===jT.SEND_ONLY?this.restartICE(e):Cv(this,kC.RequestP2PRestartICE,{direction:jT.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(NC.LocalAudioTrack);if(e instanceof vI&&(null==n?void 0:n.track)instanceof bI)return n.track.isActive||t.push([NC.LocalAudioTrack,n]),t;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(i&&(t.push(i),i[0]===NC.LocalVideoTrack)){const e=this.localTrackMap.get(NC.LocalVideoLowTrack);e&&t.push([NC.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(NC.LocalAudioTrack);if(e instanceof vI&&(null==n?void 0:n.track)instanceof bI)return n.track.isActive&&t.push([NC.LocalAudioTrack,n]),t;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(i)if(i[0]===NC.LocalVideoTrack){t.push(i);const e=this.localTrackMap.get(NC.LocalVideoLowTrack);e&&t.push([NC.LocalVideoLowTrack,e])}else t.push(i);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[i,{track:r,ssrcs:s,id:o}]=e;switch(i){case NC.LocalAudioTrack:n=fC.Audio;break;case NC.LocalVideoTrack:n=Ii(t=r._hints).call(t,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalVideoLowTrack:n=fC.Low}return{stream_type:n,ssrcs:s,mid:o}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[i,{track:r,ssrcs:s,id:o}]=e;switch(i){case NC.LocalAudioTrack:n=fC.Audio;break;case NC.LocalVideoTrack:n=Ii(t=r._hints).call(t,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalVideoLowTrack:n=fC.Low}return{stream_type:n,ssrcs:s,mid:o}}))}filterTobeUnSubscribedTracks(e,t){const n=[],i=this.remoteUserMap.get(e);if(!i)return n;if(t){const r=i.get(t);if(!r)return n;n.push([e,{kind:t,id:r}])}else Array.from(i.entries()).forEach((t=>{let[i,r]=t;n.push([e,{kind:i,id:r}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:i,id:r}]=e;switch(i){case wC.VIDEO:return void(n._videoSSRC&&t.push({stream_type:wC.VIDEO,ssrcId:n._videoSSRC}));case wC.AUDIO:return void(n._audioSSRC&&t.push({stream_type:wC.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const i=this.remoteUserMap.get(t);i&&(i.delete(n),0===Array.from(i.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(NC.LocalVideoTrack),n=this.localTrackMap.get(NC.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof vI){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const i=this.createUnmuteMessage(n);return void await Av(this,kC.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(kC.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(kC.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await ny(gy(this.dtlsFailedCount,my)),this.emit(kC.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(NC.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof FI))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof FI)).length>1)throw new K_(H_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof vI)).length>1&&(e.some((e=>e instanceof vI&&e._bypassWebAudio))||!Ww().webAudioMediaStreamDest))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof FI&&this.pendingLocalTracks.some((e=>e instanceof FI)))throw new K_(H_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof vI&&this.pendingLocalTracks.some((e=>e instanceof vI))&&(!Ww().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof vI&&e._bypassWebAudio))))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!Fb("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ww().supportDualStreamEncoding,i=Oj(Oj({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=n?e._mediaStreamTrack.clone():aj(e,i);const s=iy(8,"track-low-"),o=new FI(r,Oj(Oj({},n&&{scaleResolutionDownBy:HA(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,s);return o.on(lR.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,aR.LOW_STREAM)})),o._hints.push(oR.LOW_STREAM),e.addListener(sR.NEED_CLOSE,(()=>{o.close()})),o}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,i){var r;const s=Array.from(ph(r=this.remoteUserMap).call(r)).find((t=>t._videoSSRC===e));if(s){i||this.store.subscribe(s.uid,"video",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,o=r.subscribe.find((e=>e.userId===s.uid&&"video"===e.type));vT.firstRemoteVideoDecode(this.store.sessionId,uT.FIRST_VIDEO_DECODE,hT.FIRST_VIDEO_DECODE,{peer:s._uintid,videowidth:t,videoheight:n,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==o?void 0:o.subscribeEnd)||0,subscriberStart:(null==o?void 0:o.subscribeStart)||0,videoAddNotify:(null==o?void 0:o.streamAdded)||0,state:i?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const i=this.remoteUserMap.get(e);if(!i)return!1;const r=i.get(t);if(!r)return!1;const s=await this.recvConnection.getRemoteSSRC(r);return void 0!==s&&s!==n}resetConnection(e){oT.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(e)),this.state===OC.Connected?(oT.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))}async publishDataChannel(e){throw new K_(H_.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new K_(H_.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new K_(H_.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new K_(H_.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new K_(H_.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new K_(H_.NOT_SUPPORTED)}async preConnect(e,t,n,i,r,s){throw new K_(H_.NOT_SUPPORTED)}getEstablishParams(){throw new K_(H_.NOT_SUPPORTED)}async reSubscribe(e){throw new K_(H_.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new K_(H_.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===NC.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,aR.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}}function Dj(e){return function(t,n,i){const r=t[n];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return i.value=async function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];switch(e){case Aj.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await r.apply(this,i)}finally{e()}}case Aj.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await r.apply(this,i)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await r.apply(this,i)}finally{e(),t()}}}},i}}function Pj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}QT([Dj(Aj.SEND_ONLY),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],kj.prototype,"p2pConnect",null),QT([Dj(Aj.SEND_ONLY),XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],kj.prototype,"unpublish",null),QT([Dj(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],kj.prototype,"unpublishLowStream",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number,String]),XT("design:returntype",c_)],kj.prototype,"subscribe",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number,String]),XT("design:returntype",c_)],kj.prototype,"mockSubscribe",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String,Boolean]),XT("design:returntype",c_)],kj.prototype,"unsubscribe",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String]),XT("design:returntype",c_)],kj.prototype,"muteRemote",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String]),XT("design:returntype",c_)],kj.prototype,"unmuteRemote",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String]),XT("design:returntype",c_)],kj.prototype,"hasRemoteMediaWithLock",null),QT([Dj(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],kj.prototype,"disconnectForReconnect",null),QT([Dj(Aj.RECEIVE_ONLY),XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number]),XT("design:returntype",c_)],kj.prototype,"remoteMediaSsrcChanged",null);class Lj{constructor(e){sh(this,"store",void 0),sh(this,"onStatsException",void 0),sh(this,"onUploadPublishDuration",void 0),sh(this,"onStatsChanged",void 0),sh(this,"localStats",new Map),sh(this,"remoteStats",new Map),sh(this,"updateStatsInterval",void 0),sh(this,"trafficStats",void 0),sh(this,"trafficStatsPeerList",[]),sh(this,"uplinkStats",void 0),sh(this,"exceptionMonitor",void 0),sh(this,"p2pChannel",void 0),sh(this,"scalabilityMode",AT.L1T1),sh(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new jM,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(NC.LocalAudioTrack)||xj({},mR)}getLocalVideoTrackStats(){return this.localStats.get(NC.LocalVideoTrack)||xj({},gR)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var i;const r=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.audioStats;r&&(n[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[i,{audioStats:r}]=e;r&&(n[i]=t(i,r))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const i=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;i&&(t[e]=i)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:i}]=e;i&&(t[n]=i)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var i;const r=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.videoStats;r&&(n[e]=t(e,r))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[i,{videoStats:r}]=e;r&&(n[i]=t(i,r))}));return n}getRTCStats(){let e=0,t=0,n=0,i=0;const r=this.localStats.get(NC.LocalAudioTrack);r&&(e+=r.sendBytes,t+=r.sendBitrate);const s=this.localStats.get(NC.LocalVideoTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate);const o=this.localStats.get(NC.LocalVideoLowTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:r}=e;t&&(n+=t.receiveBytes,i+=t.receiveBitrate),r&&(n+=r.receiveBytes,i+=r.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),i=null!=n&&n.videoSSRC?FM.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,r=null!=n&&n.audioSSRC?FM.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,i>r?i:r),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&oT.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const i=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,r=!n||t.framesDecodeCount>n.framesDecodeCount;return i||!r}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,i]=t;switch(n){case NC.LocalVideoTrack:case NC.LocalVideoLowTrack:{const t=i,s=xj({},gR),o=e.getStats(),a=e.getLocalMedia(n);if(o){const n=o.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){const i=e.getLocalVideoSize(),r=e.getEncoderConfig(NC.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(s.codecType=n.codec),s.sendBytes=n.bytes,s.sendBitrate=t?8*Math.max(0,s.sendBytes-t.sendBytes):0,n.inputFrame?(s.captureFrameRate=n.inputFrame.frameRate,s.captureResolutionHeight=n.inputFrame.height,s.captureResolutionWidth=n.inputFrame.width):i&&(s.captureResolutionWidth=i.width,s.captureResolutionHeight=i.height),n.sentFrame?(s.sendFrameRate=n.sentFrame.frameRate,s.sendResolutionHeight=n.sentFrame.height,s.sendResolutionWidth=n.sentFrame.width):i&&(s.sendResolutionWidth=i.width,s.sendResolutionHeight=i.height),n.avgEncodeMs&&(s.encodeDelay=n.avgEncodeMs),r&&r.bitrateMax&&(s.targetSendBitrate=1e3*r.bitrateMax),s.sendPackets=n.packets,s.sendPacketsLost=n.packetsLost,s.sendJitterMs=n.jitterMs,s.sendRttMs=n.rttMs,s.totalDuration=t?t.totalDuration+1:1,s.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(s.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(oT.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var r;this.localStats.set(n,s),((null==t?void 0:t.sendResolutionWidth)!==s.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==s.sendResolutionHeight)&&(null===(r=this.onStatsChanged)||void 0===r||r.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,s);break}case NC.LocalAudioTrack:{const t=i,r=xj({},mR),s=e.getStats(),o=e.getLocalMedia(n);if(s){const n=s.audioSend.find((e=>e.ssrc===(null==o?void 0:o.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(r.codecType=n.codec),n.inputLevel)r.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(r.sendVolumeLevel=Math.round(32767*t))}r.sendBytes=n.bytes,r.sendPackets=n.packets,r.sendPacketsLost=n.packetsLost,r.sendJitterMs=n.jitterMs,r.sendRttMs=n.rttMs,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0}}this.trafficStats&&(r.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(NC.LocalAudioTrack,r),r&&o&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,o.track,r);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,i;let[r,{videoStats:s,audioStats:o,videoPcStats:a}]=t;const c=o,d=s,l=a,u=xj({},ER),h=xj({},vR),p=xj({},_R),{audioTrack:f,videoTrack:m,audioSSRC:g,videoSSRC:E}=e.getRemoteMedia(r);let _;_=e instanceof kj?e.getStats(!0):e.getStats();const v=null===(n=_)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),y=null===(i=_)||void 0===i?void 0:i.videoRecv.find((e=>e.ssrc===E)),S=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===r));if(v&&("opus"!==v.codec&&"aac"!==v.codec&&"PCMU"!==v.codec&&"PCMA"!==v.codec&&"G722"!==v.codec||(u.codecType=v.codec),v.outputLevel?u.receiveLevel=Math.round(32767*v.outputLevel):f&&(u.receiveLevel=Math.round(32767*f.getVolumeLevel())),u.receiveBytes=v.bytes,u.receivePackets=v.packets,u.receivePacketsLost=v.packetsLost,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=v.jitterBufferMs,u.totalDuration>10&&Lj.isRemoteAudioFreeze(f)&&(u.totalFreezeTime+=1)),y){"H264"!==y.codec&&"H265"!==y.codec&&"VP8"!==y.codec&&"VP9"!==y.codec&&"AV1X"!==y.codec&&"AV1"!==y.codec||(h.codecType=y.codec),h.receiveBytes=y.bytes,h.receiveBitrate=d?8*Math.max(0,h.receiveBytes-d.receiveBytes):0,h.decodeFrameRate=y.decodeFrameRate<0?0:y.decodeFrameRate,h.renderFrameRate=y.decodeFrameRate<0?0:y.decodeFrameRate,y.outputFrame&&(h.renderFrameRate=y.outputFrame.frameRate),y.receivedFrame?(h.receiveFrameRate=y.receivedFrame.frameRate,h.receiveResolutionHeight=y.receivedFrame.height,h.receiveResolutionWidth=y.receivedFrame.width):m&&(h.receiveResolutionHeight=m._videoHeight||0,h.receiveResolutionWidth=m._videoWidth||0),void 0!==y.framesRateFirefox&&(h.receiveFrameRate=Math.round(y.framesRateFirefox)),h.receivePackets=y.packets,h.receivePacketsLost=y.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=d?d.totalDuration+1:1,h.totalFreezeTime=d?d.totalFreezeTime:0,h.receiveDelay=y.jitterBufferMs||0;const t=!!E&&e.getRemoteVideoIsReady(E);m&&t&&Lj.isRemoteVideoFreeze(m,y,l)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}S&&(u.end2EndDelay=S.B_ad,h.end2EndDelay=S.B_vd,u.transportDelay=S.B_ed,h.transportDelay=S.B_ed,u.currentPacketLossRate=S.B_ealr4/100,h.currentPacketLossRate=S.B_evlr4/100,p.uplinkNetworkQuality=S.B_punq?S.B_punq:0,p.downlinkNetworkQuality=S.B_pdnq?S.B_pdnq:0),this.remoteStats.set(r,{audioStats:u,videoStats:h,videoPcStats:y,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,u),m&&this.exceptionMonitor.setRemoteVideoStats(m,h)}))}}function Mj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Uj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class jj extends dv{constructor(e,t,n,i){super(),sh(this,"spec",void 0),sh(this,"token",void 0),sh(this,"websocket",void 0),sh(this,"pingpongTimer",void 0),sh(this,"reconnectMode","retry"),sh(this,"serviceMode",void 0),sh(this,"reqId",0),sh(this,"commandReqId",0),sh(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),sh(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):this.serviceMode===FT.INJECT?this.emit(oC.INJECT_STREAM_STATUS,t):(vT.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===FT.TRANSCODE?1:2}),this.emit(oC.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=i,this.websocket=new pA("live-streaming",n),this.websocket.on(VT.CONNECTED,this.handleWebSocketOpen),this.websocket.on(VT.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(VT.REQUEST_NEW_URLS,((e,t)=>{Cv(this,oC.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(VT.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,i){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const r=this.commandReqId,s=this.reqId;if(!s||!this.websocket)throw new ZT(H_.UNEXPECTED_ERROR);const o=Uj({command:e,sdkVersion:"4.20.1"===xb?"0.0.1":xb,seq:s,requestId:s,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new ZT(H_.WS_DISCONNECT);const a=()=>new c_(((e,t)=>{this.websocket.once(VT.CLOSED,(()=>t(new ZT(H_.WS_ABORT)))),this.websocket.once(VT.CONNECTED,e)}));"connected"!==this.websocket.state&&await a(),o.clientRequest&&(o.clientRequest.workerToken=this.token);const c=new c_(((e,t)=>{const n=()=>{t(new ZT(H_.WS_ABORT))};this.websocket.once(VT.RECONNECTING,n),this.websocket.once(VT.CLOSED,n),this.once("@".concat(s,"-").concat(this.spec.sid),(t=>{e(t)}))}));i&&vT.workerEvent(this.spec.sid,Uj(Uj({},i),{},{requestId:r,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const d=Date.now();this.websocket.sendMessage(o);let l=null;try{l=await c}catch(i){if("closed"===this.websocket.state)throw i;return await a(),await this.request(e,t,n)}return i&&vT.workerEvent(this.spec.sid,Uj(Uj({},i),{},{requestId:r,actionType:"response",payload:JSON.stringify(l.serverResponse),serverCode:l.code,success:200===l.code,responseTime:Date.now()-d})),200!==l.code&&this.handleResponseError(l),l}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.20.1"===xb?"0.0.1":xb;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case cC.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void oT.warning("live stream response already exists stream");case cC.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case cC.LIVE_STREAM_RESPONSE_BAD_STREAM:case cC.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new ZT(H_.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case cC.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case cC.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new ZT(H_.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case cC.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new ZT(H_.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(oC.WARNING,t,e.serverResponse.url)}case cC.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new ZT(H_.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(oC.WARNING,t,e.serverResponse.url)}case cC.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case cC.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new ZT(H_.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case cC.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new ZT(H_.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(oC.WARNING,t,e.serverResponse.url)}case cC.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case cC.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case cC.LIVE_STREAM_RESPONSE_WORKER_LOST:case cC.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case cC.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case cC.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case cC.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case cC.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case cC.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new ZT(H_.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(sy)}),6e3)}}function Vj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Bj extends dv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:my,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:my;super(),sh(this,"onLiveStreamWarning",void 0),sh(this,"onLiveStreamError",void 0),sh(this,"onInjectStatusChange",void 0),sh(this,"spec",void 0),sh(this,"retryTimeout",1e4),sh(this,"connection",void 0),sh(this,"httpRetryConfig",void 0),sh(this,"wsRetryConfig",void 0),sh(this,"streamingTasks",new Map),sh(this,"isStartingStreamingTask",!1),sh(this,"taskMutex",new py("live-streaming")),sh(this,"cancelToken",Cb.CancelToken.source()),sh(this,"transcodingConfig",void 0),sh(this,"injectConfig",Fj({},sC)),sh(this,"injectLoopTimes",0),sh(this,"uapResponse",void 0),sh(this,"lastTaskId",1),sh(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=Fj(Fj({},rC),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(oT.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>Fj(Fj(Fj({},tC),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){Z_(e.width)||q_(e.width,"config.width",0,1e4),Z_(e.height)||q_(e.height,"config.height",0,1e4),Z_(e.videoBitrate)||q_(e.videoBitrate,"config.videoBitrate",1,1e6),Z_(e.videoFrameRate)||q_(e.videoFrameRate,"config.videoFrameRate"),Z_(e.lowLatency)||z_(e.lowLatency,"config.lowLatency"),Z_(e.audioSampleRate)||Y_(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Z_(e.audioBitrate)||q_(e.audioBitrate,"config.audioBitrate",1,128),Z_(e.audioChannels)||Y_(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),Z_(e.videoGop)||q_(e.videoGop,"config.videoGop"),Z_(e.videoCodecProfile)||Y_(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Z_(e.userCount)||q_(e.userCount,"config.userCount",0,17),Z_(e.backgroundColor)||q_(e.backgroundColor,"config.backgroundColor",0,16777215),Z_(e.userConfigExtraInfo)||Q_(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!Z_(e.transcodingUsers)&&(X_(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{eC(e.uid),Z_(e.x)||q_(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Z_(e.y)||q_(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Z_(e.width)||q_(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Z_(e.height)||q_(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Z_(e.zOrder)||q_(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),Z_(e.alpha)||q_(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),Z_(e.watermark)||iC(e.watermark,"watermark"),Z_(e.backgroundImage)||iC(e.backgroundImage,"backgroundImage"),e.images&&!Z_(e.images)&&(X_(e.images,"config.images"),e.images.forEach(((e,t)=>{iC(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>Fj(Fj(Fj({},nC),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(Fj(Fj(Fj({},nC),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(Fj(Fj(Fj({},nC),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>Fj({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const i=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?c_.resolve(e.uid):Dw(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await c_.all(i)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var r;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(JT(r=this.streamingTasks).call(r)).map((e=>e.taskId)).join("#")});oT.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{oT.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{oT.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{oT.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}setInjectStreamConfig(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var i;if(Array.from(JT(i=this.streamingTasks).call(i)).find((e=>e.mode===FT.INJECT))&&t===FT.INJECT)return new ZT(H_.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===FT.TRANSCODE)throw new ZT(H_.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};oT.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const s=await this.taskMutex.lock();if(!this.connection&&n)return void s();if(this.streamingTasks.get(e)&&!n)return s(),new ZT(H_.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw s(),e}switch(t){case FT.TRANSCODE:r.transcodingConfig=Fj({},this.transcodingConfig);break;case FT.RAW:break;case FT.INJECT:r={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const i=new c_(((t,i)=>{ny(this.retryTimeout).then((()=>{if(n)return i(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),i(t)):void 0}))})),a=await c_.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===FT.TRANSCODE?1:2,requestByUser:!n,tid:o.toString()}),i]);this.isStartingStreamingTask=!1,oT.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:o}),s()}catch(i){if(s(),this.isStartingStreamingTask=!1,!i.data||!i.data.retry||n)throw i;return i.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,i)):await this.startLiveStreamingTask(e,t,i)}}stopLiveStreamingTask(e){return new c_(((t,n)=>{const i=this.streamingTasks.get(e);if(!i||!this.connection)return new ZT(H_.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const r=i.mode;i.abortTask=()=>{oT.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:r===FT.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:r===FT.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{oT.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&r!==FT.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),r===FT.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(BT.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,e)})).catch(n)}))}async controlInjectStream(e,t,n,i){const r=this.streamingTasks.get(e);if(!r||!this.connection||r.mode!==FT.INJECT)throw new ZT(H_.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:i}})).serverResponse}resetAllTask(){var e;const t=Array.from(JT(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Cb.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new ZT(H_.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await Cv(this,aC.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new jj(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(oC.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(oC.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(oC.INJECT_STREAM_STATUS,(e=>this.handleInjectStreamServerStatus(e))),this.connection.on(oC.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new ZT(H_.UNEXPECTED_ERROR,"can not get new live streaming address list"));Cv(this,aC.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),i=e.reason;switch(e.code){case cC.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case cC.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case cC.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case cC.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const i=new ZT(H_.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return oT.error(i.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,i);if(!this.isStartingStreamingTask)return;this.statusError.set(t,i)}case cC.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new ZT(H_.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case cC.LIVE_STREAM_RESPONSE_WORKER_LOST:case cC.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var r;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(JT(r=this.streamingTasks).call(r));for(const n of t)n.abortTask?n.abortTask():(oT.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new ZT(H_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{oT.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{oT.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(BT.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(BT.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(BT.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(BT.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(BT.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void oT.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class Wj{constructor(){sh(this,"destChannelMediaInfos",new Map),sh(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){yC(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){yC(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){$T(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function Gj(e){if(!(e instanceof Wj))return new ZT(H_.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new ZT(H_.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new ZT(H_.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class Hj extends dv{constructor(e,t,n){super(),sh(this,"ws",void 0),sh(this,"requestId",1),sh(this,"heartBeatTimer",void 0),sh(this,"joinInfo",void 0),sh(this,"clientId",void 0),sh(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),sh(this,"onClose",(e=>{this.emit("close"),this.dispose()})),sh(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new pA("cross-channel-".concat(this.clientId),n),this.ws.on(VT.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(VT.CONNECTED,this.onOpen),this.ws.on(VT.ON_MESSAGE,this.onMessage),this.ws.on(VT.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new c_(((t,n)=>{const i=window.setTimeout((()=>{n(new ZT(H_.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(r=>{window.clearTimeout(i),r.state&&0!==r.state?n(new ZT(H_.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(i),n(new ZT(H_.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new ZT(H_.WS_DISCONNECT);const t=()=>new c_(((e,t)=>{this.ws.once(VT.CLOSED,(()=>t(new ZT(H_.WS_ABORT)))),this.ws.once(VT.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),i=new c_(((e,t)=>{const i=()=>{t(new ZT(H_.WS_ABORT))};this.ws.once(VT.RECONNECTING,i),this.ws.once(VT.CLOSED,i),this.once("req_".concat(n),e),ny(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(VT.RECONNECTING,i),this.ws.off(VT.CLOSED,i),t(new ZT(H_.TIMEOUT,"cross channel ws request timeout"))}))})),r=await i;if(!r||200!==r.code)throw new ZT(H_.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(r)));return r}async connect(e){this.ws.removeAllListeners(VT.REQUEST_NEW_URLS),this.ws.on(VT.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Kj extends dv{set state(e){e!==this._state&&(e!==hC.RELAY_STATE_FAILURE&&(this.errorCode=pC.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,i,r){super(),sh(this,"joinInfo",void 0),sh(this,"sid",void 0),sh(this,"clientId",void 0),sh(this,"cancelToken",Cb.CancelToken.source()),sh(this,"workerToken",void 0),sh(this,"requestId",0),sh(this,"signal",void 0),sh(this,"prevChannelMediaConfig",void 0),sh(this,"httpRetryConfig",void 0),sh(this,"_resolution",void 0),sh(this,"_state",hC.RELAY_STATE_IDLE),sh(this,"errorCode",pC.RELAY_OK),sh(this,"onStatus",(e=>{oT.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",uC.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",uC.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=pC.SRC_TOKEN_EXPIRED,this.state=hC.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=pC.DEST_TOKEN_EXPIRED,this.state=hC.RELAY_STATE_FAILURE))})),sh(this,"onReconnect",(async()=>{oT.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",uC.NETWORK_DISCONNECTED),this.state=hC.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==hC.RELAY_STATE_IDLE&&(oT.error("auto restart channel media relay failed",e.toString()),this.errorCode=pC.SERVER_CONNECTION_LOST,this.state=hC.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=ry(),this.signal=new Hj(this.joinInfo,this.clientId,n),this.httpRetryConfig=i,this._resolution=r}async startChannelMediaRelay(e){if(this.state!==hC.RELAY_STATE_IDLE)throw new ZT(H_.INVALID_OPERATION);this.state=hC.RELAY_STATE_CONNECTING,await this.connect(),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new ZT(H_.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new ZT(H_.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new ZT(H_.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==hC.RELAY_STATE_RUNNING)throw new ZT(H_.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==hC.RELAY_STATE_RUNNING)throw new ZT(H_.INVALID_OPERATION);const t=this.genMessage(lC.SetVideoProfile);await this.signal.request(t),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),oT.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=hC.RELAY_STATE_IDLE,this.dispose()}dispose(){oT.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Cb.CancelToken.source(),this.state=hC.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await Mw(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",uC.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(lC.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(lC.SetSdkProfile,e);await this.signal.request(n),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const i=this.genMessage(lC.SetSourceChannel,e);await this.signal.request(i),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",uC.PACKET_JOINED_SRC_CHANNEL),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const r=this.genMessage(lC.SetSourceUserId,e);await this.signal.request(r),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const s=this.genMessage(lC.SetDestChannel,e);await this.signal.request(s),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",uC.PACKET_JOINED_DEST_CHANNEL),oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const o=this.genMessage(lC.StartPacketTransfer,e);await this.signal.request(o),this.emit("event",uC.PACKET_SENT_TO_DEST_CHANNEL),this.state=hC.RELAY_STATE_RUNNING,oT.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(lC.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",uC.PACKET_UPDATE_DEST_CHANNEL),oT.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(lC.StopPacketTransfer);await this.signal.request(e),oT.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],i=[],r=[];this.requestId+=1;const s={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:xb,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.20.1"===s.sdkVersion&&(s.sdkVersion="0.0.1");let o=null,a=null;switch(e){case lC.SetSdkProfile:return s.clientRequest={command:"SetSdkProfile",type:"multi_channel"},s;case lC.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new ZT(H_.UNEXPECTED_ERROR,"can not find source config");return s.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},s;case lC.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new ZT(H_.UNEXPECTED_ERROR,"can not find source config");return s.clientRequest={command:"SetSourceUserId",uid:a.uid+""},s;case lC.SetDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new ZT(H_.UNEXPECTED_ERROR,"can not find dest config");return o.forEach((e=>{n.push(e.channelName),i.push(e.uid+""),r.push(e.token||this.joinInfo.appId)})),s.clientRequest={command:"SetDestChannel",channelName:n,uid:i,token:r},s;case lC.StartPacketTransfer:return s.clientRequest={command:"StartPacketTransfer"},s;case lC.Reconnect:return s.clientRequest={command:"Reconnect"},s;case lC.StopPacketTransfer:return s.clientRequest={command:"StopPacketTransfer"},s;case lC.UpdateDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new ZT(H_.UNEXPECTED_ERROR,"can not find dest config");return o.forEach((e=>{n.push(e.channelName),i.push(e.uid+""),r.push(e.token||this.joinInfo.appId)})),s.clientRequest={command:"UpdateDestChannel",channelName:n,uid:i,token:r},s;case lC.SetVideoProfile:s.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return s}}function zj(e){var t={},n=!1;function i(t,i){return n=!0,{done:!1,value:new BM(i=new YM((function(n){n(e[t](i))})),1)}}return t[void 0!==Uu&&th||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}var Yj=i(qM);function qj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Zj extends JC{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Ii(t=Object.keys(Kb)).call(t,e)})))]}constructor(e,t){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"remoteSDP",void 0),sh(this,"initialOffer",void 0),sh(this,"statsFilter",void 0),sh(this,"useRTX",!1),sh(this,"localCapabilities",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"establishPromise",void 0),sh(this,"mutex",new py("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(Zj.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=xU(this.peerConnection,Fb("STATS_UPDATE_INTERVAL"),void 0,I_()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=jU(e.sdp),n=UU(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:Fb("FILTER_VIDEO_FEC"),filterAudioFec:Fb("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,Xj(Xj({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new K_(H_.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,i,r,s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(e){sh(this,"sessionDesc",void 0),sh(this,"localCapabilities",void 0),sh(this,"rtpCapabilities",void 0),sh(this,"candidates",void 0),sh(this,"iceParameters",void 0),sh(this,"dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname",void 0),e=zv(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:i,remoteRTPCapabilities:r,remoteSetup:s,localCapabilities:o,sdkCodec:a,cname:c}=e,d=fU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=r,this.candidates=i,this.iceParameters=t,this.dtlsParameters=n,this.setup=s,this.localCapabilities=o,this.cname=c;for(let l=0;l<d.mediaDescriptions.length;l++){const e=d.mediaDescriptions[l];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=i,e.attributes.setup=s,"video"===e.media.mediaType){e.media.fmts=r.videoCodecs.map((e=>e.payloadType.toString(10)));let t=r.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Ii(n=t.encodingName.toLowerCase()).call(n,a)}));0===t.length&&(t=r.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=r.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=r.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=r.audioCodecs,e.attributes.extmaps=r.audioExtensions),d.mediaDescriptions[l]=this.mungMediaDesc(e)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return fU.print(this.sessionDesc)}send(e,t,n){const{ssrcs:i,ssrcGroups:r}=BU(t,this.cname),s=this.sessionDesc.mediaDescriptions.find((t=>e===wC.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),o=i[0].attributes.label,a=i[0].attributes.mslabel;return s.attributes.ssrcs=s.attributes.ssrcs.concat(i),s.attributes.ssrcGroups=s.attributes.ssrcGroups.concat(r),{id:o,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],i=[],r=[];t.attributes.ssrcs.forEach((t=>{Ii(e).call(e,t.attributes.label||"")?r.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Ii(t=r.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||i.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=i}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,i=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],e);this.sessionDesc.mediaDescriptions[i]=r}))}stopReceiving(e){}updateCandidates(e){e===RC.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(Jj(Jj({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=zv(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=zv(e);return WU(n,t),HU(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const i=this.sessionDesc.mediaDescriptions.find((t=>e===wC.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(i){const e=i.attributes.ssrcs.find((e=>e.attributes.label===t));var r;e&&(e.attributes.label=n,null===(r=e.attributes.msid)||void 0===r||r.replace(t,n))}}mungMediaDesc(e){const t=zv(e);return GU(t),function(e){const t=e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:i.send,remoteSetup:r,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:s});const o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new K_(H_.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}send(e,t){var n=this;return XM((function*(){const i=yield WM(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),r=yield WM(n.peerConnection.createOffer()),s=fU.parse(r.sdp),o=e.map((e=>{const t=e._mediaStreamTrack,i=s.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!i)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const i=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),r=e.attributes.ssrcGroups;if(0===i.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(r&&i.length>1){const e=r.find((e=>-1!==e.ssrcIds.indexOf(i[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:i[0].ssrcId}]}return[{ssrcId:i[0].ssrcId}]}(i,t.id,n.useRTX)}));let a;try{a=yield o}catch(e){throw i.forEach((e=>{R_()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(r.sdp,e);n.remoteSDP.receive(e,t,a);const d=n.remoteSDP.toString();return yield WM(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield WM(n.applySendEncodings(i,e)),yield WM(n.peerConnection.setRemoteDescription({type:"answer",sdp:d})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:o[t],id:n}}))}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{R_()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:r}=this.remoteSDP.send(e,t,i),s=new c_(((t,i)=>{const s=setTimeout((()=>{i(new Error("Cannot receive track, id: ".concat(n)))}),1e4),o=i=>{const a=y_();if(("Safari"===a.name&&11===Number(a.version)||N_())&&i.track.id!==n&&i.streams[0].id===r){var c;const r=i.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,i.track.id),this.peerConnection.removeEventListener("track",o),clearTimeout(s),void t(r)}if(i.track.id===n)return this.peerConnection.removeEventListener("track",o),clearTimeout(s),void t(i.track)};this.peerConnection.addEventListener("track",o)})),o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await s,id:n}}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(R_()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(R_()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return XM((function*(){const n=yield WM(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ww().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),i=e===RC.RELAY?"relay":"all";n.iceTransportPolicy!==i&&(oT.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(i,"]")),n.iceTransportPolicy=i,t.peerConnection.setConfiguration(n))}else if(e===RC.RELAY)return;e!==RC.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield WM(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const i=jU(n.sdp),{remoteIceParameters:r}=yield i.iceParameters;t.remoteSDP.restartICE(r);const s=t.remoteSDP.toString();yield WM(t.peerConnection.setLocalDescription(n)),yield WM(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){oT.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const i=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new K_(H_.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new K_(H_.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),Fb("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Sv(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...Zj.turnServerConfigToIceServers(e.turnServer.servers)),Fb("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...Zj.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return oT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!Ww().supportSetRtpSenderParameters)return oT.warn("Browser not support set rtp-sender parameters");const i={},r={};if(e instanceof FI)switch(e._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(Fb("DSCP_TYPE")&&B_()){var s;const e=Fb("DSCP_TYPE");Ii(s=["very-low","low","medium","high"]).call(s,e)&&(r.networkPriority=e)}const o=t.getParameters(),a=null===(n=o.encodings)||void 0===n?void 0:n[0];a&&Object.assign(a,r),Object.assign(o,i),oT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(o.encodings))),await t.setParameters(o)}async applySendEncodings(e,t){try{if(!Ww().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const i=e[n],r=t[n];i&&r&&await this.updateRtpSenderEncodings(r,i)}}catch(e){oT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=fU.parse(e);return t.forEach(((e,t)=>{const i=e._mediaStreamTrack,r=n.mediaDescriptions.find((e=>e.attributes.mid===i.kind));r&&WU(r,e)})),fU.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var i;null===(i=this.onFirstVideoDecoded)||void 0===i||i.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:i,mslabel:r}=t;const{kind:s}=e[n];return new c_(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(i)))}),1e4),o=t=>{const a=y_();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==i&&t.streams[0].id===r){var c;const r=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(s,i,t.track.id),this.peerConnection.removeEventListener("track",o),clearTimeout(n),void e({track:r,id:i})}if(t.track.id===i)return this.peerConnection.removeEventListener("track",o),clearTimeout(n),void e({track:t.track,id:i})};this.peerConnection.addEventListener("track",o)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await c_.all(t)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(Ww().supportPCSetConfiguration){const t=Zj.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function $j(e,t,n){const i=e[t];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return await i.apply(this,s)}finally{n()}},n}function eV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}QT([$j,XT("design:type",Function),XT("design:paramtypes",[Object,Object,Array,Object,String,String]),XT("design:returntype",c_)],Zj.prototype,"connect",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],Zj.prototype,"stopSending",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[String,Array,String,Object]),XT("design:returntype",c_)],Zj.prototype,"receive",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],Zj.prototype,"stopReceiving",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],Zj.prototype,"muteRemote",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],Zj.prototype,"unmuteRemote",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],Zj.prototype,"muteLocal",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],Zj.prototype,"unmuteLocal",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],Zj.prototype,"close",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],Zj.prototype,"updateEncoderConfig",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],Zj.prototype,"updateSendParameters",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[NR,String]),XT("design:returntype",c_)],Zj.prototype,"replaceTrack",null),QT([$j,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],Zj.prototype,"getRemoteSSRC",null);const nV="9",iV=4e4;function rV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rV(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class oV extends JC{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Ii(t=Object.keys(Kb)).call(t,e)})))]}constructor(e,t){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"remoteSDP",void 0),sh(this,"initialOffer",void 0),sh(this,"transportEventReceiver",void 0),sh(this,"statsFilter",void 0),sh(this,"useXR",Fb("USE_XR")),sh(this,"localCapabilities",void 0),sh(this,"remoteCodecs",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"dataStreamChannelMap",new Map),sh(this,"establishPromise",void 0),sh(this,"recoveredDataChannelIds",[]),sh(this,"currentDataChannelId",1),sh(this,"mutex",new py("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(oV.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=xU(this.peerConnection,Fb("STATS_UPDATE_INTERVAL"),void 0,I_()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else oT.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else oT.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=jU(e.sdp),n=await qU({filterRTX:!Fb("USE_PUB_RTX")&&!Fb("USE_SUB_RTX"),filterVideoFec:Fb("FILTER_VIDEO_FEC"),filterAudioFec:Fb("FILTER_AUDIO_FEC"),filterVideoCodec:Fb("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=XU(n),this.initialOffer=e,sV(sV({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new K_(H_.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,i,r,s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{get localCapabilities(){return zv(this._localCapabilities)}get rtpCapabilities(){return zv(this._rtpCapabilities)}get candidates(){return zv(this._candidates)}get iceParameters(){return zv(this._iceParameters)}get dtlsParameters(){return zv(this._dtlsParameters)}constructor(e){sh(this,"sessionDesc",void 0),sh(this,"_localCapabilities",void 0),sh(this,"_rtpCapabilities",void 0),sh(this,"_candidates",void 0),sh(this,"_iceParameters",void 0),sh(this,"_dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname",void 0),sh(this,"firefoxSsrcMidMap",new Map),e=zv(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:i,remoteRTPCapabilities:r,remoteSetup:s,localCapabilities:o,cname:a}=e,c=fU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=r,this._candidates=i,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o,this.setup=s,this.cname=a;const d=this.rtpCapabilities.send;for(const l of c.mediaDescriptions){if(l.attributes.iceUfrag=t.iceUfrag,l.attributes.icePwd=t.icePwd,l.attributes.fingerprints=n.fingerprints,l.attributes.candidates=i,l.attributes.setup=s,"video"===l.media.mediaType&&(l.media.fmts=d.videoCodecs.map((e=>e.payloadType.toString(10))),l.attributes.payloads=d.videoCodecs,l.attributes.extmaps=d.videoExtensions,Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:iV,rtx:Fb("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=e,l.attributes.ssrcGroups=t}if("audio"===l.media.mediaType&&(l.media.fmts=d.audioCodecs.map((e=>e.payloadType.toString(10))),l.attributes.payloads=d.audioCodecs,l.attributes.extmaps=d.audioExtensions,ZU(l),Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:2e4}],this.cname);l.attributes.ssrcs=e,l.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}preloadRemoteMedia(){const e=Fb("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,i=this.iceParameters,r=this.rtpCapabilities.send;for(let s=1;s<e;s++){const e=2*s+2e4,o=2*s+iV,{ssrcs:a,ssrcGroups:c}=BU([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:l}=BU([{ssrcId:o,rtx:Fb("USE_SUB_RTX")?o+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:nV,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:t,extmaps:r.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:l,rtcpFeedbackWildcards:[],payloads:r.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:nV,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:t,extmaps:r.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:r.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return fU.print(this.sessionDesc)}send(e,t,n,i){const{ssrcs:r,ssrcGroups:s}=BU(t,this.cname,Fb("SYNC_GROUP")?n:void 0),o=this.findPreloadMediaDesc(r);if(o){if(I_()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,o.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(o);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(o,i),{mid:o.attributes.mid,needExchangeSDP:!0}}return{mid:o.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,r);let n;return-1===t||1===t&&(R_()||P_())||0===t&&Fb("USE_SUB_RTX")||x_()?(n=this.createOrRecycleSendMedia(e,r,s,"sendonly",i),this.updateBundleMids()):(n=zv(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=r,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),I_()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:i}=e;return this.send(t,n,i)})),n=[];let i=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:r}=e;r&&(i=!0),n.push(t)})),{mids:n,needExchangeSDP:i}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||I_()||x_()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Ii(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Ii(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,i){e.forEach(((e,r)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,i[r])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){const t=this._candidates.filter((e=>"udp"===e.transport));if(e===RC.TCP){if(0===t.length)return;if(Fb("TCP_CANDIDATE_ONLY")){const e=this._candidates.filter((e=>"tcp"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(tV(tV({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(tV(tV({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=[...t,...e]}}else if(e===RC.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>"tcp"===e.transport));e.forEach((e=>{t.push(tV(tV({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[...t,...e]}}else 0===t.length?(this._candidates.filter((e=>"tcp"===e.transport)).forEach((e=>{t.push(tV(tV({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const n of this.sessionDesc.mediaDescriptions)n.attributes.candidates=this.candidates}restartICE(e){e=zv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const i=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(I_()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return i}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:nV,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,i,r,s){const o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=ej(o,a,this.localCapabilities.send,o===wC.VIDEO?i:r),d=o===wC.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const l="".concat(this.currentMidIndex);let u={media:{mediaType:o,port:nV,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:d,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungRecvMediaDsec(u,e,s);const h=this.findFirstClosedMedia(o);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const i=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Ii(t=Object.keys(Kb)).call(t,e)})))],r=new Set(t);if(i.every((e=>r.has(e))))return oT.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const s=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Ii(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===s.length)return oT.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(i," codecs: ").concat(t)),!1;const o=[...new Set(s.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(oT.debug("updateRemoteCodec, from ".concat(i," to ").concat(o)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Ii(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return oT.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=s;const c=this.localCapabilities.send,d=this.rtpCapabilities.recv,l=ej(wC.VIDEO,d,c,n);return a.forEach((e=>{const t=l.map((e=>e.payloadType.toString(10)));oT.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(l)),e.attributes.payloads=l,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,i,r){const s=this.rtpCapabilities.send,o=e===wC.VIDEO?s.videoCodecs:s.audioCodecs,a=e===wC.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let d={media:{mediaType:e,port:nV,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};d=this.mungSendMediaDesc(d,r);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const i=zv(e);return GU(i),WU(i,t),HU(i,t),KU(i),zU(i,n,this.localCapabilities.send),i}mungSendMediaDesc(e,t){const n=zv(e);return zU(n,t,this.localCapabilities.recv),ZU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>I_()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:i,remoteSetup:r,localCapabilities:this.localCapabilities,cname:s}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const o=this.remoteSDP.toString(),a=fU.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&ZU(c),this.useXR&&$U(a);const d=fU.print(a),l=this.logSDPExchange(d||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:d}),null==l||l(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o});const u=this.peerConnection.getTransceivers()[0];if(null!=u&&u.receiver&&this.tryBindTransportEvents(u.receiver),Fb("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t,n){var i=this;return XM((function*(){const r=yield WM(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const s=[];e.forEach((e=>{const t=i.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});s.push(t),e._updateRtpTransceiver(t)})),I_()&&!0===Fb("SIMULCAST")&&(yield WM(i.applySimulcastForFirefox(s,e)));const o=yield WM(i.peerConnection.createOffer()),a=i.remoteSDP.predictReceivingMids(e.length),c=i.mungSendOfferSDP(o.sdp,e,a),d=fU.parse(c),l=a.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return VU(t,Fb("USE_PUB_RTX"))}));let u;try{u=yield l}catch(r){u=[],i.remoteSDP.receive(e,t,n,u);const s=i.remoteSDP.toString();throw yield WM(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield WM(i.peerConnection.setRemoteDescription({type:"answer",sdp:s})),yield WM(i.stopSending(a,!0)),r}i.remoteSDP.receive(e,t,n,u);const h=i.remoteSDP.toString(),p=i.logSDPExchange(c,"offer","local","send");return yield WM(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield WM(i.applySimulcastEncodings(s,e)),yield WM(i.applySendEncodings(s,e)),null==p||p(h),yield WM(i.peerConnection.setRemoteDescription({type:"answer",sdp:h})),s.map(((e,t)=>{const n=a[t];return{localSSRC:l[t],id:n,transceiver:e}}))}catch(e){throw e instanceof K_?e:new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)oT.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:Fb("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:i}=this.remoteSDP.sendDataChannel();if(i){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),oT.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else oT.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof K_?e:new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof K_?e:new K_(H_.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:r,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,i);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(i.sdp,r,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),oT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else oT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const o=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:r,transceiver:o}}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),oT.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else oT.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return XM((function*(){const n=yield WM(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ww().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),i=e===RC.RELAY?"relay":"all";n.iceTransportPolicy!==i&&(oT.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(i,"]")),n.iceTransportPolicy=i,t.peerConnection.setConfiguration(n))}else if(e===RC.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield WM(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const i=jU(n.sdp),{remoteIceParameters:r}=yield i.iceParameters;t.remoteSDP.restartICE(r);const s=t.remoteSDP.toString(),o=t.logSDPExchange(n.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield WM(t.peerConnection.setLocalDescription(n)),null==o||o(s),yield WM(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){oT.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),null==s||s(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new K_(H_.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?I_()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:i}=t.getSelectedCandidatePair();return{local:sV(sV({},_U),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:sV(sV({},_U),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),Fb("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Sv(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...oV.turnServerConfigToIceServers(e.turnServer.servers)),Fb("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...oV.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Fb("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),Fb("ENABLE_ENCODED_TRANSFORM")&&Ww().supportWebRTCEncodedTransform&&(t.encodedInsertableStreams=!0),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(UA(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!Fb("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();oT.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return oT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return oT.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Ww().supportSetRtpSenderParameters)return oT.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const i={},r={};switch(e._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(e._encoderConfig){var s;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:i}=e._encoderConfig;t&&(r.maxBitrate=1e3*t),(Ii(s=e._hints).call(s,oR.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(r.maxFramerate=VA(n)),i&&i>=1&&(r.scaleResolutionDownBy=i))}if(Fb("DSCP_TYPE")&&B_()){var o;const e=Fb("DSCP_TYPE");Ii(o=["very-low","low","medium","high"]).call(o,e)&&(r.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];I_()&&!c&&(i.encodings=[r]),c&&Object.assign(c,r),Object.assign(a,i),oT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!Ww().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const i=e[n],r=t[n];r instanceof FI&&!this.isVP8Simulcast(r)&&await this.updateRtpSenderEncodings(r,i.sender)}}catch(e){oT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const i=fU.parse(e);return t.forEach(((e,t)=>{const r=n[t],s=i.mediaDescriptions.find((e=>e.attributes.mid===r));s&&(WU(s,e),YU(s,e,this.store.codec))})),fU.print(i)}mungReceiveAnswerSDP(e,t,n){const i=fU.parse(e),r=i.mediaDescriptions.find((e=>e.attributes.mid===t));return r&&(n===wC.AUDIO&&"audio"===r.media.mediaType&&ZU(r),this.useXR&&$U(i)),fU.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var i;null===(i=this.onFirstVideoDecoded)||void 0===i||i.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,i,r,s,o;const c=e[a],d=t[a];if(d instanceof FI&&!Ii(n=d._hints).call(n,oR.LOW_STREAM)&&null!==(i=d._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(s=d._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(o=d._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!I_()&&e.length===t.length)for(let n=0;n<e.length;n++){const i=t[n];if(i instanceof FI&&this.isVP8Simulcast(i)){const t=e[n],r={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const o=t.sender.getParameters();await t.sender.setParameters(Object.assign(o,r))}}}isVP8Simulcast(e){var t,n,i,r,s;return!!(e instanceof FI&&Fb("SIMULCAST")&&"vp8"===this.store.codec&&!Ii(t=e._hints).call(t,oR.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(i=e._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(s=e._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1)}logSDPExchange(e,t,n,i){if(Fb("SDP_LOGGING"))return oT.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(i,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",i)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(Ww().supportPCSetConfiguration){const t=oV.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function aV(e,t,n){const i=e[t];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return await i.apply(this,s)}finally{n()}},n}function cV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cV(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}QT([aV,XT("design:type",Function),XT("design:paramtypes",[Array,Array]),XT("design:returntype",c_)],oV.prototype,"updateRemoteRTPCapabilities",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[Object,Object,Array,Object,String,String]),XT("design:returntype",c_)],oV.prototype,"connect",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[Object,Array]),XT("design:returntype",c_)],oV.prototype,"createDataChannels",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[String,Array,String,Object]),XT("design:returntype",c_)],oV.prototype,"receive",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],oV.prototype,"batchReceive",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],oV.prototype,"stopReceiving",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],oV.prototype,"muteRemote",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],oV.prototype,"unmuteRemote",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],oV.prototype,"muteLocal",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],oV.prototype,"unmuteLocal",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],oV.prototype,"close",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],oV.prototype,"updateEncoderConfig",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],oV.prototype,"updateSendParameters",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[NR,String]),XT("design:returntype",c_)],oV.prototype,"replaceTrack",null),QT([aV,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],oV.prototype,"getRemoteSSRC",null);const lV="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",uV="9",hV=2e4,pV=4e4;class fV{get localCapabilities(){return zv(this._localCapabilities)}get rtpCapabilities(){return zv(this._rtpCapabilities)}get candidates(){return zv(this._candidates)}get iceParameters(){return zv(this._iceParameters)}get dtlsParameters(){return zv(this._dtlsParameters)}constructor(e){sh(this,"sessionDesc",void 0),sh(this,"_localCapabilities",void 0),sh(this,"_rtpCapabilities",void 0),sh(this,"_candidates",void 0),sh(this,"_iceParameters",void 0),sh(this,"_dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname",void 0),sh(this,"firefoxSsrcMidMap",new Map),e=zv(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:i,remoteRTPCapabilities:r,remoteSetup:s,localCapabilities:o,cname:a}=e,c=fU.parse(lV);this._rtpCapabilities=r,this._candidates=i,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o,this.setup=s,this.cname=a;const d=this.rtpCapabilities.send;for(const l of c.mediaDescriptions){if(l.attributes.iceUfrag=t.iceUfrag,l.attributes.icePwd=t.icePwd,l.attributes.fingerprints=n.fingerprints,l.attributes.candidates=i,l.attributes.setup=s,"application"===l.media.mediaType&&(l.attributes.sctpPort="5000"),"video"===l.media.mediaType&&(l.media.fmts=d.videoCodecs.map((e=>e.payloadType.toString(10))),l.attributes.payloads=d.videoCodecs,l.attributes.extmaps=d.videoExtensions,Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:pV,rtx:Fb("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=e,l.attributes.ssrcGroups=t}if("audio"===l.media.mediaType&&(l.media.fmts=d.audioCodecs.map((e=>e.payloadType.toString(10))),l.attributes.payloads=d.audioCodecs,l.attributes.extmaps=d.audioExtensions,ZU(l),Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:hV}],this.cname);l.attributes.ssrcs=e,l.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}updateRemoteRTPCapabilities(e){const t=fU.parse(lV);this._rtpCapabilities=e;const n=this.rtpCapabilities.send;for(const i of t.mediaDescriptions){if(i.attributes.iceUfrag=this._iceParameters.iceUfrag,i.attributes.icePwd=this._iceParameters.icePwd,i.attributes.fingerprints=this._dtlsParameters.fingerprints,i.attributes.candidates=this._candidates,i.attributes.setup=this.setup,"application"===i.media.mediaType&&(i.attributes.sctpPort="5000"),"video"===i.media.mediaType&&(i.media.fmts=n.videoCodecs.map((e=>e.payloadType.toString(10))),i.attributes.payloads=n.videoCodecs,i.attributes.extmaps=n.videoExtensions,Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:pV,rtx:Fb("USE_SUB_RTX")?40001:void 0}],this.cname);i.attributes.ssrcs=e,i.attributes.ssrcGroups=t}if("audio"===i.media.mediaType&&(i.media.fmts=n.audioCodecs.map((e=>e.payloadType.toString(10))),i.attributes.payloads=n.audioCodecs,i.attributes.extmaps=n.audioExtensions,Fb("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=BU([{ssrcId:hV}],this.cname);i.attributes.ssrcs=e,i.attributes.ssrcGroups=t}}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}preloadRemoteMedia(e){this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,i=this.iceParameters,r=this.rtpCapabilities.send;for(let s=1;s<e;s++){const e=2*s+hV,o=2*s+pV,{ssrcs:a,ssrcGroups:c}=BU([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:l}=BU([{ssrcId:o,rtx:Fb("USE_SUB_RTX")?o+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:uV,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:t,extmaps:r.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:l,rtcpFeedbackWildcards:[],payloads:r.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:uV,protos:["UDP","TLS","RTP","SAVPF"],fmts:r.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:t,extmaps:r.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:r.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return fU.print(this.sessionDesc)}send(e,t,n,i){const{ssrcs:r,ssrcGroups:s}=BU(t,this.cname,Fb("SYNC_GROUP")?n:void 0),o=this.findPreloadMediaDesc(r);if(o){if(I_()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,o.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(o);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(o,i),{mid:o.attributes.mid,needExchangeSDP:!0}}return{mid:o.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,r);let n;return-1===t||R_()||N_()||P_()||0===t&&Fb("USE_SUB_RTX")?(n=this.createOrRecycleSendMedia(e,r,s,"sendonly",i),this.updateBundleMids()):(n=zv(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=r,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),I_()&&this.firefoxSsrcMidMap.set(r[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:i}=e;return this.send(t,n,i)})),n=[];let i=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:r}=e;r&&(i=!0),n.push(t)})),{mids:n,needExchangeSDP:i}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||I_()||R_()||N_()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Ii(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Ii(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,i){e.forEach(((e,r)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,i[r])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){e===RC.TCP?this._candidates.forEach((e=>{-1===this._candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this._candidates.push(dV(dV({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=zv(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const i=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(I_()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return i}))}createOrRecycleRecvMedia(e,t,n,i,r,s){const o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=ej(o,a,this.localCapabilities.send,o===wC.VIDEO?i:r),d=o===wC.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const l="".concat(this.currentMidIndex);let u={media:{mediaType:o,port:uV,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:d,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungRecvMediaDsec(u,e,s);const h=this.findFirstClosedMedia(o);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const i=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Ii(t=Object.keys(Kb)).call(t,e)})))],r=new Set(t);if(i.every((e=>r.has(e))))return oT.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const s=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Ii(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===s.length)return oT.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(i," codecs: ").concat(t)),!1;const o=[...new Set(s.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(oT.debug("updateRemoteCodec, from ".concat(i," to ").concat(o)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Ii(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return oT.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=s;const c=this.localCapabilities.send,d=this.rtpCapabilities.recv,l=ej(wC.VIDEO,d,c,n);return a.forEach((e=>{const t=l.map((e=>e.payloadType.toString(10)));oT.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(l)),e.attributes.payloads=l,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,i,r){const s=this.rtpCapabilities.send,o=e===wC.VIDEO?s.videoCodecs:s.audioCodecs,a=e===wC.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let d={media:{mediaType:e,port:uV,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};d=this.mungSendMediaDesc(d,r);const l=this.findFirstClosedMedia(e);if(l){const e=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const i=zv(e);return GU(i),WU(i,t),HU(i,t),KU(i),zU(i,n,this.localCapabilities.send),i}mungSendMediaDesc(e,t){const n=zv(e);return zU(n,t,this.localCapabilities.recv),ZU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>I_()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function mV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mV(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class EV extends JC{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){let e;return this.localCapabilities&&(e=XU(this.localCapabilities)),[...new Set(e&&e.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Ii(t=Object.keys(Kb)).call(t,e)})))]}constructor(e,t,n){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"remoteSDP",void 0),sh(this,"initialOffer",void 0),sh(this,"transportEventReceiver",void 0),sh(this,"statsFilter",void 0),sh(this,"useXR",Fb("USE_XR")),sh(this,"localCapabilities",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"remoteCodecs",void 0),sh(this,"dataStreamChannelMap",new Map),sh(this,"establishPromise",void 0),sh(this,"mutex",new py("NVExtentionsConnection-mutex")),sh(this,"rtcMedia",void 0),this.store=t,this.peerConnection=n,this.statsFilter=xU(this.peerConnection,Fb("STATS_UPDATE_INTERVAL"),void 0,I_()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(e){try{const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=jU(e.sdp),n=await qU({filterRTX:!Fb("USE_PUB_RTX")&&!Fb("USE_SUB_RTX"),filterVideoFec:Fb("FILTER_VIDEO_FEC"),filterAudioFec:Fb("FILTER_AUDIO_FEC"),filterVideoCodec:Fb("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=n,this.initialOffer=e,gV(gV({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new ZT(H_.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,i,r,s){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new fV({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:i,remoteSetup:r,localCapabilities:XU(this.localCapabilities),cname:s});const o=this.remoteSDP.toString(),a=fU.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&ZU(c),this.useXR&&$U(a);const d=fU.print(a),l=this.logSDPExchange(d||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:d}),null==l||l(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else oT.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else oT.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async updateRemoteConnect(e){var t,n,i,r;null===(t=this.remoteSDP)||void 0===t||t.updateRemoteRTPCapabilities(e),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&(null===(r=this.remoteSDP)||void 0===r||r.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),null===(n=this.remoteSDP)||void 0===n||n.preloadRemoteMedia(2);const s=null===(i=this.remoteSDP)||void 0===i?void 0:i.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const o=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(o),oT.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(e,t,n){var i=this;return XM((function*(){const r=yield WM(i.mutex.lock("From NVExtentionsConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const s=[];e.forEach((e=>{const t=i.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});s.push(t)})),I_()&&!0===Fb("SIMULCAST")&&(yield WM(i.applySimulcastForFirefox(s,e)));const o=yield WM(i.peerConnection.createOffer()),a=i.remoteSDP.predictReceivingMids(e.length),c=i.mungSendOfferSDP(o.sdp,e,a),d=fU.parse(c),l=a.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return VU(t,Fb("USE_PUB_RTX"))}));let u;try{u=yield l}catch(r){u=[],i.remoteSDP.receive(e,t,n,u);const s=i.remoteSDP.toString();throw yield WM(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield WM(i.peerConnection.setRemoteDescription({type:"answer",sdp:s})),yield WM(i.stopSending(a,!0)),r}i.remoteSDP.receive(e,t,n,u);const h=i.remoteSDP.toString(),p=i.logSDPExchange(c,"offer","local","send");return yield WM(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield WM(i.applySimulcastEncodings(s,e)),yield WM(i.applySendEncodings(s,e)),null==p||p(h),yield WM(i.peerConnection.setRemoteDescription({type:"answer",sdp:h})),s.map(((e,t)=>{const n=a[t];return{localSSRC:l[t],id:n,transceiver:e}}))}catch(e){throw e instanceof ZT?e:new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);return n&&"open"===n.readyState?oT.debug("[P2PConnection] Channels are already available and can be reused directly."):(n=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:Fb("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)),void t.forEach((e=>{e._updateOriginDataChannel(n)}))}catch(e){throw e instanceof ZT?e:new ZT(H_.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return null==t||t.close(),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof ZT?e:new ZT(H_.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat(e.toString()))}}async receive(e,t,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(e," before remoteSDP created."));const{mid:r,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,i);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(i.sdp,r,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),oT.debug("[NVExtentionsConnection] receive ".concat(e," by exchanging SDP."))}else oT.debug("[NVExtentionsConnection] receive ".concat(e," no need to exchange SDP."));const o=this.peerConnection.getTransceivers().find((e=>e.mid===r));if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:r}}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),oT.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else oT.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}}))}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();null==n||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const r=this.remoteSDP.toString();null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const r=this.remoteSDP.toString();null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return XM((function*(){const n=yield WM(t.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ww().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),i=e===RC.RELAY?"relay":"all";n.iceTransportPolicy!==i&&(oT.debug("restartICE change iceTransportPolicy from [".concat(n.iceTransportPolicy,"] to [").concat(i,"]")),n.iceTransportPolicy=i,t.peerConnection.setConfiguration(n))}else if(e===RC.RELAY)return;e!==RC.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield WM(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const i=jU(n.sdp),{remoteIceParameters:r}=yield i.iceParameters;t.remoteSDP.restartICE(r);const s=t.remoteSDP.toString(),o=t.logSDPExchange(n.sdp||"","offer","local","restartICE");yield WM(t.peerConnection.setLocalDescription(n)),null==o||o(s),yield WM(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){oT.warning("restart ICE failed, abort operation",e)}finally{n()}}))()}close(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),null==s||s(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new ZT(H_.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?I_()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}getP2PConnectionParams(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return gV(gV({},jU(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oT.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oT.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),Fb("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Sv(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...EV.turnServerConfigToIceServers(e.turnServer.servers)),Fb("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...EV.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Fb("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(UA(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!Fb("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async applySendEncodings(e,t){try{if(!Ww().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let l=0;l<e.length;l++){const u=e[l],h=t[l];if(h&&h instanceof FI){var n,i,r;if(this.isVP8Simulcast(h))continue;const e={},t={};switch(h._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var s,o,a,c;if(null!==(n=h._encoderConfig)&&void 0!==n&&n.bitrateMax&&(t.maxBitrate=1e3*(null===(s=h._encoderConfig)||void 0===s?void 0:s.bitrateMax)),Ii(i=h._hints).call(i,oR.LOW_STREAM)&&(null!==(o=h._encoderConfig)&&void 0!==o&&o.frameRate&&(t.maxFramerate=VA(h._encoderConfig.frameRate)),null!==(a=h._encoderConfig)&&void 0!==a&&a.scaleResolutionDownBy&&(null===(c=h._encoderConfig)||void 0===c?void 0:c.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=h._encoderConfig.scaleResolutionDownBy)),Fb("DSCP_TYPE")&&B_()){var d;const e=Fb("DSCP_TYPE");Ii(d=["very-low","low","medium","high"]).call(d,e)&&(t.networkPriority=e)}const l=u.sender.getParameters(),p=null===(r=l.encodings)||void 0===r?void 0:r[0];I_()&&!p&&(e.encodings=[t]),p&&Object.assign(p,t),Object.assign(l,e),await u.sender.setParameters(l)}}}catch(e){oT.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,n){const i=fU.parse(e);return t.forEach(((e,t)=>{const r=n[t],s=i.mediaDescriptions.find((e=>e.attributes.mid===r));s&&(WU(s,e),YU(s,e,this.store.codec))})),fU.print(i)}mungReceiveAnswerSDP(e,t,n){const i=fU.parse(e),r=i.mediaDescriptions.find((e=>e.attributes.mid===t));return r&&n===wC.AUDIO&&"audio"===r.media.mediaType&&ZU(r),this.useXR&&$U(i),fU.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var i;null===(i=this.onFirstVideoDecoded)||void 0===i||i.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,i,r,s,o;const c=e[a],d=t[a];if(d instanceof FI&&!Ii(n=d._hints).call(n,oR.LOW_STREAM)&&null!==(i=d._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(r=d._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(s=d._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(o=d._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!I_()&&e.length===t.length)for(let n=0;n<e.length;n++){const i=t[n];if(i instanceof FI&&this.isVP8Simulcast(i)){const t=e[n],r={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const o=t.sender.getParameters();await t.sender.setParameters(Object.assign(o,r))}}}isVP8Simulcast(e){var t,n,i,r,s;return!!(e instanceof FI&&Fb("SIMULCAST")&&"vp8"===this.store.codec&&!Ii(t=e._hints).call(t,oR.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(i=e._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(r=e._scalabilityMode)&&void 0!==r&&r.numSpatialLayers&&(null===(s=e._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1)}logSDPExchange(e,t,n,i){if(Fb("SDP_LOGGING"))return oT.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(i,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",i)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(Ww().supportPCSetConfiguration){const t=EV.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function _V(e,t,n){const i=e[t];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From NVExtentionsConnection.".concat(t));try{for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return await i.apply(this,s)}finally{n()}},n}function vV(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Yj,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new yV(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function yV(e){function t(e){if(Object(e)!==e)return c_.reject(new TypeError(e+" is not an object."));var t=e.done;return c_.resolve(e.value).then((function(e){return{value:e,done:t}}))}return yV=function(e){this.s=e,this.n=e.next},yV.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?c_.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?c_.reject(e):t(n.apply(this.s,arguments))}},new yV(e)}QT([_V,XT("design:type",Function),XT("design:paramtypes",[Object,Object,Array,Object,String,String]),XT("design:returntype",c_)],EV.prototype,"connect",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Array,Array]),XT("design:returntype",c_)],EV.prototype,"updateRemoteRTPCapabilities",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],EV.prototype,"updateRemoteConnect",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Object,Array]),XT("design:returntype",c_)],EV.prototype,"createDataChannels",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[String,Array,String,Object]),XT("design:returntype",c_)],EV.prototype,"receive",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],EV.prototype,"batchReceive",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],EV.prototype,"stopReceiving",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],EV.prototype,"muteRemote",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],EV.prototype,"unmuteRemote",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],EV.prototype,"muteLocal",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],EV.prototype,"unmuteLocal",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],EV.prototype,"close",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],EV.prototype,"updateEncoderConfig",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],EV.prototype,"updateSendParameters",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[NR,String]),XT("design:returntype",c_)],EV.prototype,"replaceTrack",null),QT([_V,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],EV.prototype,"getRemoteSSRC",null);class SV extends JC{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){return this._p2pConnection.localCodecs}constructor(e,t){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"cname",void 0),sh(this,"mutex",new py("DataChannelConnection-mutex")),sh(this,"dataChannel",void 0),sh(this,"_p2pConnection",void 0),sh(this,"establishPromise",void 0),sh(this,"_nvMedia",void 0),this.store=t,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(SV.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new EV(e,t,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var e;const t=null===(e=this._nvMedia)||void 0===e?void 0:e.getLocalRtpCapabilities();return await this._p2pConnection.establish(t)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(e,t,n,i,r,s){return this.cname=s,await this._p2pConnection.connect(e,t,n,i,r,s),await new c_(((e,t)=>{const i=setTimeout((()=>{this.closeSignal(),t(new ZT(H_.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(n))))}),2e3);this.dataChannel.onopen=()=>{if("open"===this.dataChannel.readyState)return clearTimeout(i),void e()},this.dataChannel.onerror=e=>{this.closeSignal(),t(e)}})),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}async updateRemoteRTPCapabilities(e,t){return this._p2pConnection.updateRemoteRTPCapabilities(e,t)}send(e,t,n){var i=this;return XM((function*(){const r=yield WM(i.mutex.lock("From DataChannelConnection.send"));try{return yield*zj(vV(i._p2pConnection.send(e,t,n)))}finally{r()}}))()}async stopSending(e,t){return this._p2pConnection.stopSending(e,t)}async createDataChannels(e,t){return this._p2pConnection.createDataChannels(e,t)}async stopDataChannels(e){return this._p2pConnection.stopDataChannels(e)}async receive(e,t,n,i){return this._nvMedia?(oT.debug("[DataChannelConnection] receive ".concat(e," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(e,t,this.cname)):(oT.debug("[DataChannelConnection] receive ".concat(e," by WebRTC.")),await this._p2pConnection.receive(e,t,n,i))}async batchReceive(e){return[...await this._p2pConnection.batchReceive(e)]}async stopReceiving(e){return await this._p2pConnection.stopReceiving(e)}async muteRemote(e){return await this._p2pConnection.muteRemote(e)}async unmuteRemote(e){return await this._p2pConnection.unmuteRemote(e)}async muteLocal(e){return await this._p2pConnection.muteLocal(e)}async unmuteLocal(e){return await this._p2pConnection.unmuteLocal(e)}restartICE(e){var t=this;return XM((function*(){return yield*zj(vV(t._p2pConnection.restartICE(e)))}))()}close(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(e){return this._p2pConnection.getRemoteVideoIsReady(e)}updateRemoteConnect(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}async updateEncoderConfig(e,t){return await this._p2pConnection.updateEncoderConfig(e,t)}async updateSendParameters(e,t){return await this._p2pConnection.updateSendParameters(e,t)}setStatsRemoteVideoIsReady(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}async replaceTrack(e,t){return await this._p2pConnection.replaceTrack(e,t)}async getRemoteSSRC(e){return this._p2pConnection.getRemoteSSRC(e)}logSDPExchange(e,t,n,i){if(Fb("SDP_LOGGING"))return oT.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(i,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",i)}:void 0}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Sv(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...SV.turnServerConfigToIceServers(e.turnServer.servers)),Fb("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...SV.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Fb("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(UA(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!Fb("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=e=>{var t;return null===(t=this.onICEConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onConnectionStateChange=e=>{var t;return null===(t=this.onConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportStateChange=e=>{var t;return null===(t=this.onDTLSTransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportError=e=>{var t;return null===(t=this.onDTLSTransportError)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onICETransportStateChange=e=>{var t;return null===(t=this.onICETransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioReceived=e=>{var t;return null===(t=this.onFirstAudioReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoReceived=e=>{var t;return null===(t=this.onFirstVideoReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioDecoded=e=>{var t;return null===(t=this.onFirstAudioDecoded)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoDecoded=(e,t,n)=>{var i;return null===(i=this.onFirstVideoDecoded)||void 0===i?void 0:i.call(this,e,t,n)},this._p2pConnection.onFirstVideoDecodedTimeout=e=>{var t;return null===(t=this.onFirstVideoDecodedTimeout)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onSelectedLocalCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedLocalCandidateChanged)||void 0===n?void 0:n.call(this,e,t)},this._p2pConnection.onSelectedRemoteCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n?void 0:n.call(this,e,t)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}setConfiguration(e){this._p2pConnection.setConfiguration(e)}}function bV(e,t,n){const i=e[t];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From DataChannelConnection.".concat(t));try{for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return await i.apply(this,s)}finally{n()}},n}function TV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function CV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TV(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AV(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Yj,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new wV(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function wV(e){function t(e){if(Object(e)!==e)return c_.reject(new TypeError(e+" is not an object."));var t=e.done;return c_.resolve(e.value).then((function(e){return{value:e,done:t}}))}return wV=function(e){this.s=e,this.n=e.next},wV.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?c_.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?c_.reject(e):t(n.apply(this.s,arguments))}},new wV(e)}QT([bV,XT("design:type",Function),XT("design:paramtypes",[Object,Object,Array,Object,String,String]),XT("design:returntype",c_)],SV.prototype,"connect",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[Array,Array]),XT("design:returntype",c_)],SV.prototype,"updateRemoteRTPCapabilities",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[Object,Array]),XT("design:returntype",c_)],SV.prototype,"createDataChannels",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[String,Array,String,Object]),XT("design:returntype",c_)],SV.prototype,"receive",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],SV.prototype,"stopReceiving",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],SV.prototype,"muteRemote",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],SV.prototype,"unmuteRemote",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],SV.prototype,"muteLocal",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],SV.prototype,"unmuteLocal",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],SV.prototype,"close",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],SV.prototype,"updateEncoderConfig",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[String,NR]),XT("design:returntype",c_)],SV.prototype,"updateSendParameters",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[NR,String]),XT("design:returntype",c_)],SV.prototype,"replaceTrack",null),QT([bV,XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],SV.prototype,"getRemoteSSRC",null);class RV extends dv{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(kC.StateChange,t,this._state)}constructor(e,t){super(),sh(this,"store",void 0),sh(this,"statsUploader",void 0),sh(this,"connection",void 0),sh(this,"localTrackMap",new Map),sh(this,"remoteUserMap",new Map),sh(this,"localDataChannels",[]),sh(this,"remoteDataChannelMap",new Map),sh(this,"pendingLocalTracks",[]),sh(this,"pendingRemoteTracks",[]),sh(this,"pendingLocalDataChannels",[]),sh(this,"pendingRemoteDataChannels",[]),sh(this,"statsCollector",void 0),sh(this,"isPlanB",!1),sh(this,"shouldForwardP2PCreation",void 0),sh(this,"iceFailedCount",0),sh(this,"dtlsFailedCount",0),sh(this,"mutex",new py("P2PChannel-mutex")),sh(this,"_state",OC.Disconnected),sh(this,"_pcStatsUploadType",Fb("NEW_ICE_RESTART")?IC.FIRST_CONNECTION:IC.OLD_FIRST_CONNECTION),sh(this,"_isInRestartIce",!1),sh(this,"_isStartRestartIce",!1),sh(this,"_restartStates",["disconnected","failed"]),sh(this,"_restartTimer",void 0),sh(this,"_isFirstConnected",!0),sh(this,"handleMuteLocalTrack",(async(e,t,n)=>{const i=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==OC.Connected)return void n(new K_(H_.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const i=this.filterTobeMutedTracks(e);if(0===i.length)return void t();const r=i.find((e=>"videoLowTrack"===e[0]));r&&r[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(i.map((e=>{let[,{id:t}]=e;return t})));const s=this.createMuteMessage(i);await Av(this,kC.RequestMuteLocal,s),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const i=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==OC.Connected)return void n(new K_(H_.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const i=this.filterTobeUnmutedTracks(e);if(0===i.length)return void t();const r=i.find((e=>"videoLowTrack"===e[0]));if(r){const t=r[1];if(t.track._originMediaStreamTrack.stop(),!Fb("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ww().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=aj(e,Rv(this,kC.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new c_(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(i.map((e=>{let[,{id:t}]=e;return t})));const s=this.createUnmuteMessage(i);await Av(this,kC.RequestUnmuteLocal,s),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const i=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(NC.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==OC.Connected)return void t();const{id:i,track:r}=n;await this.connection.updateSendParameters(i,r),await this.connection.updateEncoderConfig(i,r),this.emit(kC.UpdateVideoEncoder,r),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleSetOptimizationMode",(async(e,t,n)=>{const i=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const n=this.localTrackMap.get(NC.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==OC.Connected)return;const{id:i,track:r}=n;await this.connection.updateSendParameters(i,r),t()}catch(e){n(e)}finally{i()}})),sh(this,"handleReplaceMixingTrack",(async(e,t,n,i)=>{if(!this.connection||this.state!==OC.Connected)return void t();const r=Ij([e]);let s;oT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(r.getTrackId(),"]")),"boolean"==typeof i&&i||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,r),t()}catch(e){n(e)}finally{var o;null===(o=s)||void 0===o||o()}})),sh(this,"handleReplaceTrack",(async(e,t,n,i)=>{let r;oT.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof i&&i||(r=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==OC.Connected)return void t();if(await(null===(s=this.connection)||void 0===s?void 0:s.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===NC.LocalVideoTrack&&!Fb("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ww().supportDualStreamEncoding){const t=this.localTrackMap.get(NC.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new c_(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var o;null===(o=r)||void 0===o||o()}})),sh(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),sh(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),sh(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),sh(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),sh(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new Tj(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!Ww().supportUnifiedPlan||Fb("CHROME_FORCE_PLAN_B")&&B_(),this.shouldForwardP2PCreation=Fb("FORWARD_P2P_CREATION")&&Ww().supportPCSetConfiguration&&function(){const e=S_();return e===f_.ANDROID||e===f_.IOS||e===f_.HARMONY_OS}(),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new SV({},this.store):this.isPlanB?new Zj({},this.store):new oV({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e,t){var n;this.state=OC.New;const i=this.shouldForwardP2PCreation&&"closed"===(null===(n=this.connection)||void 0===n?void 0:n.peerConnectionState);if(this.shouldForwardP2PCreation&&!i||(i&&this.connection&&(oT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new SV(e,this.store):this.isPlanB?new Zj(e,this.store):new oV(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new K_(H_.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=Fb("NEW_ICE_RESTART")?IC.FIRST_CONNECTION:IC.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e,t,n,i,r,s){if(!this.connection)throw new K_(H_.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof SV?this.connection.updateRemoteConnect(i):(this.store.peerConnectionStart(),await this.connection.connect(e,t,n,i,r,s),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=OC.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Ii(t=[NC.LocalVideoLowTrack,NC.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),i=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof oV){if(vT.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(i),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Ii(e).call(e,this.store.codec)){const t=["vp8","h264"].find((t=>Ii(e).call(e,t)));t&&(this.store.codec=t,oT.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async preConnect(e,t,n,i,r,s){if(!this.connection)throw new K_(H_.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const o=await this.connection.connect(e,t,n,i,r,s);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=OC.Connected,o}getEstablishParams(){if(this.connection instanceof SV)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}async publishDataChannel(e){if(!this.connection||this.state!==OC.Connected){if(this.state===OC.Disconnected)throw new K_(H_.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return void e.forEach((e=>{var t;Ii(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)}))}const t=this.filterTobePublishedDataChannels(e);0!==t.length&&(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})))}publish(e,t,n){var i=this;return XM((function*(){const r=yield WM(i.mutex.lock("From P2PChannel.publish"));try{if(!i.connection||i.state!==OC.Connected){if(i.state===OC.Disconnected)throw new K_(H_.UNEXPECTED_ERROR,"PeerConnection already disconnected.");i.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===i.pendingLocalTracks.indexOf(e)));return void(i.pendingLocalTracks=i.pendingLocalTracks.concat(t))}i.store.pubId=i.store.pubId+1,FM.markPublishStart(i.store.clientId,i.store.pubId);const r=i.filterTobePublishedTracks(e,t,n);if(0===r.length)return void(yield WM(i.tryToUnmuteAudio(e)));yield*zj(AV(i.doPublish(i.connection,r)))}finally{r()}}))()}doPublish(e,t){var n=this;return XM((function*(){t.forEach((e=>{let{track:t,type:i}=e;const r=Date.now();n.store.publish(t.getTrackId(),i===NC.LocalAudioTrack?"audio":"video",r)})),n.bindLocalTrackEvents(t);const i=t.map((e=>{let{track:t}=e;return t})),r=yield WM(e.send(t.map((e=>{let{track:t}=e;return t})),n.store.codec,n.store.audioCodec)),s=(yield WM(r.next())).value,o=n.createGatewayPublishMessage(t,s);let a;try{a=yield o}catch(e){throw r.throw(e),(null==e?void 0:e.code)===H_.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(o,a),d=(yield WM(r.next(c))).value,l=Fb("ENABLE_VIDEO_SEI");i.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&l&&(e.trackMediaType===wC.VIDEO?await async function(e,t){if(!Ww().supportWebRTCEncodedTransform)return void oT.warning("browser not support video encoded transform");if(LM.has(e))return;if(!e.track)return;const n={track:e.track};if(w_()){if(!e.createEncodedStreams)return void oT.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void oT.error("create video-encoded-streams error",e&&e.message)}let s=[];t.on("sei-to-send",(e=>{s.push(e)}));const o=new TransformStream({transform(t,r){n.controller||(n.controller=r),e.track&&e.track.id!==n.track.id&&(oT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",i),n.track=e.track,n.track.addEventListener("ended",i));const o=s.shift();o&&(t.data=xM(t.data,o)),r.enqueue(t)}});r.readable.pipeThrough(o).pipeTo(r.writable)}else{if(!R_())return;{if("undefined"==typeof RTCRtpScriptTransform)return void oT.warning("browser not support RTCRtpScriptTransform");const r=NM(),s=new MessageChannel;await new c_((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"tx",port:s.port2},[s.port2]);e.transform=o,await new c_((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{s.port1.postMessage({sei:e})})),s.port1.onmessage=t=>{var r;t.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==n.track.id&&(oT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",i),n.track=e.track,n.track.addEventListener("ended",i))},n.worker=r}}function i(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",i)}const t=LM.get(e);if(t){LM.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){oT.warning(e&&e.message)}}}LM.set(e,n),e.track.addEventListener("ended",i)}(t.sender,e):e.trackMediaType===wC.AUDIO&&await async function(e){if(!Ww().supportWebRTCEncodedTransform)return void oT.warning("browser not support audio encoded transform");if(OM.has(e))return;if(!e.track)return;const t={track:e.track};if(w_()){if(!e.createEncodedStreams)return void oT.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void oT.error("create audio-encoded-streams error",e&&e.message)}const r=new TransformStream({transform(i,r){t.controller||(t.controller=r),e.track&&e.track.id!==t.track.id&&(oT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),r.enqueue(i)}});i.readable.pipeThrough(r).pipeTo(i.writable)}else if(R_()){if("undefined"==typeof RTCRtpScriptTransform)return void oT.warning("browser not support RTCRtpScriptTransform");const i=NM(),r=new MessageChannel;await new c_((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(i,{name:"tx",port:r.port2},[r.port2]);e.transform=s,await new c_((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),r.port1.onmessage=i=>{var r;i.data.transformed&&e.track&&(null===(r=e.track)||void 0===r?void 0:r.id)!==t.track.id&&(oT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=i}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}const t=OM.get(e);if(t){OM.delete(e);try{var i,r;null===(i=t.controller)||void 0===i||i.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){oT.warning(e&&e.message)}}}OM.set(e,t),e.track.addEventListener("ended",n)}(t.sender))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,d),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:i}=e;const r=Date.now();n.store.publish(t.getTrackId(),i===NC.LocalAudioTrack?"audio":"video",void 0,r)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof FI))return oT.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof oV||this.connection instanceof Zj))return oT.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:i}=n,r=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=HA(e,t)),n.maxFramerate=e.framerate?VA(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,i);if(i._encoderConfig||(i._encoderConfig={}),t!==NC.LocalVideoLowTrack||!Fb("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ww().supportDualStreamEncoding)null!=r.scaleResolutionDownBy&&(i._encoderConfig.scaleResolutionDownBy=r.scaleResolutionDownBy);else{const t=i._originMediaStreamTrack;if(!t.canvas)return oT.warn("[".concat(i.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=VA(t.width)),t.height&&(n.height=VA(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=jR((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),VA(t.framerate)))}(t,e)}null!=r.maxBitrate&&(i._encoderConfig.bitrateMax=r.maxBitrate/1e3),null!=r.maxFramerate&&(i._encoderConfig.frameRate&&"object"==typeof i._encoderConfig.frameRate?i._encoderConfig.frameRate.max=r.maxFramerate:i._encoderConfig.frameRate={max:r.maxFramerate}),oT.debug("[".concat(i.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(i._encoderConfig))),await this.connection.updateRtpSenderEncodings(i)}publishLowStream(e){var t=this;return XM((function*(){if(!t.connection||t.state!==OC.Connected)return;const n=yield WM(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(NC.LocalVideoTrack);if(!n)throw new K_(H_.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(NC.LocalVideoLowTrack))throw new K_(H_.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const r=[{track:t.getLowVideoTrack(n.track,e),type:NC.LocalVideoLowTrack}];if(yield*zj(AV(t.doPublish(t.connection,r))),n.track.muted||!n.track.enabled){var i;const e=null===(i=t.localTrackMap.get(NC.LocalVideoLowTrack))||void 0===i?void 0:i.id;void 0!==e&&(yield WM(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(oT.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Cv(this,kC.RequestRePublish,this.pendingLocalTracks),this.emit(kC.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(oT.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await Cv(this,kC.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==wC.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==wC.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await Cv(this,kC.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===wC.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(kC.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==OC.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==OC.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==OC.Connected)return;const e=this.localTrackMap.get(NC.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[NC.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==OC.Connected)throw new K_(H_.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const i=this.pendingRemoteDataChannels.findIndex((n=>{let{user:i,id:r}=n;return i.uid===e.uid&&r===t.id}));-1!==i&&this.pendingRemoteDataChannels.splice(i,1)})),n.map((e=>e.id))}async subscribe(e,t,n,i,r){var s;if(!this.connection||this.state!==OC.Connected)throw new K_(H_.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(s=this.remoteUserMap.get(e))&&void 0!==s&&s.has(t))return;let o,a,c;if(r){const n=r.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new K_(H_.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const i=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof oV&&(c=i.transceiver),o=i.track,a=i.id}else{const r=await this.connection.receive(t,[{ssrcId:n,rtx:i}],String(e._uintid),void 0);this.connection instanceof oV&&(c=r.transceiver),o=r.track,a=r.id}t===wC.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new JI(o,e.uid,e._uintid,this.store),oT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new qI(o,e.uid,e._uintid,this.store),oT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),Fb("ENABLE_VIDEO_SEI")&&c&&(t==wC.VIDEO?await UM(c.receiver,{onSei:t=>{var n;null===(n=e._videoTrack)||void 0===n||n._onSei(t)}}):t==wC.AUDIO&&await DM(c.receiver));const d=this.remoteUserMap.get(e);d?d.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:i,kind:r}=n;return i.uid===e.uid&&t===r}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(kC.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==OC.Connected)throw new K_(H_.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:i}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(i))}));const t=await this.connection.batchReceive(e.map((e=>{let{user:t,mediaType:n,ssrcId:i,rtxSsrcId:r}=e;return{kind:n,ssrcMsg:[{ssrcId:i,rtx:r}],mslabel:String(t._uintid)}})));e.forEach(((e,n)=>{let{user:i,mediaType:r}=e;const{track:s,id:o,transceiver:a}=t[n];r===wC.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(s):(i._audioTrack=new JI(s,i.uid,i._uintid,this.store),oT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),a&&i._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(s):(i._videoTrack=new qI(s,i.uid,i._uintid,this.store),oT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),a&&i._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(i,i._videoTrack));const c=this.remoteUserMap.get(i);c?c.set(r,o):this.remoteUserMap.set(i,new Map([[r,o]])),this.statsCollector.addRemoteStats(i.uid),this.statsUploader.startUploadInboundStats();const d=this.pendingRemoteTracks.findIndex((e=>{let{user:t,kind:n}=e;return t.uid===i.uid&&r===n}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(kC.MediaReconnectEnd,i.uid))}))}async unsubscribe(e,t,n){const i=this.pendingRemoteTracks.filter((n=>{let{user:i,kind:r}=n;return void 0!==t?i.uid===e.uid&&t===r:i.uid===e.uid}));if(i.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===OC.Connected||n||i.forEach((t=>{let{kind:n}=t;var i;if(n===wC.AUDIO)null===(i=e._audioTrack)||void 0===i||i._destroy(),e._audioTrack=void 0;else if(n===wC.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==OC.Connected)return;const r=this.filterTobeUnSubscribedTracks(e,t);if(0===r.length)return;await this.connection.stopReceiving(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createUnsubscribeMessage(r);return this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),r.forEach((e=>{let[t,{kind:i}]=e;var r,s;if(i===wC.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),i===wC.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(s=t._videoTrack)||void 0===s||s._destroy(),t._videoTrack=void 0);else if(i===wC.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0)}})),s}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const i=this.remoteDataChannelMap.get(e);return n.forEach((e=>{i&&i.delete(e.id)})),i&&0===i.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:r,mediaType:s}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==s?t.uid===r.uid&&s===n:t.uid===r.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==OC.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var i;if(n===wC.AUDIO)null===(i=t._audioTrack)||void 0===i||i._destroy(),t._audioTrack=void 0;else if(n===wC.VIDEO){var r;null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0}}));const n=Fv(e).call(e,((e,t)=>{let{user:n,mediaType:i}=t;const r=this.filterTobeUnSubscribedTracks(n,i);return e.concat(r)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var i,r;if(n===wC.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===wC.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(r=t._videoTrack)||void 0===r||r._destroy(),t._videoTrack=void 0;else if(n===wC.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}})),i}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void oT.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void oT.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const i=t===wC.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==i&&this.connection.setStatsRemoteVideoIsReady(i,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||oT.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):oT.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(NC.LocalAudioTrack);if((null==t?void 0:t.track)instanceof bI){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==NC.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===NC.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===NC.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,i,r){if(e){const n=this.localTrackMap.get(NC.LocalAudioTrack),s=i?this.localTrackMap.get(NC.LocalVideoLowTrack):this.localTrackMap.get(NC.LocalVideoTrack);vT.publish(this.store.sessionId,{eventElapse:FM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==s?void 0:s.track.getTrackLabel(),screenshare:-1!==(null==s?void 0:s.track._hints.indexOf(oR.SCREEN_TRACK)),audio:!!n,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var s;n||(n=[]);const o=n.find((e=>e instanceof vI)),a=i?null===(s=this.localTrackMap.get(NC.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((e=>e instanceof FI));vT.publish(this.store.sessionId,{eventElapse:FM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(oR.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,n,i){const r=i===wC.VIDEO?n._videoSSRC:n._audioSSRC;r&&vT.subscribe(this.store.sessionId,{succ:e,ec:t,video:i===wC.VIDEO,audio:i===wC.AUDIO,peerid:n.uid,subscribeRequestid:i===wC.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:FM.measureFromSubscribeStart(this.store.clientId,r)})}reset(){oT.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new py("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new SV({},this.store):this.isPlanB?new Zj({},this.store):new oV({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(NC.LocalAudioTrack);if((null==e?void 0:e.track)instanceof bI){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=OC.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(NC.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(NC.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof FI||t&&t.track instanceof vI?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(NC.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=ep(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(oT.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=OC.Reconnecting,Fb("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new SV({},this.store):this.isPlanB?new Zj({},this.store):new oV({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:i}]=e;switch(n){case NC.LocalVideoTrack:Ii(t=i._hints).call(t,oR.LOW_STREAM)?i.close():this.pendingLocalTracks.push(i);break;case NC.LocalAudioTrack:i instanceof bI?this.pendingLocalTracks=this.pendingLocalTracks.concat(i.trackList):this.pendingLocalTracks.push(i);case NC.LocalVideoLowTrack:}})),this.emit(kC.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(kC.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),oT.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:i,id:r}=n;if((e instanceof Cj?e.uid:e)===i.uid&&r===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:i,kind:r}=n;if((e instanceof Cj?e.uid:e)===i.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return XM((function*(){if(!t.connection||t.state!==OC.Connected||t.connection instanceof SV)return;const n=yield WM(t.mutex.lock("From P2PChannel.restartICE"));let i;try{i=yield WM(t.connection.restartICE(e));const n=yield WM(i.next());if(n.done)return;const r=n.value,s=yield r;switch(t.reportPCDisconnectedOrFailed(e),e){case RC.TCP:t._pcStatsUploadType=IC.TCP_RESTART;break;case RC.RELAY:t._pcStatsUploadType=IC.RELAY_RESTART;break;default:t._pcStatsUploadType=IC.OLD_RESTART}t._isInRestartIce=!0,i.next(s)}catch(e){var r;null===(r=i)||void 0===r||r.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(NC.LocalVideoTrack),n=this.localTrackMap.get(NC.LocalAudioTrack),i=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),r=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!i||!r)return 1;const s=wv(this,kC.NeedSignalRTT),o=i?i.rttMs:void 0,a=r?r.rttMs:void 0,c=o&&a?(o+a)/2:o||a,d=(c&&s?(c+s)/2:c||s)||0,l=100*e.sendPacketLossRate*.7/50+.3*d/1500,u=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(oR.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return bT[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[i]=n;const r=i._audioSSRC,s=i._videoSSRC,o=e.audioRecv.find((e=>e.ssrc===r)),a=e.videoRecv.find((e=>e.ssrc===s));if(!o&&!a)return void(t+=1);const c=wv(this,kC.NeedSignalRTT),d=e.rtt,l=(d&&c?(d+c)/2:d||c)||0,u=o?o.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*l/1500;u&&(p=.6*h*100/50+.2*l/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new c_(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(oT.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==OC.Connected)return;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!i)return;const r=i[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:r}]),this.bindLocalTrackEvents([{track:t,type:r}]),i[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,i[1].id)),this.isPlanB){const e=i[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(r,e)}if(r===NC.LocalVideoTrack&&!Fb("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ww().supportDualStreamEncoding){const t=this.localTrackMap.get(NC.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new c_(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const i=[],r=this.getAllTracks();e=Hv(e=e.filter((e=>-1===r.indexOf(e))));let s,o=!1;const a=this.localTrackMap.get(NC.LocalAudioTrack);for(const c of e){if(c instanceof FI&&(this.localTrackMap.has(NC.LocalVideoTrack)||o?new K_(H_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(i.push({track:c,type:NC.LocalVideoTrack}),o=!0),t)){const e=this.getLowVideoTrack(c,n);i.push({track:e,type:NC.LocalVideoLowTrack})}if(c instanceof vI)if(a){const e=a.track;if(e instanceof bI)Rj([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=Ij([e,c]);oT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else s instanceof bI?(Rj([c]),s.addAudioTrack(c)):s=s||!c._useAudioElement&&Ww().webAudioMediaStreamDest&&!c._bypassWebAudio?Ij(s?[c,s]:[c]):c}return s&&(oT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(s.getTrackId(),"]")),i.push({track:s,type:NC.LocalAudioTrack})),i}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Hv(e=e.filter((e=>-1!==n.indexOf(e))));for(const i of e){if(i instanceof vI){const e=this.localTrackMap.get(NC.LocalAudioTrack);if(!e)continue;e.track instanceof bI?(e.track.removeAudioTrack(i),this.unbindLocalAudioTrackEvents(i),0===e.track.trackList.length&&(t.push([NC.LocalAudioTrack,e]),e.track.close())):t.push([NC.LocalAudioTrack,e])}if(i instanceof FI){const e=this.localTrackMap.get(NC.LocalVideoTrack);if(!e)continue;t.push([NC.LocalVideoTrack,e]);const n=this.localTrackMap.get(NC.LocalVideoLowTrack);n&&t.push([NC.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=Hv(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=Hv(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case NC.LocalVideoTrack:t.addListener(sR.GET_STATS,this.handleGetLocalVideoStats),t.addListener(sR.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(sR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(sR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case NC.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case NC.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof bI?e.trackList.forEach((e=>{e.addListener(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(sR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(sR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(sR.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case NC.LocalVideoTrack:t.off(sR.GET_STATS,this.handleGetLocalVideoStats),t.off(sR.GET_RTC_STATS,this.handleGetRTCStats),t.off(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(sR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(sR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case NC.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case NC.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof bI?e.trackList.forEach((e=>{e.off(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(sR.GET_STATS,this.handleGetLocalAudioStats),e.off(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(sR.GET_STATS,this.handleGetLocalAudioStats),e.off(sR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(sR.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(sR.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(sR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(sR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof qI&&t.addListener(sR.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof JI&&t.addListener(sR.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(sR.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(wC.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(wC.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var i;let r,s,{track:o,type:a}=e;switch(a){case NC.LocalAudioTrack:r=fC.Audio,s={dtx:o instanceof yI&&o._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case NC.LocalVideoTrack:r=Ii(i=o._hints).call(i,oR.SCREEN_TRACK)?fC.Screen:fC.High,s=CV(CV({},FA(o)),{},{codec:this.store.codec});break;case NC.LocalVideoLowTrack:r=fC.Low,s=CV(CV({},FA(o)),{},{codec:this.store.codec})}return{stream_type:r,attributes:s,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[i,{track:r,ssrcs:s,id:o}]=e;switch(i){case NC.LocalVideoTrack:n=Ii(t=r._hints).call(t,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalAudioTrack:n=fC.Audio;break;case NC.LocalVideoLowTrack:n=fC.Low}return{stream_type:n,ssrcs:s,mid:o}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:i,type:r}=e;this.localTrackMap.set(r,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(kC.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),Fb("NEW_ICE_RESTART")){var n;if(Ii(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(oT.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(t)),"CONNECTED"===wv(this,kC.QueryClientConnectionState)&&this.emit(kC.RequestRestartICE,t))},n=()=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),oT.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(kC.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},i=Fb("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout((()=>{if(Fb("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Ww().supportPCSetConfiguration)t(RC.RELAY),this._restartTimer=window.setTimeout(n,i);else if(I_())t(RC.UDP),this._restartTimer=window.setTimeout(n,4e3);else{if(t(RC.TCP),Ww().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(RC.RELAY),this._restartTimer=window.setTimeout(n,i)}),i));this._restartTimer=window.setTimeout(n,i)}}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&Fb("ICE_RESTART")&&"CONNECTED"===wv(this,kC.QueryClientConnectionState)&&this.emit(kC.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(oT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(kC.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(oT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(kC.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),vT.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:pv.TRACER}).onSuccess(),this.emit(kC.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(i=n.audioTrack)||void 0===i||i.emit(hR.FIRST_FRAME_DECODED),vT.firstRemoteFrame(this.store.sessionId,uT.FIRST_AUDIO_DECODE,hT.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&vT.firstRemoteFrame(this.store.sessionId,uT.FIRST_AUDIO_RECEIVED,hT.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&vT.firstRemoteFrame(this.store.sessionId,uT.FIRST_VIDEO_RECEIVED,hT.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,i="relay"===t.candidateType;"unknown"!==t.candidateType&&n===i||this.emit(kC.ConnectionTypeChange,n),oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(KA(t))," -> ").concat(JSON.stringify(KA(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{oT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(KA(t))," -> ").concat(JSON.stringify(KA(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(NC.LocalAudioTrack);if(e instanceof vI&&(null==n?void 0:n.track)instanceof bI)return n.track.isActive||t.push([NC.LocalAudioTrack,n]),t;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(i&&(t.push(i),i[0]===NC.LocalVideoTrack)){const e=this.localTrackMap.get(NC.LocalVideoLowTrack);e&&t.push([NC.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(NC.LocalAudioTrack);if(e instanceof vI&&(null==n?void 0:n.track)instanceof bI)return n.track.isActive&&t.push([NC.LocalAudioTrack,n]),t;const i=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(i)if(i[0]===NC.LocalVideoTrack){t.push(i);const e=this.localTrackMap.get(NC.LocalVideoLowTrack);e&&t.push([NC.LocalVideoLowTrack,e])}else t.push(i);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[i,{track:r,ssrcs:s,id:o}]=e;switch(i){case NC.LocalAudioTrack:n=fC.Audio;break;case NC.LocalVideoTrack:n=Ii(t=r._hints).call(t,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalVideoLowTrack:n=fC.Low}return{stream_type:n,ssrcs:s,mid:o}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[i,{track:r,ssrcs:s,id:o}]=e;switch(i){case NC.LocalAudioTrack:n=fC.Audio;break;case NC.LocalVideoTrack:n=Ii(t=r._hints).call(t,oR.SCREEN_TRACK)?fC.Screen:fC.High;break;case NC.LocalVideoLowTrack:n=fC.Low}return{stream_type:n,ssrcs:s,mid:o}}))}filterTobeUnSubscribedTracks(e,t){const n=[],i=this.remoteUserMap.get(e);if(!i)return n;if(t){const r=i.get(t);if(!r)return n;n.push([e,{kind:t,id:r}])}else Array.from(i.entries()).forEach((t=>{let[i,r]=t;n.push([e,{kind:i,id:r}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var i;null!==(i=this.remoteDataChannelMap.get(e))&&void 0!==i&&i.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:i,id:r}]=e;switch(i){case wC.VIDEO:return void(n._videoSSRC&&t.push({stream_type:wC.VIDEO,ssrcId:n._videoSSRC}));case wC.AUDIO:return void(n._audioSSRC&&t.push({stream_type:wC.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:i}]=e;if(t.has(n)){let e=t.get(n);i===wC.VIDEO?e|=EC.Video:e|=EC.Audio,t.set(n,e)}else i===wC.VIDEO?t.set(n,EC.Video):t.set(n,EC.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const i=this.remoteUserMap.get(t);i&&(i.delete(n),0===Array.from(i.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(NC.LocalVideoTrack),n=this.localTrackMap.get(NC.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t){return e.map(((e,n)=>{var i;let{stream_type:r}=e;return null===(i=t.find((e=>{let{stream_type:t}=e;return r===t})))||void 0===i?void 0:i.attributes}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof vI){var t;const i=this.filterTobeUnmutedTracks(e[n]);if(0===i.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(i.map((e=>{let[,{id:t}]=e;return t}))));const r=this.createUnmuteMessage(i);return void await Av(this,kC.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(kC.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(kC.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await ny(gy(this.dtlsFailedCount,my)),this.emit(kC.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await Cv(this,kC.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(kC.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(NC.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof FI))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof FI)).length>1)throw new K_(H_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof vI)).length>1&&(e.some((e=>e instanceof vI&&e._bypassWebAudio))||!Ww().webAudioMediaStreamDest))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof FI&&this.pendingLocalTracks.some((e=>e instanceof FI)))throw new K_(H_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof vI&&this.pendingLocalTracks.some((e=>e instanceof vI))&&(!Ww().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof vI&&e._bypassWebAudio))))throw new K_(H_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!Fb("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ww().supportDualStreamEncoding,i=CV(CV({},{width:160,height:120,framerate:15,bitrate:50}),t);let r;r=n?e._mediaStreamTrack.clone():aj(e,i);const s=iy(8,"track-low-"),o=new FI(r,CV(CV({},n&&{scaleResolutionDownBy:HA(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,s);return o.on(lR.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,aR.LOW_STREAM)})),o._hints.push(oR.LOW_STREAM),e.on("sei-to-send",(e=>{o.emit("sei-to-send",e)})),e.addListener(sR.NEED_CLOSE,(()=>{o.close()})),o}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof oV){var r,s,o,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:d,dtlsTransportState:l,peerConnectionState:u}=this.connection,{local:h,remote:p}=await this.connection.getSelectedCandidatePair();vT.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:d,dtlsstate:l,connectionstate:u,intSucc:t?1:2,error:i,selectedLocalCandidateProtocol:null!==(r=null==h?void 0:h.protocol)&&void 0!==r?r:"",selectedLocalCandidateType:null!==(s=h.candidateType)&&void 0!==s?s:"",selectedLocalCandidateAddress:"".concat(h.address,":").concat(h.port),selectedRemoteCandidateProtocol:null!==(o=p.protocol)&&void 0!==o?o:"",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:n})}}reportVideoFirstFrameDecoded(e,t,n,i){var r;const s=Array.from(ph(r=this.remoteUserMap).call(r)).find((t=>t._videoSSRC===e));if(s){i||this.store.subscribe(s.uid,"video",void 0,void 0,void 0,void 0,Date.now());const r=this.store.keyMetrics,o=r.subscribe.find((e=>e.userId===s.uid&&"video"===e.type));vT.firstRemoteVideoDecode(this.store.sessionId,uT.FIRST_VIDEO_DECODE,hT.FIRST_VIDEO_DECODE,{peer:s._uintid,videowidth:t,videoheight:n,subscribeElapse:FM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:r.requestAPEnd||0,apStart:r.requestAPStart||0,joinGwEnd:r.joinGatewayEnd||0,joinGwStart:r.joinGatewayStart||0,pcEnd:r.peerConnectionEnd||0,pcStart:r.peerConnectionStart||0,subscriberEnd:(null==o?void 0:o.subscribeEnd)||0,subscriberStart:(null==o?void 0:o.subscribeStart)||0,videoAddNotify:(null==o?void 0:o.streamAdded)||0,state:i?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const i=this.remoteUserMap.get(e);if(!i)return!1;const r=i.get(t);if(!r)return!1;const s=await this.connection.getRemoteSSRC(r);return void 0!==s&&s!==n}resetConnection(e){oT.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(e)),this.state===OC.Connected?(oT.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===_C.datachannel?new SV({},this.store):this.isPlanB?new Zj({},this.store):new oV({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===NC.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,aR.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof oV&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===IC.TCP_RESTART&&e===RC.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,IC.DISCONNECTED_OR_FAILED)))}}function IV(e,t,n){const i=e[t];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return await i.apply(this,s)}finally{n()}},n}function NV(e){let t=FV();return function(e,t){let n=e.appId;void 0!==n&&(eF(t,10),YV(t,n));let i=e.cid;void 0!==i&&(eF(t,16),eF(t,i));let r=e.cname;void 0!==r&&(eF(t,26),YV(t,r));let s=e.deviceId;void 0!==s&&(eF(t,34),YV(t,s));let o=e.elapse;void 0!==o&&(eF(t,40),tF(t,o));let a=e.fileSize;void 0!==a&&(eF(t,48),tF(t,jV(a)));let c=e.height;void 0!==c&&(eF(t,56),tF(t,jV(c)));let d=e.jpg;void 0!==d&&(eF(t,66),eF(t,d.length),function(e,t){let n=HV(e,t.length);e.bytes.set(t,n)}(t,d));let l=e.networkType;void 0!==l&&(eF(t,72),tF(t,jV(l)));let u=e.osType;void 0!==u&&(eF(t,80),tF(t,jV(u)));let h=e.requestId;void 0!==h&&(eF(t,90),YV(t,h));let p=e.sdkVersion;void 0!==p&&(eF(t,98),YV(t,p));let f=e.sequence;void 0!==f&&(eF(t,104),tF(t,jV(f)));let m=e.sid;void 0!==m&&(eF(t,114),YV(t,m));let g=e.timestamp;void 0!==g&&(eF(t,120),tF(t,g));let E=e.uid;void 0!==E&&(eF(t,128),eF(t,E));let _=e.vid;void 0!==_&&(eF(t,136),eF(t,_));let v=e.width;void 0!==v&&(eF(t,144),tF(t,jV(v)));let y=e.service;void 0!==y&&(eF(t,152),eF(t,y));let S=e.callbackData;void 0!==S&&(eF(t,162),YV(t,S));let b=e.jpgEncryption;void 0!==b&&(eF(t,168),eF(t,b));let T=e.requestType;void 0!==T&&(eF(t,176),eF(t,T));let C=e.scorePorn;void 0!==C&&(eF(t,185),ZV(t,C));let A=e.scoreSexy;void 0!==A&&(eF(t,193),ZV(t,A));let w=e.scoreNeutral;void 0!==w&&(eF(t,201),ZV(t,w));let R=e.scene;void 0!==R&&(eF(t,208),eF(t,R));let I=e.ossFilePrefix;void 0!==I&&(eF(t,218),YV(t,I));let N=e.serviceVendor;if(void 0!==N)for(let O of N){eF(t,226);let e=FV();DV(O,e),eF(t,e.limit),qV(t,e),BV(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function OV(e){return function(e){let t={};e:for(;!GV(e);){let n=$V(e);switch(n>>>3){case 0:break e;case 1:t.code=$V(e);break;case 2:t.msg=zV(e,$V(e));break;case 3:{let n=PV(e);t.data=kV(e),e.limit=n;break}default:xV(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function kV(e){let t={};e:for(;!GV(e);){let n=$V(e);switch(n>>>3){case 0:break e;case 1:t.requestId=zV(e,$V(e));break;case 2:t.requestType=$V(e)>>>0;break;case 3:t.scorePorn=XV(e);break;case 4:t.scoreSexy=XV(e);break;case 5:t.scoreNeutral=XV(e);break;case 6:t.requestScene=$V(e)>>>0;break;case 7:t.scene=$V(e)>>>0;break;default:xV(e,7&n)}}return t}function DV(e,t){let n=e.service;void 0!==n&&(eF(t,8),eF(t,n));let i=e.vendor;void 0!==i&&(eF(t,16),eF(t,i));let r=e.token;void 0!==r&&(eF(t,26),YV(t,r));let s=e.callbackUrl;void 0!==s&&(eF(t,34),YV(t,s))}function PV(e){let t=$V(e),n=e.limit;return e.limit=e.offset+t,n}function xV(e,t){switch(t){case 0:for(;128&JV(e););break;case 2:WV(e,$V(e));break;case 5:WV(e,4);break;case 1:WV(e,8);break;default:throw new Error("Unimplemented type: "+t)}}QT([IV,XT("design:type",Function),XT("design:paramtypes",[Object,Boolean]),XT("design:returntype",c_)],RV.prototype,"startP2PConnection",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Object,Object,Array,Object,String,String]),XT("design:returntype",c_)],RV.prototype,"connect",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",void 0)],RV.prototype,"updateRemoteRTPCapabilities",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Object,Object,Array,Object,String,String]),XT("design:returntype",c_)],RV.prototype,"preConnect",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],RV.prototype,"publishDataChannel",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],RV.prototype,"unpublish",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],RV.prototype,"unpublishDataChannel",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],RV.prototype,"unpublishLowStream",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,Array]),XT("design:returntype",c_)],RV.prototype,"subscribeDataChannel",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number,Number,Array]),XT("design:returntype",c_)],RV.prototype,"subscribe",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],RV.prototype,"massSubscribe",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,String,Boolean]),XT("design:returntype",c_)],RV.prototype,"unsubscribe",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,Array]),XT("design:returntype",c_)],RV.prototype,"unsubscribeDataChannel",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],RV.prototype,"massUnsubscribe",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,String]),XT("design:returntype",c_)],RV.prototype,"muteRemote",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,String]),XT("design:returntype",c_)],RV.prototype,"unmuteRemote",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,String]),XT("design:returntype",c_)],RV.prototype,"hasRemoteMediaWithLock",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],RV.prototype,"disconnectForReconnect",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],RV.prototype,"updateBitrateLimit",null),QT([IV,XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number]),XT("design:returntype",c_)],RV.prototype,"remoteMediaSsrcChanged",null);let LV=new Float32Array(1);new Uint8Array(LV.buffer);let MV=new Float64Array(1),UV=new Uint8Array(MV.buffer);function jV(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let VV=[];function FV(){const e=VV.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function BV(e){VV.push(e)}function WV(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function GV(e){return e.offset>=e.limit}function HV(e,t){let n=e.bytes,i=e.offset,r=e.limit,s=i+t;if(s>n.length){let t=new Uint8Array(2*s);t.set(n),e.bytes=t}return e.offset=s,s>r&&(e.limit=s),i}function KV(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function zV(e,t){let n=KV(e,t),i=String.fromCharCode,r=e.bytes,s="\ufffd",o="";for(let a=0;a<t;a++){let e,c,d,l,u=r[a+n];0==(128&u)?o+=i(u):192==(224&u)?a+1>=t?o+=s:(e=r[a+n+1],128!=(192&e)?o+=s:(l=(31&u)<<6|63&e,l<128?o+=s:(o+=i(l),a++))):224==(240&u)?a+2>=t?o+=s:(e=r[a+n+1],c=r[a+n+2],32896!=(49344&(e|c<<8))?o+=s:(l=(15&u)<<12|(63&e)<<6|63&c,l<2048||l>=55296&&l<=57343?o+=s:(o+=i(l),a+=2))):240==(248&u)?a+3>=t?o+=s:(e=r[a+n+1],c=r[a+n+2],d=r[a+n+3],8421504!=(12632256&(e|c<<8|d<<16))?o+=s:(l=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&d,l<65536||l>1114111?o+=s:(l-=65536,o+=i(55296+(l>>10),56320+(1023&l)),a+=3))):o+=s}return o}function YV(e,t){let n=t.length,i=0;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),i+=e<128?1:e<2048?2:e<65536?3:4}eF(e,i);let r=HV(e,i),s=e.bytes;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),e<128?s[r++]=e:(e<2048?s[r++]=e>>6&31|192:(e<65536?s[r++]=e>>12&15|224:(s[r++]=e>>18&7|240,s[r++]=e>>12&63|128),s[r++]=e>>6&63|128),s[r++]=63&e|128)}}function qV(e,t){let n=HV(e,t.limit),i=e.bytes,r=t.bytes;for(let s=0,o=t.limit;s<o;s++)i[s+n]=r[s]}function JV(e){return e.bytes[KV(e,1)]}function QV(e,t){let n=HV(e,1);e.bytes[n]=t}function XV(e){let t=KV(e,8),n=e.bytes;return UV[0]=n[t++],UV[1]=n[t++],UV[2]=n[t++],UV[3]=n[t++],UV[4]=n[t++],UV[5]=n[t++],UV[6]=n[t++],UV[7]=n[t++],MV[0]}function ZV(e,t){let n=HV(e,8),i=e.bytes;MV[0]=t,i[n++]=UV[0],i[n++]=UV[1],i[n++]=UV[2],i[n++]=UV[3],i[n++]=UV[4],i[n++]=UV[5],i[n++]=UV[6],i[n++]=UV[7]}function $V(e){let t,n=0,i=0;do{t=JV(e),n<32&&(i|=(127&t)<<n),n+=7}while(128&t);return i}function eF(e,t){for(t>>>=0;t>=128;)QV(e,127&t|128),t>>>=7;QV(e,t)}function tF(e,t){let n=t.low>>>0,i=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,s=0===r?0===i?n<16384?n<128?1:2:n<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:r<128?9:10,o=HV(e,s),a=e.bytes;switch(s){case 10:a[o+9]=r>>>7&1;case 9:a[o+8]=9!==s?128|r:127&r;case 8:a[o+7]=8!==s?i>>>21|128:i>>>21&127;case 7:a[o+6]=7!==s?i>>>14|128:i>>>14&127;case 6:a[o+5]=6!==s?i>>>7|128:i>>>7&127;case 5:a[o+4]=5!==s?128|i:127&i;case 4:a[o+3]=4!==s?n>>>21|128:n>>>21&127;case 3:a[o+2]=3!==s?n>>>14|128:n>>>14&127;case 2:a[o+1]=2!==s?n>>>7|128:n>>>7&127;case 1:a[o]=1!==s?128|n:127&n}}function nF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const iF=new Map([["moderation",1],["supervise",2]]);class rF extends dv{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(LC.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Fv(t=e.map((e=>iF.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),sh(this,"name","AgoraRTCVideoContentInspect"),sh(this,"_connectionState",PC.CONNECTING),sh(this,"_innerConnectionState",void 0),sh(this,"sequence",0),sh(this,"inspectStartTime",void 0),sh(this,"workerManagerConnection",void 0),sh(this,"workerConnection",void 0),sh(this,"workerMessageLengthLimit",void 0),sh(this,"inspectIntervalMinimum",void 0),sh(this,"qualityRatio",void 0),sh(this,"_connectInfo",void 0),sh(this,"_cancelTokenSource",Cb.CancelToken.source()),sh(this,"_retryConfig",void 0),sh(this,"wmSequence",0),sh(this,"inspectInterval",void 0),sh(this,"inspectTimer",null),sh(this,"ossFilePrefix",void 0),sh(this,"extraInfo",void 0),sh(this,"_inspectType",void 0),sh(this,"_inspectMode",void 0),sh(this,"_quality",1),sh(this,"qualityTimer",null),sh(this,"_inspectId",void 0),sh(this,"_needWorkUrlOnly",!1),sh(this,"inspectImage",(()=>{if(this.connectionState!==PC.CONNECTED)throw new ZT(H_.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===PC.CONNECTED?this.requestToInspectImage():oT.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=iy(5,"inspect-"),this.workerMessageLengthLimit=Fb("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Fb("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Fb("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new pA("worker-manager-"+this._inspectId,my),this.on(LC.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,oT.debug("[".concat(this._inspectId,"] Inspect operation :").concat(xC[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new pA("worker-"+this._inspectId,my),this.handleWorkerEvents()}async init(e,t){this.emit(LC.STATE_CHANGE,xC.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new c_(((i,r)=>{this.on(LC.CONNECTION_STATE_CHANGE,((e,t)=>{t===PC.CONNECTED&&i()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{r(e)}))}))}async requestAP(e,t,n){const i=Fb("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),r=await function(e,t,n,i){let{appId:r,areaCode:s,cname:o,sid:a,token:c,uid:d}=t;Rw++;const l="image_moderation_api",u={service_name:l,json_body:JSON.stringify({appId:r,areaCode:s,cname:o,command:"allocateEdge",requestId:Rw,seq:Rw,sid:a,token:c,ts:Date.now(),uid:d+""})};let h,p,f=e[0];return Ey((async()=>{h=Date.now();const e=await sw(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new ZT(H_.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw oT.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new ZT(H_.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw oT.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new ZT(H_.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw oT.error(e.toString()),e}const i=Fb("VIDEO_INSPECT_WORKER_MANAGER_HOST"),r=Fb("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(i,":").concat(r||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,n)=>(vT.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(vT.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==H_.OPERATION_ABORTED&&t.code!==H_.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),i)}(i,e,t,n);this.emit(LC.STATE_CHANGE,xC.AP_CONNECTED);const{addressList:s}=r;return this.wmSequence++,s}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(LC.STATE_CHANGE,xC.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(VT.CONNECTED,(async()=>{this.emit(LC.STATE_CHANGE,xC.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.20.1",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(VT.CLOSED,(()=>{this._innerConnectionState<xC.GET_WORKER_MANAGER_RESPONSE&&oT.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(VT.FAILED,(()=>{this._innerConnectionState<xC.GET_WORKER_MANAGER_RESPONSE&&oT.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(VT.RECONNECTING,(()=>{this._innerConnectionState<xC.GET_WORKER_MANAGER_RESPONSE&&oT.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(VT.ON_MESSAGE,(async e=>{this.emit(LC.STATE_CHANGE,xC.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw oT.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new ZT(H_.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw oT.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new ZT(H_.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=Fb("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,i=t.replace(/:\d+\/?$/,":".concat(e));this.emit(LC.STATE_CHANGE,xC.CONNECT_WORKER,i),this._needWorkUrlOnly?this.emit(LC.REQUEST_NEW_WORKER_URL,i):await this.connectWorker(i)}})),this.workerManagerConnection.on(VT.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(VT.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(VT.CONNECTED,(async()=>{this.emit(LC.STATE_CHANGE,xC.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=PC.CONNECTED})),this.workerConnection.on(VT.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=OV(new Uint8Array(e.data));if(Fb("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&oT.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(LC.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},i=Fv(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),r=Object.keys(e).find((e=>e===i));this.emit(LC.INSPECT_RESULT,r)}else this.emit(LC.INSPECT_RESULT,void 0,new ZT(H_.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(LC.INSPECT_RESULT,void 0,new ZT(H_.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else oT.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(LC.INSPECT_RESULT,void 0,new ZT(H_.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(VT.CLOSED,(()=>{this.connectionState=PC.CLOSED})),this.workerConnection.on(VT.FAILED,(()=>{this.connectionState=PC.CLOSED})),this.workerConnection.on(VT.RECONNECTING,(()=>{this.connectionState=this.connectionState===PC.CONNECTED?PC.RECONNECTING:PC.CONNECTING})),this.workerConnection.on(VT.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(VT.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(LC.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){this.sequence++;const e=wv(this,LC.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(LC.INSPECT_RESULT,void 0,new ZT(H_.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(LC.INSPECT_RESULT,void 0,new ZT(H_.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:i,cid:r,vid:s,sid:o,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage("image/jpeg",this.quality),l=await UI(d,n,i),u=this.sequence+"-"+r+"-"+a+"-"+c+"-"+iy(12,""),h={appId:n,cid:r,cname:i,deviceId:"",elapse:rF.intToLong(Number(c-this.inspectStartTime)),fileSize:l.byteLength,jpgEncryption:2,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:u,sdkVersion:"4.20.1",sequence:this.sequence,sid:o,timestamp:rF.intToLong(c),uid:a,vid:s,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const p=NV(h);if(p.byteLength<this.workerMessageLengthLimit){if(Fb("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nF(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,oT.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:i,cid:r,vid:s,sid:o,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Cb.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=PC.CLOSED,this.emit(LC.STATE_CHANGE,xC.CLOSED)}}function sF(e){let t=function(){const e=dF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(yF(t,10),gF(t,n));let i=e.cid;void 0!==i&&(yF(t,16),yF(t,i));let r=e.cname;void 0!==r&&(yF(t,26),gF(t,r));let s=e.deviceId;void 0!==s&&(yF(t,34),gF(t,s));let o=e.elapse;void 0!==o&&(yF(t,40),bF(t,o));let a=e.fileSize;void 0!==a&&(yF(t,48),bF(t,cF(a)));let c=e.height;void 0!==c&&(yF(t,56),bF(t,cF(c)));let d=e.jpg;void 0!==d&&(yF(t,66),yF(t,d.length),fF(t,d));let l=e.networkType;void 0!==l&&(yF(t,72),bF(t,cF(l)));let u=e.osType;void 0!==u&&(yF(t,80),bF(t,cF(u)));let h=e.requestId;void 0!==h&&(yF(t,90),gF(t,h));let p=e.sdkVersion;void 0!==p&&(yF(t,98),gF(t,p));let f=e.sequence;void 0!==f&&(yF(t,104),bF(t,cF(f)));let m=e.sid;void 0!==m&&(yF(t,114),gF(t,m));let g=e.timestamp;void 0!==g&&(yF(t,120),bF(t,g));let E=e.uid;void 0!==E&&(yF(t,128),yF(t,E));let _=e.vid;void 0!==_&&(yF(t,136),yF(t,_));let v=e.width;void 0!==v&&(yF(t,144),bF(t,cF(v)));let y=e.service;void 0!==y&&(yF(t,152),yF(t,y));let S=e.callbackData;void 0!==S&&(yF(t,162),yF(t,S.length),fF(t,S));let b=e.ticket;void 0!==b&&(yF(t,170),gF(t,b));let T=e.vendorConfigs;void 0!==T&&(yF(t,178),gF(t,T))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function oF(e){return function(e){let t={};e:for(;!uF(e);){let n=vF(e);switch(n>>>3){case 0:break e;case 1:t.code=vF(e);break;case 2:t.msg=mF(e,vF(e));break;case 3:t.requestId=mF(e,vF(e));break;case 4:t.timestamp=SF(e,!1);break;default:aF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function aF(e,t){switch(t){case 0:for(;128&EF(e););break;case 2:lF(e,vF(e));break;case 5:lF(e,4);break;case 1:lF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function cF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let dF=[];function lF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function uF(e){return e.offset>=e.limit}function hF(e,t){let n=e.bytes,i=e.offset,r=e.limit,s=i+t;if(s>n.length){let t=new Uint8Array(2*s);t.set(n),e.bytes=t}return e.offset=s,s>r&&(e.limit=s),i}function pF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function fF(e,t){let n=hF(e,t.length);e.bytes.set(t,n)}function mF(e,t){let n=pF(e,t),i=String.fromCharCode,r=e.bytes,s="\ufffd",o="";for(let a=0;a<t;a++){let e,c,d,l,u=r[a+n];0==(128&u)?o+=i(u):192==(224&u)?a+1>=t?o+=s:(e=r[a+n+1],128!=(192&e)?o+=s:(l=(31&u)<<6|63&e,l<128?o+=s:(o+=i(l),a++))):224==(240&u)?a+2>=t?o+=s:(e=r[a+n+1],c=r[a+n+2],32896!=(49344&(e|c<<8))?o+=s:(l=(15&u)<<12|(63&e)<<6|63&c,l<2048||l>=55296&&l<=57343?o+=s:(o+=i(l),a+=2))):240==(248&u)?a+3>=t?o+=s:(e=r[a+n+1],c=r[a+n+2],d=r[a+n+3],8421504!=(12632256&(e|c<<8|d<<16))?o+=s:(l=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&d,l<65536||l>1114111?o+=s:(l-=65536,o+=i(55296+(l>>10),56320+(1023&l)),a+=3))):o+=s}return o}function gF(e,t){let n=t.length,i=0;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),i+=e<128?1:e<2048?2:e<65536?3:4}yF(e,i);let r=hF(e,i),s=e.bytes;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),e<128?s[r++]=e:(e<2048?s[r++]=e>>6&31|192:(e<65536?s[r++]=e>>12&15|224:(s[r++]=e>>18&7|240,s[r++]=e>>12&63|128),s[r++]=e>>6&63|128),s[r++]=63&e|128)}}function EF(e){return e.bytes[pF(e,1)]}function _F(e,t){let n=hF(e,1);e.bytes[n]=t}function vF(e){let t,n=0,i=0;do{t=EF(e),n<32&&(i|=(127&t)<<n),n+=7}while(128&t);return i}function yF(e,t){for(t>>>=0;t>=128;)_F(e,127&t|128),t>>>=7;_F(e,t)}function SF(e,t){let n,i=0,r=0,s=0;return n=EF(e),i=127&n,128&n&&(n=EF(e),i|=(127&n)<<7,128&n&&(n=EF(e),i|=(127&n)<<14,128&n&&(n=EF(e),i|=(127&n)<<21,128&n&&(n=EF(e),r=127&n,128&n&&(n=EF(e),r|=(127&n)<<7,128&n&&(n=EF(e),r|=(127&n)<<14,128&n&&(n=EF(e),r|=(127&n)<<21,128&n&&(n=EF(e),s=127&n,128&n&&(n=EF(e),s|=(127&n)<<7))))))))),{low:i|r<<28,high:r>>>4|s<<24,unsigned:t}}function bF(e,t){let n=t.low>>>0,i=(t.low>>>28|t.high<<4)>>>0,r=t.high>>>24,s=0===r?0===i?n<16384?n<128?1:2:n<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:r<128?9:10,o=hF(e,s),a=e.bytes;switch(s){case 10:a[o+9]=r>>>7&1;case 9:a[o+8]=9!==s?128|r:127&r;case 8:a[o+7]=8!==s?i>>>21|128:i>>>21&127;case 7:a[o+6]=7!==s?i>>>14|128:i>>>14&127;case 6:a[o+5]=6!==s?i>>>7|128:i>>>7&127;case 5:a[o+4]=5!==s?128|i:127&i;case 4:a[o+3]=4!==s?n>>>21|128:n>>>21&127;case 3:a[o+2]=3!==s?n>>>14|128:n>>>14&127;case 2:a[o+1]=2!==s?n>>>7|128:n>>>7&127;case 1:a[o]=1!==s?128|n:127&n}}const TF={},CF={},AF=4294967296,wF=AF*AF,RF=wF/2,IF=PF(0,!0),NF=PF(0),OF=xF(0,-2147483648,!1),kF=xF(-1,2147483647,!1),DF=xF(-1,-1,!0);function PF(e,t){let n,i,r;return t?(r=0<=(e>>>=0)&&e<256)&&(i=CF[e],i)?i:(n=xF(e,0,!0),r&&(CF[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(i=TF[e],i)?i:(n=xF(e,e<0?-1:0,!1),r&&(TF[e]=n),n)}function xF(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function LF(e,t){if(isNaN(e))return t?IF:NF;if(t){if(e<0)return IF;if(e>=wF)return DF}else{if(e<=-RF)return OF;if(e+1>=RF)return kF}return e<0?t?IF:NF:xF(e%AF|0,e/AF|0,t)}function MF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}class UF extends dv{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(BC.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),sh(this,"name","AgoraRTCImageModeration"),sh(this,"_connectionState",FC.CONNECTING),sh(this,"_sequence",0),sh(this,"_moderationStartTime",void 0),sh(this,"_workerConnection",void 0),sh(this,"_workerMessageLengthLimit",void 0),sh(this,"_qualityRatio",void 0),sh(this,"_connectInfo",void 0),sh(this,"_cancelTokenSource",Cb.CancelToken.source()),sh(this,"_retryConfig",void 0),sh(this,"_moderationInterval",void 0),sh(this,"_moderationTimer",null),sh(this,"_moderationMode",1),sh(this,"_quality",1),sh(this,"_qualityTimer",null),sh(this,"_ticket",void 0),sh(this,"_moderationIntervalMinimum",void 0),sh(this,"_uploadFailedNum",0),sh(this,"_uploadNum",0),sh(this,"_uploadTimer",null),sh(this,"_extraInfo",void 0),sh(this,"_vendor",""),sh(this,"_encoder",new TextEncoder),sh(this,"_moderationId",void 0),sh(this,"inspectImage",(()=>{if(this.connectionState!==FC.CONNECTED)throw new ZT(H_.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===FC.CONNECTED?this.requestToInspectImage():oT.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=iy(5,"image-moderation-"),this._workerMessageLengthLimit=Fb("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=Fb("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=Fb("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new pA("worker-"+this._moderationId,my),this.on(BC.STATE_CHANGE,((e,t)=>{oT.debug("[".concat(this._moderationId,"] Moderation operation :").concat(WC[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(BC.STATE_CHANGE,WC.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new c_(((i,r)=>{this.on(BC.CONNECTION_STATE_CHANGE,((e,t)=>{e===FC.CONNECTED&&i()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{r(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),oT.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===FC.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const i=Fb("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),r=await function(e,t,n,i){let{appId:r,areaCode:s,cname:o,sid:a,token:c,uid:d}=t;Rw++;const l="moderation_plugin",u={service_name:l,json_body:JSON.stringify({appId:r,areaCode:s,cname:o,command:"allocateEdge",requestId:Rw,seq:Rw,sid:a,appToken:c,ts:Date.now(),uid:d+""})};let h,p,f=e[0];return Ey((async()=>{h=Date.now();const e=await sw(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new ZT(H_.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:p});throw oT.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new ZT(H_.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw oT.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new ZT(H_.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:p});throw oT.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new ZT(H_.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:p});throw oT.error(e.toString()),e}const i=Fb("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(i,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,n)=>(vT.apworkerEvent(a,{success:!0,sc:200,serviceName:l,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(vT.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:l,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==H_.OPERATION_ABORTED&&t.code!==H_.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),i)}(i,e,t,n);this.emit(BC.STATE_CHANGE,WC.AP_CONNECTED);const{addressList:s,ticket:o}=r;return this._ticket=o,s}async connectWorker(e){this.emit(BC.STATE_CHANGE,WC.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(VT.CONNECTED,(async()=>{this.emit(BC.STATE_CHANGE,WC.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=FC.CONNECTED})),this._workerConnection.on(VT.CLOSED,(()=>{this.connectionState=FC.CLOSED})),this._workerConnection.on(VT.FAILED,(()=>{this.connectionState=FC.CLOSED})),this._workerConnection.on(VT.RECONNECTING,(()=>{this.connectionState=this.connectionState===FC.CONNECTED?FC.RECONNECTING:FC.CONNECTING})),this._workerConnection.on(VT.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=oF(new Uint8Array(e.data));Fb("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&oT.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,oT.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{vT.reportApiInvoke(this._connectInfo.sid||null,{name:hv.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:pv.TRACER}).onError(new ZT(H_.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),Fb("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else oT.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(VT.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(VT.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=wv(this,BC.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(Fb("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&oT.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else Fb("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&oT.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:i,cid:r,vid:s,sid:o,uid:a}=t;const c=Date.now(),d=await e.getCurrentFrameImage("image/jpeg",this.quality),l=await UI(d,n,i),u=this._sequence+"-"+r+"-"+a+"-"+c+"-"+iy(12,""),h={appId:n,cid:r,cname:i,deviceId:"",elapse:UF.intToLong(Number(c-this._moderationStartTime)),fileSize:d.buffer.byteLength,height:d.height,width:d.width,jpg:l,networkType:6,osType:7,requestId:u,sdkVersion:"4.20.1",sequence:this._sequence,sid:o,timestamp:LF(c),uid:a,vid:s,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete h.callbackData;const p=sF(h);if(p.byteLength<this._workerMessageLengthLimit){if(Fb("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MF(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,oT.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:i,cid:r,vid:s,sid:o,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Cb.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=FC.CLOSED,this.emit(BC.STATE_CHANGE,WC.CLOSED)}}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function VF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const FF=Date.now(),BF=20,WF=new Map,GF=new Map;async function HF(e){const t=WF.get(e),n=Array.isArray(t)&&t[t.length-1],i=GF.get(e);if(!n)return void(i.isSyncing=!1);const r={uid:n.uid,payload:n.payload};0===i.firstRecvTs&&(i.firstRecvTs=n.recvTs,i.firstSendTs=n.sendTs);const s=n.sendTs-i.firstSendTs,o=s-(Date.now()-i.firstRecvTs);o>0&&(i.firstRecvTs=Date.now()-s);let a=n.mediaDelay+o;a<=0?(t.pop(),KF(n.context,r),a=0):a=Math.min(a,BF),setTimeout((()=>t.length&&HF(e)),a)}function KF(e,t){e.safeEmit(gv.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function zF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return KF(n,{uid:e.uid,payload:e.payload});const i="".concat(n.id,"-").concat(e.uid),r=WF.get(i)||[],s=r.findIndex((t=>e.sendTs>=t.sendTs)),o=VF(VF({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===s?r.push(o):r.splice(s,0,o),WF.set(i,r);let a=!1;var c;GF.has(i)?a=!(null===(c=GF.get(i))||void 0===c||!c.isSyncing):GF.set(i,{isSyncing:a,firstRecvTs:0,firstSendTs:0}),a||HF(i)}const YF=y_().name;function qF(){return!function(e,t,n){const i=y_();if(i.os!==f_.IOS||!i.osVersion)return!1;const r=i.osVersion.split(".");return n?t&&Number(r[0])===e&&Number(r[1])<t||Number(r[0])<e:t?Number(r[0])===e&&Number(r[1])<=t||Number(r[0])<e:Number(r[0])<=e}(16,0,!0)&&!function(e,t,n){const i=y_();if(i.name!==m_.SAFARI||!i.osVersion)return!1;const r=i.version.split(".");return n?t&&Number(r[0])===e&&Number(r[1])<t||Number(r[0])<e:t?Number(r[0])===e&&Number(r[1])<=t||Number(r[0])<e:Number(r[0])<=e}(16,0,!0)}function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function QF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JF(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}py.setLogger(oT);class XF extends dv{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),sh(this,"store",void 0),sh(this,"_uid",void 0),sh(this,"_channelName",void 0),sh(this,"_uintUid",void 0),sh(this,"_users",[]),sh(this,"_config",void 0),sh(this,"_clientId",void 0),sh(this,"_appId",void 0),sh(this,"_sessionId",null),sh(this,"_key",void 0),sh(this,"_rtmConfig",{}),sh(this,"_joinInfo",void 0),sh(this,"_gateway",void 0),sh(this,"_statsCollector",void 0),sh(this,"_configDistribute",void 0),sh(this,"_leaveMutex",new py("client-leave")),sh(this,"_publishMutex",new py("client-publish")),sh(this,"_renewTokenMutex",new py("client-renewtoken")),sh(this,"_subscribeMutex",new py("client-subscribe")),sh(this,"_encryptionMode","none"),sh(this,"_encryptionSecret",null),sh(this,"_encryptionSalt",null),sh(this,"_encryptDataStream",!1),sh(this,"_encryptDataStreamKey",null),sh(this,"_encryptDataStreamIv",null),sh(this,"_proxyServer",void 0),sh(this,"_turnServer",{servers:[],mode:"auto"}),sh(this,"_cloudProxyServerMode","disabled"),sh(this,"_isDualStreamEnabled",!1),sh(this,"_defaultStreamFallbackType",void 0),sh(this,"_lowStreamParameter",void 0),sh(this,"_streamFallbackTypeCacheMap",new Map),sh(this,"_remoteStreamTypeCacheMap",new Map),sh(this,"_axiosCancelSource",Cb.CancelToken.source()),sh(this,"_audioVolumeIndicationInterval",void 0),sh(this,"_networkQualityInterval",void 0),sh(this,"_userOfflineTimeout",void 0),sh(this,"_streamRemovedTimeout",void 0),sh(this,"_injectStreamingClient",void 0),sh(this,"_liveTranscodeStreamingClient",void 0),sh(this,"_liveRawStreamingClient",void 0),sh(this,"_channelMediaRelayClient",void 0),sh(this,"_networkQualitySensitivity","normal"),sh(this,"_p2pChannel",void 0),sh(this,"_useLocalAccessPoint",!1),sh(this,"_setLocalAPVersion",void 0),sh(this,"_joinAndNotLeaveYet",!1),sh(this,"_numberOfJoinCount",0),sh(this,"_remoteDefaultVideoStreamType",void 0),sh(this,"_inspect",void 0),sh(this,"_moderation",void 0),sh(this,"_license",void 0),sh(this,"_pendingPublishedUsers",[]),sh(this,"ntpAlignErrorCount",0),sh(this,"remoteInboundOffset",0),sh(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),sh(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),sh(this,"_handleUserOnline",(e=>{if(Fb("BLOCK_LOCAL_CLIENT")&&CT(e.uid,this.channelName))return void oT.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&oT.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(gv.USER_JOINED,t));else{const t=new Cj(e.uid,e.uint_id||e.uid);this._users.push(t),oT.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(gv.USER_JOINED,t)}})),sh(this,"_handleUserOffline",(e=>{if(Fb("BLOCK_LOCAL_CLIENT")&&CT(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:Gv(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),oT.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(gv.USER_LEAVED,t,e.reason))})),sh(this,"_handleAddAudioOrVideoStream",((e,t,n,i,r,s,o)=>{if(Fb("BLOCK_LOCAL_CLIENT")&&CT(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void oT.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));oT.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=r||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==n&&(a._audioSSRC=n),void 0!==i&&(a._cname=i),s&&(a._audioOrtc=s)):(a._video_added_=!0,void 0!==n&&(a._videoSSRC=n),void 0!==i&&(a._cname=i),void 0!==o&&(a._rtxSsrcId=o),s&&(a._videoOrtc=s)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(oT.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.safeEmit(gv.USER_PUBLISHED,a,e)),"video"===e?vT.onGatewayStream(this._sessionId,uT.ON_ADD_VIDEO_STREAM,hT.ON_ADD_VIDEO_STREAM,{peer:r||t,ssrc:a._videoSSRC}):vT.onGatewayStream(this._sessionId,uT.ON_ADD_AUDIO_STREAM,hT.ON_ADD_AUDIO_STREAM,{peer:r||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,n).then((t=>{if(t&&(oT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof RV))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{oT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(oT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch((e=>{oT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),sh(this,"_handleRemoveStream",(e=>{if(Fb("BLOCK_LOCAL_CLIENT")&&CT(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void oT.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));oT.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{oT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(gv.USER_UNPUBLISHED,t,"audio"),oT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(gv.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{oT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(gv.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{oT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(gv.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof RV&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),vT.onGatewayStream(this._sessionId,uT.ON_REMOVE_STREAM,hT.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),sh(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(Fb("BLOCK_LOCAL_CLIENT")&&CT(t,this.channelName))return;const i=this._users.find((e=>e.uid===t));if(!i)return void oT.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));oT.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const r="audio"===e?i.hasAudio:i.hasVideo;if("audio"===e){i._trust_audio_enabled_state_=!0;const e=i._audio_enabled_;if(i._audio_enabled_=n,i._audio_enabled_===e)return;{const e=i._audio_enabled_?"enable-local-audio":"disable-local-audio";oT.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(gv.USER_INFO_UPDATED,t,e)}}else{i._trust_video_enabled_state_=!0;const e=i._video_enabled_;if(i._video_enabled_=n,i._video_enabled_===e)return;{const e=i._video_enabled_?"enable-local-video":"disable-local-video";oT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(gv.USER_INFO_UPDATED,t,e)}}const s="audio"===e?i.hasAudio:i.hasVideo;return r!==s?!r&&s?(oT.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(gv.USER_PUBLISHED,i,e)):("video"===e&&i._videoTrack&&i._videoTrack._destroy(),"audio"===e&&i._audioTrack,this._p2pChannel.muteRemote(i,e),oT.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(gv.USER_UNPUBLISHED,i,e)):void 0})),sh(this,"_handleMuteStream",((e,t,n)=>{if(Fb("BLOCK_LOCAL_CLIENT")&&CT(e,this.channelName))return;oT.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const i=this._users.find((t=>t.uid===e));if(!i)return void oT.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const r="audio"===t?i.hasAudio:i.hasVideo;if("audio"===t){i._trust_audio_mute_state_=!0;const t=i._audio_muted_;if(i._audio_muted_=n,i._audio_muted_===t)return;{const t=i._audio_muted_?"mute-audio":"unmute-audio";oT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(gv.USER_INFO_UPDATED,e,t)}}else{i._trust_video_mute_state_=!0;const t=i._video_muted_;if(i._video_muted_=n,i._video_muted_===t)return;{const t=i._video_muted_?"mute-video":"unmute-video";oT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(gv.USER_INFO_UPDATED,e,t)}}const s="audio"===t?i.hasAudio:i.hasVideo;if(r!==s){if(!r&&s)return("audio"===t?i._audioSSRC:i._videoSSRC)?(oT.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(gv.USER_PUBLISHED,i,t)):void oT.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&i._videoTrack&&!i._video_pre_subscribed&&i._videoTrack._destroy(),"audio"===t&&i._audioTrack,this._p2pChannel.muteRemote(i,t),oT.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(gv.USER_UNPUBLISHED,i,t)}})),sh(this,"_handleP2PLost",(async e=>{oT.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():oT.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),sh(this,"_handleTokenWillExpire",(()=>{oT.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(gv.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),sh(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),oT.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),sh(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(gv.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(gv.NETWORK_QUALITY,e)})),sh(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,i)=>{const r=this._users.find((e=>e.uid===t));if(!r)return void oT.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));oT.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(r.uid,e,void 0,void 0,void 0,Date.now());const s="audio"===e?r.hasAudio:r.hasVideo;"audio"===e?r._trust_audio_stream_added_state_=!0:r._trust_video_stream_added_state_=!0,"audio"===e?(r._audio_added_=!0,void 0!==n&&(r._audioSSRC=n),void 0!==i&&(r._audioMid=i)):(r._video_added_=!0,void 0!==n&&(r._videoSSRC=n),void 0!==i&&(r._videoMid=i)),("audio"===e?r.hasAudio:r.hasVideo)&&!s&&(oT.info("[".concat(this._clientId,"] remote user ").concat(r.uid," published ").concat(e)),this.safeEmit(gv.USER_PUBLISHED,r,e)),this._p2pChannel.hasPendingRemoteMedia(r,e)&&(oT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(r.uid," after reconnect.")),this._subscribe(r,e,!0).catch((e=>{oT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=iy(5,"client-"),this.store=new Yb(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),oT.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(xb," build: ").concat(Ub,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{Tv(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){oT.warning("[".concat(this._clientId,"] ").concat(e.toString()))}this._statsCollector=new Lj(this.store),this._statsCollector.onStatsException=(e,t,n)=>{oT.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(gv.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,i)=>{const r=this._users.find((t=>t.uid===e));r&&vT.peerPublishStatus(this._sessionId,{subscribeElapse:i,audioPublishDuration:t,videoPublishDuration:n,peer:r._uintid})},this.store.useDataChannel=Ww().supportDataChannel&&Fb("SIGNAL_CHANNEL"),this.store.useP2P="p2p"===e.mode,this._gateway=new nw(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||my,httpRetryConfig:e.httpRetryConfig||my,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new Fw,this.store.useP2P?(this._p2pChannel=new kj(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new RV(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,i,r){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Vb("JOIN_GATEWAY_USE_443PORT_ONLY",s),Vb("JOIN_GATEWAY_USE_DUAL_DOMAIN",o);const a=this._gateway.signal.websocket;return a instanceof hA&&(a.use443PortOnly=s,a.tryDoubleDomain=o),async function(e,t,n){u_.get(e)||u_.set(e,[]),h_.get(e)||h_.set(e,t),p_.get(e)||p_.set(e,0);const i=u_.get(e),r=h_.get(e);if(!i||!r)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(p_.get(e)===r){const e=l_();i.push(e),await e.promise}p_.set(e,p_.get(e)+1);for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];const c=await n(...o);return p_.set(e,p_.get(e)-1),p_.get(e)===r-1&&i.length>0&&(i[0].resolve(),i.shift()),0===p_.get(e)&&(u_.set(e,[]),h_.set(e,0),p_.set(e,0)),c}("client.join",Fb("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,i,r)}async join(e,t,n,i,r){const s=++this._numberOfJoinCount;this.store.joinStart(),i&&(this.store.uid=i);const o=Db(),a=Pb()?window.isSecureContext:"Browser Not Support";if(!Pb()&&!o||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";oT.warning(e)}const c=ry();"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),oT.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const d=vT.reportApiInvoke(c,{name:hv.JOIN,options:[e,t,n,i],states:{isHttps:o,isSecureContext:a},tag:pv.TRACER});vT.setAppId(e);try{if(!n&&null!==n)throw new ZT(H_.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Q_(n,"token",1,2047),Q_(e,"appid",1,2047),$T(t),i&&eC(i),r&&Q_(r,"optionalInfo",1,2047)}catch(e){throw d.onError(e),e}if(oT.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(s)),this._leaveMutex.isLocked&&(oT.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),oT.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw d.onError(e),e}this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const l=QF(QF({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof i?i:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(l.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof i&&(l.stringUid=i,this._uintUid?(l.uid=this._uintUid,this._uintUid=void 0):l.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(l.aesmode=this._encryptionMode,l.aespassword=await av(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(l.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=Fb("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(l.appId+this._encryptionSecret+this._encryptionSecret):e.encode(l.appId+l.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const i=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),r="aes-128-gcm2"===e?128:256,s=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:Qb,hash:"SHA-256",salt:n},i,r+Jb);return new Uint8Array(s).subarray(r/8)}(this._encryptionMode,t,Qv(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const i=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),r="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:Qb,hash:"SHA-256",salt:n},i,{name:"AES-GCM",length:r},!0,["encrypt","decrypt"])}(this._encryptionMode,t,Qv(this._encryptionSalt))}else a?oT.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):oT.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,oT.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:l.stringUid});const u=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&u===this._sessionId&&vT.joinChannelTimeout(this._sessionId,5)}),5e3);try{var h;let i;const r=l.cloudProxyServer;if(Ii(h=["proxy3","proxy4","proxy5"]).call(h,r)){const e=Fb("PROXY_SERVER_TYPE3");Array.isArray(e)?l.proxyServer=e[0]:l.proxyServer=e}if(vT.setProxyServer(l.proxyServer),oT.setProxyServer(l.proxyServer),this.store.requestAPStart(),l.stringUid&&!l.uid){let e;[e,i]=await c_.all([Dw(l.stringUid,l,this._axiosCancelSource.token,this._config.httpRetryConfig||my,this.store),kw(l,this._axiosCancelSource.token,this._config.httpRetryConfig||my,!0,this.store)]),oT.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(l.stringUid," => ").concat(e)),l.uid=e,i.gatewayInfo.uid=e,i.gatewayInfo.res.uid=e}else i=await kw(l,this._axiosCancelSource.token,this._config.httpRetryConfig||my,!0,this.store);if(!this._joinAndNotLeaveYet)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(l,this._axiosCancelSource.token),this._configDistribute.on(CC.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=n||e;const s=i.gatewayInfo,o=l.uid?l.uid:s.uid;this._joinInfo=QF(QF({},l),{},{cid:s.cid,uid:o,vid:s.vid,apResponse:s.res,uni_lbs_ip:s.uni_lbs_ip,gatewayAddrs:s.gatewayAddrs}),this.store.intUid=o;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));d.onSuccess(a),this._appId=e,this._channelName=l.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(R_()?"beforeunload":"pagehide",this._handleBeforeUnload)}),0);const c=l.stringUid?"string uid: ".concat(l.stringUid,",uid: ").concat(l.uid):"uid: ".concat(this._uid);return oT.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(c)),setTimeout((()=>{oT.startUpload()}),5e3),this.store.joinEnd(),p=this,Ii(TT).call(TT,p)||TT.push(p),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===H_.OPERATION_ABORTED?oT.warning("[".concat(this._clientId,"] join number: ").concat(s,", Joining channel failed, rollback"),t):oT.error("[".concat(this._clientId,"] join number: ").concat(s,", Joining channel failed, rollback"),t),t.code!==H_.OPERATION_ABORTED&&this._numberOfJoinCount===s&&(this._gateway.state="DISCONNECTED",this._reset()),d.onError(t),t}var p}_joinGateway(){if(!this._joinInfo||!this._key)throw new ZT(H_.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!Fb("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((e=>e)).catch((e=>{if(e.code===H_.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,mv.FALLBACK),e;if(e.code===H_.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,mv.FALLBACK),e;throw e})).then((e=>{if(e instanceof ZT){if(e.code===H_.INIT_WEBSOCKET_TIMEOUT){if(oT.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new ZT(H_.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const e=Fb("PROXY_SERVER_TYPE3");if(Array.isArray(e))if(this._joinInfo.apUrl){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),n=t.slice(t.length-2).join(".");e.forEach((e=>{this._joinInfo&&Ii(e).call(e,n)&&(this._joinInfo.proxyServer=e)})),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=e[0])}else this._joinInfo.proxyServer=e[0];else this._joinInfo.proxyServer=e;const t=Fb("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return t&&t[1]&&"443"!==t[1]&&oT.setProxyServer(this._joinInfo.proxyServer),"443"!==Fb("STATS_COLLECTOR_PORT").toString()&&vT.setProxyServer(this._joinInfo.proxyServer),vT.reportApiInvoke(this._sessionId,{name:hv.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:pv.TRACER}).onSuccess(),this.safeEmit(gv.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),Fb("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach((e=>{"forceturn"in e&&(e.forceturn=!0)})),this._gateway.join(this._joinInfo,this._key)}if(oT.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new ZT(H_.INVALID_OPERATION);return vT.reportApiInvoke(this._sessionId,{name:hv.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:pv.TRACER}).onSuccess(),this._joinGateway()}return e})).then((e=>e))}async leave(){oT.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(R_()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=TT.indexOf(e);-1!==t&&TT.splice(t,1)}(this);const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return oT.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),oT.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof NR))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new ZT(H_.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new ZT(H_.INVALID_OPERATION,"audience can not publish stream");for(const r of n){if(!(r instanceof NR))throw new ZT(H_.INVALID_PARAMS,"parameter is not local track");if(!r._enabled&&t)throw new ZT(H_.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(r.getTrackId()))}oT.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const i=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof FI&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),oT.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw oT.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{i()}}async _publishDataChannel(e){q_(e.id,"id",0,65535,!0),z_(e.ordered,"ordered"),Q_(e.metadata,"metadata",0,512),oT.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new ZT(H_.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new ZT(H_.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&Fb("FORCE_TURN")&&!Fb("TURN_ENABLE_TCP")&&!Fb("TURN_ENABLE_UDP"))throw new ZT(H_.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=new wD(e);if(await this._p2pChannel.publishDataChannel([t]),!this._p2pChannel.isP2PDisconnected()){if("number"!=typeof t._originDataChannelId)throw oT.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new ZT(H_.CREATE_DATACHANNEL_ERROR);try{const n={streamId:e.id,ordered:e.ordered,maxRetransmits:Fb("DATASTREAM_MAX_RETRANSMITS"),metadata:e.metadata,channelId:t._originDataChannelId};await this._gateway.publishDataChannel(this._uid,n,!0),await t._waitTillOpen()}catch(e){if(e.code!==H_.DISCONNECT_P2P)throw e}}return oT.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw oT.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new ZT(H_.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof NR))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);oT.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof kj){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(GC.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),oT.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw oT.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),oT.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),oT.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw oT.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(Y_(t,"mediaType",["audio","video"]),this._p2pChannel instanceof kj)throw new ZT(H_.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===wC.AUDIO,i=t===wC.VIDEO,r=await this._subscribeMutex.lock();try{const{ssrcId:r,ortc:s,rtxSsrcId:o,cname:a,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==r)throw new ZT(H_.UNEXPECTED_RESPONSE,"no ssrc id");let d=this._users.find((t=>t.uid===e));d||(d=new Cj(e,c||e),d._is_pre_created=!0,this._users.push(d)),a&&(d._cname=a),d._uintid||(d._uintid=c||e),n&&(d._audioSSRC=r,d._audio_pre_subscribed=!0,s&&(d._audioOrtc=s)),i&&(d._videoSSRC=r,d._video_pre_subscribed=!0,s&&(d._videoOrtc=s),null!=o&&(d._rtxSsrcId=o)),oT.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(r)),await this._p2pChannel.subscribe(d,t,r,o,s);const l=n?d._audioTrack:d._videoTrack;if(!l)throw new ZT(H_.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(d._trust_audio_stream_added_state_=!0,d._audio_added_=!0),i&&(d._trust_video_stream_added_state_=!0,d._video_added_=!0),l}catch(t){throw oT.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{r()}}async _subscribeDataChannel(e,t){var n;if(q_(t,"channelId",0,65535,!0),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e)))throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new ZT(H_.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new ZT(H_.INVALID_REMOTE_USER,"user is not published");const i=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!i)throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new ZT(H_.REMOTE_USER_IS_NOT_PUBLISHED);const r=await this._subscribeMutex.lock();oT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[i]);if(n&&Ii(n).call(n,i.id))try{var s;if("number"!=typeof i._originDataChannelId)throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new ZT(H_.CREATE_DATACHANNEL_ERROR);const t={id:i.id,datachannelId:i._originDataChannelId,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:null!==(s=i.metadata)&&void 0!==s?s:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await i._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==H_.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[i]),t;await this._p2pChannel.unsubscribeDataChannel(e,[i]),this._p2pChannel.setPendingRemoteDataChannel(e,i.id)}return oT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),i}finally{r()}}async _p2pSubscribe(e,t,n){if(Y_(t,"mediaType",["audio","video"]),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new ZT(H_.INVALID_REMOTE_USER,"user is not in the channel");throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new ZT(H_.INVALID_REMOTE_USER,"user is not published");throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new ZT(H_.REMOTE_USER_IS_NOT_PUBLISHED);throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const i=await this._subscribeMutex.lock();oT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,i="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof kj&&await this._p2pChannel.subscribe(e,t,n,i)}catch(e){throw e}oT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{oT.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new ZT(H_.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw oT.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{i()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof kj)return this._p2pSubscribe(e,t);if(Y_(t,"mediaType",["audio","video"]),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new ZT(H_.INVALID_REMOTE_USER,"user is not in the channel");throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new ZT(H_.INVALID_REMOTE_USER,"user is not published");throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new ZT(H_.REMOTE_USER_IS_NOT_PUBLISHED);throw oT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let i="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,o={stream_type:"audio"===t?wC.AUDIO:wC.VIDEO,ssrcId:i};const a=await this._subscribeMutex.lock();oT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const a="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==a&&a!==i&&(i=a,r="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,o={stream_type:"audio"===t?wC.AUDIO:wC.VIDEO,ssrcId:i}),FM.markSubscribeStart(this.store.clientId,i),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,i,s,r);try{await this._gateway.subscribe(e.uid,o,!0)}catch(n){if((null==n?void 0:n.code)!==H_.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}oT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{oT.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const a="audio"===t?e._audioTrack:e._videoTrack;if(!a)throw new ZT(H_.UNEXPECTED_ERROR,"can not find remote track in user object");return a}catch(t){throw oT.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{a()}}async massSubscribe(e){if(X_(e,"subscribeList"),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,i=await this._subscribeMutex.lock();oT.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const r=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),s=await this._p2pChannel.globalLock();try{var o;for(let t=e.length-1;t>=0;t--){const i=e[t],{user:s,mediaType:o}=i;if(Y_(o,"mediaType",["audio","video"]),!s){const e=new ZT(H_.INVALID_PARAMS,"user property does not exist in subscribeList item");throw oT.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}if(!this._users.find((e=>e===s))){const n=new ZT(H_.INVALID_REMOTE_USER,"user is not in the channel");oT.error("[".concat(this._clientId,"] can not massSubscribe ").concat(s.uid,", this user is not in the channel")),r[t].error=n,e.splice(t,1);continue}if("audio"===o&&(!s.hasAudio||void 0===s._audioSSRC)||"video"===o&&(!s.hasVideo||void 0===s._videoSSRC)){const n=new ZT(H_.REMOTE_USER_IS_NOT_PUBLISHED);oT.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid," with mediaType ").concat(o,", remote user is not published")),r[t].error=n,e.splice(t,1);continue}const a=EC.Video|EC.LwoVideo,c=n.get(s);if(c){if("video"===o?c&a:c&EC.Audio){e.splice(t,1),oT.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(s.uid,", mediaType:").concat(o," twice"));continue}n.set(s,c|("video"===o?a:EC.Audio))}else n.set(s,"video"===o?a:EC.Audio)}for(let t=e.length-1;t>=0;t--){const i=e[t],{user:r,mediaType:s}=i,o=EC.Video|EC.LwoVideo;if(this._p2pChannel.hasRemoteMedia(r,s)){await this._p2pChannel.unmuteRemoteNoLock(r,s);const i=n.get(r);n.set(r,"video"===s?i^o:i^EC.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);const i=Fv(o=Array.from(n.entries())).call(o,((e,t)=>{let[n,i]=t;if(0===i)return e;const r={stream_id:n.uid,stream_type:i};return i&EC.Audio&&(r.audio_ssrc=n._audioSSRC),i&EC.Video&&(r.video_ssrc=n._videoSSRC),e.push(r),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===wC.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===wC.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(i.length>0){const e=await this._gateway.subscribeAll(i,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:i,audio_error_code:r,error_code:s}=e;(i||r||s)&&n.set(t,{video_error_code:i,audio_error_code:r,error_code:s})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,i]=t;const r=this.remoteUsers.find((e=>e.uid===n));if(r){let t;i.error_code||i.video_error_code&&i.audio_error_code?t=void 0:i.video_error_code?t=wC.VIDEO:i.audio_error_code&&(t=wC.AUDIO),e.push({user:r,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of r){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=$C(n);oT.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new ZT(H_.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(r.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),r.forEach((e=>{var n;vT.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===wC.VIDEO,audio:e.mediaType===wC.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===wC.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t)},!0)})),oT.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),r}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{s(),i()}}async unsubscribe(e,t,n){if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&Y_(t,"mediaType",["audio","video"]),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new ZT(H_.INVALID_REMOTE_USER,"user is not in the channel");throw oT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}oT.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const i=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof kj)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&Gv(this._users,e),oT.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===H_.DISCONNECT_P2P)return void oT.warning("disconnecting p2p, abort unsubscribe request.");throw oT.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{i()}}async _unsubscribeDataChannel(e,t){if(t&&q_(t,"id",0,65535,!0),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new ZT(H_.INVALID_REMOTE_USER,"user is not in the channel");throw oT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let n;if("number"==typeof t){const i=e._dataChannels.find((e=>e.id===t));i&&(n=[i])}else n=e._dataChannels;if(void 0===n){const n=new ZT(H_.REMOTE_USER_IS_NOT_PUBLISHED);throw oT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}oT.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),oT.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===H_.DISCONNECT_P2P)return void oT.warning("disconnecting p2p, abort unsubscribe request.");throw oT.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(X_(e,"unsubscribeList"),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");oT.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:i,mediaType:r}=e[n];if(!i){const e=new ZT(H_.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw oT.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}if(Y_(r,"mediaType",["video","audio",void 0]),!this._users.find((e=>e===i))){oT.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(i.uid,", user is not in the channel")),e.splice(n,1);continue}const s=EC.Video|EC.LwoVideo;if(t.has(i)){const o=t.get(i);let a;switch(r){case"video":a=o&s;break;case"audio":a=o&EC.Audio;break;default:a=o&(EC.Audio|s)}if(a){oT.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(i.uid,",mediaType:").concat(r," twice.")),e.splice(n,1);continue}r?"audio"===r?t.set(i,o|EC.Audio):"video"===r&&t.set(i,o|s):t.set(i,o|EC.Audio|s)}else r?"audio"===r?t.set(i,EC.Audio):"video"===r&&t.set(i,s):t.set(i,EC.Audio|s)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),oT.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===H_.DISCONNECT_P2P)return void oT.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw oT.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new K_(H_.INVALID_PARAMS);Z_(e.width)||J_(e.width,"streamParameter.width"),Z_(e.height)||J_(e.height,"streamParameter.height"),Z_(e.framerate)||J_(e.framerate,"streamParameter.framerate"),Z_(e.bitrate)||q_(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&oT.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),oT.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,NC.LocalVideoLowTrack)}async enableDualStream(){if(!Ww().supportDualStream)throw vT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new ZT(H_.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new ZT(H_.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw vT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,vT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),oT.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(NC.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw vT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,vT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),oT.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){Y_(e,"role",["audience","host"])}(e),t&&Tv(t),"rtc"===this.mode||"p2p"===this.mode)throw oT.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new ZT(H_.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new ZT(H_.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new ZT(H_.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,oT.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(Q_(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new ZT(H_.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,vT.setProxyServer(this._proxyServer),oT.setProxyServer(this._proxyServer),oT.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new ZT(H_.INVALID_OPERATION,"You have already set the proxy")}if(Sv(e))return this._turnServer={servers:e,mode:"original-manual"},void oT.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>bv(e))),this._turnServer={servers:e,mode:"manual"},oT.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"you should set license before join channel");if(Q_(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new ZT(H_.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,oT.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new ZT(H_.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new ZT(H_.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new ZT(H_.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,oT.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"Stop proxy server after leave channel");vT.setProxyServer(),oT.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",oT.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new ZT(H_.INVALID_PARAMS,"accessPoints is required.");X_(e.accessPoints.serverList,"accessPoints.serverList"),Q_(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{q_(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new ZT(H_.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");Fb("CLOSE_AFB_FOR_LOCAL_AP")&&(Vb("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Vb("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const i=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,r=e.accessPoints.domain,s=e.accessPoints.serverList.map((e=>i.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(r):e)),o=s.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Vb("WEBCS_DOMAIN",o),Vb("WEBCS_DOMAIN_BACKUP_LIST",o),Vb("GATEWAY_DOMAINS",[r]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(X_(e.report.hostname,"report.hostname"),Vb("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Vb("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Vb("EVENT_REPORT_DOMAIN",s[0]),Vb("EVENT_REPORT_BACKUP_DOMAIN",s[1]||s[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),Vb("STATS_COLLECTOR_PORT",a),e.report?Vb("ENABLE_EVENT_REPORT",!0):Vb("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(X_(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=s[0];let d=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),d=e.log.port),Vb("LOG_UPLOAD_SERVER","".concat(c,":").concat(d));let l=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(X_(e.cds.hostname,"cds.hostname"),l=e.cds.hostname):l=s;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),u=e.cds.port),Vb("CDS_AP",l.map((e=>"".concat(e,":").concat(u)))),e.cds?Vb("ENABLE_CONFIG_DISTRIBUTE",!0):Vb("ENABLE_CONFIG_DISTRIBUTE",!1),oT.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(X_(e,"serverList"),Q_(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new ZT(H_.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Vb("WEBCS_DOMAIN",e),Vb("WEBCS_DOMAIN_BACKUP_LIST",e),Vb("GATEWAY_DOMAINS",[t]),Vb("EVENT_REPORT_DOMAIN",e[0]),Vb("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Vb("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),oT.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(Y_(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw oT.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else oT.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){Y_(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw oT.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}oT.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){Y_(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw oT.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}oT.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,i){!function(e){Y_(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),Q_(t,"secret");const r=["aes-128-gcm2","aes-256-gcm2"];if(Ii(r).call(r,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new ZT(H_.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new ZT(H_.INVALID_PARAMS,"current encrypt mode does not need salt");if(i){if(z_(i,"encryptDataStream"),!Ii(r).call(r,e))throw new ZT(H_.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||oT.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Xv(n))}async renewToken(e){if(Q_(e,"token",1,2047),!this._key||!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(Fb("USE_NEW_TOKEN")){oT.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await Uw(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||my);oT.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else oT.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});oT.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,oT.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?oT.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(gv.VOLUME_INDICATOR,e)}),Fb("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new ZT(H_.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new ZT(H_.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new ZT(H_.LIVE_STREAMING_TASK_CONFLICT);const n=t?FT.TRANSCODE:FT.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(FT.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new ZT(H_.INVALID_PARAMS,"can not find live streaming url to stop");await c_.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async addInjectStreamUrl(e,t){if(!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const n=this._createLiveStreamingClient(FT.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,FT.INJECT)}async removeInjectStreamUrl(){var e;const t=this._createLiveStreamingClient(FT.INJECT),n=Array.from(JT(e=t.streamingTasks).call(e)).find((e=>e.mode===FT.INJECT));if(!this._joinInfo||!n)throw new ZT(H_.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await t.stopLiveStreamingTask(n.url)}async startChannelMediaRelay(e){Gj(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){Gj(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let i=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ii(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(i=!0,e.payload=await async function(e,t,n){var i;const r=Fv(i=Array.from(n)).call(i,((e,t)=>e+t),0),s={serverTs:0,seq:Zb++,length:n.length,checkSum:r},o=new Uint8Array(ly(r,2)),a=new ArrayBuffer(Xb),c=new DataView(a);c.setUint32(0,s.serverTs),c.setUint16(4,s.seq),c.setUint16(6,s.length),c.setUint16(8,s.checkSum);const d=16-n.length%16;n=Zv(n,new Uint8Array(d));const l=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:qb,additionalData:o},t,n);return Zv(new Uint8Array(a),new Uint8Array(l))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new ZT(H_.INVALID_PARAMS,i?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(xT.DATA_STREAM,{payload:Xv(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-FF},!n)}sendMetadata(e){if(!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new ZT(H_.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(xT.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Xv(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(dT),!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"can not send custom report, not joined");await vT.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){Y_(t.spatialLayer,"spatialLayer",[0,1,2,3]),Y_(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw oT.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(z_(t,"apRTM"),q_(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,oT.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(oT.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Cb.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new py("client-publish"),this._subscribeMutex=new py("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const i=e||ry();e?oT.debug("[".concat(this._clientId,"] new Session ").concat(i)):oT.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(i));const r=e?"":this._sessionId||"";this._sessionId=i,this.store.sessionId=i;const s={lts:(new Date).getTime(),mode:this.mode,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:r,clientRole:"audience"===this.role?2:1};t?vT.sessionInit(this._sessionId,QF({cname:t.channel,appid:t.appId},s)):this._joinInfo?vT.sessionInit(this._sessionId,QF({cname:this._joinInfo.cname,appid:this._joinInfo.appId},s)):this._gateway.joinInfo&&vT.sessionInit(this._sessionId,QF({cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId},s)),this._joinInfo&&(this._joinInfo.sid=i),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=i)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new ZT(H_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&Fb("FORCE_TURN")&&!Fb("TURN_ENABLE_TCP")&&!Fb("TURN_ENABLE_UDP"))throw new ZT(H_.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");oT.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof kj){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(GC.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const i=(await n.next()).value;if(i){var t;let r;try{r=await this._gateway.publish(this._uid,i,!0)}catch(e){if(e.code!==H_.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=r)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof FI&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===H_.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new ZT(H_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new ZT(H_.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));oT.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==H_.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=i)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===H_.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new ZT(H_.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new Bj(this._joinInfo,this._config.websocketRetryConfig||my,this._config.httpRetryConfig||my),n=e=>{e.onLiveStreamError=(e,t)=>{vT.reportApiInvoke(this._sessionId,{name:hv.ON_LIVE_STREAM_ERROR,options:[e,t],tag:pv.TRACER}).onSuccess(),this.safeEmit(gv.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{vT.reportApiInvoke(this._sessionId,{name:hv.ON_LIVE_STREAM_WARNING,options:[e,t],tag:pv.TRACER}).onSuccess(),this.safeEmit(gv.LIVE_STREAMING_WARNING,e,t)},e.on(aC.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new ZT(H_.INVALID_OPERATION,"can not find join info to get worker manager"));Lw(e,this._joinInfo,this._axiosCancelSource.token,my).then(t).catch(n)}))};switch(e){case FT.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case FT.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case FT.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(aC.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new ZT(H_.INVALID_OPERATION,"can not find join info to get worker manager"));Lw(e,this._joinInfo,this._axiosCancelSource.token,my).then(t).catch(n)})),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.safeEmit(gv.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new ZT(H_.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:e,sendResolutionHeight:t}=this.getLocalVideoStats(),n={width:e,height:t};this._channelMediaRelayClient=new Kj(this._joinInfo,this._clientId,this._config.websocketRetryConfig||my,this._config.httpRetryConfig||my,n),this._channelMediaRelayClient.on("state",(e=>{e===hC.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(gv.CHANNEL_MEDIA_RELAY_STATE,e)})),this._channelMediaRelayClient.on("event",(e=>{this.safeEmit(gv.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:i}=e,r=[];Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:i,ordered:s,max_retrans_times:o,metadata:a}=e,c=this._users.find((e=>e._uintid===n));if(c){if(oT.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Ii(r).call(r,c)||r.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:i,ordered:!!s,maxRetransmits:o,metadata:a},n=new AD(e);c._dataChannels.push(n),oT.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(gv.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(oT.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{oT.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else oT.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(gv.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(i)&&i.length>0&&i.forEach((e=>{const{uid:t,stream_id:n}=e,i=this._users.find((e=>e._uintid===t));if(!i)return void oT.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const r=i._dataChannels.find((t=>t.id===e.stream_id));r&&(oT.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(i,[r]).then((e=>{if(i._dataChannels=i._dataChannels.filter((e=>e!==r)),e)return this._gateway.unsubscribeDataChannel(e,i.uid)})),oT.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(r.id)),this.safeEmit(gv.USER_UNPUBLISHED,i,"datachannel",r._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){oT.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{oT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(gv.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else oT.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(mC.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(mC.CONNECTION_STATE_CHANGE,((e,t,n)=>{var i;if(n===mv.FALLBACK)return;const r=()=>{this.safeEmit(gv.CONNECTION_STATE_CHANGE,e,t,n)};if(vT.reportApiInvoke(this._sessionId||(null===(i=this._gateway.joinInfo)||void 0===i?void 0:i.sid)||null,{name:hv.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:pv.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),oT.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void r();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var s;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{oT.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{oT.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(s=this._joinInfo)||void 0===s?void 0:s.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{oT.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{oT.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{oT.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(oT.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,wC.AUDIO,!1)),e._trust_video_mute_state_||(oT.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,wC.VIDEO,!1)),e._trust_audio_enabled_state_||(oT.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(oT.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(oT.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(oT.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(oT.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}r()})),this._gateway.on(mC.REQUEST_NEW_GATEWAY_LIST,((e,t)=>{if(!this._joinInfo)return t(new ZT(H_.UNEXPECTED_ERROR,"can not recover, no join info"));Ow(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||my,this.store).then((t=>{this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const n=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[i,r]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?n.push({proxy:this._joinInfo.proxyServer,host:i,port:r}):n.push({host:i,port:r})})),e(n)})).catch(t)})),this._gateway.on(mC.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(gv.NETWORK_QUALITY,e)})),this._gateway.on(mC.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(gv.STREAM_TYPE_CHANGED,e,t),vT.reportApiInvoke(this._sessionId,{name:hv.STREAM_TYPE_CHANGE,options:[e,t],tag:pv.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(mC.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(mC.NEED_RENEW_SESSION,(()=>{this._startSession()})),this._gateway.on(mC.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){n(e)}})),this._gateway.on(mC.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const{dtlsParameters:n,iceParameters:i,candidates:r,rtpCapabilities:s,setup:o,cname:a}=FU(e.ortc,t);this._p2pChannel.connect(i,n,r,s,o,a)})),this._gateway.on(mC.REQUEST_DC_CONNECTION_PARAMS,(e=>{e(this._p2pChannel.getEstablishParams())})),this._gateway.on(mC.RESET_SIGNAL,(e=>{this._p2pChannel.resetConnection(e),this._handleGatewaySignalEvents()})),this._gateway.on(mC.DATACHANNEL_FAILBACK,(()=>{this._joinGateway()})),this._gateway.on(mC.DATACHANNEL_PRECONNECT,(async(e,t,n,i)=>{var r,s,o,a,c,d;await this._p2pChannel.startP2PConnection({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},!0);const l=function(e,t){let n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],oT.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),oT.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(e,t);return this._p2pChannel.preConnect({iceUfrag:"".concat(null===(s=this._joinInfo)||void 0===s?void 0:s.apResponse.cid,"_").concat(null===(o=this._joinInfo)||void 0===o?void 0:o.apResponse.cert),icePwd:"".concat(null===(a=this._joinInfo)||void 0===a?void 0:a.apResponse.cid,"_").concat(null===(c=this._joinInfo)||void 0===c?void 0:c.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(d=Fb("FINGERPRINT"))&&void 0!==d?d:e.fingerprint}]},l,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(n).catch(i)}))}_handleGatewaySignalEvents(){this._gateway.signal.on(MT.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(MT.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(MT.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(MT.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(MT.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(MT.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams,deleted:[]},!0)})),this._gateway.signal.on(MT.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(MT.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(MT.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,wC.AUDIO,!0))),this._gateway.signal.on(MT.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,wC.AUDIO,!1))),this._gateway.signal.on(MT.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,wC.VIDEO,!0))),this._gateway.signal.on(MT.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,wC.VIDEO,!1))),this._gateway.signal.on(MT.RECEIVE_METADATA,(e=>{const t=Qv(e.metadata);this.safeEmit(gv.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(MT.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=Qv(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ii(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<Xb)throw new ZT(H_.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(Xb));const t=await async function(e,t,n){const i=n.subarray(0,Xb),r=i.slice(8,Xb),s=(r[0]<<8)+r[1],o=(i[6]<<8)+i[7],a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:qb,additionalData:new Uint8Array(ly(s,2))},t,n.subarray(Xb));return new Uint8Array(a).subarray(0,o)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let i=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),r=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));i=null==r?void 0:r.jitterBufferMs}null==i&&(i=0),zF(QF(QF({},e),{},{payload:n}),i,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(MT.ON_CRYPT_ERROR,(()=>{Jv((()=>{oT.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(gv.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(MT.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(MT.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{oT.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,mv.TOKEN_EXPIRE),this.safeEmit(gv.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(MT.ON_STREAM_FALLBACK_UPDATE,(e=>{oT.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(gv.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(MT.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),oT.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(MT.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(MT.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(PT.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case xT.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,i;const r=e.some((e=>{let{stream_type:t}=e;return t===fC.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t!==fC.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t===fC.Screen||t===fC.ScreenLow}));"offer"===t.state&&vT.publish(this._joinInfo.sid,{eventElapse:FM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:H_.TIMEOUT,audio:r,video:s,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:o,audioName:r?null===(n=e.find((e=>{let{stream_type:t}=e;return t===fC.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:s?null===(i=e.find((e=>{let{stream_type:t}=e;return t!==fC.Audio})))||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId.toString():void 0})}break}case xT.SUBSCRIBE:t&&vT.subscribe(this._joinInfo.sid,{succ:!1,ec:H_.TIMEOUT,audio:t.stream_type===wC.AUDIO,video:t.stream_type===wC.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:FM.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}})),this._gateway.signal.on(MT.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(MT.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;Fb("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!CT(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const i of e.users){let e=this._users.find((e=>e._uintid===i.stream_id));e?e._trust_in_room_=!0:(e=new Cj(i.string_id||i.stream_id,i.stream_id),this._users.push(e),0===this.getListeners(gv.PUBLISHED_USER_LIST).length&&(oT.debug("[".concat(this._clientId,"] user online"),i.stream_id),this.safeEmit(gv.USER_JOINED,e)));const r=EC.Audio&i.stream_type,s=(EC.Video|EC.LwoVideo)&i.stream_type,o=0!=(65280&i.stream_type),a=r&&e.hasAudio,c=s&&e.hasVideo;s&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=i.video_ssrc,e._rtxSsrcId=i.video_rtx),r&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=i.audio_ssrc),r&&!a&&0===this.getListeners(gv.PUBLISHED_USER_LIST).length&&(oT.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(gv.USER_PUBLISHED,e,"audio")),s&&!c&&0===this.getListeners(gv.PUBLISHED_USER_LIST).length&&(oT.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(gv.USER_PUBLISHED,e,"video")),(r&&!a||s&&!c||o)&&t.push(e),s&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),r&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(oT.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{oT.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(gv.PUBLISHED_USER_LIST).length>0?Fb("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(oT.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(gv.PUBLISHED_USER_LIST,t)):oT.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(MT.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof RV&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Ii(t=Object.keys(Kb)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(MT.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(GC.PUBLISH,((e,t,n)=>{const{uid:i}=e;e.forEach((e=>{const{kind:r,ssrcs:s,mid:o,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(r,i,s[0].ssrcId,o);const c=this._users.find((e=>e.uid===i));return c&&this._p2pChannel instanceof kj?this._p2pChannel.mockSubscribe(c,r,s[0].ssrcId,o).then((()=>{t()})).catch(n):t(),this._handleMuteStream(i,r,!!a)}))})),this._gateway.signal.on(GC.CALL,(async(e,t,n)=>{if(this._p2pChannel instanceof kj)try{var i;t(await this._p2pChannel.startP2P({turnServer:null===(i=this._joinInfo)||void 0===i?void 0:i.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(PT.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof kj&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(GC.UNPUBLISH,(async(e,t,n)=>{if(this._p2pChannel instanceof kj){const{unpubMsg:i,uid:r}=e,s=this._users.find((e=>e.uid===r));if(!s)return oT.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(r)),void t();try{i.forEach((async e=>{let{stream_type:t}=e;const n=t===fC.Audio?wC.AUDIO:wC.VIDEO;await this._p2pChannel.unsubscribe(s,n),this._handleMuteStream(r,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(GC.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case KC.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,wC.VIDEO,!0);break;case KC.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,wC.AUDIO,!0);break;case KC.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,wC.VIDEO,!1);break;case KC.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,wC.AUDIO,!1)}})),this._gateway.signal.on(GC.RESTART_ICE,(async(e,t,n)=>{if(this._p2pChannel instanceof kj)try{const{direction:n,iceParameter:i}=e;n!==jT.SEND_ONLY||i?t(await this._p2pChannel.restartICE(n,i)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(GC.CANDIDATE,(e=>{if(this._p2pChannel instanceof kj){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(kC.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(GC.RESTART_ICE,e,n===jT.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(kC.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(GC.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(kC.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(GC.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(kC.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===H_.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(kC.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===H_.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(kC.StateChange,((e,t)=>{t===OC.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(kC.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===H_.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(kC.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===H_.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(kC.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(kC.RequestRePublishDataChannel,((e,t,n)=>{c_.all(e.map((async e=>{await this._p2pChannel.publishDataChannel([e]);const t={streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId};try{await this._gateway.publishDataChannel(this._uid,t,!0)}catch(e){if(e.code!==H_.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(kC.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===wC.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(kC.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(kC.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(kC.MediaReconnectStart,(e=>{this.safeEmit(gv.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(kC.MediaReconnectEnd,(e=>{this.safeEmit(gv.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(kC.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(kC.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof kj)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const i=n.value;let r;try{r=await this._gateway.restartICE({iceParameters:i})}catch(e){return void t.throw(e)}const{iceParameters:s}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(r);await t.next({remoteIceParameters:s})})),this._p2pChannel.on(kC.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(kC.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:i}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:r,gatewayAddress:s}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:i}),{dtlsParameters:o,iceParameters:a,candidates:c,rtpCapabilities:d,setup:l,cname:u}=FU(r,s);await this._p2pChannel.connect(a,o,c,d,l,u),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(kC.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(kC.P2PLost,(()=>{this.safeEmit(gv.P2P_LOST,this.store.uid)})),this._p2pChannel.on(kC.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(kC.ConnectionTypeChange,(e=>{this.safeEmit(gv.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(kC.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(kC.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!e)throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!e.inspectType||!Array.isArray(e.inspectType))throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Ii(t=["supervise","moderation"]).call(t,e))throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const t=new rF(e);this._inspect=t,this.handleVideoInspectEvents(this._inspect),await t.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},my)}catch(e){throw Array.isArray(e)?e[0]:e}}async disableContentInspect(){if(!this._inspect)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(z_(e,"enabled"),e){if(!t)throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(q_(t.interval,"interval",1e3,1/0),t&&t.extraInfo&&t.extraInfo.length>1024)throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] config.extraInfo length cannot exceed 1024 bytes"));if(t&&t.vendor&&t.vendor.length>1024)throw new ZT(H_.INVALID_PARAMS,"[".concat(this._clientId,"] config.vendor length cannot exceed 1024 bytes"));if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(t);const e=new UF(t);this._moderation=e,this.handleImageModerationEvents(this._moderation),await e.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},my)}catch(e){throw Array.isArray(e)?e[0]:e}}else{if(!this._moderation)throw new ZT(H_.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}setP2PTransport(e){if(function(e){Y_(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new ZT(H_.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,oT.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}handleImageModerationEvents(e){e.on(BC.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(gv.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===FC.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new ZT(H_.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(BC.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}handleVideoInspectEvents(e){e.on(LC.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(gv.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===PC.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(gv.CONTENT_INSPECT_ERROR,new ZT(H_.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(LC.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===H_.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return oT.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(gv.CONTENT_INSPECT_RESULT,e,t)})),e.on(LC.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}getJoinChannelServiceRecords(){return oT.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){z_(e,"enabled"),Vb("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],XF.prototype,"leave",null),QT([_T({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof NR))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),XT("design:type",Function),XT("design:paramtypes",[Object,Boolean]),XT("design:returntype",c_)],XF.prototype,"publish",null),QT([_T({argsMap:(e,t)=>(t||(t=[]),t instanceof wD?[t.getChannelId()]:(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))))}),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],XF.prototype,"unpublish",null),QT([_T({argsMap:(e,t,n,i)=>[t.uid,n,i]}),XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number]),XT("design:returntype",c_)],XF.prototype,"subscribe",null),QT([_T({argsMap:(e,t,n)=>[t,n]}),XT("design:type",Function),XT("design:paramtypes",[Object,String]),XT("design:returntype",c_)],XF.prototype,"presubscribe",null),QT([_T({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],XF.prototype,"massSubscribe",null),QT([_T({argsMap:(e,t,n,i)=>[t.uid,n,i]}),XT("design:type",Function),XT("design:paramtypes",[Cj,String,Number]),XT("design:returntype",c_)],XF.prototype,"unsubscribe",null),QT([_T({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),XT("design:type",Function),XT("design:paramtypes",[Array]),XT("design:returntype",c_)],XF.prototype,"massUnsubscribe",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],XF.prototype,"setLowStreamParameter",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],XF.prototype,"enableDualStream",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],XF.prototype,"disableDualStream",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String,Object]),XT("design:returntype",c_)],XF.prototype,"setClientRole",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String,Boolean]),XT("design:returntype",void 0)],XF.prototype,"setProxyServer",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object,Boolean]),XT("design:returntype",void 0)],XF.prototype,"setTurnServer",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",void 0)],XF.prototype,"setLicense",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Number]),XT("design:returntype",void 0)],XF.prototype,"startProxyServer",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],XF.prototype,"stopProxyServer",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",void 0)],XF.prototype,"setLocalAccessPointsV2",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Array,String]),XT("design:returntype",void 0)],XF.prototype,"setLocalAccessPoints",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Number]),XT("design:returntype",c_)],XF.prototype,"setRemoteDefaultVideoStreamType",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object,Number]),XT("design:returntype",c_)],XF.prototype,"setRemoteVideoStreamType",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object,Number]),XT("design:returntype",c_)],XF.prototype,"setStreamFallbackOption",null),QT([_T({argsMap:(e,t)=>[t]}),XT("design:type",Function),XT("design:paramtypes",[String,String,Uint8Array,Boolean]),XT("design:returntype",void 0)],XF.prototype,"setEncryptionConfig",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],XF.prototype,"renewToken",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",void 0)],XF.prototype,"enableAudioVolumeIndicator",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String,Boolean]),XT("design:returntype",c_)],XF.prototype,"startLiveStreaming",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],XF.prototype,"setLiveTranscoding",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",c_)],XF.prototype,"stopLiveStreaming",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String,Object]),XT("design:returntype",c_)],XF.prototype,"addInjectStreamUrl",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],XF.prototype,"removeInjectStreamUrl",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Wj]),XT("design:returntype",c_)],XF.prototype,"startChannelMediaRelay",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Wj]),XT("design:returntype",c_)],XF.prototype,"updateChannelMediaRelay",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],XF.prototype,"stopChannelMediaRelay",null),QT([_T({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],XF.prototype,"sendCustomReportMessage",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object,Object]),XT("design:returntype",c_)],XF.prototype,"pickSVCLayer",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],XF.prototype,"setRTMConfig",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Object]),XT("design:returntype",c_)],XF.prototype,"enableContentInspect",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",c_)],XF.prototype,"disableContentInspect",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Boolean,Object]),XT("design:returntype",c_)],XF.prototype,"setImageModeration",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[String]),XT("design:returntype",void 0)],XF.prototype,"setP2PTransport",null),QT([_T({reportResult:!0}),XT("design:type",Function),XT("design:paramtypes",[]),XT("design:returntype",Array)],XF.prototype,"getJoinChannelServiceRecords",null),QT([_T(),XT("design:type",Function),XT("design:paramtypes",[Boolean]),XT("design:returntype",c_)],XF.prototype,"setPublishAudioFilterEnabled",null);class ZF{constructor(e,t){sh(this,"id",0),sh(this,"element",void 0),sh(this,"peerPair",void 0),sh(this,"context",void 0),sh(this,"audioPlayerElement",void 0),sh(this,"audioTrack",void 0),ZF.count+=1,this.id=ZF.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new c_((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const i=await e(this.peerPair[1],"answer");await t(this.peerPair[0],i)}catch(e){throw new ZT(H_.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new ZT(H_.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new ZT(H_.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){oT.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}sh(ZF,"count",0);const $F=window.AudioContext||window.webkitAudioContext;class eB{constructor(){sh(this,"units",[]),sh(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return oT.debug("the system does not need to process local aec"),-1;this.context||(this.context=new $F);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new ZF(e,this.context),this.units.push(t)),t.startEchoCancellation(),oT.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return y_().name!==m_.SAFARI}}QT([_T({report:vT}),XT("design:type",Function),XT("design:paramtypes",[HTMLAudioElement]),XT("design:returntype",Number)],eB.prototype,"processExternalMediaAEC",null);const tB=new eB;function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function iB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nB(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rB=window||document;function sB(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!rB)return;const n=aB._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const i=e=>{if(!(e&&e.blockedURI&&(aB.onSecurityPolicyViolation||aB.getListeners(jC.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;Fb("CSP_DETECTED_HOSTNAME_LIST").some((e=>Ii(t).call(t,e)))&&(aB.onSecurityPolicyViolation&&"function"==typeof aB.onSecurityPolicyViolation&&aB.onSecurityPolicyViolation(e),aB.getListeners(jC.SECURITY_POLICY_VIOLATION).length>0&&aB.safeEmit(jC.SECURITY_POLICY_VIOLATION,e))};n&&rB.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||aB.getListeners(jC.SECURITY_POLICY_VIOLATION).length>0)&&rB.addEventListener("securitypolicyviolation",i),aB._cspEventHandlerPointer=i}Vb("PROCESS_ID","process-".concat(iy(8,""),"-").concat(iy(4,""),"-").concat(iy(4,""),"-").concat(iy(4,""),"-").concat(iy(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void oT.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();oT.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(jb,e)){const{value:i,expires:r}=t[e];if(r&&r<=n)return;Bb[e]=i,jb[e]=i}}))}catch(t){oT.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(Bb.AREAS)&&Bb.AREAS.length>0&&fw(Bb.AREAS,!0);const oB=(e,t,n)=>{oT.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),Vb(e,t,n)},aB=function(e){const t=new dv,n=e,i={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===jC.SECURITY_POLICY_VIOLATION&&sB(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return iB(iB({},n),i)}({__TRACK_LIST__:iR,VERSION:xb,BUILD:Ub,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:oB,getParameter:Fb,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const n=(await t.createOffer()).sdp;if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new ZT(H_.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=vT.reportApiInvoke(null,{name:hv.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:pv.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket;t=!!(e&&n&&i)}catch(e){return oT.error("check system requirement failed: ",e),!1}let n=!1;const i=y_();i.name===m_.CHROME&&Number(i.version)>=58&&(!A_()||C_())&&(n=!0),i.name===m_.FIREFOX&&Number(i.version)>=56&&(n=!0),i.name===m_.OPERA&&Number(i.version)>=45&&(n=!0),i.name===m_.SAFARI&&Number(i.version)>=11&&(n=!0),(V_()||y_().name===m_.QQ)&&(n=!0),oT.debug("checkSystemRequirements, api:",t,"browser",n);const r=t&&n;return e.onSuccess(r),r},getDevices:function(e){return $R.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return $R.getRecordingDevices(e)},getCameras:function(e){return $R.getCamerasDevices(e)},getElectronScreenSources:HR,getPlaybackDevices:function(e){return $R.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=vT.reportApiInvoke(null,{name:hv.CREATE_CLIENT,options:[t],tag:pv.TRACER});try{!function(e){Y_(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Y_(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&Y_(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&Q_(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&bv(e.turnServer),void 0!==e.httpRetryConfig&&yv(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&yv(e.websocketRetryConfig)}(t)}catch(e){throw n.onError(e),e}return qF()||("vp9"===t.codec&&(t.codec="vp8",oT.debug("browser not support vp9, force use vp8")),Vb("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),n.onSuccess(),new XF(QF(QF({forceWaitGatewayResponse:!0},t),{},{role:Ii(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_CAM_VIDEO_TRACK,options:[GI({},e)]}),n=TI(e),i=iy(8,"track-cam-");let r=null;const s="720p_auto"===e.encoderConfig;oT.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{r=(await JR({video:n},i)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new K_(H_.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(oT)}e.optimizationMode&&HI(i,r,e,Zw(e.encoderConfig));const o=new BI(r,e,n,e.scalabiltyMode?eR(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return s&&o.startMonitorStats(),t.onSuccess(o.getTrackId()),oT.info("create camera video success, trackId:",i),o},createCustomVideoTrack:function(e){const t=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new FI(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?eR(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,iy(8,"track-cus-"),[oR.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),oT.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_SCREEN_VIDEO_TRACK,options:[GI({},e),t]}),i="720p_auto"===e.encoderConfig;e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const r=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&w_()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:i,surfaceSwitching:r,systemAudio:s}=e;(O_(107)||k_(107)||D_(93))&&(n&&(Y_(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),i?(Y_(i,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=i):t.selfBrowserSurface="include",r&&(Y_(r,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=r)),(O_(105)||k_(105)||D_(91))&&s&&(Y_(s,"systemAudio",["exclude","include"]),t.systemAudio=s),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const o=e.encoderConfig?$w(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:o?o.width:void 0,maxHeight:o?o.height:void 0},o&&(o.frameRate&&("number"==typeof o.frameRate?(t.mandatory.maxFrameRate=o.frameRate,t.mandatory.minFrameRate=o.frameRate):(t.mandatory.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||void 0,t.mandatory.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||void 0),t.frameRate=o.frameRate),o.width&&(t.width=o.width),o.height&&(t.height=o.height)),t}(e),s=iy(8,"track-scr-v-");let o=null,a=null;const c=Ww();if(!c.supportShareAudio&&"enable"===t){const e=new K_(H_.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw(oT)}oT.info("start create screen video track with config",e,"withAudio",t,"trackId",s);try{const e=await JR({screen:r,screenAudio:"auto"===t?c.supportShareAudio:"enable"===t},s);o=e.getVideoTracks()[0]||null,a=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!o){const e=new K_(H_.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(oT)}if(!a&&"enable"===t){o&&o.stop();const e=new K_(H_.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw(oT)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(HI(s,o,e,e.encoderConfig&&$w(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const d=new FI(o,e.encoderConfig?$w(e.encoderConfig):{},e.scalabiltyMode?eR(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,s,[oR.SCREEN_TRACK]);if(i&&d.startMonitorStats(),!a)return n.onSuccess(d.getTrackId()),oT.info("create screen video track success","video:",d.getTrackId()),d;const l=new vI(a,void 0,iy(8,"track-scr-a-"),!1);return n.onSuccess([d.getTrackId(),l.getTrackId()]),oT.info("create screen video track success","video:",d.getTrackId(),"audio:",l.getTrackId()),[d,l]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),i="720p_auto"===t.encoderConfig,r=TI(t),s=CI(e),o=iy(8,"track-mic-"),a=iy(8,"track-cam-");let c=null,d=null;oT.info("start create camera video track(".concat(a,") and microphone audio track(").concat(o,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await JR({audio:s,video:r},"".concat(o,"-").concat(a));c=e.getAudioTracks()[0],d=e.getVideoTracks()[0]}catch(e){throw n.onError(e),e}if(!c||!d){const e=new K_(H_.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(e),e.throw(oT)}t.optimizationMode&&HI(a,d,t,Zw(t.encoderConfig));const l=new yI(c,e,s,o),u=new BI(d,t,r,t.scalabiltyMode?eR(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return i&&u.startMonitorStats(),n.onSuccess([l.getTrackId(),u.getTrackId()]),oT.info("create camera video track(".concat(a,") and microphone audio track(").concat(o,") success")),[l,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=CI(e),i=iy(8,"track-mic-");let r=null;oT.info("start create microphone audio track with config",JSON.stringify(e),"trackId",i);try{r=(await JR({audio:n},i)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new K_(H_.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(oT)}const s=new yI(r,e,n,i);return t.onSuccess(s.getTrackId()),oT.info("create microphone audio track success, trackId:",i),s},createCustomAudioTrack:function(e){const t=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new vI(e.mediaStreamTrack,e.encoderConfig?nR(e.encoderConfig):{},iy(8,"track-cus-"),!1);return oT.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:i}=e;let{source:r}=e;const s={source:r instanceof AudioBuffer?"AudioBuffer":r instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":r,cacheOnlineFile:n,encoderConfig:i},o=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CREATE_BUFFER_AUDIO_TRACK,options:[s]});if(Fb("DISABLE_WEBAUDIO"))throw new K_(H_.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const a=iy(8,"track-buf-");oT.info("start create buffer source audio track with config",JSON.stringify(s),"trackId",a);const c=r;if(!(r instanceof AudioBuffer))try{r=await RI(r,n)}catch(e){return o.onError(e),e.throw(oT)}const d=new AI(r),l=new SI(c,d,i?nR(i):{},a);return oT.info("create buffer source audio track success, trackId:",a),o.onSuccess(l.getTrackId()),l},setAppType:function(e){if(oT.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw oT.debug("Invalid appType"),new ZT(H_.INVALID_PARAMS,"invalid app type",e);Vb("APP_TYPE",Math.floor(e))},setLogLevel:function(e){oT.setLogLevel(e)},enableLogUpload:function(){Fb("USE_NEW_LOG")?Vb("UPLOAD_LOG",!0):oT.enableLogUpload()},disableLogUpload:function(){Fb("USE_NEW_LOG")?Vb("UPLOAD_LOG",!1):oT.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new Wj},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof vI||e instanceof JI)){const e=new ZT(H_.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const i=e instanceof vI?e.getTrackLabel():"remote_track",r=e.getVolumeLevel();let s=r,o=r;const a=Date.now();return new c_((r=>{const c=setInterval((()=>{const d=e.getVolumeLevel();s=d>s?d:s,o=d<o?d:o;const l=s-o>1e-4,u=Date.now()-a;if(l||u>t){clearInterval(c);const t=l,o={duration:u,deviceLabel:i,maxVolumeLevel:s,result:t};oT.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(o))),n.onSuccess(o),r(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=vT.reportApiInvoke(null,{tag:pv.TRACER,name:hv.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof FI||e instanceof qI)){const e=new ZT(H_.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const i=e instanceof FI?e.getTrackLabel():"remote_track",r=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(R_()||T_())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([r]),s.play();const o=document.createElement("canvas");o.width=160,o.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,n,i){let r,s=0,o=null;return new c_(((a,c)=>{function d(){s>i&&r&&(r(),a(s));const t=n.getContext("2d");if(!t){const e=new ZT(H_.UNEXPECTED_ERROR,"can not get canvas 2d context.");return oT.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const d=t.getImageData(0,0,n.width,n.height),l=Math.floor(d.data.length/3);if(o){for(let e=0;e<l;e+=3)if(d.data[e]!==o[e])return s+=1,void(o=d.data);o=d.data}else o=d.data}setTimeout((()=>{r&&(r(),a(s))}),t),r=jR((()=>{d()}),30)}))}(s,t,o,4),c=Date.now()-e}catch(e){throw n.onError(e),e}YF===m_.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const d=a>4,l={duration:c,changedPicNum:a,deviceLabel:i,result:d};return oT.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(l))),n.onSuccess(l),d},setArea:fw,audioElementPlayCenter:aI,resumeAudioContext:function(){aI.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){tB.processExternalMediaAEC(e)},registerExtensions:function(e){const t=Fb("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Ii(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=oT.extLog,n.reporter.hookApiInvoke=vT.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=Fb(e)}))})),oB("PLUGIN_INFO",t)},ChannelMediaRelayError:pC,ChannelMediaRelayEvent:uC,ChannelMediaRelayState:hC,RemoteStreamFallbackType:dR,RemoteStreamType:cR,ConnectionDisconnectedReason:mv,AudienceLatencyLevelType:fv,AREAS:vC});return Object.defineProperties(aB,{onAudioAutoplayFailed:{get:()=>tI.onAudioAutoplayFailed,set:e=>{tI.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>tI.onAutoplayFailed,set:e=>{tI.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>aB._onSecurityPolicyViolation,set(e){aB._onSecurityPolicyViolation=e,sB(e)}},__CLIENT_LIST__:{get:()=>Fb("SHOW_GLOBAL_CLIENT_LIST")?TT:[]}}),$R.on(TR.CAMERA_DEVICE_CHANGED,(e=>{oT.info("camera device changed",JSON.stringify(e)),aB.onCameraChanged&&aB.onCameraChanged(e),aB.safeEmit(jC.CAMERA_CHANGED,e)})),$R.on(TR.RECORDING_DEVICE_CHANGED,(e=>{oT.info("microphone device changed",JSON.stringify(e)),aB.onMicrophoneChanged&&aB.onMicrophoneChanged(e),aB.safeEmit(jC.MICROPHONE_CHANGED,e)})),$R.on(TR.PLAYOUT_DEVICE_CHANGED,(e=>{oT.debug("playout device changed",JSON.stringify(e)),aB.onPlaybackDeviceChanged&&aB.onPlaybackDeviceChanged(e),aB.safeEmit(jC.PLAYBACK_DEVICE_CHANGED,e)})),aI.onAutoplayFailed=()=>{oT.info("detect audio element autoplay failed"),tI.onAudioAutoplayFailed&&tI.onAudioAutoplayFailed()},PR.on("autoplay-failed",(()=>{oT.info("detect webaudio autoplay failed"),tI.onAudioAutoplayFailed&&tI.onAudioAutoplayFailed(),aB.safeEmit(jC.AUTOPLAY_FAILED)})),PR.on(Gw.STATE_CHANGE,((e,t)=>{oT.info("audio context state changed: ".concat(t," => ").concat(e)),aB.onAudioContextStateChanged&&aB.onAudioContextStateChanged(e,t),aB.safeEmit(jC.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),Iv.on(vv.NETWORK_STATE_CHANGE,((e,t)=>{oT.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=aB),aB}()},4569:(e,t,n)=>{e.exports=n(8036)},3381:(e,t,n)=>{"use strict";var i=n(3589),r=n(7297),s=n(9301),o=n(9774),a=n(1804),c=n(9145),d=n(5411),l=n(6789),u=n(4531),h=n(6569),p=n(6261);e.exports=function(e){return new Promise((function(t,n){var f,m=e.data,g=e.headers,E=e.responseType;function _(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}i.isFormData(m)&&i.isStandardBrowserEnv()&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(y+":"+S)}var b=a(e.baseURL,e.url);function T(){if(v){var i="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,s={data:E&&"text"!==E&&"json"!==E?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:i,config:e,request:v};r((function(e){t(e),_()}),(function(e){n(e),_()}),s),v=null}}if(v.open(e.method.toUpperCase(),o(b,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=T:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(T)},v.onabort=function(){v&&(n(new u("Request aborted",u.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new u("Network Error",u.ERR_NETWORK,e,v,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new u(t,i.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,e,v)),v=null},i.isStandardBrowserEnv()){var C=(e.withCredentials||d(b))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;C&&(g[e.xsrfHeaderName]=C)}"setRequestHeader"in v&&i.forEach(g,(function(e,t){"undefined"===typeof m&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),E&&"json"!==E&&(v.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){v&&(n(!e||e&&e.type?new h:e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),m||(m=null);var A=p(b);A&&-1===["http","https","file"].indexOf(A)?n(new u("Unsupported protocol "+A+":",u.ERR_BAD_REQUEST,e)):v.send(m)}))}},8036:(e,t,n)=>{"use strict";var i=n(3589),r=n(4049),s=n(3773),o=n(777);var a=function e(t){var n=new s(t),a=r(s.prototype.request,n);return i.extend(a,s.prototype,n),i.extend(a,n),a.create=function(n){return e(o(t,n))},a}(n(1709));a.Axios=s,a.CanceledError=n(6569),a.CancelToken=n(6857),a.isCancel=n(5517),a.VERSION=n(7600).version,a.toFormData=n(1397),a.AxiosError=n(4531),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(8089),a.isAxiosError=n(9580),e.exports=a,e.exports.default=a},6857:(e,t,n)=>{"use strict";var i=n(6569);function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},6569:(e,t,n)=>{"use strict";var i=n(4531);function r(e){i.call(this,null==e?"canceled":e,i.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(r,i,{__CANCEL__:!0}),e.exports=r},5517:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:(e,t,n)=>{"use strict";var i=n(3589),r=n(9774),s=n(7470),o=n(2733),a=n(777),c=n(1804),d=n(7835),l=d.validators;function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&d.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var s,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!r){var u=[o,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(c),s=Promise.resolve(t);u.length;)s=s.then(u.shift(),u.shift());return s}for(var h=t;i.length;){var p=i.shift(),f=i.shift();try{h=p(h)}catch(m){f(m);break}}try{s=o(h)}catch(m){return Promise.reject(m)}for(;c.length;)s=s.then(c.shift(),c.shift());return s},u.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return r(t,e.params,e.paramsSerializer)},i.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(a(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}u.prototype[e]=t(),u.prototype[e+"Form"]=t(!0)})),e.exports=u},4531:(e,t,n)=>{"use strict";var i=n(3589);function r(e,t,n,i,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}i.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=r.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(r,o),Object.defineProperty(s,"isAxiosError",{value:!0}),r.from=function(e,t,n,o,a,c){var d=Object.create(s);return i.toFlatObject(e,d,(function(e){return e!==Error.prototype})),r.call(d,e.message,t,n,o,a),d.name=e.name,c&&Object.assign(d,c),d},e.exports=r},7470:(e,t,n)=>{"use strict";var i=n(3589);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},1804:(e,t,n)=>{"use strict";var i=n(4044),r=n(9549);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},2733:(e,t,n)=>{"use strict";var i=n(3589),r=n(2693),s=n(5517),o=n(1709),a=n(6569);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:(e,t,n)=>{"use strict";var i=n(3589);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function s(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function o(e){if(!i.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function c(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var d={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return i.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=d[e]||s,r=t(e);i.isUndefined(r)&&t!==c||(n[e]=r)})),n}},7297:(e,t,n)=>{"use strict";var i=n(4531);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new i("Request failed with status code "+n.status,[i.ERR_BAD_REQUEST,i.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:(e,t,n)=>{"use strict";var i=n(3589),r=n(1709);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,(function(n){e=n.call(s,e,t)})),e}},1709:(e,t,n)=>{"use strict";var i=n(3589),r=n(4341),s=n(4531),o=n(6789),a=n(1397),c={"Content-Type":"application/x-www-form-urlencoded"};function d(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e))return e;if(i.isArrayBufferView(e))return e.buffer;if(i.isURLSearchParams(e))return d(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,s=i.isObject(e),o=t&&t["Content-Type"];if((n=i.isFileList(e))||s&&"multipart/form-data"===o){var c=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,c&&new c)}return s||"application/json"===o?(d(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o){if("SyntaxError"===a.name)throw s.from(a,s.ERR_BAD_RESPONSE,this,null,this.response);throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(c)})),e.exports=l},6789:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:e=>{e.exports={version:"0.27.2"}},4049:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},9774:(e,t,n)=>{"use strict";var i=n(3589);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},9549:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:(e,t,n)=>{"use strict";var i=n(3589);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:(e,t,n)=>{"use strict";var i=n(3589);e.exports=function(e){return i.isObject(e)&&!0===e.isAxiosError}},5411:(e,t,n)=>{"use strict";var i=n(3589);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:(e,t,n)=>{"use strict";var i=n(3589);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},3035:e=>{e.exports=null},9145:(e,t,n)=>{"use strict";var i=n(3589),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(i.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},6261:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:(e,t,n)=>{"use strict";var i=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":i.isDate(e)?e.toISOString():i.isArrayBuffer(e)||i.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(s,o){if(i.isPlainObject(s)||i.isArray(s)){if(-1!==n.indexOf(s))throw Error("Circular reference detected in "+o);n.push(s),i.forEach(s,(function(n,s){if(!i.isUndefined(n)){var a,c=o?o+"."+s:s;if(n&&!o&&"object"===typeof n)if(i.endsWith(s,"{}"))n=JSON.stringify(n);else if(i.endsWith(s,"[]")&&(a=i.toArray(n)))return void a.forEach((function(e){!i.isUndefined(e)&&t.append(c,r(e))}));e(n,c)}})),n.pop()}else t.append(o,r(s))}(e),t}},7835:(e,t,n)=>{"use strict";var i=n(7600).version,r=n(4531),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};s.transitional=function(e,t,n){function s(e,t){return"[Axios v"+i+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new r(s(i," has been removed"+(t?" in "+t:"")),r.ERR_DEPRECATED);return t&&!o[i]&&(o[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),s=i.length;s-- >0;){var o=i[s],a=t[o];if(a){var c=e[o],d=void 0===c||a(c,o,e);if(!0!==d)throw new r("option "+o+" must be "+d,r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new r("Unknown option "+o,r.ERR_BAD_OPTION)}},validators:s}},3589:(e,t,n)=>{"use strict";var i,r=n(4049),s=Object.prototype.toString,o=(i=Object.create(null),function(e){var t=s.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function c(e){return Array.isArray(e)}function d(e){return"undefined"===typeof e}var l=a("ArrayBuffer");function u(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=a("Date"),f=a("File"),m=a("Blob"),g=a("FileList");function E(e){return"[object Function]"===s.call(e)}var _=a("URLSearchParams");function v(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),c(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var y,S=(y="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return y&&e instanceof y});e.exports={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||s.call(e)===t||E(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:u,isPlainObject:h,isUndefined:d,isDate:p,isFile:f,isBlob:m,isFunction:E,isStream:function(e){return u(e)&&E(e.pipe)},isURLSearchParams:_,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:v,merge:function e(){var t={};function n(n,i){h(t[i])&&h(n)?t[i]=e(t[i],n):h(n)?t[i]=e({},n):c(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)v(arguments[i],n);return t},extend:function(e,t,n){return v(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var i,r,s,o={};t=t||{};do{for(r=(i=Object.getOwnPropertyNames(e)).length;r-- >0;)o[s=i[r]]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var t=e.length;if(d(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:S,isFileList:g}},1694:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var o=r.apply(null,n);o&&e.push(o)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},2110:(e,t,n)=>{"use strict";var i=n(8309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return i.isMemo(e)?o:a[e.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=o;var d=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var o=l(n);u&&(o=o.concat(u(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var E=o[g];if(!s[E]&&(!i||!i[E])&&(!m||!m[E])&&(!a||!a[E])){var _=h(n,E);try{d(t,E,_)}catch(v){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,E=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case l:case u:case s:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case g:case m:case c:return e;default:return t}}case r:return t}}}function b(e){return S(e)===u}t.AsyncMode=l,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=c,t.Element=i,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return b(e)||S(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return S(e)===d},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return S(e)===h},t.isFragment=function(e){return S(e)===s},t.isLazy=function(e){return S(e)===g},t.isMemo=function(e){return S(e)===m},t.isPortal=function(e){return S(e)===r},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===o},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===u||e===a||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===d||e.$$typeof===h||e.$$typeof===_||e.$$typeof===v||e.$$typeof===y||e.$$typeof===E)},t.typeOf=S},8309:(e,t,n)=>{"use strict";e.exports=n(746)},173:(e,t,n)=>{"use strict";var i,r=n(2791),s=(i=r)&&"object"===typeof i&&"default"in i?i.default:i,o=n(1338),a=new o,c=a.getBrowser(),d=a.getCPU(),l=a.getDevice(),u=a.getEngine(),h=a.getOS(),p=a.getUA(),f=function(e){return a.setUA(e)},m=function(e){if(e){var t=new o(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(e){return t.setUA(e)}}}console.error("No userAgent string was provided")},g=Object.freeze({ClientUAInstance:a,browser:c,cpu:d,device:l,engine:u,os:h,ua:p,setUa:f,parseUserAgent:m});function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){return _="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S.apply(this,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function C(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(c){a=!0,r=c}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var I="mobile",N="tablet",O="smarttv",k="console",D="wearable",P="embedded",x=void 0,L={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},M={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},U={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},j=function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none")},V=function(){return!("undefined"===typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},F=function(e){var t=V();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)},B=function(e,t,n,i){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vendor:j(t.vendor),model:j(t.model),os:j(n.name),osVersion:j(n.version),ua:j(i)})};var W=function(e){return e.type===I},G=function(e){return e.type===N},H=function(e){var t=e.type;return t===I||t===N},K=function(e){return e.type===O},z=function(e){return e.type===x},Y=function(e){return e.type===D},q=function(e){return e.type===k},J=function(e){return e.type===P},Q=function(e){var t=e.vendor;return j(t)},X=function(e){var t=e.model;return j(t)},Z=function(e){var t=e.type;return j(t,"browser")},$=function(e){return e.name===M.Android},ee=function(e){return e.name===M.Windows},te=function(e){return e.name===M.MAC_OS},ne=function(e){return e.name===M.WindowsPhone},ie=function(e){return e.name===M.IOS},re=function(e){var t=e.version;return j(t)},se=function(e){var t=e.name;return j(t)},oe=function(e){return e.name===L.Chrome},ae=function(e){return e.name===L.Firefox},ce=function(e){return e.name===L.Chromium},de=function(e){return e.name===L.Edge},le=function(e){return e.name===L.Yandex},ue=function(e){var t=e.name;return t===L.Safari||t===L.MobileSafari},he=function(e){return e.name===L.MobileSafari},pe=function(e){return e.name===L.Opera},fe=function(e){var t=e.name;return t===L.InternetExplorer||t===L.Ie},me=function(e){return e.name===L.MIUI},ge=function(e){return e.name===L.SamsungBrowser},Ee=function(e){var t=e.version;return j(t)},_e=function(e){var t=e.major;return j(t)},ve=function(e){var t=e.name;return j(t)},ye=function(e){var t=e.name;return j(t)},Se=function(e){var t=e.version;return j(t)},be=function(){var e=V(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return"string"===typeof t&&/electron/.test(t)},Te=function(e){return"string"===typeof e&&-1!==e.indexOf("Edg/")},Ce=function(){var e=V();return e&&(/iPad|iPhone|iPod/.test(e.platform)||"MacIntel"===e.platform&&e.maxTouchPoints>1)&&!window.MSStream},Ae=function(){return F("iPad")},we=function(){return F("iPhone")},Re=function(){return F("iPod")},Ie=function(e){return j(e)};function Ne(e){var t=e||g,n=t.device,i=t.browser,r=t.os,s=t.engine,o=t.ua;return{isSmartTV:K(n),isConsole:q(n),isWearable:Y(n),isEmbedded:J(n),isMobileSafari:he(i)||Ae(),isChromium:ce(i),isMobile:H(n)||Ae(),isMobileOnly:W(n),isTablet:G(n)||Ae(),isBrowser:z(n),isDesktop:z(n),isAndroid:$(r),isWinPhone:ne(r),isIOS:ie(r)||Ae(),isChrome:oe(i),isFirefox:ae(i),isSafari:ue(i),isOpera:pe(i),isIE:fe(i),osVersion:re(r),osName:se(r),fullBrowserVersion:Ee(i),browserVersion:_e(i),browserName:ve(i),mobileVendor:Q(n),mobileModel:X(n),engineName:ye(s),engineVersion:Se(s),getUA:Ie(o),isEdge:de(i)||Te(o),isYandex:le(i),deviceType:Z(n),isIOS13:Ce(),isIPad13:Ae(),isIPhone13:we(),isIPod13:Re(),isElectron:be(),isEdgeChromium:Te(o),isLegacyEdge:de(i)&&!Te(o),isWindows:ee(r),isMacOs:te(r),isMIUI:me(i),isSamsungBrowser:ge(i)}}var Oe=K(l),ke=q(l),De=Y(l),Pe=J(l),xe=he(c)||Ae(),Le=ce(c),Me=H(l)||Ae(),Ue=W(l),je=G(l)||Ae(),Ve=z(l),Fe=z(l),Be=$(h),We=ne(h),Ge=ie(h)||Ae(),He=oe(c),Ke=ae(c),ze=ue(c),Ye=pe(c),qe=fe(c),Je=re(h),Qe=se(h),Xe=Ee(c),Ze=_e(c),$e=ve(c),et=Q(l),tt=X(l),nt=ye(u),it=Se(u),rt=Ie(p),st=de(c)||Te(p),ot=le(c),at=Z(l),ct=Ce(),dt=Ae(),lt=we(),ut=Re(),ht=be(),pt=Te(p),ft=de(c)&&!Te(p),mt=ee(h),gt=te(h),Et=me(c),_t=ge(c);function vt(e){var t=e||window.navigator.userAgent;return m(t)}t.tq=Me},4463:(e,t,n)=>{"use strict";var i=n(2791),r=n(5296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var E=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function v(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(E,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(E,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(E,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),b=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),R=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var M,U=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function F(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&"string"===typeof d.stack){for(var r=d.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var c="\n"+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case b:return"Portal";case A:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function z(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=K(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,le,ue=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var Ee=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Te=null,Ce=null;function Ae(e){if(e=vr(e)){if("function"!==typeof be)throw Error(s(280));var t=e.stateNode;t&&(t=Sr(t),be(e.stateNode,e.type,t))}}function we(e){Te?Ce?Ce.push(e):Ce=[e]:Te=e}function Re(){if(Te){var e=Te,t=Ce;if(Ce=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Oe=!1;function ke(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ie(e,t,n)}finally{Oe=!1,(null!==Te||null!==Ce)&&(Ne(),Re())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var i=Sr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(l)try{var xe={};Object.defineProperty(xe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",xe,xe),window.removeEventListener("test",xe,xe)}catch(le){Pe=!1}function Le(e,t,n,i,r,s,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(l){this.onError(l)}}var Me=!1,Ue=null,je=!1,Ve=null,Fe={onError:function(e){Me=!0,Ue=e}};function Be(e,t,n,i,r,s,o,a,c){Me=!1,Ue=null,Le.apply(Fe,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return He(r),e;if(o===i)return He(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=o;break}if(c===i){a=!0,i=r,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,i=r;break}if(c===i){a=!0,i=o,n=r;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?ze(e):null}function ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=ze(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,qe=r.unstable_cancelCallback,Je=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Xe=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var dt=64,lt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ut(a):0!==(s&=o)&&(i=ut(s))}else 0!==(o=n&~r)?i=ut(o):0!==s&&(i=ut(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Et(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var vt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,bt,Tt,Ct,At,wt=!1,Rt=[],It=null,Nt=null,Ot=null,kt=new Map,Dt=new Map,Pt=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&bt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ut(e){var t=_r(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void At(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&bt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);ye=i,n.target.dispatchEvent(i),ye=null,t.shift()}return!0}function Vt(e,t,n){jt(e)&&n.delete(t)}function Ft(){wt=!1,null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Ot&&jt(Ot)&&(Ot=null),kt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Wt(e){function t(t){return Bt(t,e)}if(0<Rt.length){Bt(Rt[0],e);for(var n=1;n<Rt.length;n++){var i=Rt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Nt&&Bt(Nt,e),null!==Ot&&Bt(Ot,e),kt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(i=Pt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Pt.shift()}var Gt=y.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,i){var r=vt,s=Gt.transition;Gt.transition=null;try{vt=1,Yt(e,t,n,i)}finally{vt=r,Gt.transition=s}}function zt(e,t,n,i){var r=vt,s=Gt.transition;Gt.transition=null;try{vt=4,Yt(e,t,n,i)}finally{vt=r,Gt.transition=s}}function Yt(e,t,n,i){if(Ht){var r=Jt(e,t,n,i);if(null===r)Hi(e,t,i,qt,n),Lt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return It=Mt(It,e,t,n,i,r),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,i,r),!0;case"mouseover":return Ot=Mt(Ot,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return kt.set(s,Mt(kt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Lt(e,i),4&t&&-1<xt.indexOf(e)){for(;null!==r;){var s=vr(r);if(null!==s&&St(s),null===(s=Jt(e,t,n,i))&&Hi(e,t,i,qt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var qt=null;function Jt(e,t,n,i){if(qt=null,null!==(e=_r(e=Se(i))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,i=n.length,r="value"in Xt?Xt.value:Xt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=sn(dn),un=U({},dn,{view:0,detail:0}),hn=sn(un),pn=U({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),mn=sn(U({},pn,{dataTransfer:0})),gn=sn(U({},un,{relatedTarget:0})),En=sn(U({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=U({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(_n),yn=sn(U({},dn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function An(){return Cn}var wn=U({},un,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=sn(wn),In=sn(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(U({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),On=sn(U({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(kn),Pn=[9,13,27,32],xn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!xn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Vn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,i){we(i),0<(t=zi(t,"onChange")).length&&(n=new ln("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var zn=null,Yn=null;function qn(e){ji(e,0)}function Jn(e){if(Y(yr(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function ti(){zn&&(zn.detachEvent("onpropertychange",ni),Yn=zn=null)}function ni(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];Kn(t,Yn,e,Se(e)),ke(qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(zn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function si(e,t){if("click"===e)return Jn(t)}function oi(e,t){if("input"===e||"change"===e)return Jn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ci(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function di(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function li(e,t){var n,i=di(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=di(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=li(n,s);var o=li(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=l&&"documentMode"in document&&11>=document.documentMode,gi=null,Ei=null,_i=null,vi=!1;function yi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==gi||gi!==q(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&ci(_i,i)||(_i=i,0<(i=zi(Ei,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function Si(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bi={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionend:Si("Transition","TransitionEnd")},Ti={},Ci={};function Ai(e){if(Ti[e])return Ti[e];if(!bi[e])return e;var t,n=bi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ci)return Ti[e]=n[t];return e}l&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);var wi=Ai("animationend"),Ri=Ai("animationiteration"),Ii=Ai("animationstart"),Ni=Ai("transitionend"),Oi=new Map,ki="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){Oi.set(e,t),c(t,[e])}for(var Pi=0;Pi<ki.length;Pi++){var xi=ki[Pi];Di(xi.toLowerCase(),"on"+(xi[0].toUpperCase()+xi.slice(1)))}Di(wi,"onAnimationEnd"),Di(Ri,"onAnimationIteration"),Di(Ii,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Ni,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Ui(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,c,d){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var l=Ue;Me=!1,Ue=null,je||(je=!0,Ve=l)}}(i,t,void 0,e),e.currentTarget=null}function ji(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==s&&r.isPropagationStopped())break e;Ui(r,a,d),s=c}else for(o=0;o<i.length;o++){if(c=(a=i[o]).instance,d=a.currentTarget,a=a.listener,c!==s&&r.isPropagationStopped())break e;Ui(r,a,d),s=c}}}if(je)throw e=Ve,je=!1,Ve=null,e}function Vi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Gi(t,e,2,!1),n.add(i))}function Fi(e,t,n){var i=0;t&&(i|=4),Gi(n,e,i,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Wi(e){if(!e[Bi]){e[Bi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mi.has(t)||Fi(t,!1,e),Fi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,Fi("selectionchange",!1,t))}}function Gi(e,t,n,i){switch(Qt(t)){case 1:var r=Kt;break;case 4:r=zt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=_r(a)))return;if(5===(c=o.tag)||6===c){i=s=o;continue e}a=a.parentNode}}i=i.return}ke((function(){var i=s,r=Se(n),o=[];e:{var a=Oi.get(e);if(void 0!==a){var c=ln,d=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Rn;break;case"focusin":d="focus",c=gn;break;case"focusout":d="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case wi:case Ri:case Ii:c=En;break;case Ni:c=On;break;case"scroll":c=hn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=In}var l=0!==(4&t),u=!l&&"scroll"===e,h=l?null!==a?a+"Capture":null:a;l=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=De(f,h))&&l.push(Ki(f,m,p)))),u)break;f=f.return}0<l.length&&(a=new c(a,d,null,n,r),o.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ye||!(d=n.relatedTarget||n.fromElement)||!_r(d)&&!d[fr])&&(c||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=i,null!==(d=(d=n.relatedTarget||n.toElement)?_r(d):null)&&(d!==(u=We(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(c=null,d=i),c!==d)){if(l=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==c?a:yr(c),p=null==d?a:yr(d),(a=new l(m,f+"leave",c,n,r)).target=u,a.relatedTarget=p,m=null,_r(r)===i&&((l=new l(h,f+"enter",d,n,r)).target=p,l.relatedTarget=u,m=l),u=m,c&&d)e:{for(h=d,f=0,p=l=c;p;p=Yi(p))f++;for(p=0,m=h;m;m=Yi(m))p++;for(;0<f-p;)l=Yi(l),f--;for(;0<p-f;)h=Yi(h),p--;for(;f--;){if(l===h||null!==h&&l===h.alternate)break e;l=Yi(l),h=Yi(h)}l=null}else l=null;null!==c&&qi(o,a,c,l,!1),null!==d&&null!==u&&qi(o,u,d,l,!0)}if("select"===(c=(a=i?yr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Qn;else if(Hn(a))if(Xn)g=oi;else{g=ri;var E=ii}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=si);switch(g&&(g=g(e,i))?Kn(o,g,n,r):(E&&E(e,a,i),"focusout"===e&&(E=a._wrapperState)&&E.controlled&&"number"===a.type&&ee(a,"number",a.value)),E=i?yr(i):window,e){case"focusin":(Hn(E)||"true"===E.contentEditable)&&(gi=E,Ei=i,_i=null);break;case"focusout":_i=Ei=gi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,yi(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":yi(o,n,r)}var _;if(xn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Wn?Fn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Wn&&(_=en()):(Zt="value"in(Xt=r)?Xt.value:Xt.textContent,Wn=!0)),0<(E=zi(i,v)).length&&(v=new yn(v,e,null,n,r),o.push({event:v,listeners:E}),_?v.data=_:null!==(_=Bn(n))&&(v.data=_))),(_=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,jn);case"textInput":return(e=t.data)===jn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!xn&&Fn(e,t)?(e=en(),$t=Zt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=zi(i,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=_))}ji(o,t)}))}function Ki(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=De(e,n))&&i.unshift(Ki(e,s,r)),null!=(s=De(e,t))&&i.push(Ki(e,s,r))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,c=a.alternate,d=a.stateNode;if(null!==c&&c===i)break;5===a.tag&&null!==d&&(a=d,r?null!=(c=De(n,s))&&o.unshift(Ki(n,c,a)):r||null!=(c=De(n,s))&&o.push(Ki(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Ji=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Ji,"\n").replace(Qi,"")}function Zi(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(s(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Wt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Wt(t)}function dr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,pr="__reactProps$"+ur,fr="__reactContainer$"+ur,mr="__reactEvents$"+ur,gr="__reactListeners$"+ur,Er="__reactHandles$"+ur;function _r(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lr(e);null!==e;){if(n=e[hr])return n;e=lr(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Sr(e){return e[pr]||null}var br=[],Tr=-1;function Cr(e){return{current:e}}function Ar(e){0>Tr||(e.current=br[Tr],br[Tr]=null,Tr--)}function wr(e,t){Tr++,br[Tr]=e.current,e.current=t}var Rr={},Ir=Cr(Rr),Nr=Cr(!1),Or=Rr;function kr(e,t){var n=e.type.contextTypes;if(!n)return Rr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Dr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){Ar(Nr),Ar(Ir)}function xr(e,t,n){if(Ir.current!==Rr)throw Error(s(168));wr(Ir,t),wr(Nr,n)}function Lr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,G(e)||"Unknown",r));return U({},n,i)}function Mr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,Or=Ir.current,wr(Ir,e),wr(Nr,Nr.current),!0}function Ur(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Lr(e,t,Or),i.__reactInternalMemoizedMergedChildContext=e,Ar(Nr),Ar(Ir),wr(Ir,e)):Ar(Nr),wr(Nr,n)}var jr=null,Vr=!1,Fr=!1;function Br(e){null===jr?jr=[e]:jr.push(e)}function Wr(){if(!Fr&&null!==jr){Fr=!0;var e=0,t=vt;try{var n=jr;for(vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}jr=null,Vr=!1}catch(r){throw null!==jr&&(jr=jr.slice(e+1)),Ye($e,Wr),r}finally{vt=t,Fr=!1}}return null}var Gr=y.ReactCurrentBatchConfig;function Hr(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Kr=Cr(null),zr=null,Yr=null,qr=null;function Jr(){qr=Yr=zr=null}function Qr(e){var t=Kr.current;Ar(Kr),e._currentValue=t}function Xr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Zr(e,t){zr=e,qr=Yr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function $r(e){var t=e._currentValue;if(qr!==e)if(e={context:e,memoizedValue:t,next:null},null===Yr){if(null===zr)throw Error(s(308));Yr=e,zr.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return t}var es=null,ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ss(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,nd(e)?(null===(e=n.interleaved)?(t.next=t,null===es?es=[n]:es.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}function as(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cs(e,t,n,i){var r=e.updateQueue;ts=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var c=a,d=c.next;c.next=null,null===o?s=d:o.next=d,o=c;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===a?l.firstBaseUpdate=d:a.next=d,l.lastBaseUpdate=c))}if(null!==s){var u=r.baseState;for(o=0,l=d=c=null,a=s;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==l&&(l=l.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=U({},u,h);break e;case 2:ts=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(d=l=p,c=u):l=l.next=p,o|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===l&&(c=u),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=l,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);xc|=o,e.lanes=o,e.memoizedState=u}}function ds(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var ls=(new i.Component).refs;function us(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hs={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Zc(),r=$c(e),s=rs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ss(e,s),null!==(t=ed(e,r,i))&&os(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Zc(),r=$c(e),s=rs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ss(e,s),null!==(t=ed(e,r,i))&&os(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zc(),i=$c(e),r=rs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ss(e,r),null!==(t=ed(e,i,n))&&os(t,e,i)}};function ps(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,s))}function fs(e,t,n){var i=!1,r=Rr,s=t.contextType;return"object"===typeof s&&null!==s?s=$r(s):(r=Dr(t)?Or:Ir.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?kr(e,r):Rr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ms(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function gs(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ls,ns(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=$r(s):(s=Dr(t)?Or:Ir.current,r.context=kr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(us(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&hs.enqueueReplaceState(r,r.state,null),cs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var Es=[],_s=0,vs=null,ys=0,Ss=[],bs=0,Ts=null,Cs=1,As="";function ws(e,t){Es[_s++]=ys,Es[_s++]=vs,vs=e,ys=t}function Rs(e,t,n){Ss[bs++]=Cs,Ss[bs++]=As,Ss[bs++]=Ts,Ts=e;var i=Cs;e=As;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Cs=1<<32-ot(t)+r|n<<r|i,As=s+e}else Cs=1<<s|n<<r|i,As=e}function Is(e){null!==e.return&&(ws(e,1),Rs(e,1,0))}function Ns(e){for(;e===vs;)vs=Es[--_s],Es[_s]=null,ys=Es[--_s],Es[_s]=null;for(;e===Ts;)Ts=Ss[--bs],Ss[bs]=null,As=Ss[--bs],Ss[bs]=null,Cs=Ss[--bs],Ss[bs]=null}var Os=null,ks=null,Ds=!1,Ps=null;function xs(e,t){var n=kd(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Os=e,ks=dr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Os=e,ks=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ts?{id:Cs,overflow:As}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kd(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Os=e,ks=null,!0);default:return!1}}function Ms(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Us(e){if(Ds){var t=ks;if(t){var n=t;if(!Ls(e,t)){if(Ms(e))throw Error(s(418));t=dr(n.nextSibling);var i=Os;t&&Ls(e,t)?xs(i,n):(e.flags=-4097&e.flags|2,Ds=!1,Os=e)}}else{if(Ms(e))throw Error(s(418));e.flags=-4097&e.flags|2,Ds=!1,Os=e}}}function js(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Os=e}function Vs(e){if(e!==Os)return!1;if(!Ds)return js(e),Ds=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ks)){if(Ms(e)){for(e=ks;e;)e=dr(e.nextSibling);throw Error(s(418))}for(;t;)xs(e,t),t=dr(t.nextSibling)}if(js(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ks=dr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ks=null}}else ks=Os?dr(e.stateNode.nextSibling):null;return!0}function Fs(){ks=Os=null,Ds=!1}function Bs(e){null===Ps?Ps=[e]:Ps.push(e)}function Ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===ls&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hs(e){return(0,e._init)(e._payload)}function Ks(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Pd(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=Ud(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n,i){var s=n.type;return s===T?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Hs(s)===t.type)?((i=r(t,n.props)).ref=Ws(e,t,n),i.return=e,i):((i=xd(n.type,n.key,n.props,null,e.mode,i)).ref=Ws(e,t,n),i.return=e,i)}function l(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jd(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,s){return null===t||7!==t.tag?((t=Ld(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ud(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=xd(t.type,t.key,t.props,null,e.mode,n)).ref=Ws(e,null,t),n.return=e,n;case b:return(t=jd(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ld(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:c(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===r?d(e,t,n,i):null;case b:return n.key===r?l(e,t,n,i):null;case D:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||L(n))return null!==r?null:u(e,t,n,i,null);Gs(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case S:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case b:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case D:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||L(i))return u(t,e=e.get(n)||null,i,r,null);Gs(t,i)}return null}function m(r,s,a,c){for(var d=null,l=null,u=s,m=s=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var E=p(r,u,a[m],c);if(null===E){null===u&&(u=g);break}e&&u&&null===E.alternate&&t(r,u),s=o(E,s,m),null===l?d=E:l.sibling=E,l=E,u=g}if(m===a.length)return n(r,u),Ds&&ws(r,m),d;if(null===u){for(;m<a.length;m++)null!==(u=h(r,a[m],c))&&(s=o(u,s,m),null===l?d=u:l.sibling=u,l=u);return Ds&&ws(r,m),d}for(u=i(r,u);m<a.length;m++)null!==(g=f(u,r,m,a[m],c))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),s=o(g,s,m),null===l?d=g:l.sibling=g,l=g);return e&&u.forEach((function(e){return t(r,e)})),Ds&&ws(r,m),d}function g(r,a,c,d){var l=L(c);if("function"!==typeof l)throw Error(s(150));if(null==(c=l.call(c)))throw Error(s(151));for(var u=l=null,m=a,g=a=0,E=null,_=c.next();null!==m&&!_.done;g++,_=c.next()){m.index>g?(E=m,m=null):E=m.sibling;var v=p(r,m,_.value,d);if(null===v){null===m&&(m=E);break}e&&m&&null===v.alternate&&t(r,m),a=o(v,a,g),null===u?l=v:u.sibling=v,u=v,m=E}if(_.done)return n(r,m),Ds&&ws(r,g),l;if(null===m){for(;!_.done;g++,_=c.next())null!==(_=h(r,_.value,d))&&(a=o(_,a,g),null===u?l=_:u.sibling=_,u=_);return Ds&&ws(r,g),l}for(m=i(r,m);!_.done;g++,_=c.next())null!==(_=f(m,r,g,_.value,d))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),a=o(_,a,g),null===u?l=_:u.sibling=_,u=_);return e&&m.forEach((function(e){return t(r,e)})),Ds&&ws(r,g),l}return function e(i,s,o,c){if("object"===typeof o&&null!==o&&o.type===T&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var d=o.key,l=s;null!==l;){if(l.key===d){if((d=o.type)===T){if(7===l.tag){n(i,l.sibling),(s=r(l,o.props.children)).return=i,i=s;break e}}else if(l.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===D&&Hs(d)===l.type){n(i,l.sibling),(s=r(l,o.props)).ref=Ws(i,l,o),s.return=i,i=s;break e}n(i,l);break}t(i,l),l=l.sibling}o.type===T?((s=Ld(o.props.children,i.mode,c,o.key)).return=i,i=s):((c=xd(o.type,o.key,o.props,null,i.mode,c)).ref=Ws(i,s,o),c.return=i,i=c)}return a(i);case b:e:{for(l=o.key;null!==s;){if(s.key===l){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=jd(o,i.mode,c)).return=i,i=s}return a(i);case D:return e(i,s,(l=o._init)(o._payload),c)}if(te(o))return m(i,s,o,c);if(L(o))return g(i,s,o,c);Gs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Ud(o,i.mode,c)).return=i,i=s),a(i)):n(i,s)}}var zs=Ks(!0),Ys=Ks(!1),qs={},Js=Cr(qs),Qs=Cr(qs),Xs=Cr(qs);function Zs(e){if(e===qs)throw Error(s(174));return e}function $s(e,t){switch(wr(Xs,t),wr(Qs,e),wr(Js,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(Js),wr(Js,t)}function eo(){Ar(Js),Ar(Qs),Ar(Xs)}function to(e){Zs(Xs.current);var t=Zs(Js.current),n=ce(t,e.type);t!==n&&(wr(Qs,e),wr(Js,n))}function no(e){Qs.current===e&&(Ar(Js),Ar(Qs))}var io=Cr(0);function ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var so=[];function oo(){for(var e=0;e<so.length;e++)so[e]._workInProgressVersionPrimary=null;so.length=0}var ao=y.ReactCurrentDispatcher,co=y.ReactCurrentBatchConfig,lo=0,uo=null,ho=null,po=null,fo=!1,mo=!1,go=0,Eo=0;function _o(){throw Error(s(321))}function vo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function yo(e,t,n,i,r,o){if(lo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?ia:ra,e=n(i,r),mo){o=0;do{if(mo=!1,go=0,25<=o)throw Error(s(301));o+=1,po=ho=null,t.updateQueue=null,ao.current=sa,e=n(i,r)}while(mo)}if(ao.current=na,t=null!==ho&&null!==ho.next,lo=0,po=ho=uo=null,fo=!1,t)throw Error(s(300));return e}function So(){var e=0!==go;return go=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?uo.memoizedState=po=e:po=po.next=e,po}function To(){if(null===ho){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===po?uo.memoizedState:po.next;if(null!==t)po=t,ho=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===po?uo.memoizedState=po=e:po=po.next=e}return po}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ho,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var c=a=null,d=null,l=o;do{var u=l.lane;if((lo&u)===u)null!==d&&(d=d.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),i=l.hasEagerState?l.eagerState:e(i,l.action);else{var h={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===d?(c=d=h,a=i):d=d.next=h,uo.lanes|=u,xc|=u}l=l.next}while(null!==l&&l!==o);null===d?a=i:d.next=c,ai(i,t.memoizedState)||(ba=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=d,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,uo.lanes|=o,xc|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Ro(){}function Io(e,t){var n=uo,i=To(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,ba=!0),i=i.queue,Vo(ko.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,xo(9,Oo.bind(null,n,i,r,t),void 0,null),null===Rc)throw Error(s(349));0!==(30&lo)||No(n,t,r)}return r}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,i){t.value=n,t.getSnapshot=i,Do(t)&&ed(e,1,-1)}function ko(e,t,n){return n((function(){Do(t)&&ed(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Po(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,uo,e),[t.memoizedState,e]}function xo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Lo(){return To().memoizedState}function Mo(e,t,n,i){var r=bo();uo.flags|=e,r.memoizedState=xo(1|t,n,void 0,void 0===i?null:i)}function Uo(e,t,n,i){var r=To();i=void 0===i?null:i;var s=void 0;if(null!==ho){var o=ho.memoizedState;if(s=o.destroy,null!==i&&vo(i,o.deps))return void(r.memoizedState=xo(t,n,s,i))}uo.flags|=e,r.memoizedState=xo(1|t,n,s,i)}function jo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Uo(2048,8,e,t)}function Fo(e,t){return Uo(4,2,e,t)}function Bo(e,t){return Uo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Wo.bind(null,t,e),n)}function Ho(){}function Ko(e,t){var n=To();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&vo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=To();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&vo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Yo(e,t,n){return 0===(21&lo)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),uo.lanes|=n,xc|=n,e.baseState=!0),t)}function qo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var i=co.transition;co.transition={};try{e(!1),t()}finally{vt=n,co.transition=i}}function Jo(){return To().memoizedState}function Qo(e,t,n){var i=$c(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e)?$o(t,n):(ea(e,t,n),null!==(e=ed(e,i,n=Zc()))&&ta(e,t,i))}function Xo(e,t,n){var i=$c(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))$o(t,r);else{ea(e,t,r);var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o))return}catch(c){}null!==(e=ed(e,i,n=Zc()))&&ta(e,t,i)}}function Zo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function $o(e,t){mo=fo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ea(e,t,n){nd(e)?(null===(e=t.interleaved)?(n.next=n,null===es?es=[t]:es.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ta(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}var na={readContext:$r,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ia={readContext:$r,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:$r,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=bo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Qo.bind(null,uo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Po,useDebugValue:Ho,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=qo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=uo,r=bo();if(Ds){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rc)throw Error(s(349));0!==(30&lo)||No(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,jo(ko.bind(null,i,o,e),[e]),i.flags|=2048,xo(9,Oo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=Rc.identifierPrefix;if(Ds){var n=As;t=":"+t+"R"+(n=(Cs&~(1<<32-ot(Cs)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Eo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ra={readContext:$r,useCallback:Ko,useContext:$r,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Fo,useLayoutEffect:Bo,useMemo:zo,useReducer:Ao,useRef:Lo,useState:function(){return Ao(Co)},useDebugValue:Ho,useDeferredValue:function(e){return Yo(To(),ho.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Io,useId:Jo,unstable_isNewReconciler:!1},sa={readContext:$r,useCallback:Ko,useContext:$r,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Fo,useLayoutEffect:Bo,useMemo:zo,useReducer:wo,useRef:Lo,useState:function(){return wo(Co)},useDebugValue:Ho,useDeferredValue:function(e){var t=To();return null===ho?t.memoizedState=e:Yo(t,ho.memoizedState,e)},useTransition:function(){return[wo(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Io,useId:Jo,unstable_isNewReconciler:!1};function oa(e,t){try{var n="",i=t;do{n+=B(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r}}function aa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ca,da,la,ua,ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=rs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wc||(Wc=!0,Gc=i),aa(0,t)},n}function fa(e,t,n){(n=rs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){aa(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){aa(0,t),"function"!==typeof i&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ha;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ad.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ea(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=rs(-1,1)).tag=2,ss(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function _a(e,t){if(!Ds)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function va(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ya(e,t,n){var i=t.pendingProps;switch(Ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return va(t),null;case 1:case 17:return Dr(t.type)&&Pr(),va(t),null;case 3:return i=t.stateNode,eo(),Ar(Nr),Ar(Ir),oo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Vs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Ps&&(od(Ps),Ps=null))),da(e,t),va(t),null;case 5:no(t);var r=Zs(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)la(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return va(t),null}if(e=Zs(Js.current),Vs(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[hr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":Vi("cancel",i),Vi("close",i);break;case"iframe":case"object":case"embed":Vi("load",i);break;case"video":case"audio":for(r=0;r<Li.length;r++)Vi(Li[r],i);break;case"source":Vi("error",i);break;case"img":case"image":case"link":Vi("error",i),Vi("load",i);break;case"details":Vi("toggle",i);break;case"input":Q(i,o),Vi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Vi("invalid",i);break;case"textarea":re(i,o),Vi("invalid",i)}for(var c in _e(n,o),r=null,o)if(o.hasOwnProperty(c)){var d=o[c];"children"===c?"string"===typeof d?i.textContent!==d&&(!0!==o.suppressHydrationWarning&&Zi(i.textContent,d,e),r=["children",d]):"number"===typeof d&&i.textContent!==""+d&&(!0!==o.suppressHydrationWarning&&Zi(i.textContent,d,e),r=["children",""+d]):a.hasOwnProperty(c)&&null!=d&&"onScroll"===c&&Vi("scroll",i)}switch(n){case"input":z(i),$(i,o,!0);break;case"textarea":z(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{c=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),"select"===n&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[hr]=t,e[pr]=i,ca(e,t,!1,!1),t.stateNode=e;e:{switch(c=ve(n,i),n){case"dialog":Vi("cancel",e),Vi("close",e),r=i;break;case"iframe":case"object":case"embed":Vi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Li.length;r++)Vi(Li[r],e);r=i;break;case"source":Vi("error",e),r=i;break;case"img":case"image":case"link":Vi("error",e),Vi("load",e),r=i;break;case"details":Vi("toggle",e),r=i;break;case"input":Q(e,i),r=J(e,i),Vi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=U({},i,{value:void 0}),Vi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Vi("invalid",e)}for(o in _e(n,r),d=r)if(d.hasOwnProperty(o)){var l=d[o];"style"===o?ge(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&ue(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vi("scroll",e):null!=l&&v(e,o,l,c))}switch(n){case"input":z(e),$(e,i,!1);break;case"textarea":z(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return va(t),null;case 6:if(e&&null!=t.stateNode)ua(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Zs(Xs.current),Zs(Js.current),Vs(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(o=i.nodeValue!==n)&&null!==(e=Os))switch(e.tag){case 3:Zi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return va(t),null;case 13:if(Ar(io),i=t.memoizedState,Ds&&null!==ks&&0!==(1&t.mode)&&0===(128&t.flags)){for(i=ks;i;)i=dr(i.nextSibling);return Fs(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Vs(t),null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[hr]=t}else Fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return va(t),null}return null!==Ps&&(od(Ps),Ps=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Vs(t):n=null!==e.memoizedState,i!==n&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===Dc&&(Dc=3):md())),null!==t.updateQueue&&(t.flags|=4),va(t),null);case 4:return eo(),da(e,t),null===e&&Wi(t.stateNode.containerInfo),va(t),null;case 10:return Qr(t.type._context),va(t),null;case 19:if(Ar(io),null===(o=t.memoizedState))return va(t),null;if(i=0!==(128&t.flags),null===(c=o.rendering))if(i)_a(o,!1);else{if(0!==Dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ro(e))){for(t.flags|=128,_a(o,!1),null!==(i=c.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wr(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Fc&&(t.flags|=128,i=!0,_a(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ro(c))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),_a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!Ds)return va(t),null}else 2*Xe()-o.renderingStartTime>Fc&&1073741824!==n&&(t.flags|=128,i=!0,_a(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=io.current,wr(io,i?1&n|2:1&n),t):(va(t),null);case 22:case 23:return ud(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Oc)&&(va(t),6&t.subtreeFlags&&(t.flags|=8192)):va(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}ca=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},da=function(){},la=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Zs(Js.current);var s,o=null;switch(n){case"input":r=J(e,r),i=J(e,i),o=[];break;case"select":r=U({},r,{value:void 0}),i=U({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(l in _e(n,i),n=null,r)if(!i.hasOwnProperty(l)&&r.hasOwnProperty(l)&&null!=r[l])if("style"===l){var c=r[l];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in i){var d=i[l];if(c=null!=r?r[l]:void 0,i.hasOwnProperty(l)&&d!==c&&(null!=d||null!=c))if("style"===l)if(c){for(s in c)!c.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in d)d.hasOwnProperty(s)&&c[s]!==d[s]&&(n||(n={}),n[s]=d[s])}else n||(o||(o=[]),o.push(l,n)),n=d;else"dangerouslySetInnerHTML"===l?(d=d?d.__html:void 0,c=c?c.__html:void 0,null!=d&&c!==d&&(o=o||[]).push(l,d)):"children"===l?"string"!==typeof d&&"number"!==typeof d||(o=o||[]).push(l,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=d&&"onScroll"===l&&Vi("scroll",e),o||c===d||(o=[])):(o=o||[]).push(l,d))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ua=function(e,t,n,i){n!==i&&(t.flags|=4)};var Sa=y.ReactCurrentOwner,ba=!1;function Ta(e,t,n,i){t.child=null===e?Ys(t,null,n,i):zs(t,e.child,n,i)}function Ca(e,t,n,i,r){n=n.render;var s=t.ref;return Zr(t,r),i=yo(e,t,n,i,s,r),n=So(),null===e||ba?(Ds&&n&&Is(t),t.flags|=1,Ta(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ka(e,t,r))}function Aa(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Dd(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=xd(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wa(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(o,i)&&e.ref===t.ref)return Ka(e,t,r)}return t.flags|=1,(e=Pd(s,i)).ref=t.ref,e.return=t,t.child=e}function wa(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(ci(s,i)&&e.ref===t.ref){if(ba=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ka(e,t,r);0!==(131072&e.flags)&&(ba=!0)}}return Na(e,t,n,i,r)}function Ra(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(kc,Oc),Oc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wr(kc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,wr(kc,Oc),Oc|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,wr(kc,Oc),Oc|=i;return Ta(e,t,r,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,i,r){var s=Dr(n)?Or:Ir.current;return s=kr(t,s),Zr(t,r),n=yo(e,t,n,i,s,r),i=So(),null===e||ba?(Ds&&i&&Is(t),t.flags|=1,Ta(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ka(e,t,r))}function Oa(e,t,n,i,r){if(Dr(n)){var s=!0;Mr(t)}else s=!1;if(Zr(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fs(t,n,i),gs(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,d=n.contextType;"object"===typeof d&&null!==d?d=$r(d):d=kr(t,d=Dr(n)?Or:Ir.current);var l=n.getDerivedStateFromProps,u="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||c!==d)&&ms(t,o,i,d),ts=!1;var h=t.memoizedState;o.state=h,cs(t,i,o,r),c=t.memoizedState,a!==i||h!==c||Nr.current||ts?("function"===typeof l&&(us(t,n,l,i),c=t.memoizedState),(a=ts||ps(t,n,a,i,h,c,d))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=d,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,is(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Hr(t.type,a),o.props=d,u=t.pendingProps,h=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=$r(c):c=kr(t,c=Dr(n)?Or:Ir.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||h!==c)&&ms(t,o,i,c),ts=!1,h=t.memoizedState,o.state=h,cs(t,i,o,r);var f=t.memoizedState;a!==u||h!==f||Nr.current||ts?("function"===typeof p&&(us(t,n,p,i),f=t.memoizedState),(d=ts||ps(t,n,d,i,h,f,c)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=c,i=d):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return ka(e,t,n,i,s,r)}function ka(e,t,n,i,r,s){Ia(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Ur(t,n,!1),Ka(e,t,s);i=t.stateNode,Sa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=zs(t,e.child,null,s),t.child=zs(t,null,a,s)):Ta(e,t,a,s),t.memoizedState=i.state,r&&Ur(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?xr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xr(0,t.context,!1),$s(e,t.containerInfo)}function Pa(e,t,n,i,r){return Fs(),Bs(r),t.flags|=256,Ta(e,t,n,i),t.child}var xa={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ua(e,t,n){var i,r=t.pendingProps,o=io.current,a=!1,c=0!==(128&t.flags);if((i=c)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),wr(io,1&o),null===e)return Us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Md(o,r,0,null),e=Ld(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=xa,e):ja(t,o));if(null!==(o=e.memoizedState)){if(null!==(i=o.dehydrated)){if(c)return 256&t.flags?(t.flags&=-257,Ba(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Md({mode:"visible",children:r.children},o,0,null),(a=Ld(a,o,n,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&zs(t,e.child,null,n),t.child.memoizedState=La(n),t.memoizedState=xa,a);if(0===(1&t.mode))t=Ba(e,t,n,null);else if("$!"===i.data)t=Ba(e,t,n,Error(s(419)));else if(r=0!==(n&e.childLanes),ba||r){if(null!==(r=Rc)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(r=0!==(a&(r.suspendedLanes|n))?0:a)&&r!==o.retryLane&&(o.retryLane=r,ed(e,r,-1))}md(),t=Ba(e,t,n,Error(s(421)))}else"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rd.bind(null,e),i._reactRetry=t,t=null):(n=o.treeContext,ks=dr(i.nextSibling),Os=t,Ds=!0,Ps=null,null!==n&&(Ss[bs++]=Cs,Ss[bs++]=As,Ss[bs++]=Ts,Cs=n.id,As=n.overflow,Ts=t),(t=ja(t,t.pendingProps.children)).flags|=4096);return t}return a?(r=Fa(e,t,r.children,r.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?La(n):Ma(o,n),a.childLanes=e.childLanes&~n,t.memoizedState=xa,r):(n=Va(e,t,r.children,n),t.memoizedState=null,n)}return a?(r=Fa(e,t,r.children,r.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?La(n):Ma(o,n),a.childLanes=e.childLanes&~n,t.memoizedState=xa,r):(n=Va(e,t,r.children,n),t.memoizedState=null,n)}function ja(e,t){return(t=Md({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,i){var r=e.child;return e=r.sibling,n=Pd(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function Fa(e,t,n,i,r){var s=t.mode,o=(e=e.child).sibling,a={mode:"hidden",children:n};return 0===(1&s)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=a,t.deletions=null):(n=Pd(e,a)).subtreeFlags=14680064&e.subtreeFlags,null!==o?i=Pd(o,i):(i=Ld(i,s,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function Ba(e,t,n,i){return null!==i&&Bs(i),zs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Xr(e.return,t,n)}function Ga(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ha(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Ta(e,t,i.children,n),0!==(2&(i=io.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(wr(io,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ro(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ga(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ro(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pd(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pd(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function za(e,t){switch(Ns(t),t.tag){case 1:return Dr(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ar(Nr),Ar(Ir),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ar(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));Fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar(io),null;case 4:return eo(),null;case 10:return Qr(t.type._context),null;case 22:case 23:return ud(),null;default:return null}}var Ya=!1,qa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Qa=null;function Xa(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cd(e,t,i)}else n.current=null}function Za(e,t,n){try{n()}catch(i){Cd(e,t,i)}}var $a=!1;function ec(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&Za(t,n,s)}r=r.next}while(r!==i)}}function tc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function nc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[Er])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rc(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}function ac(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ac(e,t,n),e=e.sibling;null!==e;)ac(e,t,n),e=e.sibling}var cc=null,dc=!1;function lc(e,t,n){for(n=n.child;null!==n;)uc(e,t,n),n=n.sibling}function uc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:qa||Xa(n,t);case 6:var i=cc,r=dc;cc=null,lc(e,t,n),dc=r,null!==(cc=i)&&(dc?(e=cc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cc.removeChild(n.stateNode));break;case 18:null!==cc&&(dc?(e=cc,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Wt(e)):cr(cc,n.stateNode));break;case 4:i=cc,r=dc,cc=n.stateNode.containerInfo,dc=!0,lc(e,t,n),cc=i,dc=r;break;case 0:case 11:case 14:case 15:if(!qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&Za(n,t,o),r=r.next}while(r!==i)}lc(e,t,n);break;case 1:if(!qa&&(Xa(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Cd(n,t,a)}lc(e,t,n);break;case 21:lc(e,t,n);break;case 22:1&n.mode?(qa=(i=qa)||null!==n.memoizedState,lc(e,t,n),qa=i):lc(e,t,n);break;default:lc(e,t,n)}}function hc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var i=Id.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function pc(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:cc=c.stateNode,dc=!1;break e;case 3:case 4:cc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===cc)throw Error(s(160));uc(o,a,r),cc=null,dc=!1;var d=r.alternate;null!==d&&(d.return=null),r.return=null}catch(l){Cd(r,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fc(t,e),t=t.sibling}function fc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),mc(e),4&i){try{ec(3,e,e.return),tc(3,e)}catch(m){Cd(e,e.return,m)}try{ec(5,e,e.return)}catch(m){Cd(e,e.return,m)}}break;case 1:pc(t,e),mc(e),512&i&&null!==n&&Xa(n,n.return);break;case 5:if(pc(t,e),mc(e),512&i&&null!==n&&Xa(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){Cd(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===c&&"radio"===o.type&&null!=o.name&&X(r,o),ve(c,a);var l=ve(c,o);for(a=0;a<d.length;a+=2){var u=d[a],h=d[a+1];"style"===u?ge(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):v(r,u,h,l)}switch(c){case"input":Z(r,o);break;case"textarea":se(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(m){Cd(e,e.return,m)}}break;case 6:if(pc(t,e),mc(e),4&i){if(null===e.stateNode)throw Error(s(162));l=e.stateNode,u=e.memoizedProps;try{l.nodeValue=u}catch(m){Cd(e,e.return,m)}}break;case 3:if(pc(t,e),mc(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){Cd(e,e.return,m)}break;case 4:default:pc(t,e),mc(e);break;case 13:pc(t,e),mc(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Vc=Xe()),4&i&&hc(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(qa=(u=qa)||l,pc(t,e),qa=u):pc(t,e),mc(e),8192&i){u=null!==e.memoizedState;e:for(h=null,p=e;;){if(5===p.tag){if(null===h){h=p;try{r=p.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=p.stateNode,a=void 0!==(d=p.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,c.style.display=me("display",a))}catch(m){Cd(e,e.return,m)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){Cd(e,e.return,m)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}if(u&&!l&&0!==(1&e.mode))for(Qa=e,e=e.child;null!==e;){for(l=Qa=e;null!==Qa;){switch(h=(u=Qa).child,u.tag){case 0:case 11:case 14:case 15:ec(4,u,u.return);break;case 1:if(Xa(u,u.return),"function"===typeof(o=u.stateNode).componentWillUnmount){p=u,f=u.return;try{r=p,o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(m){Cd(p,f,m)}}break;case 5:Xa(u,u.return);break;case 22:if(null!==u.memoizedState){vc(l);continue}}null!==h?(h.return=u,Qa=h):vc(l)}e=e.sibling}}break;case 19:pc(t,e),mc(e),4&i&&hc(e);case 21:}}function mc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rc(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),ac(e,sc(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;oc(e,sc(e),o);break;default:throw Error(s(161))}}catch(a){Cd(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,n){Qa=e,Ec(e,t,n)}function Ec(e,t,n){for(var i=0!==(1&e.mode);null!==Qa;){var r=Qa,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ya;if(!o){var a=r.alternate,c=null!==a&&null!==a.memoizedState||qa;a=Ya;var d=qa;if(Ya=o,(qa=c)&&!d)for(Qa=r;null!==Qa;)c=(o=Qa).child,22===o.tag&&null!==o.memoizedState?yc(r):null!==c?(c.return=o,Qa=c):yc(r);for(;null!==s;)Qa=s,Ec(s,t,n),s=s.sibling;Qa=r,Ya=a,qa=d}_c(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Qa=s):_c(e)}}function _c(e){for(;null!==Qa;){var t=Qa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qa||tc(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!qa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Hr(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ds(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ds(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var u=l.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}qa||512&t.flags&&nc(t)}catch(p){Cd(t,t.return,p)}}if(t===e){Qa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qa=n;break}Qa=t.return}}function vc(e){for(;null!==Qa;){var t=Qa;if(t===e){Qa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qa=n;break}Qa=t.return}}function yc(e){for(;null!==Qa;){var t=Qa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tc(4,t)}catch(c){Cd(t,n,c)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(c){Cd(t,r,c)}}var s=t.return;try{nc(t)}catch(c){Cd(t,s,c)}break;case 5:var o=t.return;try{nc(t)}catch(c){Cd(t,o,c)}}}catch(c){Cd(t,t.return,c)}if(t===e){Qa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Qa=a;break}Qa=t.return}}var Sc,bc=Math.ceil,Tc=y.ReactCurrentDispatcher,Cc=y.ReactCurrentOwner,Ac=y.ReactCurrentBatchConfig,wc=0,Rc=null,Ic=null,Nc=0,Oc=0,kc=Cr(0),Dc=0,Pc=null,xc=0,Lc=0,Mc=0,Uc=null,jc=null,Vc=0,Fc=1/0,Bc=null,Wc=!1,Gc=null,Hc=null,Kc=!1,zc=null,Yc=0,qc=0,Jc=null,Qc=-1,Xc=0;function Zc(){return 0!==(6&wc)?Xe():-1!==Qc?Qc:Qc=Xe()}function $c(e){return 0===(1&e.mode)?1:0!==(2&wc)&&0!==Nc?Nc&-Nc:null!==Gr.transition?(0===Xc&&(Xc=mt()),Xc):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ed(e,t,n){if(50<qc)throw qc=0,Jc=null,Error(s(185));var i=td(e,t);return null===i?null:(Et(i,t,n),0!==(2&wc)&&i===Rc||(i===Rc&&(0===(2&wc)&&(Lc|=t),4===Dc&&ad(i,Nc)),id(i,n),1===t&&0===wc&&0===(1&e.mode)&&(Fc=Xe()+500,Vr&&Wr())),i)}function td(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function nd(e){return(null!==Rc||null!==es)&&0!==(1&e.mode)&&0===(2&wc)}function id(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=r[o];-1===c?0!==(a&n)&&0===(a&i)||(r[o]=pt(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=ht(e,e===Rc?Nc:0);if(0===i)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Vr=!0,Br(e)}(cd.bind(null,e)):Br(cd.bind(null,e)),or((function(){0===wc&&Wr()})),n=null;else{switch(yt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Nd(n,rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rd(e,t){if(Qc=-1,Xc=0,0!==(6&wc))throw Error(s(327));var n=e.callbackNode;if(bd()&&e.callbackNode!==n)return null;var i=ht(e,e===Rc?Nc:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gd(e,i);else{t=i;var r=wc;wc|=2;var o=fd();for(Rc===e&&Nc===t||(Bc=null,Fc=Xe()+500,hd(e,t));;)try{_d();break}catch(c){pd(e,c)}Jr(),Tc.current=o,wc=r,null!==Ic?t=0:(Rc=null,Nc=0,t=Dc)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=sd(e,r))),1===t)throw n=Pc,hd(e,0),ad(e,i),id(e,Xe()),n;if(6===t)ad(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gd(e,i))&&(0!==(o=ft(e))&&(i=o,t=sd(e,o))),1===t))throw n=Pc,hd(e,0),ad(e,i),id(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sd(e,jc,Bc);break;case 3:if(ad(e,i),(130023424&i)===i&&10<(t=Vc+500-Xe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){Zc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Sd.bind(null,e,jc,Bc),t);break}Sd(e,jc,Bc);break;case 4:if(ad(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bc(i/1960))-i)){e.timeoutHandle=ir(Sd.bind(null,e,jc,Bc),i);break}Sd(e,jc,Bc);break;default:throw Error(s(329))}}}return id(e,Xe()),e.callbackNode===n?rd.bind(null,e):null}function sd(e,t){var n=Uc;return e.current.memoizedState.isDehydrated&&(hd(e,t).flags|=256),2!==(e=gd(e,t))&&(t=jc,jc=n,null!==t&&od(t)),e}function od(e){null===jc?jc=e:jc.push.apply(jc,e)}function ad(e,t){for(t&=~Mc,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function cd(e){if(0!==(6&wc))throw Error(s(327));bd();var t=ht(e,0);if(0===(1&t))return id(e,Xe()),null;var n=gd(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=sd(e,i))}if(1===n)throw n=Pc,hd(e,0),ad(e,t),id(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sd(e,jc,Bc),id(e,Xe()),null}function dd(e,t){var n=wc;wc|=1;try{return e(t)}finally{0===(wc=n)&&(Fc=Xe()+500,Vr&&Wr())}}function ld(e){null!==zc&&0===zc.tag&&0===(6&wc)&&bd();var t=wc;wc|=1;var n=Ac.transition,i=vt;try{if(Ac.transition=null,vt=1,e)return e()}finally{vt=i,Ac.transition=n,0===(6&(wc=t))&&Wr()}}function ud(){Oc=kc.current,Ar(kc)}function hd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ic)for(n=Ic.return;null!==n;){var i=n;switch(Ns(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Pr();break;case 3:eo(),Ar(Nr),Ar(Ir),oo();break;case 5:no(i);break;case 4:eo();break;case 13:case 19:Ar(io);break;case 10:Qr(i.type._context);break;case 22:case 23:ud()}n=n.return}if(Rc=e,Ic=e=Pd(e.current,null),Nc=Oc=t,Dc=0,Pc=null,Mc=Lc=xc=0,jc=Uc=null,null!==es){for(t=0;t<es.length;t++)if(null!==(i=(n=es[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}es=null}return e}function pd(e,t){for(;;){var n=Ic;try{if(Jr(),ao.current=na,fo){for(var i=uo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}fo=!1}if(lo=0,po=ho=uo=null,mo=!1,go=0,Cc.current=null,null===n||null===n.return){Dc=1,Pc=t,Ic=null;break}e:{var o=e,a=n.return,c=n,d=t;if(t=Nc,c.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var l=d,u=c,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,Ea(f,a,c,0,t),1&f.mode&&ma(o,l,t),d=l;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(d),t.updateQueue=g}else m.add(d);break e}if(0===(1&t)){ma(o,l,t),md();break e}d=Error(s(426))}else if(Ds&&1&c.mode){var E=ga(a);if(null!==E){0===(65536&E.flags)&&(E.flags|=256),Ea(E,a,c,0,t),Bs(d);break e}}o=d,4!==Dc&&(Dc=2),null===Uc?Uc=[o]:Uc.push(o),d=oa(d,c),c=a;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t,as(c,pa(0,d,t));break e;case 1:o=d;var _=c.type,v=c.stateNode;if(0===(128&c.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Hc||!Hc.has(v)))){c.flags|=65536,t&=-t,c.lanes|=t,as(c,fa(c,o,t));break e}}c=c.return}while(null!==c)}yd(n)}catch(y){t=y,Ic===n&&null!==n&&(Ic=n=n.return);continue}break}}function fd(){var e=Tc.current;return Tc.current=na,null===e?na:e}function md(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Rc||0===(268435455&xc)&&0===(268435455&Lc)||ad(Rc,Nc)}function gd(e,t){var n=wc;wc|=2;var i=fd();for(Rc===e&&Nc===t||(Bc=null,hd(e,t));;)try{Ed();break}catch(r){pd(e,r)}if(Jr(),wc=n,Tc.current=i,null!==Ic)throw Error(s(261));return Rc=null,Nc=0,Dc}function Ed(){for(;null!==Ic;)vd(Ic)}function _d(){for(;null!==Ic&&!Je();)vd(Ic)}function vd(e){var t=Sc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?yd(e):Ic=t,Cc.current=null}function yd(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ya(n,t,Oc)))return void(Ic=n)}else{if(null!==(n=za(n,t)))return n.flags&=32767,void(Ic=n);if(null===e)return Dc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Dc&&(Dc=5)}function Sd(e,t,n){var i=vt,r=Ac.transition;try{Ac.transition=null,vt=1,function(e,t,n,i){do{bd()}while(null!==zc);if(0!==(6&wc))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Rc&&(Ic=Rc=null,Nc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kc||(Kc=!0,Nd(tt,(function(){return bd(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ac.transition,Ac.transition=null;var a=vt;vt=1;var c=wc;wc|=4,Cc.current=null,function(e,t){if(er=Ht,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,c=-1,d=-1,l=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(c=a+r),h!==o||0!==i&&3!==h.nodeType||(d=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++l===r&&(c=a),p===o&&++u===i&&(d=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===d?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Qa=t;null!==Qa;)if(e=(t=Qa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qa=e;else for(;null!==Qa;){t=Qa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,E=m.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:Hr(t.type,g),E);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;if(1===y.nodeType)y.textContent="";else if(9===y.nodeType){var S=y.body;null!=S&&(S.textContent="")}break;default:throw Error(s(163))}}catch(b){Cd(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qa=e;break}Qa=t.return}m=$a,$a=!1}(e,n),fc(n,e),fi(tr),Ht=!!er,tr=er=null,e.current=n,gc(n,e,r),Qe(),wc=c,vt=a,Ac.transition=o}else e.current=n;if(Kc&&(Kc=!1,zc=e,Yc=r),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),id(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i(t[n]);if(Wc)throw Wc=!1,e=Gc,Gc=null,e;0!==(1&Yc)&&0!==e.tag&&bd(),o=e.pendingLanes,0!==(1&o)?e===Jc?qc++:(qc=0,Jc=e):qc=0,Wr()}(e,t,n,i)}finally{Ac.transition=r,vt=i}return null}function bd(){if(null!==zc){var e=yt(Yc),t=Ac.transition,n=vt;try{if(Ac.transition=null,vt=16>e?16:e,null===zc)var i=!1;else{if(e=zc,zc=null,Yc=0,0!==(6&wc))throw Error(s(331));var r=wc;for(wc|=4,Qa=e.current;null!==Qa;){var o=Qa,a=o.child;if(0!==(16&Qa.flags)){var c=o.deletions;if(null!==c){for(var d=0;d<c.length;d++){var l=c[d];for(Qa=l;null!==Qa;){var u=Qa;switch(u.tag){case 0:case 11:case 15:ec(8,u,o)}var h=u.child;if(null!==h)h.return=u,Qa=h;else for(;null!==Qa;){var p=(u=Qa).sibling,f=u.return;if(ic(u),u===l){Qa=null;break}if(null!==p){p.return=f,Qa=p;break}Qa=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var E=g.sibling;g.sibling=null,g=E}while(null!==g)}}Qa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Qa=a;else e:for(;null!==Qa;){if(0!==(2048&(o=Qa).flags))switch(o.tag){case 0:case 11:case 15:ec(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,Qa=_;break e}Qa=o.return}}var v=e.current;for(Qa=v;null!==Qa;){var y=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==y)y.return=a,Qa=y;else e:for(a=v;null!==Qa;){if(0!==(2048&(c=Qa).flags))try{switch(c.tag){case 0:case 11:case 15:tc(9,c)}}catch(b){Cd(c,c.return,b)}if(c===a){Qa=null;break e}var S=c.sibling;if(null!==S){S.return=c.return,Qa=S;break e}Qa=c.return}}if(wc=r,Wr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(b){}i=!0}return i}finally{vt=n,Ac.transition=t}}return!1}function Td(e,t,n){ss(e,t=pa(0,t=oa(n,t),1)),t=Zc(),null!==(e=td(e,1))&&(Et(e,1,t),id(e,t))}function Cd(e,t,n){if(3===e.tag)Td(e,e,n);else for(;null!==t;){if(3===t.tag){Td(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Hc||!Hc.has(i))){ss(t,e=fa(t,e=oa(n,e),1)),e=Zc(),null!==(t=td(t,1))&&(Et(t,1,e),id(t,e));break}}t=t.return}}function Ad(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Zc(),e.pingedLanes|=e.suspendedLanes&n,Rc===e&&(Nc&n)===n&&(4===Dc||3===Dc&&(130023424&Nc)===Nc&&500>Xe()-Vc?hd(e,0):Mc|=n),id(e,t)}function wd(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Zc();null!==(e=td(e,t))&&(Et(e,t,n),id(e,n))}function Rd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),wd(e,n)}function Id(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),wd(e,n)}function Nd(e,t){return Ye(e,t)}function Od(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kd(e,t,n,i){return new Od(e,t,n,i)}function Dd(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pd(e,t){var n=e.alternate;return null===n?((n=kd(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xd(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Dd(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case T:return Ld(n.children,r,o,t);case C:a=8,r|=8;break;case A:return(e=kd(12,n,t,2|r)).elementType=A,e.lanes=o,e;case N:return(e=kd(13,n,t,r)).elementType=N,e.lanes=o,e;case O:return(e=kd(19,n,t,r)).elementType=O,e.lanes=o,e;case P:return Md(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case R:a=9;break e;case I:a=11;break e;case k:a=14;break e;case D:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=kd(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Ld(e,t,n,i){return(e=kd(7,e,i,t)).lanes=n,e}function Md(e,t,n,i){return(e=kd(22,e,i,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Ud(e,t,n){return(e=kd(6,e,null,t)).lanes=n,e}function jd(e,t,n){return(t=kd(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vd(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fd(e,t,n,i,r,s,o,a,c){return e=new Vd(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=kd(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ns(s),e}function Bd(e){if(!e)return Rr;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Dr(n))return Lr(e,n,t)}return t}function Wd(e,t,n,i,r,s,o,a,c){return(e=Fd(n,i,!0,e,0,s,0,a,c)).context=Bd(null),n=e.current,(s=rs(i=Zc(),r=$c(n))).callback=void 0!==t&&null!==t?t:null,ss(n,s),e.current.lanes=r,Et(e,r,i),id(e,i),e}function Gd(e,t,n,i){var r=t.current,s=Zc(),o=$c(r);return n=Bd(n),null===t.context?t.context=n:t.pendingContext=n,(t=rs(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ss(r,t),null!==(e=ed(r,o,s))&&os(e,r,o),o}function Hd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function zd(e,t){Kd(e,t),(e=e.alternate)&&Kd(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Nr.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Da(t),Fs();break;case 5:to(t);break;case 1:Dr(t.type)&&Mr(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;wr(Kr,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(wr(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(wr(io,1&io.current),null!==(e=Ka(e,t,n))?e.sibling:null);wr(io,1&io.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ha(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),wr(io,io.current),i)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,Ds&&0!==(1048576&t.flags)&&Rs(t,ys,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=kr(t,Ir.current);Zr(t,n),r=yo(null,t,i,e,r,n);var o=So();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(i)?(o=!0,Mr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ns(t),r.updater=hs,t.stateNode=r,r._reactInternals=t,gs(t,i,e,n),t=ka(null,t,i,!0,o,n)):(t.tag=0,Ds&&o&&Is(t),Ta(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Dd(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===k)return 14}return 2}(i),e=Hr(i,e),r){case 0:t=Na(null,t,i,e,n);break e;case 1:t=Oa(null,t,i,e,n);break e;case 11:t=Ca(null,t,i,e,n);break e;case 14:t=Aa(null,t,i,Hr(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Na(e,t,i,r=t.elementType===i?r:Hr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Oa(e,t,i,r=t.elementType===i?r:Hr(i,r),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,is(e,t),cs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,i,n,r=Error(s(423)));break e}if(i!==r){t=Pa(e,t,i,n,r=Error(s(424)));break e}for(ks=dr(t.stateNode.containerInfo.firstChild),Os=t,Ds=!0,Ps=null,n=Ys(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fs(),i===r){t=Ka(e,t,n);break e}Ta(e,t,i,n)}t=t.child}return t;case 5:return to(t),null===e&&Us(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ia(e,t),Ta(e,t,a,n),t.child;case 6:return null===e&&Us(t),null;case 13:return Ua(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=zs(t,null,i,n):Ta(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Ca(e,t,i,r=t.elementType===i?r:Hr(i,r),n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,wr(Kr,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Nr.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var d=c.firstContext;null!==d;){if(d.context===i){if(1===o.tag){(d=rs(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var u=(l=l.shared).pending;null===u?d.next=d:(d.next=u.next,u.next=d),l.pending=d}}o.lanes|=n,null!==(d=o.alternate)&&(d.lanes|=n),Xr(o.return,n,t),c.lanes|=n;break}d=d.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Xr(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ta(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Zr(t,n),i=i(r=$r(r)),t.flags|=1,Ta(e,t,i,n),t.child;case 14:return r=Hr(i=t.type,t.pendingProps),Aa(e,t,i,r=Hr(i.type,r),n);case 15:return wa(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Hr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Dr(i)?(e=!0,Mr(t)):e=!1,Zr(t,n),fs(t,i,r),gs(t,i,r,n),ka(null,t,i,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ra(e,t,n)}throw Error(s(156,t.tag))};var Yd="function"===typeof reportError?reportError:function(e){console.error(e)};function qd(e){this._internalRoot=e}function Jd(e){this._internalRoot=e}function Qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zd(){}function $d(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Hd(o);a.call(e)}}Gd(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Hd(o);s.call(e)}}var o=Wd(t,i,e,0,null,!1,0,"",Zd);return e._reactRootContainer=o,e[fr]=o.current,Wi(8===e.nodeType?e.parentNode:e),ld(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hd(c);a.call(e)}}var c=Fd(e,0,!1,null,0,!1,0,"",Zd);return e._reactRootContainer=c,e[fr]=c.current,Wi(8===e.nodeType?e.parentNode:e),ld((function(){Gd(t,c,n,i)})),c}(n,t,e,r,i);return Hd(o)}Jd.prototype.render=qd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gd(e,t,null,null)},Jd.prototype.unmount=qd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ld((function(){Gd(null,e,null,null)})),t[fr]=null}},Jd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ut(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(_t(t,1|n),id(t,Xe()),0===(6&wc)&&(Fc=Xe()+500,Wr()))}break;case 13:var i=Zc();ld((function(){return ed(e,1,i)})),zd(e,1)}},bt=function(e){13===e.tag&&(ed(e,134217728,Zc()),zd(e,134217728))},Tt=function(e){if(13===e.tag){var t=Zc(),n=$c(e);ed(e,n,t),zd(e,n)}},Ct=function(){return vt},At=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},be=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Sr(i);if(!r)throw Error(s(90));Y(i),Z(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=dd,Ne=ld;var el={usingClientEntryPoint:!1,Events:[vr,yr,Sr,we,Re,dd]},tl={findFiberByHostInstance:_r,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{rt=il.inject(nl),st=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qd(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qd(e))throw Error(s(299));var n=!1,i="",r=Yd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Fd(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Wi(8===e.nodeType?e.parentNode:e),new qd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return ld(e)},t.hydrate=function(e,t,n){if(!Xd(t))throw Error(s(200));return $d(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qd(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Yd;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wd(t,null,e,1,null!=n?n:null,r,0,o,a),e[fr]=t.current,Wi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Jd(t)},t.render=function(e,t,n){if(!Xd(t))throw Error(s(200));return $d(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xd(e))throw Error(s(40));return!!e._reactRootContainer&&(ld((function(){$d(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=dd,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Xd(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $d(e,t,n,!1,i)},t.version="18.1.0-next-22edb9f77-20220426"},1250:(e,t,n)=>{"use strict";var i=n(4164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},8459:(e,t)=>{"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case s:case a:case o:case h:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case u:case m:case f:case c:return e;default:return t}}case r:return t}}}n=Symbol.for("react.module.reference")},6900:(e,t,n)=>{"use strict";n(8459)},6374:(e,t,n)=>{"use strict";var i=n(2791),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var i,s={},d=null,l=null;for(i in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,i)&&!c.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:d,ref:l,props:s,_owner:a.current}}t.Fragment=s,t.jsx=d,t.jsxs=d},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function E(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function _(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=E.prototype;var y=v.prototype=new _;y.constructor=v,m(y,E.prototype),y.isPureReactComponent=!0;var S=Array.isArray,b=Object.prototype.hasOwnProperty,T={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!C.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){for(var d=Array(c),l=0;l<c;l++)d[l]=arguments[l+2];s.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===s[r]&&(s[r]=c[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:T.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case i:c=!0}}if(c)return o=o(c=e),e=""===s?"."+I(c,0):s,S(o)?(r="",null!=e&&(r=e.replace(R,"$&/")+"/"),N(o,t,r,"",(function(e){return e}))):null!=o&&(w(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(R,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",S(e))for(var d=0;d<e.length;d++){var l=s+I(a=e[d],d);c+=N(a,t,r,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),d=0;!(a=e.next()).done;)c+=N(a=a.value,t,r,l=s+I(a,d++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function O(e,t,n){if(null==e)return e;var i=[],r=0;return N(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},x={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:T};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=E,t.Fragment=r,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=T.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)b.call(t,d)&&!C.hasOwnProperty(d)&&(r[d]=void 0===t[d]&&void 0!==c?c[d]:t[d])}var d=arguments.length-2;if(1===d)r.children=i;else if(1<d){c=Array(d);for(var l=0;l<d;l++)c[l]=arguments[l+2];r.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},3315:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=(0,r.default)(e);return{getItem:function(e){return new Promise((function(n,i){n(t.getItem(e))}))},setItem:function(e,n){return new Promise((function(i,r){i(t.setItem(e,n))}))},removeItem:function(e){return new Promise((function(n,i){n(t.removeItem(e))}))}}};var i,r=(i=n(2900))&&i.__esModule?i:{default:i}},2900:(e,t)=>{"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"===typeof self?"undefined":n(self))||!(e in self))return!1;try{var t=self[e],i="redux-persist ".concat(e," test");t.setItem(i,"test"),t.getItem(i),t.removeItem(i)}catch(r){return!1}return!0}(t)?self[t]:r};var r={getItem:i,setItem:i,removeItem:i}},5752:(e,t,n)=>{"use strict";var i;t.Z=void 0;var r=(0,((i=n(3315))&&i.__esModule?i:{default:i}).default)("local");t.Z=r},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,c=e[a],d=a+1,l=e[d];if(0>s(c,n))d<r&&0>s(l,c)?(e[i]=l,e[d]=n,i=d):(e[i]=c,e[a]=n,i=a);else{if(!(d<r&&0>s(l,n)))break e;e[i]=l,e[d]=n,i=d}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var d=[],l=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,E="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=i(l);null!==t;){if(null===t.callback)r(l);else{if(!(t.startTime<=e))break;r(l),t.sortIndex=t.expirationTime,n(d,t)}t=i(l)}}function S(e){if(g=!1,y(e),!m)if(null!==i(d))m=!0,P(b);else{var t=i(l);null!==t&&x(S,t.startTime-e)}}function b(e,n){m=!1,g&&(g=!1,_(w),w=-1),f=!0;var s=p;try{for(y(n),h=i(d);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(d)&&r(d),y(n)}else r(d);h=i(d)}if(null!==h)var c=!0;else{var u=i(l);null!==u&&x(S,u.startTime-n),c=!1}return c}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,C=!1,A=null,w=-1,R=5,I=-1;function N(){return!(t.unstable_now()-I<R)}function O(){if(null!==A){var e=t.unstable_now();I=e;var n=!0;try{n=A(!0,e)}finally{n?T():(C=!1,A=null)}}else C=!1}if("function"===typeof v)T=function(){v(O)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,D=k.port2;k.port1.onmessage=O,T=function(){D.postMessage(null)}}else T=function(){E(O,0)};function P(e){A=e,C||(C=!0,T())}function x(e,n){w=E((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(l,e),null===i(d)&&e===i(l)&&(g?(_(w),w=-1):g=!0,x(S,s-o))):(e.sortIndex=a,n(d,e),m||f||(m=!0,P(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},1338:function(e,t,n){var i;!function(r,s){"use strict";var o="function",a="undefined",c="object",d="string",l="major",u="model",h="name",p="type",f="vendor",m="version",g="architecture",E="console",_="mobile",v="tablet",y="smarttv",S="wearable",b="embedded",T="Amazon",C="Apple",A="ASUS",w="BlackBerry",R="Browser",I="Chrome",N="Firefox",O="Google",k="Huawei",D="LG",P="Microsoft",x="Motorola",L="Opera",M="Samsung",U="Sharp",j="Sony",V="Xiaomi",F="Zebra",B="Facebook",W="Chromium OS",G="Mac OS",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},K=function(e,t){return typeof e===d&&-1!==z(t).indexOf(z(e))},z=function(e){return e.toLowerCase()},Y=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},q=function(e,t){for(var n,i,r,a,d,l,u=0;u<t.length&&!d;){var h=t[u],p=t[u+1];for(n=i=0;n<h.length&&!d&&h[n];)if(d=h[n++].exec(e))for(r=0;r<p.length;r++)l=d[++i],typeof(a=p[r])===c&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):s:this[a[0]]=l?a[1].call(this,l,a[2]):s:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):s):this[a]=l||s;u+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(K(t[n][i],e))return"?"===n?s:n}else if(K(t[n],e))return"?"===n?s:n;return e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,m],[/opios[\/ ]+([\w\.]+)/i],[m,[h,L+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[h,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[h,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[h,"Smart Lenovo "+R]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+R],m],[/\bfocus\/([\w\.]+)/i],[m,[h,N+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[h,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[h,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[h,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[m,[h,N]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+R]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+R],m],[/samsungbrowser\/([\w\.]+)/i],[m,[h,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,B],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[h,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,I+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[h,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[m,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[h,N+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,m],[/(cobalt)\/([\w\.]+)/i],[h,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,z]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,M],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,M],[p,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[f,C],[p,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,C],[p,v]],[/(macintosh);/i],[u,[f,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,U],[p,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,k],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,k],[p,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,V],[p,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,V],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[p,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[p,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[p,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,x],[p,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,x],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,D],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,D],[p,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[p,_]],[/(pixel c)\b/i],[u,[f,O],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,O],[p,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,j],[p,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,j],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[p,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,T],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,T],[p,_]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,w],[p,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,A],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,A],[p,_]],[/(nexus 9)/i],[u,[f,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[p,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[p,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[f,"Ulefone"],[p,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[p,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[p,v]],[/(surface duo)/i],[u,[f,P],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[p,_]],[/(u304aa)/i],[u,[f,"AT&T"],[p,_]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[p,_]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[p,v]],[/\b(k88) b/i],[u,[f,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[p,_]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[p,_]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[p,v]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[p,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[p,_]],[/\b(ph-1) /i],[u,[f,"Essential"],[p,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[f,u,[p,_]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,P],[p,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,F],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,F],[p,_]],[/smart-tv.+(samsung)/i],[f,[p,y]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,M],[p,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,D],[p,y]],[/(apple) ?tv/i],[f,[u,C+" TV"],[p,y]],[/crkey/i],[[u,I+"cast"],[f,O],[p,y]],[/droid.+aft(\w+)( bui|\))/i],[u,[f,T],[p,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,U],[p,y]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,j],[p,y]],[/(mitv-\w{5}) bui/i],[u,[f,V],[p,y]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[p,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Y],[u,Y],[p,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[p,E]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[p,E]],[/(playstation [345portablevi]+)/i],[u,[f,j],[p,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,P],[p,E]],[/((pebble))app/i],[f,u,[p,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,C],[p,S]],[/droid.+; (glass) \d/i],[u,[f,O],[p,S]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,F],[p,S]],[/(quest( 2| pro)?)/i],[u,[f,B],[p,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,b]],[/(aeobc)\b/i],[u,[f,T],[p,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[p,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,_]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[m,J,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,J,Q],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,G],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,m],[/\(bb(10);/i],[m,[h,w]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[h,N+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[h,I+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,W],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,m],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,m]]},Z=function(e,t){if(typeof e===c&&(t=e,e=s),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof r!==a&&r.navigator?r.navigator:s,i=e||(n&&n.userAgent?n.userAgent:""),E=n&&n.userAgentData?n.userAgentData:s,y=t?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(X,t):X,S=n&&n.userAgent==i;return this.getBrowser=function(){var e,t={};return t[h]=s,t[m]=s,q.call(t,i,y.browser),t[l]=typeof(e=t[m])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:s,S&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[g]=s,q.call(e,i,y.cpu),e},this.getDevice=function(){var e={};return e[f]=s,e[u]=s,e[p]=s,q.call(e,i,y.device),S&&!e[p]&&E&&E.mobile&&(e[p]=_),S&&"Macintosh"==e[u]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[u]="iPad",e[p]=v),e},this.getEngine=function(){var e={};return e[h]=s,e[m]=s,q.call(e,i,y.engine),e},this.getOS=function(){var e={};return e[h]=s,e[m]=s,q.call(e,i,y.os),S&&!e[h]&&E&&"Unknown"!=E.platform&&(e[h]=E.platform.replace(/chrome os/i,W).replace(/macos/i,G)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===d&&e.length>500?Y(e,500):e,this},this.setUA(i),this};Z.VERSION="1.0.37",Z.BROWSER=H([h,m,l]),Z.CPU=H([g]),Z.DEVICE=H([u,f,p,E,_,y,v,S,b]),Z.ENGINE=Z.OS=H([h,m]),typeof t!==a?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(i=function(){return Z}.call(t,n,t,e))===s||(e.exports=i):typeof r!==a&&(r.UAParser=Z);var $=typeof r!==a&&(r.jQuery||r.Zepto);if($&&!$.ua){var ee=new Z;$.ua=ee.getResult(),$.ua.get=function(){return ee.getUA()},$.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)$.ua[n]=t[n]}}}("object"===typeof window?window:this)},1561:(e,t,n)=>{"use strict";var i=n(2791);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useState,o=i.useEffect,a=i.useLayoutEffect,c=i.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(i){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=s({inst:{value:n,getSnapshot:t}}),r=i[0].inst,l=i[1];return a((function(){r.value=n,r.getSnapshot=t,d(r)&&l({inst:r})}),[e,n,t]),o((function(){return d(r)&&l({inst:r}),e((function(){d(r)&&l({inst:r})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:l},7595:(e,t,n)=>{"use strict";var i=n(2791),r=n(7248);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,a=i.useRef,c=i.useEffect,d=i.useMemo,l=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=d((function(){function e(e){if(!c){if(c=!0,o=e,e=i(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=i(e);return void 0!==r&&r(t,n)?t:(o=e,a=n)}var o,a,c=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]}),[t,n,i,r]);var p=o(e,u[0],u[1]);return c((function(){h.hasValue=!0,h.value=p}),[p]),l(p),p}},7248:(e,t,n)=>{"use strict";e.exports=n(1561)},327:(e,t,n)=>{"use strict";e.exports=n(7595)},5948:(e,t,n)=>{var i={"./bnb-selected.png":5300,"./bnb.png":8016,"./viewers-selected.png":5451,"./viewers.png":4876};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=5948},854:(e,t,n)=>{var i={"./instagram.png":1666,"./tiktok.png":5773,"./twitter.png":6772,"./youtube.png":6041};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=854},671:(e,t,n)=>{var i={"./billiard.webp":1115,"./boxing.webp":4239,"./chess.webp":5191,"./fifa.webp":6101,"./poker.webp":5292,"./rocket-league.webp":8830,"./table-tennis.webp":7934,"./tennis.webp":1825,"./wide-billiard.webp":205,"./wide-boxing.webp":7572,"./wide-chess.webp":1291,"./wide-fifa.webp":8376,"./wide-poker.webp":2928,"./wide-rocket-league.webp":9441,"./wide-table-tennis.webp":7387,"./wide-tennis.webp":1520};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=671},6030:(e,t,n)=>{var i={"./wide-billiard.webp":205,"./wide-boxing.webp":7572,"./wide-chess.webp":1291,"./wide-fifa.webp":8376,"./wide-poker.webp":2928,"./wide-rocket-league.webp":9441,"./wide-table-tennis.webp":7387,"./wide-tennis.webp":1520};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=6030},5070:(e,t,n)=>{var i={"./achievement.png":2724,"./address.png":8621,"./calendar.png":451,"./fifa.png":556,"./gaming.png":5505,"./region.png":5983,"./sports.png":9641,"./target.png":5810,"./valorant.png":622};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=5070},7269:(e,t,n)=>{var i={"./billiard.webp":9267,"./boxing.webp":7598,"./chess.webp":6076,"./choose.webp":9049,"./fifa.webp":5128,"./performer.webp":1485,"./poker.webp":3065,"./rocket-league.webp":1458,"./table-tennis.webp":5746,"./tennis.webp":2629};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=7269},2349:(e,t,n)=>{var i={"./end-mobile.png":7733,"./end.png":2800,"./home.png":8623,"./mute.png":571,"./pause.png":6197,"./prize.png":9180,"./rotate.png":4956,"./settings.png":2278,"./start.png":3321,"./switch-camera.png":1111,"./viewers.png":9362};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=2349},6271:(e,t,n)=>{var i={"./billiard.webp":3763,"./boxing.webp":7594,"./chess.webp":340,"./fifa.webp":1739,"./poker.webp":2849,"./rocket-league.webp":5138,"./table-tennis.webp":3845,"./tennis.webp":2380};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=6271},1115:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/billiard.d79477afb9fef3daf97e.webp"},4239:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/boxing.ffe0b92619befe901301.webp"},5191:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chess.a41d3cc1d73d7550eeee.webp"},6101:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/fifa.05aa551430697c9a3d72.webp"},5292:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/poker.0f048dac5b2d3baff07f.webp"},8830:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/rocket-league.7c570f1c8a91621fe45e.webp"},7934:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/table-tennis.f23459aaaf407d2ccfb5.webp"},1825:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/tennis.4404c5672dfac9815b64.webp"},205:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-billiard.94aa7e0c14e822872b72.webp"},7572:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-boxing.013c5056e8f1cf5781fd.webp"},1291:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-chess.b4dc04709146538c8250.webp"},8376:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-fifa.69ee3eae954e58feaa0b.webp"},2928:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-poker.2c11fcc7128d2ad72109.webp"},9441:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-rocket-league.cd98f734ce8b10caa3ce.webp"},7387:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-table-tennis.7fe5e4f24b14013648b5.webp"},1520:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wide-tennis.5f9e9bdfe26564467696.webp"},9267:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/billiard.d167d2bda3b8dae3d761.webp"},7598:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/boxing.43b72081ec07642a6393.webp"},6076:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chess.f0e85a7f7c1275c1b1a2.webp"},9049:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/choose.ba0ac944888268d14cdc.webp"},5128:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/fifa.4301cb0bee23c22b5e5c.webp"},1485:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/performer.6ea79a7a01d5614b7556.webp"},3065:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/poker.d9945177058b194c8740.webp"},1458:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/rocket-league.0b6b05473fb0826a1455.webp"},5746:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/table-tennis.1ed2f0f83deb8b1de0e8.webp"},2629:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/tennis.c42c4669f76175bdc1c8.webp"},3763:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/billiard.7599555775318c582133.webp"},7594:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/boxing.089fe1d8f7feb26149df.webp"},340:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chess.c0b29801dcacb4183aa6.webp"},1739:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/fifa.006d9a10eb45aad89baf.webp"},2849:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/poker.0c769a54e0849f5e0a24.webp"},5138:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/rocket-league.51bdbc63f1011509bcb7.webp"},3845:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/table-tennis.3e41664080accccb7ffe.webp"},2380:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/tennis.d12e0728d87f92484aa5.webp"},7773:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH2SURBVHgB7ZjhccIwDIUF1wEYwZ2gbNBsUDaADegGdANgAtoJYIOUCRgh3SBs8KpclEO4KdiJ7fRHvzvfcY4SP8uWkE0UAAATbktuObcSNVMaGhZhuO2UKM2ahkQ81iZMU3CbU0pkOXP4saveoxTwQCd0Y0+x4UEW6Efc5e7hvYacPBm5GqLeQyX1ZMT42I89bINscp6o8bH3ETgI/wJbOPsYJxfIMRJNYJAcBs//aKeQD5ViFI/syS8XQx8Pei1NKJwEyr45UhiOrt7zAnXtd6+8csH4jOu8xDLrLfVjG8V7GtRFaBcKX+91FZihG+kqax5sAz92lBLUZX/hKK6yM5QauC/1jFIjHnStroukHhTPFfCjQMcgGVuDm2a21dKIl0IcwA23d/neHF2OoPzSSmZ7EnF5M/0W2xD/KrmINa4C3375UCkfqo6cSwf7LpzuikV9leHCVHkxNAW3lS1sLQ9KZZTJMzsgSutZLPZo9il+RqSxJqCFLFT/DHFZNwMtlMjWqlm9lEM8KP0HxCVrBnpVnRNLnL3XykiB0sZmjHpJX5SmPS65sBJr30rpyvqJ4vJ8a7NXoa9zXeUtA+VhhKmwb1E+cIX7yT8+6HIoanKdfcd81tUw6nRzoNTgOt3oa94NDQ2ur3fn0lelk4z+Ekh1n+zAN3Fnp4LgNAd7AAAAAElFTkSuQmCC"},5300:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANVSURBVHgB7VhBdtowEB0ZsiMpBbrnCMkNkhskJwBO0PQCscjrHnqCkBPADWhPADco3cepC94VmM7YJjFGkmXjVR9/g7Ekz5f0ZzQjgBP+cwgoCb9lvX6GlTE4MKq53jOUBAdKAJFrE7kZAlzjFkZ/ZOMeSsLRBGNyUyLXfvsoisHqoeFCCTiKIJG7TJN7gxCyDJKFNbiSrWtAHNNjHcwGRrW+14OCKEQw6Dc7rDX7EWK+Fuubj9L3ISdyb/Gq33LzkWMgS2HGeoWcyEWQycEWpa5dAC50baxT1mtektYEl27zKYPc/K/YXm0FfoEMkoH8dAmWyNQgB+AqVp7o8VbXBxGeLx697u7/UjZvBQKP0TmQjxvoXXz1JpCBzBU8A6drIkfL8i1JjnEhvYkQmxvDltedCg548nAswZp8HVJM6ysbEfvnj969epzPW64kye+4zcarrTR4Ll/kAcmQ3Ks0jSMCizTJWKtMbgEWOCDIp0PgtgagILlzACGgpyK3onFpB4hJXtGM5jTwh4qczmY0oQTiADyESNyTtdj00tvAYUJhgB2JT5Vr0DgA91FtaZZN8d6x8Rm3YpjizyfAnWk7omShOkYKxsn3vNofWL8G2NgMCZoCMHWgLdooNaPKZPaAKEkKSgeztRlpEE3xEHm5Dd6G2hbhiF+GYSab79/YPVBw7cbBNWGBNAGHOkwi0p8zpc7JLfbJIe7Isb6DASqbCS/3o/8JBORNSFtGj/X06ZAg1FZt9/KhOSLv7sQxjjU0T0+Ef9OTtbF5QCCQLWXwZVGv3CbqEtGAUn1VMhB+023+pDA007VTfilV37TOBw9EbXCAtPGkI5mcrjDBldugICoOVzWDZFwSjNNenodk5lEXrpyKXGhJyIDTMNU4KgmqmhAUpV3sWNnIJHjuvvRZvLp2MtYlXU6TmQmfDrS6ofA1w3x2JLCAvQZZxIiGKi06Aaqi2snKuvMkC7mKpmySYUCvl0UuGpMTfGvAhTnkRDoA2yJ3VccJAFK6Bcbjbx+s4SLkGIUL9+QJYOxIJYEu67ZB4asPTukpd7sylZqmksAWR1+/RSeFQ/FOtPcaLEoCG5RyP8gkKaMZ7zIaLglq0htBCSj1ArOyrQw3zmaYzmROOMGAf0tIE7q2oUeAAAAAAElFTkSuQmCC"},8016:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKISURBVHgB7VgrUBxBEO1NxQSLvVg0MokMNidDJNhEgkslLhV3FgrH2UOCxR4WjUZyFuTRj+2hlqGnp2d2oRD3qrqmrqZn++32Z7qPaIUVfFgul2ss+yxfaEC8pwHApNZ52WfBusG/PzRNc04DoKGeiMh1ccYkT6knehFkciNeftFzcgG9SVYTZHIbvPxkWcuoXjDJY6pEFUFJhJ2CI9csEyZ6S4UoJsjkxrx8o3IsqCW5KDn0rkTZQc4y/pBMklRuuAnyg3fJJgc3/mOZGTqB5EdyIutiFGBq423TUJuz66adM5tyJpVAiMUpn7mkDDxf8FOG3HmXHCCGJ5R2OYhvy8ubcCUJPwiuHStbp0zmzDiXKuLuhHFnsULSJGeQRKwelGZz94Ejlu3E3hbLEcvnxP4PLQGkkfjDsqe51bLZRIoowN+pjRHE0TQurvgi8duLUdwquF3UBICOVqhzNpuO4hYv8Vtk3SEuxH08irZmuY7GY7MRRasAJwPaSIKAZLPgtRnKzJLSuBOpwY2xZ9l8RNfFCPzdaF+NwydW2vjbY+kmB/QP+dwVWQx1m08aizhJEEdwGYzO4wIsOusJd+PmQMBjDzF0rbwIKUmXtfmMgASvthfKzDix/1VrBuSZ/1n+GvtqPJYU6jioXd2ykkhFbZf3qkMp0L6qSdIYCYa76hw9oNrSO0aCBZ/7TX0JirGQACkgWw9DAjhGAuhN4kSqJihGUx1NwMMNQO2L5LruYWMwwEESX8bq8YrnkpqhSbs/Paia7GrHTtwAIJntiAVzlpNXGTsDohvAAkaCGVWi718fuW7G1XVbeMk/j3qTA3oTBIQkinLoaI6Z3AW9JcjcsSOxucIKXtwDBmuKJx8t+tEAAAAASUVORK5CYII="},5451:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYFSURBVHgB7VhRbxtFEJ7djR07ieFSWqkPiFwrivpW9xfU6R9o+QW2hWjVpzQvRQiKzxUVAh6cCEGEENjhDzS/ADt/ANy3SlRwfQDxUDVOHcdOnNvh2z3bTYLPTtonqkx09p1vd+bbmZ1vZkN0IidyIv9vEfQKwp7rbCeDDElOSyHmWLJLggl/Pl4/CYjqAen67OI/Pr2kHBugAdWeoixpvg5gVwBGCKNFMpt7qxEghX3Gk7kXVBMqqHR21PpxwR4Z4AaAJSblgmZ9W0hyjOE+GPxtkNSbQOqbZy3YEcRpAxLoBAvN4Xg7Z3WXusXZWw3/KHaPBHD7/vkFmPJg0BkYIqrBd+vw2drMHb8+bN5W6UxaTkxcCSjIKykusfUmPCt4E5aXpm8+LY6zPRIgvOYmlCpDYcb4CWG04cLeKqY+9mt0DGl+czYjZZAlSTmrC2ClpNpOEORHeVOMAjcpVRWK5sxOwrcfaM6n7h4P2GF5/t1b15WUJRJ6rheJJ7sxPT+bHw5SRIOb+BW3s0JqDph/ng74tvD8xrDxJnFaU8F1hM+VcexSTQ93R2TvRtlx4juqhIjk4FGDchOT5mduNOpjAba9iy5TYDzn2pDCfPLuH8WIhTjxGJVIcU4oswU0MS5S9kIMeWRCNL8/5SlFn2nLBOzvSvqPJ+XhScy6ik/X3mtRjALXhpfjUv4GzbneUtnurd4Dsf3IIRK/wGPuMB2pm8+8gOleb8pcnLlqvBsJcLtwwe4NQ2ywVpwuPPaGgzNejlUxzLW6hVgLuvrqVLM1O734t9ABz+PnioGLBDsX16IaCfLDZx4WtmwdQuROki7sfy8OGGX9p80uQfVE4ffLFCHtwntlVjqLxQiEtDj9ie8NG9dcOe1JxQUTdiGCyvQHz/NROrd+cqoAY6oSaxZXU/lGzfw+8CAyoWzcZu+5+34kOOs9ypGlYFGJAmckdesp3uk1GxApcofDt1+UoDzc1ehR+8CLFmD704sZwMoICdJHaJKe70cp0povUchjprKt0hhBuJeZw0glZHAtalwSyYHsXw6fONMsO5kBQEzPAhyFiroj2R2skLYlFiOTdx/XaIzsJahuxpprT4tzI8dKWjJetHYESJ16AFE9HVvamTcSRI1RSrTZoab+ghkM/9EYAW00Btktx40mx16WBPZNwU5fDgu/mN2m+O1RGkCNPtlFMXUUpWmMNFfCUNk5muujxsb2ZTActjoAmPz8UQ3tUy0kL71gKkmUko7qrJH1nzD0WqAxImMy219QjLqRAA0NQWe2B289ld+qDQAaEUoVwyIunElS5ShFsyh3iPGqXYykK+0v3UiQrR9Om3c5uwcZyZfv+FFj40wPwhxgFKFubrDA/k3Se1SDoiVLNVJktu+9W4pS1qHuIsb5RiGy2mt99U65+fXbGeuJkuO00blsr5ypItH74H1JMjL5WmWnANuXzD34aHn/Qg7UYltbaaKKNgi9mzYvR5Y6jlGVFLn9+iuUqcVArQJUSS2EwkAV+CDr+WREt9IqnypgcxYo7L796fzmgUw/kFcmfJL2QNL8xMQapFho3z8/NISGKxHieTBAhSyNcJ/mLV0Z1oLBykhwPzoF7H2vNwteFvOHxwxtt7a8C2k0lw8A3/aCAFJJ7OjFqHar/YXrdmNBWqkgbTqaQJCfSnXWBChm2HjbbgWqhKKWg24DrqEkXR62kMiG1YZwQqDtEq4NN4yCSBff+Mhfo1cQ1Gd01iirEo2wsS/hORnt5ZEtv/EMCKXMpgy+OCBVJMvV5DFb/vbK2QyLvQLaC+jiXkfG62qCc1HgxgLsS+u+6yEZFqDSGRwn0TGLCVnRe8H6zJ2/hh+avj2TxmHpGmYAHDqV8MBkKBRUFXhTNxrL42wf+dhpvIlcNSe7LPdOduGxMmRPfKPmcsOkHWCgG9dvmspkvMV97+M9ZizPJPaWovbnSwPcDxTHyIyMURbAMubMwuFeYvECLNFgEaZ+cw3UtZac7K4eFdhLAzwAtoTsDUz24l8fxHNIpvAcI8nH0cnH8fRhama3dlxQJ3IiJ/I6yb840g2p3f5ZVAAAAABJRU5ErkJggg=="},4876:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALySURBVHgB7VgrcNtAEF2FJTSFLnVhSm0YUws22DiwZZ3CTFkLW2rTBMawNrSpA21qw4am0N1X71Wr8/0khSSjN7MTJbfafbefu1WIWrRo8bKRUQPs9/sz/tFl6bC8YTmXpUeW3yw7lm2WZY9UE5UJCqkey3shl4INy5JlXZVsMkEhNmC5ZDmzlp9Y/tAhcsApy1uPKRC9TyWaRJDJgdjQIramQ2RW7GzneQ+pf0eHiGvC2NCc37unJgTZAWpqROVUgtiUjW+oAthWV4j21Z9hYxyKZhYh94nKhT+uSsxhF7V7Zdn95iOZBch9oSKlC5Y7NvLk0YfehXIa7F7R/0BFNGH3O+tvowQdkUNBT8nvCNHokRvBhuD3Ude5/OqMpIvg10Ry9kZ8CKbQQfJGZyqzlBGNQQ1yK5YZyw7GHQ0RI6n9zljv1qydWE6N0s5HTpBTOco/0Txm5/I8wZronFMRpSMIIdN8A9lgmSAdjhODHz5jshFTc8vQRmRtJb/2pGZ9GNOhWYC8RFAYd5XT0CmvD9wFxTFTzxc+JfFpdLsmiiaC+vCMne4dZTTlTNS3TKyh5lREsa8JmtCbOzUJkZT9g+/s9OCUrHveEPwlP7F4GTGi09+J6JIueCpH0wXdSIv/BCVVuotCqXjwGPRBl8/Wp2Q139qUj+5iU3uI4shnSFJmmgPFnAec5lTu+FDzXavniXk4UY7BWHfRVcDYHRWpHrLuyKQSdYlnFhzkQ9GBrrf5ZCOmXGZ6I/ZNguh9pOIomfpmtme86nK9Edb7rNdThoUYSRjvkxuxYaFEjlKGBXkR4b5WJOHoNjBuQQ9R7yhnD5HxTE9B0LtxbaTqwAqSK2oAqdURNRlYLZIjKo/8iOai5sif0/Hnw6TWyG8ZR51g0tGnPA5dHDcb1yQs7yHt5vNUE0NKUdsziqDKZ2esIXZU3KPQPbq2ZB2k5qlXYJ0PdzjvCtHUD3ekEjfQsuLd3PhfH7p7ff/62FQl1aJFi9eEv2TPaTg9ypmoAAAAAElFTkSuQmCC"},5819:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/binance-logo.92643887cb735977d3b9.png"},3151:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAmCAYAAAC29NkdAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARTSURBVHgBvVhJctpAFG3J86QsvIUTKAcIvoB9AEz2Cd7bcACHAwDeQ+UAhH2wL0C8j05Atl5YnkfynqqhWo2EWgL8q1RSD/r9+s/dlshAw+HQeXh4cPHex5N/f3//bNu2gyFHTvHRP7Asa4BvD2P9zc3NvshAVprJ9/f3BYA5wmdBAWO2EMACdH9ra6uO73/G/5lMIrC3t7cqGBfEfKhjCnQqQKoS4Kp4lxPm+ZQQnmvZ/kTVo50k5cb29nZdZAEIYLStLj5zUYCWlpZ+Pz8//4Fke7u7u34Uj5ubGxcvFzZIWz2ImkO1A+RxnDQjAT49PbkvLy8E5+jAwKiF8XYcqDi6urrKr6ysVAC2NAEC0ocTFaNAWinAtSCxRlpgMUC7AJozARkCGKdW9J06jtMWc6Tb29sKXlW1D0LwIISiKgRbnQB7aurgsNPjeYMjwe4aeIUcBNJzV1dXQ6DHAGHQJT2MUHIQ+y+xICJISK2tgSwzrAkVIFWLAV3crUVITqednZ1TerLax5grVIDoIOKcAm6AMLJwcCOCWk/VNjU5kqItO0LSA7g6VGucjmaltbU1D+bUUfvQDpKDzbAiwtLzUQicJzHFDku+71/Cdi9kQI4b74JnLonf8vJyCCD+2UNIcuzX19eCNtAziXXYYY2xjJ6HZlcFiRBSxXhTjhfQPkviJ6sdb9RmmtzY2HCp4hBAMO0lMWOOVtsy53YhtUOCw3dF+8Wo8tGdBZss2EzqaidUnlxhWBbrPd2wHTA808FJh/smzMhTG9QAJRiyH6jXM2DE8NCB3XDhWHOQ4IqmDoe5A+3/vC1moPX19XPk1aKIBuenAUeCc07MnQkgCbnzKKpfqvyrSEFwiglvt8EkhBqGnhgSSHQUhhAAOZwyrSKdJjPBDu1rrS9v8uPd3V1Xz92sRvQNgyqIh2UTnvg/5A/g5dlRrm3AiGFDZ9ZhqYRasqiDZAEgzCi0NmzYow162uJ7SVxkmOmr4FBYnDDA4xnoIDG/k8STm45Yu29xAOq6FEowhdqLJudY2Nc+gPgA188yrpIs95oK4AFC2RdLDobsidLBYFF8IGEzFNLYQVkosxYNwgyrF3WyWu58ELiq0Mo9vAKpBwCpTt1Z0G6aVCGzEotloaVH2uwowI8DNTzwRChpi2kGO/vJkkcsiJRDmlDWHcjziggBpPcBedQhprsIkHEnSKZHtR1KdbgvaUccYlzk3It5qlteQl2IyVuLiUo+8mYBXn0Wk8IaKMdaWQ/vMqTV8FmKGK6rqp0KUIKsRWWALNdolJi8S2Tx4JiCmwqQhN2WwbQWN87cC5DBQ+NG7Aoki1NinheaMrcexIAKHALPybRAnng/yLsUnLp+yIXmRqZ3PcY3rKhICvCwikmuTqAeHKRtkv5Iqa6ASZQoQs93qJVA3aT5rKyh7r/4PH98fOykdbDUAFVifETJ78oL9DFYVjuoaFjye8jpRmecOPoPZrrHRR+1nxgAAAAASUVORK5CYII="},1666:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/instagram.06ff3161742af55cd9e5.png"},5773:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAlBSURBVHgB7Z1bbBxXGcf/viQNTcELraKAaHJKH4oEJZsXSpsETxGVikCyeYvog20hQCoPNg9BREKsIyGFKg9uwoMFqrAjASpPcZCohIDsWqVIfbJDECqi7U7aPvTuddK06cWenv+ZHXs8ntmd9e6ZObszP+nzzF68l/nv933nfGfOmT6YT0GaJe2gNOGzgs/81Opm128v1/cv1/drMJg+mIeQNiKtCFcIgc5iwxVmAZsi5QSwpM1Iq0pzEja+51z9M2QahpppaUtIXoRG4oyh815pNAxF9IYVmCNEmM2hx4UR0sowW4RMCMPQ9Di6S4SeFWYK5oemVqwKN8d0HQLdGZ7iWhld5C295hVRtlL/rsbSK7miVZuBgQiY1Z9I2qowKIQJpNPDzkUJgZ28LOSLuLZSPyapkIthkCi5GAaJIpCLEVcUAc0I5Am8FatCsyhVAE5uLRm7AwXEZADxYafvYeS0yn5pe6T9FR2EJYJu+lWaaB0rswjkSbwT1rEkXwbgGG2PHHdw7fXmduDOtD9rGU3ob/L4OHpp8P/eLyNlLDQJXYMNHhPSSugyxnftwfDArvAH7z4m/7yqdidU4ycVeEznEXF+2GCTfxToMigGRQnl8H3yz7NqN0VB2ATmsf1J2INRIUvADVe9xagUpLBX7R7ErUgRhi0R9kCUIF0XqmJBMUbuU7tFfAopMxd2Z5ggAr3oHR7Tx9XGwh1IGQshBcgwQXrTOzzEPvkNj8tf3AEZzHchZcaCdwQFEehl7/CQXlKwDmMSX0DKjCNQ5woKYiErXDiJqeI30/YSijHpvyMoSG+HKz8ywRfKj2Fu6hdImVH/Db8gFjJ21jdFGZ35OaZ/9wRkWQUp4c2DUfgFGUNGKU18H9P/fw6YPQd851vAUOJN4pGwO6tIt/DWkeLi3AfvOTulurbmiOtvua/1zCUHT11wX1v/d6h6IngeQrcRyDiivx/V2z6DuT2fhPjKIeDokaRCmYA7h3KLIDl1WAujMEt7P42Zwc/JZtDdMsjfrrtFppK7V1wcQc42iv2D0jgC65btLfwTi3gLmlBOkXuIOVj8Q0HYORHIArUbMBghrUBBsuMdRTkEMf0kYL8OQxlmDjkE0zh4p9vCGRqSrZzPy9+N3NZWgdVrwOkzaItTUpDzl1SB0T8+YgiCggiYADtjj/4Ist3fuKnZriBEesjExDhKp74OYX1Vdom/ISN46uPtRAmSbsjiwT95whWiAYW+PpnsuBKIO9Jn4120wzxeRsW+gNL8fzE+f8n1lGEpSvEu13iblmzeEYNIk0d/KMX4aWipQvT1Y+TGTYzesU81PymIy0PqbwVv4kE8g3agqBxbP4X/oVS7B9bFNyAuPosUSSlkUYBf/TLUK6yBXSjdsldtcRsSwROGDMuRxFHsl2FjSFnC5fkCBYl9InBHoBhPLWw7R0r0D6iShTWQ7ijeovQ8mgdPhhD1MHkZ16CZFASZ/fU2MaZ2fwKl3Xt9YckcrkrvudpmvmqBQrI5hMmb5W0f0zI8lXanekqOUTQ7lbRzeK0pH7kY20lOEOYNH26YysUIwpDFc0z15pFAZ48JfOaWBk0otv3ZN1iQTdDL1c2+wLARnTed1JITxEf51gZvtywF+O7p8HrT4n/Q42wIog96xtEHNm5y8IedvlDoERQjQA0fyp71S6q/wH2Bng11NgWxobN8cuzIlpuTMneEfxTpERPnttzFgz+FKzgvyxxZwRNEH9/ebOa6I3ARLW2WxX11I3oDSyN2cn0AE1hm7LChk4MHNnbHouZtUAiWxOtkVAxiU5Cr0AnHM+oUByK8o7I1WU/juSyKQZSHVKATDjLViaxT+VpUFCJLOSPAZQriXyddG+x7xKHiK+xlDFtazWt/VqCL1VW1iWzqqgf3bezuSJD0Z9d2gmX+6fff0MJLrzR/DodP2xnbDjStI7lq7MkNRNWWPEEuQhf/vqI2trMe/Rzf3L+WB4TY8bz3S5svFVXCX944fVb1bwyEV2rYEMSGrjxyJWa5g3P/pDAcpWuJQNGyGNVw8AliYAvORiBkkQXo4A9/ct9xfQ01x4l+HvPIhZNqMmZsL2E531e0ZCsuMlfNb+3nGEbF2/F/ej1hi0n96X+p3eX1jxo/V+YSsfQbTIqvNX4eh4H/eH7b+MpkVDmfzWpfYdLAltx81AN61t49ekTNuZh873qseRor6+tO8bezDo494MiD774Gt8fk65w84eDl57ctLDP9/o3o15uclb45smHDuN3R8j3bnBsSRknbG/9lwSlcf8OJCyfPFN95O9YqP1M3Gwhdfc1xxA82xKjiobQOfJSN+QUIBtyz0FWOP31G5ZDKWrwWDifPcH6GmjzTF96pZM7g2ErDwa7AubwsyxjGYrMncC1zPb+Gn51wrBsrzk4of/SBmq42I0MTt9X1teb/NPePLaGK3iHHUnT/4luxOcSgqPVDzJ5TB1c7DFWF720RZAypL2AWNIGYlLV9iKEhRzz5e5W4tYrhyxu0JVhpHPC2vcND6P5A1pnHHC2Ur2zzDANDVaR3RJVgvRMfmnQIdo79t79jtfYOHv5isXNzNJjAOQx8c7PhwDLJ/XjatM7gvLTzaBEKon010ilxv5t82/WKQIjyPEOWYkzzjCraOME9kfV6edCq4hHHmXzCcZZejCcC88TMn52VQz/eJgStjCMmhinaGBoQ5+zmMhJYJYin9pRwj1rHStW1Dt3lbhnOuOW4O419Cg75RpTSGaLY1ziLF2EgFWkPNnpCHEEEWly/vB08YUbx2ZZK8RTicbyghDC0vM68fBhNqupxz/9n6Er84lcj2K+qvyzJC988DcIkvYxVZRU1p0PbhP5OwWN4Fh1EXw++903Lj5khK8tXYtupVaERgfwaIq2KIaAZgfxqCXEskUseeeQXBWsuRn6lNkMsv5ahQZaqGB4CeaJ3kF8P1yhbgqFrjmWx88jvnOziCy2SpQvcb1km3GQEuuFiYju3Mrp0WcRx9FZu6SqviELAHdDvloMeZcbnilYR6E5hyujxVVsFzBeGoYkeYd4CoRoRMC/HsD9RQo+Fpp0wDNdr0hCH7zlT/wypY94Sbm4tiDYCPVdtsOGebMAZS5ykpHeefouYKEgQhg/Gck8cr3gn6o8Fw0vNZ3bAFqF7sZ02+RhXQl1z/3bc5QAAAABJRU5ErkJggg=="},6772:e=>{"use strict";e.exports="data:image/png;base64,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"},6041:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAT/SURBVHgB1ZpNbBtFFMf/M7t2ESGpe8iHVJBMyIGPJq6BhEhBwj5zaCUkqITUFiQOHGgS1IgDQq0lTlSiCUJIXCDhQJFAajhyqBIEleAUJ6lokPKxtFVJ4kiYkATwenc6s7YTu4ntt/7uT3LWWb+J579vZt6bN2GoEDNPdvg1EyEIK8CAkADzAUK+4NuzYgaYMCAQBcOsx6NNP7WwaqACMJTBit/v2+I7gwI4KzvtR2kY8jXp8Wpj5YgqSch8V0dICOuCfLIhVBKGcemlSCmCXAm56e/wm1ryMgQ7iWpSgiCykPnOVjWELiJnzFcVOZ8Q6VmKjVOMSULmOlsvy8sQ6sNoz3JsuJhRQSGpybw9JT1xHHVEdjL6iN0Uftww4gVsDqZRRGQoJobna9hIIhSqL6pP+T4/UIiaE40kIoPqU3q+7mPf0Jp7ovWsbPElGhgBPhxYXhvNvpcjxIkT3FLu86OxictMIJgdZ3KGlhRxAY0vQuEzTTtniO16JO2NFTxAMC7C3Ysb0+q9nrmZ9oYreMthaC0tRe0SiURRG7a+BrcIwVSfp5326odbbzS9MID2wfPOtRhKxMLCAkjcmAX74jMZxJZApdluOqJiizNHEtwipx/t50bQ+fVVkgjXHAtAfPw5xGunyU02+Y7Td0eIdMsJSqMjr5xC2+AIqs6p07CfCZBMGcQZdeVqWIG4UrWdq4GINOLNt5EUgmLqV7tTbmpWiGL90NPH4H30MdQK3tkFq7WDJEYzrRCXdqRURGs+DCrJzb9REdrakbRRVAyTGjhjIA1G71G6N2Z6urBy/h38f+cWKkExMTbYS1xuW/2oAhvffYO5F5/DrfeGINZWUS6FxMgJ7+NlVD9I/HX1WyTeeh3JsY/KFlRAjI+jRljXfqiIoDxiaickg61Ske0tlMNBYnT5a5zVoDLCuo9Dl4GOd9MCXTGUGHABnaXyXp2BxdOlzarwcG8/zJOvVkxANlliDClExEnx0yXN/QM4OjSCQ8/20pPGEnDEyHqyLq8/MsL+3PpnE1SCc0vQ0+k9JYUvl6TNZlVAjFKM/7s5Dyo6YY9CYmubZscR5ZalTVNsE3du49/fbqBWiPVViJVFkq2ps5940FAbeHluQeDPDz9ArbCufEW0ZMbA4vqSE0fkZJ+gNNn+9TrWxi6h2iSvTDgBlITA9+riCLHtxCiIrH9yCb+/HMbmL9dRaez5WZjvv+vCG4CHa07fd6sosjA35ebgJhNdDxH2KAmTsHLJiS3cRnzGxvuM2Bvqrb53T0RkVSJE/Ru68qXNZKp+G/XCAy2Seb+bazn1ISYm4QIlJpMi1BzpjdRClSInabQsfVjlXnBBfcQwI9sbihwhKYUiApfUXIw8ksv2hmJfGh9Y3hgVsMfgkpqJEWxMTvDx+2/n/ebZztYZVsIZCaVYUDos2vdHLHjQJ3k3VrZthmV3SHlYNtXzDIt6WFM476eFms74fT7OPVP190xKRLDAYWjBrW7QiMcDy7FgXeeMnBNGX+z5QiIU5G9SR3KqjM9cVl3K8ExcxttIv7FBSp9cPbIZWSfmzLooH/QZN+3cihEMk17ow/cvsYUoyfelCCKJYZiWHYr0GqlTKDeUNYgdQc7ZCjtBGXIHiRGp/+Ga2El4Pw3fvbuBEqnYOqlEabKyr4riTj3ZKcXuiUuVnVg8YdtxU7Cf5VoQ9TLzmlxQDFSAe1MqIXxzjDUXAAAAAElFTkSuQmCC"},6235:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAuCAYAAAC8jpA0AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAToSURBVHgB7VhBbls3EJ2hVNtJikJeFChQtFV6gSgnqN0LJOuiQJwjeFMgK7fdpAgKZNNtIecEPYKOkFyggNRVdlaAqFYEmdOZ4ZD8/BZs60tFPwo/4/tT5JB8nE/ODAfgFrfYPuik34OGoGGvcV+BgwYQwue7MJr98uUQ1oQQ/nu2M3r/26dr941oRHq6Bz1CYG25o3WIC+Hz2e6IiwNAPDh72etDAyA0xNnzfn8HaYRIX/ECXt374a+nV8nTS9Zw1wgDjBfLD4f7x9MxNEAjTQv2n43HC8JDIpgg0JPZiy+GVxJ2d4TwA9bTRoQFjUkLAvEFE8cJf7Mn7198PlxJGFnDSA+ARMOwEWHBRqQF+8/ejhfeHYJnjSPv8V8zcSUMrGF0AyY8WVzgt/vHb8ewIRrv6TrOnn/W3+l0RuCwz1o9vetmx+dwd0RIYQ8THW6DsEBJn50MersX8z9YN+DRg1P9U2hFCt+Dy57/nNQ5luN2Lcf68M36TLIPznMneMdtPXTE296/IcB3cZwwttcOTsayMUObz3NGhvKbca/74Qi/n0+68mMP5j0i/w05/pAIKsEWASPx0MeTkRQJQgY3kBQdmxBZRqQkrdymDoQbuIwDqUGl640IaAvpfNxB/sf5pJGMLEXyPpbyng4spFFeuYikg+sPGVJpRn1R1psRpdBP+9gk0sPk0IpRKlCzFYQWTB3CRDYGRE4Facxrst/WHW1eI4+pL6UDYSQjkbQYDIsNY9ncaQk6pH4iTOvDikKMlGg4jE+JX7fgaYpB51/d+fHPp/AfY/b7J0NmfJS/SEBp8mwbQFtg7KhWnTWNsZWILQFBKyCs5QCWiuwWMmYdPEFrtB33LFR8St0j6jnZVM88yGN+XssbtgBKljrAVZvkDIZjD5viEYRo7hFsBJ8sUfUsZjsN0URDi+DidqZsF0s7DdGae2gLAhM0xza32sK5RCewcei3LaBTz0PmwfesOlkPdUxsXi7Zl2vA50D2bv2i2rc3xzR0UGsbs+LGcNPxVZdVt1nY6birb246mFCfX6+vEHlsT73fQ57pDVwL3R4aFomRiLW1nUDrWrspP2NYD2Prdz0CGbTPf/kgFmI3BCtgys99rIGbTk3kFC/j/jrbA0LcSkSrnEsOEsnhugr/lxBohkhwpaZNQJrb5MZrobSioultOPBtw6XomlbGHm0KSRPEepj/rqizWxeTNXU239M/1d6boYjxqqRle7hwOfIVm9gEZh22dPOxm3WFUXbj8S4I1CI/LiBMl0pDjvKqYR5Riw5kjIhw1UG0d6sIg97Xg+1YfRtPxDlf9HD289cnuiJnj+eT/FFF1gXJmF3SKMH5oq0ou9zPOZ/D36K90odlyONAeUuWSvMqddLqc7zkumR/DFhi4DFnY7ie4EJiLrJBUkbHYkN+POaskOWTZDAfBqeoOFm/fnXRXszfeEo5KO1/gXYHyMmeYp0RMYNU+hiKqR4M/lLFlEQZXmG8GIcDkvNLlfQOlMkYS9YAVLI5mIcrkky44iBa0k1ncEEFeSYwn2R60clDHo2KJeeB0gJqy0rE0fJNlQVAyp4hUc5apQRb0rZujznMpx93ugdQBX9UFeZ9vDRBeUuGUstd1BosKC0Tq7zxhN5SX12rWxZ94sq4thPn5rpOlopj4XfzCdziFv9D/AM2Fk/tM28TQwAAAABJRU5ErkJggg=="},6157:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAuCAYAAAC8jpA0AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACKSURBVHgB7dexCYBADEbhKJZi4wLnpOKkuoCNC+hdJ8IJhvCD8L7S4vKKFNEMADwaC3bM45ofTbcBW7/skwVq7YeIViFahWgVolWIViFapXrllWvNfA+m57czX3rmMFSuw84+DPeKfKtgp1Wq6+Hdw8idfpkRi9+tCqJViFYhWoVoFaJViAYAhLsAouAUZb7baTgAAAAASUVORK5CYII="},6561:e=>{"use strict";e.exports="data:image/png;base64,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"},6923:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALiSURBVHgB7dyNbdpAGIfxF5RBGKEjdJMmkxQmKSO0E7TdoCPQCZoN3LvKbi6A7cOf7/39PNLJCjLns3/BIorAjIiIiIiIqLWqqj7HYaRXjdsEslJXuCArFSC/VO2BXHI9uCCXXCYuyCX2IC7IJTUQF+QSGokLsucmwgXZYxPjguypmXBB9tAA3Od6gOy9IbjJc0H23BjcZA6QPTYFbjIXyJ6aEjeZE2QPzYGbzA3yms2JmxwD5DVaAjc5FshLtiRuckyQl2gN3OTYIM/ZmrjJGkCeIw+4yVpAnjJPuMmaQJ4ij7jJ2kAek2fcZI0gD6kE3GStID9SSbjJmkHOqUTcJpB7Khm3CeSWFHCbQL5KCbcJ5DpF3KbNIyvjNm0WeQu4TZtD3hJu02aQt4jbJI+8ZdwmWWRw35JDBvc2GWRw2yseGdz+ikUGN7/ikMF9vGKQwR2ee2Rwx+cWGdzpcocM7vS5QR6A+9Uoq3CtztVjZSPvc3aKuGHzbI/1x2iujrnIvcADcWn+spA7gcF1Xy9yKzC4xdSJfBcY3OJqRX66fsAzbljbIWwOtm6vu93ul/krIltY2yl98B1wAa/cYxifbN3OYbyYz26Qr2/Rvy2/V6OleuRa79If3gEH+WPYnKy/+Bvs8TalWrzWOXeNU234v5s3WRnIL2Gfs9Gi1de8C/kGN7ZvmSzueA8Z3BXrQL6LG9t3TBafkCKD66A7yK24sSfrnuzfu7LQBVw/RYva5dCFG+sEric7Grkr9wWX9d+kgjrvRhbm+GFCqQHTVQCLB7B4AIsHsHgAiweweACLB7B4AIsHsHgAiweweACLB7B4AIsHsHgAiweweACLB7B4AIsHsHgAiweweACLB7B4AIsHsHgAiweweACL1/sJ/xF9rKrqu03bB1u/os5rTuCDrf+1g3N0sILOi1u0eACLB7B4AIsHsHgAizfmz6RvYVzMVz9tfB7P62JERERERERE1Ntf1FHhfh5YgtYAAAAASUVORK5CYII="},6581:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABMCAYAAAAlS0pSAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOASURBVHgB7ZxLctpAEEAbIf4fL9iGE5ADhJwgB4g5gKu8T8gBYh8g8QFSZB87BzC5gHOA2BcgWygiECqKAtJdJVcRRb+WRx+LfhuMNAjPY6bVzAcAQRBSpgA5xzTN0X6/7zmP73a7Ubvd/gIMdMg5KOWkUCh0ncc1TWsDEw2E0IgsBiKLgchiILIYiCwGIotB6KR0Npu91HW9HyU/eSK/ms3m2HkQE802JpznQS/GHOsUy3ZdXn+H5+78Xos5mnGYuAbKWq1W3e12e4UX7kM6XKOs986D0+m0W6lUfkKMYJ0njUbj1eNz3wyeROEncOOWAR8jvjGLRLk14WPFU9ZisRiIqH/xlJVijMosnjGLWhUKczs1wXO/ISHwvR58zvnezWx6WA+3O3iYekwOn0QZorlptVqfIGU6nQ5V5G1QOQwn3/HBrZew6yFJKQORxUBkMRBZDEQWA5HFQGQxEFkMcj9viMM7Z5ZlnTiP12q1P8Ak97Lwq46BDwYoQLohA5HFQGQxEFkMch/gcR5hiLM0biO+t26zRn7kXhbOTL32GPWlgT+WLOmGDEQWA5HFQGQxEFkMMi8LZ2d6kBEyLcswDLrt/8BcKRMTvpmVRYtSisXiZ/obJ0OvaIkRpExmZR0uSqHH5XL5FVImEVnYnc6ppTDKf3AuSqEsfD6fBy5ei5PYZVGA1jTtgrZ/hOlKJBbLD93O6bp+kWb8ilUWtSas+Mh+2jNN8zKoPLagoV8Zil+cVqqSWGXZremwYgPqYm5lqdXZqwx9Wx9dj5ZtQgrEJsuW8l+ORF2MFso5j1OrC7t4juKXl/Q4iUUWyfCKOzaXh8mmXfEBMKDrJx2/lMuy44lvbKKuRrGMylLiGSDWk6Tjl1JZYeOOXbZLMe0x8Yz4fonGL6WyOHHHpvfURb5Jxi9lsqLEHVUkFb+UyLITz0hxRxVJxC9lExYoK3AxbNxYlgVxokRWq9W6hyNARkoZiCwGIouByGLADvB4i+7jqGXiX2KjgknrC/yfQQW6z5vQ3pi+y/E+uO+FySReomhLLzDx7IZ4sQfIMZvN5haYeMrC3OkbfipK1mJmDWwIY3tXGQu/zZlGqVR6B/ljgq3qI0TA925YrVbHOElwBo5Nis+Y+/V6fRqlVRGhfteBfhagXC73sbW9ycJkJxe6WeF31+t6vR5m56sgCIIgCIIK/gJKhYX1FY6APgAAAABJRU5ErkJggg=="},3545:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/roadmap-desktop.e4f457a8eb24a13f75dc.png"},7406:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/roadmap-mobile.55f256b00b771ecb4c9c.png"},367:e=>{"use strict";e.exports="data:image/png;base64,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"},7820:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/no-events.719992c7fd89efbacb94.png"},3597:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQGSURBVHgB7VZBaBxlFH7vn9ltdXeSdSdpxYMGD6J4MAGriBRbe7AehMQKKihN8SKi2OilCpv9sy0GPHjwIorSKrRShDRIPanNehDpxVqptRdJAq2ou5NsdnYpzc6855ttZzu7JqnZQdtDHwwz//v//33vfe9/b36A6yQIMWRRZzImwOCKhpdxIf3O4s+r7TUhhhhgDMvrgDxTbaAMD0MSzsrnHvivxM3bMxL5QFRXy9uznbpOiRVxUxAnEmzMiANzVxQZAi7epitza26DGMKy383Zu5VJ/eyrZMuowb83mGbWAlcQQ+raPoQIg+SpEjNcCB/ykBNsHrsW3V1JNW8fdMezudXmK/t67xb6v18NvCuq3Ym+PPiEVmFBB+Olgr3F8OFpRkixByd6DjjTgb6e6x8iRR+nzzoP4RfgR22sm+pmBESPh6BVbQ+jx0elhkpM3AMGPylMNOdS+0unJLbj7v3Z3Z121g1sovEUIx4Mx8icl8M1woxbUaHpI03KSX+spjPNxsLLl95HxhdjA8tR3s7A51pDxlR6vHKaAM4DwaABZlKAvwNS/cF8z6TrBCUWHxggkwT6Ixwgoruobx8wgiaJfAGJnhUW7mJFjYi3ldjAsuGMBzBw1SZ8ZLJ3jJFOSin9IJ70yXvJ0pXi1V145wp21icEOIVgvBmOrUL5Q2TaJ9Q+A0rdI/mftwrO3nC+prN7hYGjnXZa5eTobM9GwEOSq858sKWdHVGFq/u0JHer0PxJCoxvQP9ZatuhM701MAeB6XkEfLCB/q7OLtYCruu+O4j4iKn80VB3yWNUhnlC6JMShXkxlBFDZ8RQLqGgl8mQvw8+IHSrjnBkPc8y4WfpQrnovmVl/Q2GL+CVVYGFpm1RG9KhZn30h8JN7n77PvBgGhQeuczHZRsIVG0ATUUjYw2qRtmcLHjER9hMSCPh/L/KcdRTK+f86qH/BHs833x8ngseD2HJBPVpy2Ft31tj+1vJu2ooek5J7SfB3BnOd/VbDLy+qDPFqM5nyDCrV5u3ElKviepRZag3UuOlU0F3E/L3KPRGYgG72n5F0r9L8ng+1MmhBMX4rsnwpXSw42nt7Azaq/woDiOB31DedivCXJcXAdxECt7rzTtfRbUBUFIlzgVR1iayrzOpUUn+WHqiXOy00BWwpct6JX2QAgFvXofYh9OeRBk9H+sGrubsUUK4JWnCj7eOOydXWhPcRuo6K41FvcAKxqx8eWYtm+3lxPyL5G263SAOM8FY8K0U7mDkIUno557yD4elUc/ZW8iADxDU1ynwJ1EvVOEa0nYRkI607Z8LvEpaV34Kx8GpvXKtfVnaygZxdFna5MWEoV7amPvrN/g/JHCi9vamzXBTbmT5G04qzuiQQ0dYAAAAAElFTkSuQmCC"},2117:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHhSURBVHgB7ZbbUcJQEIZ3A7yBBrAASoAOsAPoACoQ3h052ABYAVoBdCBWACVQAMRIfINk3U0AGS4mAZIZZ/hfuOSc+Wd3v90NwFUxCSFGfSq9kKREZ4l2PQkxiU31FCXeAUh+6rEZc6Q9tiwAavdZZUw0iEFW+67FHxUgamfUdAhx6Lude7BaebKecmr7/0jh4roWOcUjQPzgSMvbzyKrsRDMMPUZpskC7Nru80giXhE8Yph0bp1SVpmT3TORRLwmmBCqh0wjkRB8CKZI9Utwvut39mI1Xo3DETJM6bZR8jt/kRqvCJZxaC7QqQa5cxHjFCX7BMQEO6WgMLkjUxp9/pivwAmyWrkOmxaZ4HoYgl1jrk0LE9CTlEEIeTMYGzKDb9RsEOaua8xN3mQoTKmTNH+Qi3PFGXJI8ZZ7yTwbCkLKNZYUEWp1aXppfr9Lkhkk6AnBS81WcII2a1HWlYPU5K+VL5Vr/GUqmUGPYN6tpgnnGItuldElgjeNsGMpvXzogkcwFKRtzhmHey8CtmY3JIXIKd+FbU0wIjbZdAxnaM9YUicplM2S5Og2plsEp9XUdyT66ejIZGprHkAw5GNjjrTBpwcZNQs0mfx09J2L+/LVg40KbFqTtlmCXYer/pt+AFBj5aXzRogzAAAAAElFTkSuQmCC"},6551:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH7SURBVHgB7VbRbdswEH1HSUAL2KiUtt9VJ6g2sDNB7Ak8QpsJRE8QdILGE8SeoPYG6QbKd+OGRQz0wyKvx7YuFNconARUPpIHSAQfpXvHO/JI4AktgXAPXOk0TUiN2FHfEX95ob/pff+9tfAPneaW1JEXA1HGlk9tZKeZNuZav+oT44jBRXe8PLy3sBernRqJUEEE44CZhZ37schGA6W4x6Ry6S7kEZ4HLC3BGkJiOvrr+U7h1fjgPbMaNAeYOZdBb8yI2JRBkxr1+TMg/TPjgTgicGcRu9lzbarNv37mYJyI9ZkYekcK0065nDTtx5KnHExFV18e/nVCwqgI842YD6PnYxeVllC5GgsJ79DzuyIktuar8gAdybl3ghn97W/iGHHOjr9viDW7iXg62TYq/Cwbm4/YE2tyQ9+K41WE6N9Q/14Q/MlZHFNsDQKhBqqskY7YvxxjoRJ+wxwXCISE3UiatzeESVElyd87jHfBdfmy1+wrPBAeTDhGi/BbN+GoXJM9DiIs+TyT4pLeZNn4VS276EJEizAzZmTd8WX/f58Ez7Gf/Uq/LloXlip44eDybTr44urq5YddfBhhwpWE+POuIX/qyUFzGkRYLgHDbc7nuXkut1ZAmN1Js//4SqbyB7W/nqBl/LpzSRnTIt5DSMglUbbWEE9oGz8BS77lkVFcYz4AAAAASUVORK5CYII="},2724:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAsLSURBVHgB7V1rUttYFj5HNl2TKkgMZKrmXzsrAFbQZgUhKwisgLCBIPcGCCsIWQHJCvCsoJ0VxPNvqiZ03NipTBW2Tp9z9boWEtbbN6CvKkGyr21Z3z2v7x7JCBVgcrp9xX968ICBACMH4eSpff0RSoQFJWNq/3MXHjgZAgLo8p9DKBmlE0JAHXgkQIJnUDLaUDKEEPS3ET6twfwNPDDMqH3J324XXSspFaUTwkbHFuK4WwDfntjjETwwTOznY/FZVaB0l2XB/NG4LAIcQ8moIIZYj4YQ/rbmE9KgGDLFEPadPViW0pLzUmXpjwCS+vI5se8fQ8MstUpqQhQZRFfLRz4OMgQqyyI6XTIGJm+3+hu//2lDClTqsjjo/QdqwA/7X93p6fM/buztAzAQaOGvacfmTXvHgHge+4zrsnahRszp9krcBxdq75mc4RP7vyOoCYhwET/xaIdnZOYJkpqQGcxGbWj5u8MN+6sdN45nqZyY2gjhzzskCgq0DpMjLuQIagKT8YHPxSD6uBtvKTMhuVxWFRVqXlgECz6cLeVQXBj8pEhNyGbKihvFnQXblNp35oGyjpjJ4VmJMcgSS7NayNj9gPsspPzqNQmL1oFDf0us5JvdraVAbbMrj3tcF1n1SboMmQgh7Y1/2J1u3BgEpxZCdOvgv6MZzvZBO762c1OZqElE3WVjLAjH8PENISUyEYLaG99CKzZwO9Aah9uwCRUBCY/DHeizS13M/BCP64glSeIpEf7mb88SrCgO2VwWQuAL0Umq2EML4ZNWSQwR6xD5W7bFOrgSvpBt/uLvILSSzoxuz6ACaEnN+J4x/oQdb2ZQvDPVIfzlB/xBx94n7sSNmcN86KfHWHCxijgOfIfvXba0XWIVuQW4o1Jc0iYDW4e/KVbC6ea5Vj0fTE+3vyiXgfhZZAwLrNG6/b/ULiSKb+KqA+kdR3FjxDJ5MnTVd0D4N2RAJkL4ZA+0WqQngXPTHkVnSbBPOdJjmf1str85fNKnNOnKY6j+4Z0lCN06fIiV8DHKpOloxyASxwGqfUfW/MFNAmjsIH36BX75mLaYbEO7C8GRxKu9t3Db0wSk1DqWIJPL8vz0wN+PC5xqTIrgHwchQ6pttoLDZbWOSjAQTuI+n09yH5ZCubyeRXjGJ/AdpMTCEjXB57gxenyTSQwZkLkw5CzqU7ijBdaFQbg0+McfzF0X5554HIpEwSf6hNA6QpzvzXH+IklFfWb/+W6G801+3T67jFf8t88H/lEmE8X4fVnZhJRATRZijWoUfd5t8iB/zGAz44ppZi3rFpwLdgl+sOyIRHBXOiCZOT3ZsgC7kBLrfCJv3m7v8sl/7T00ttDaz+PzPUsdeLsBcdP+9mty4MLfVykzzFNYlP8C2tFee/e4yAkmKU+GD5ARmS0k6rbi5GdeNdQOlHYgA57+fi3alP9FOkTOlddaVBgyeaJksKXtZ5nFWvbE8Wp9gRAJ5uS1BsXFtzTIK7/rM6rnpqELbxpWzZRd+a2CFPV6osvguHKQ4Z3wrruHw2hCo0s2SJTZOgS5CFEuSrMSDsRnulThuRjvYGk3j4xRJinKTZHzB4SZV2YyBBz8w/iBtGAdshajW8fMci4gB4osUOlW0lmjadR1DfyNFkx6kANCigrI3mfISfWWkVNjand2dTclMzsPGQLWzl7621wbBfWF1Ev8XFiEusrBCHIgNyGulUAgVXA6+OYveytIg3kGBQecXNWn+hxbIwWWLZlGQdDWqnUciuaV92SB1k+gp7NTujkNXBl7jjyxw0ehJVzOTmwxz+DNCE99t8LZWJDZcNb0EgpASPE/J+tazIIQyHWLl31lhnyvxfjhkjrpP+cJgmoiuhnbrNDiWCFC5MtZOH8Fmn7k+3p1wF6c8bozelAA6Mn6+gRI9ToMa4VifcfzXrBJrvVLbAKH7PDDFOEjKIDCTQ7r9ngYqYwVKV7DQajjOE4PcoL1o45fbPEJ/pTx5cExZKmJ7kCrvtGyLqb9reOF2ETUL+PShFK6TqQyXvDzTApnXpfsLkK1N6mqTwHWj4LsJq4YE+uT/qiErpNBuJmtJvKhuyuxUKI5F5f4LnxbSt3mswyltQHdCb6g/P2httvJ67ZYroktxhQRcnGQ9ItxsJdJIOquToy+FpGnJnJfGFbfbgxDLXnBk7LIEJTalyWkiN6UOCBjhhS8DLDrbY6lGJMCjYm49Br3eotjVTvQpTwv4zyf7tdEXcgIvfqOfI4oFizrfE0tTKZB6Y1y4r5E/EsIvr18VoLK1chJYAt4z2sNX3h3wT3JcxHh8EDGyXjtsU4W9VkgUnrM8UgtsxfX/lMUlXQuSqCX4itWXMtjJeQFdJ790dkqJIjbeNq/3pR/UbfpjQ+yqyzqsyDaZsRveL7R/7pXNJtK/DyoCHLAnHUcMilHEWvJZCVuhgVJsnxfZHjdbYjbZOn9RZLSamW4XCLaZuTGi+s3UCEqvxxBqlaxFj6FYXaUM5aol2pEyMmPK/S0yfDqrutMV4tI7NCtg4vbo7LjRRwQaoKsRbep9cXfl+Cv0uUUmNjbMo5TaPwsS7RZq221Egn4WpZcWV1IVbxNTrfOgmyqxLR2GWojRKCupQitY9zGtb06G6PTwmtSUJMnrzKcF7VeQRXTpvMeDIR00wc7BZTbPKiVEHE1EuS1h3q6QmwCRCz0A7ms4xdRbvOg9msMRe/RFp5EIT4rKjyWBdGnfLFQXNVtlrX2krCSiz7n1vyNnv3wcuf7VV9CoPQqXZ8qQbnNg5UQEpXtxUWI314VKYoMVqiDB0pSbvNgZZdFSzVPWqPbqkhRnSguGR3vQM7rSnHjsNLr1CVg6mKkT0pZbT/LoGKGK1C6zQ8c26quxJeh1jokCZH6xAWRzTO1kqAqTQkTmpzpywNChmqqWDGMIETg9fVKQ0IgbXB1PWxh+1WZxaOslUiHiK5RuW7q2oj02xhCBCKvtKh1FW1k4P2LFq71ixDj3fhArLDnP0aqVRX7dWhUaWEUIQJFCrRstpbXMU9/lHtwpS3WxDVNnZtjrvBk9kdERdUSdMQZ3xAMgnGE+FDLsOxa4tp+vPsd9u8jZkEc1GCiVegwlhAfqm+YZfDYfixeQo29aF96pfT2HAgWss7zqMV1wnhCfKh6AehQd2WiNa3b13ca07zL2LreoAH/32cihiYT4aOCW/xVA88SBrw28iy4hwjFt6hqGdSYX7cPPxF+uhuY8cn+K+3YLBfsm4LmjnKGoSHEMDSEGIaGEMPQEGIYGkIMQ0OIYWgIMQwNIYahIcQwNIQYhoYQw9AQYhgaQgxDQ4hhMGrFcPJ26xQt7N47iBel9BaeuItLI3cNXdrEgGidFLkxZpkwqS/rQC5nhhXA62Q5AANgkMta3W9XVfF7hHlh6pp68u+TlAQk+pUq+KXOojCSEFkLX0/4fZKy4HUyHoJhaLIsw9AQYhgaQgxDQ4hhqK0OURfJwPcDTLxF0sKvmtWaZUlxiYgf7hk+qOLOP7HHBTVBbpNkYpqZEuMZbryI+SWI0lGbyyLELvy86PwDxrUUriupQ8RFWKjfC9FMkOtCa1UQVkKIkBF3GYFpuDndlh9mqZWQJssyDA0hhqEhxDA0hBiGhhDD0BBiGBpCDENDiGFoCDEMDSGGYal0IrL5/0sQ1mb6e1L+n66oFRTeBXsG7e4Pu7iK8mTJfRzvld+TbuDSID/kxjm3uLGXJOUvcVkNGWVDui7XYHqY9Pz9Lsv96YeXRLSyJraHBNXiiji4hVniHU//Bl4EL02o+asaAAAAAElFTkSuQmCC"},8621:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGHSURBVHgB7dlPTsJAFAbw71FYmIhiDHu8ATcQbsANhBPoEUZv4A3qCewRuIEcoexMFCXEnbTPB0qMi9KmZfCRvN+if18z/ZLpTNIBjDHbECr6cO0ukF6njB52SF4sZsLDiZuFBevLW7jzATEe4ROza9693eaVlQ7y7lqtBgdPDHTgG1G/6V7H20pqKClA0NtLiJWUB3klpYPIoy3sCdVwmldTIYguFkSbetYNGVqHBOpszuU4OnYvEyiVGURe/ErG8N7vBYplqzaIfSPaWBBtLIg2FkQbC6KNBdHGgmhjQbSxINpYEG1KByFwjD1h0DSvpnSQ9U9lojE8k//L8yWWYV5dpa4lDYykoRierEIklPTP3DzOq62jgp8GLtbrJKAudki6U5zgM5I25kXqKwXZkFWlSHYR/pGNWtoU71qcXi5cGz40EIyP3HOMCjKDMHhKf84xJE6H8CAhjGQXooLMriWjUIgDkhnke8LDPQ7E1m+k6WY3MkdMVmslzNyBJ4y00FxhjCnvCyGsaHrzt8xBAAAAAElFTkSuQmCC"},451:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA8CAYAAAAt3km7AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASASURBVHgB7ZptbtNMEMdnHFeiUspjWh6Jj+YEpDdIbtCegHAC4AJkzQUoJ2g4Ab1BcwNyA8w3JAgY7ApEbC8zrptCYsezxlFIye9DFW33bezd+c/OGkHAN3XPjfWP1wDYuSzBsY328a5678MKibz9xzpFRT+drEBrtff8kydpa0kqxRCfXhuVjdCJ0+kTWCH8MMmoE7gyikFUobrblbQXGaa1dhcKER7ACqGH6RaVI6ALAkSGbSJbwzYNm/9o5TpR+vUxoHWkQc82q4XWcVt9GC/r4Ks6OAINL6AhEMDf8ya9qnrh4OC1Buhct8MAQY9buOOxt7bZ+1zo8Jw8jksmcsczfjWyHMtBSF1oCBRXRAd/c2o0WzI00dPuZ+UeWvRjQAVuUdsrwxDRX+wXsjILEoHxcnTu3skrjkvm5Fe0d+00VJbO3lQxqOFhPsgjauBf/wNHU0gyodR5nQZxWKvuqCBIUT+lcYN8wgEN5u2pjyNeZfS7W9oDSRFSJ+fLKqEF/fZg8qrof6F3dwCpVtAwvM9or/SKIhv2Bxc6Oqc311nSxajSsHygIVn4sgXT7OnFYLu0vh/SU+zDimDjUgTPAmt8Ne4UWh1aYoMKo5iRDQIyA3Taj6E1K9GwWniv0FY41ZDC1bhoMPJWoDeNrWGbRqHzoJBGHACsm8/KcW3dejtfvl2Km8a/tceK4FAmhIsjEJMGO7AzXpbw4ZiQzhMuCKFjic+xoqSuyDAOOiMdvsFfEysCYgqCaPK9oslEg4NTyqX00TCGoXbDtjd5VFVPmqXqg6FRM1K98JbJkzl140xpO5FhdJAMYMMQGTaF9Oy385gQPkPFVnIyX85nLTrTiRKfi51qUTvRHqOJ+LR8Dm8ZLsfvZFhmRAG079Q35QzBkF0v8CX1xF4xn2CjS3JXySZZh62OZSk6iKpOrnOd2/4yHYvU/x1ZJuwSTrFVpQOvxxYwS9GVZLPKIB0LaPK9osmEg/0XWqdGFxt8eg6f7YtuXMQ6pg2NynF0mvbnC1nH6PnXu61BWbtN3GOipSt9Y8OmdYzyka+gDhpeSqqZ6FiPnIELBiSUzS3TsdvPJ32KI4dgAEIctL2gOefB3LnUHB8aRBqp12GrYwyFQK5J/arIwrS/W+AEqHxR9CPWMbqVOY+1mcuns1NpDp7z/rFh3j+CEL6o/af/qU8nVXVXqmPcpujrgkzHal5mcO5eVA82j+Z0jNzsGdSM7NGyhvNl+XlsBHVoUsfaKhjzeawFO10wgJMvZUErufpedn9NV70gJEvmeA0mc5hcx4bQILfV5AxWxFbHmKZ1jM943yEQL0WTE/dadSyi232Y3ZJWEw4OgC/cG9OxBH4c3UgdM0lDC/mTb0Oa0zFytLW9V4mO+XV1DFHmmUV7jI8XtHzuN6ljFKYdt7DVNdGxy3ZT0UNem47lB9Ctjpnybwm0qRCvkzjLwyzesRUaFhfcwv+9FF8c3tw9Rmnjd3DD4I9ErQQSBQ1fD60TTtLyR6IW61OMyWHtE+1fQvYFKtmQYNJjm34CseUnABXHnYMAAAAASUVORK5CYII="},556:e=>{"use strict";e.exports="data:image/png;base64,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"},5505:e=>{"use strict";e.exports="data:image/png;base64,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"},5983:e=>{"use strict";e.exports="data:image/png;base64,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"},9641:e=>{"use strict";e.exports="data:image/png;base64,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"},5810:e=>{"use strict";e.exports="data:image/png;base64,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"},622:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANNSURBVHgB7ZpNctMwFMefBGzLCXoCThCWTYePTQMzwIZlwwGgByAcADgAlAvQGSgsOsNAWXIBeoKegI8NMI2QlDRxnxPbsvVky3q/TRNVjtN/2/fLkwTAMAzDMAwTJ2o4OlA3RpvAOGEyM9lJ/XgAU3irbj/cAKYSNiudmX44kLMR2IR/v54BUw2TlclMIxeDSjxQw509YAqxGemszp/Li98WT9Tw7gCYlajt0U2TUXZM5mdN37BU8swzyZW5fIACNuBM7LNUliykMa97WeSaS66xVDJkpIGRay8yUtnaeQSJg6WBkYVXCzFJWSqrpIEpDtC+SppSWScNTHmACUqlSBqY8gBnL5mWVAqkgakYICQjlTJpYKoHaOi5VKpIA+MWoL1LP6VSVRoY9wB7KBUXaWDcA5zdsl9S+ft7r054hpoBQm+kMl/CG0NN6gdoiFwqamt03VUamGYB2ncRp1Tse5bwAhrSPMAIpdJEGpjmAVoik0oDaWA8BQjRSKWpNDD+AjR0XCp1Oo0y/AZo6KhU6nYaZfgPsINS8SkNjP8ALVoqplB3BYflKVeIArSMuyAV1+UpVygDbF0qPjqNMmgDNIjpyzak4qvTKIM+QFN7AkuFUhoYqf/NvgM5gaXisdMoRMCp1AV2AmEIIhXfnUYhZ9NdKb68+6Z/W08hBMRSCSGNJfK5+PrxxNZAcXz4Wv9wryAERJ1KKGlYdFb6D8/eaymRK3/0gDgBagg6lZDSMHVPfH4/OX+6CFAcHf2ES2rXTAByPC9/BZSGTux+dujCxxjx6fAUlHwMIfC0/BVaGjajDLnPgTFJpQ1p5EZXTY1BKm1JA7O+E+mwVNqUBmZtgJ2WSovSyE8pYVajpgcQAqUm4vhDaelQ23cm+stVoOUHSLWPpYEpDdCgi/VYzwy06ybvWZFFQqXVmD50KlRUX86KuFOhpHKAUXcqhDgtqMbYqVBTSSIYlsqSWkv6LJUl9fdEWCqW2gGyVGY02pVjqdSUCCZlqXjZF05ZKv421hOVircAU5WK16MdKUrFi0QwKUmF5HBRSlKhO52ViFTIAkxFKqTnA1OQColEMH2WymUIgJGK3t3TNUrdsjWLFGUOlEezKcUwDMMwDNMS/wHrHPEBCxb1vgAAAABJRU5ErkJggg=="},9986:e=>{"use strict";e.exports="data:image/png;base64,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"},7733:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPiSURBVHgB7ZnNUdtAFMffSuKQSczImAO3KB0kFUSuAHeAXQFQAaYCQgVxKgiuAKWC0EGUGwfsaIAMB7TavGeLYbXaXcuyTIYZ/2YYWHk//l7tx/s/ADZsMMKgYR58P0gBgqeyBxC/SZIYGmRl0Xe7uyHLsn0BEAJjH40VhbjCwSKRZeNWkkSwArVEC9/37z3vCIUcYtGHJcFBY/w1fDeZfIMaLC36ttPpY6MzqCFWM3gMNcRXFj2bXdf9in/2zJVmS+BKzMXkI+CSESKwLR1sM3rk/LidJAlUoJLoh729gD8+Xgppg0lE+HzEOR/bBv2DX9p13R4OeAC0/stCYndrq/vm+jqGVUVbBEfA+RA31Q9YEty8n3FDjhhjgSKmknCraFoSf133Z0mwEMPWdHoKK4LiT6gvKAqKcal8sr01Byyg4DNVMHbab0Iw0bq5OcX+B/IzGs+b7x0jRtF0SmAHffkZCa57TJnYnkxGqnCkd9/pHJjaGJcHNvpVmOWGloQJzVJJUs4/6JaJdqbzWQ6eykKIeJ2CCVoqQJv7Gd9znENdXe1Ml2aZ89B0StA1jt/qBDTHmAY6cU5N13je16X0KGlNJm1YJFrTMMKGXag2SDU47xqFdzrUX2irW1oeeH7uy2W6rcDEfIaXx3WN7fANFza6cJx9tU5JNFNeM56ZYzATQj1C0wd4s16ARQ9R3ohyjICxRNV4oClm4+G4oNOTUxCN8UFQ+JSxGP4DeL1fyWU0Fu/lckG053lBobX8jV8QOmLlcqrcyg68Ql6/6DRNY7nM9PHz+lE2nyebClBEtxXXjGem2aiuE3I6Eujmf8tlR9OgcNyQ44AXZDaecuyqdco3YjFogS3XLd1IEhHUIzJ9QJYMLHqI8o3oOGOlUR9MMFYv8kObZuxy7iGfy1l2odYpicYQMcJf8i0Y3vl+CBpmdRmjYCqCakQLI0bp2p6FxFU9KAXkGG0J6Wf5SK4GFBLL45rci/acxqPvHNTZ3tkZwhrBiRqqxsNk7bSiKWjBDo4LDxk7sfm2VcB++2qY6zA2NNW3phDwFX0HJaPUtLm9n1u7gvvGWR5tT6cDUxvrNY7GcqAGL5RNamqp5EtCFRzzLDu2tVuYYaJw1XWcS102SOCXqpO2NfnKXHC3vSCfXSmXZxKeE5Ele4sOh1kMA2Wr7iy5vKqCK4vOhfso/AyF942V6Mol4yBdvRR0zWIYS9YUP79AmzVoNGsqc5vvdMOsLwWKTXBTHa0tP62yingSy4T4kmbZeR0PWlv0E3natscq/M+Fgh+KJeqkh2VWFq1CJjSVvKaHxkKNhzdsWCP/AHkh/XAu/bjwAAAAAElFTkSuQmCC"},2800:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAACOCAYAAADn/TAIAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA9JSURBVHgB7Z1dcttGEse7h1SqUivZtOVU7Zu5J4j2BKZOYPkEkU9g+X03JLN5t3ICKSewfALRJwh9gjBvqYqtZSxtecsiptMNgDIlkVQPAJIYcH4PtkyBFkn90V/T04OwZnxqN5qXUNtBQ4+RoMkPNQiwASR/x/+eCgIM0i+GCDTga4dE+A4hGm4C9LE7HMIagVBRqN1oXEB9B4z9lgWyYwlbOEcYBSDC6SNSn3/W2w3Y6H/d/X0AFaVSwjlvP2rxXy1AesIWpAUrJrZSCD1L8GYLol6VrJLXwhlbFUT7HbuNPX6oAeWmhwaOa3bjre/WyEvhiGVhsTxlsexD+cUyi1hEf7PRGx8tkTfCSa3LAbBggHAHqsMQEU5qtNH1yQqVXjhXggF6Af5aFy09gKi71R32oOSUVjif2n9vRnjZJoJ9WDPioNpAZ7P94WcoKaUTTmJhah3+8gWsOSIgguh5GS1QaYSzZi7JCY6BjssWA5VCOHGWBHREiy3QXcE/Z8C/jD4RDTiz4bsaOauJuCJcH9Zro8HN60dRvZk8b9RAME2pMvNHJwF6g13pDi5L6Ja6W/8560AJWKlwluGWKF4qoBMw2I+sefeg+0cfCua/vIxRM8AVasNiwtYii4/ivmqwsbtq67My4SzKysgakkE6sYi9iGskD1ZUIznvPnpC1u6hVLJhAeWDFVufpQtnEVaG4nUiOkZjT7baw7dQMsQi1Y15ShYOELAJBbFK67NU4cQpNnx+TcXdgT0wdDKy9ucHnlRfU0u0zwLah2IYWqDu/e7ZISyRpQnnY3tbzPYRFBNIcswSHZbRumgp2goh4uFm5/1LWBJLEQ7HMx1xUpATYncUge2ydRlAheCbal8+n/wCon4dvnq2DNe1cOGct7fFhOaNZ3ojLoRVTTA3Oe884kp57MaakJFlxT0LE44EwedUO+R6yXeQGeqDsQc+uyRX4tQeTDtPDLQM8SxEOCKa/4E5zRoES5aERJ2tH85+gjUlFdBpDuvDBU2zu7mAupVQuHDyigbWxC1pEfcFfBNBNhYmnkKFk1s0RAfrbGVmkdP6LEQ8Bgokq2g4Wxpwet0KopmOWF/OJnclqwR3GgT29KL9TaHV68Iszsfvt48zBsLBNTmQ1XUVHTAXIpysdRq+gw7vdc+WVrSqClmLqUWKJ7erylzc47smiCYb97ofTiRuiV28A7KgPOIlHyiAXBZH/Cb7z1/AlSTV7kIgF1mD5iKWJzILJ1mwvDx1bYtAA/tl7qX1jazi4YXRl3kWRjO7qmSV27GXhtPtIJpimci4Bi7PM4DtPJlWJuFIXOOcdq95JXiRZBQPB9b2NVusTN0Kzq5KXNQILn91epJHMU26S1S2FDfl37Lb0hcrmcacp+CQbWWNd5yFc9He/tXFRfmUcs9ayS9Ln6+GNFV3zJyiXdctOE6uKnFRTqIRE+qLpenAjPYPec+SCGQ168tEUnU2Ix2X5yDUjlzfm1o44qJc6jWpaHZ9aOlMPrT5703EUzcmR4vI8tjqvO8Sgdq9xu+NjFPPlFo4I3QtHOFLX5YR6jKASYEMaAJPiDA6cAqW2UolxkGHSjhxa6PLhIi4Kswm0xP4A26qrksDZh8QS2+g9szlOZz0HGmvVQmHL3JyUaEqXA7iVgq3eKd13m60NBfeKRyxNi4BscQ1ECgNEu/ELbhqaiojMVc44vMcrc1haI8oI8alHNK66G7fmQTMFc4lXLa01san1Hvd2Oq+78lNrb2eLB7cdY2545tqa2MMdnzZTbmOpDe18vdDO3fFOjOF4xLbiLUJi5flJr6peXlB/4z5sY6Z8w21tUFj9yFQeuLCoL62MzfDmiocWehzyKR667Rhzn9QH4dibWY1eapwEElfWjdRBwLewIXZY9DGOgStWWtYt4QjKbh20mdc7AvWxj/0sU5j1vrcLeFICg5KJJOCgHeMaCQNdTqrY+OjDm5xSzjavVEhk/IXybAI1Zv7WtNaTK8JJ14d1Q8+7EHAW5DMG+21RNHTm49dE46LmwpVYr+RarIciaS6GLF18yFz/fvaLbzUD2tSFQBJ2/rS+vRj4/HkA1fCidMurZsycAwB75Ghm+prI3MtSL4STg1qLVDCP1DtHwPlJVmGULore91dfXFVchyhiuCmKoWDu5r8h/nyfJ2bopBNVQq0NW0Bt8HhzFVaHgsnKSvreoplejkEKkM6qUtVDOQq8pVXioWj7fIXRhbeQaBSyNGOqusmdnkkrsrYb0FFHN+EZq2KwVVkVU8y3RQOP9BUPRHAoek54A3WKL0INsdfxcJBdXwThFNFRjDS/l4b40Jg4qrUOxRtEE4FiRc94wPh7sZGtVgrJm3UUW04D4FxdZGjJjXX2XTXq9mAjSboGIbAuLpoe5HJJvGw4Scox1u4jQoL+AVbnIHmOoOJdzLaDfcQn5QbqCpk8U/VdengBYNIjzVP4OsGEKgsnFkPNNeNDY16Po426g74CafkA5fr2VUt6bD1QCVgy5TEOCb9IhBQkghHezWizgcG/MS1x6rQ86oC60MQTiAT+qyKtPWegI/IYSIu1xteewiFvYALsV64gqxrGyQKaXuV4TVL1e+XUkPD2bhOOOM1ikA10a5Zjg2NcVijCMKpMPrFbhy7KvUahbqhPeAfvBap6jsfr1ka7RoFhgpzpdEuPY3XLCUd12ZVjZsbzwPVQdt3Po6JTZZ+00AFcew7T3Y5KLu/LFSzCGjA6PYVOZ2J4A+OfedxMpXsq1J+ID6d1+SCbIPV9NxWdfuzw05e6Tv/YnGAULV7werHvHkIzj0oQ85CqOyEVbTKSSVfdkKY5A+dqZZD0X04lzILcjAbx3rPplkenw6kzcbtUW3TmPRMsXBcJhZsmNpTqCgiHhbIP8hEe+yXO2RgfwTRg2qLBtSBcc1gb/x1/epR2ZClcEXWxoXASo+pvdceysSxtZg6JscvgLJq/NlGVyHNRFvFFzXNg93VPgQqA6FVeRBx4ZNdgmbiO+rJTNpzGwPlBzPOtb4STjqxQHk4hNFG4YESkxwXrasYG3PdI10JJ51AqSuEoe6QkEC5GZnP6kTn0kbXPNL11lHlBEpJy4O78h9UnL2Z0ru5C+KacFwGJhOYyqbl64DLYXY4ZSD6NeG4DEyW7KqqxcB1wOUwu5tuSri1y4FIXaNp1Mm8gIB3uBxmB1PclFC/+UAE0Ukdaq9As1qKsY+s1Ckyn9qN5iXUWvEUD+k9sfbdVnfYgwoR4eiFdGRpwBnnduC0Bz92Hr5C0gVO/B/vV+HAs7iCitSeVj1H6Vcy0KnC+xRrE8HlqSa+kaKfLMFM+970w1wdDsECCx3wnIv2Q75J6HTWkot8yGTh+Ly9fep7XMf1OvV58jDn+IWpwnE5BEtexEV3W39qcMn42N7mDxJfKS9vsRs/Ak8Ra4OgD4rnHWY3ewswOZxPzVbH1zuRP4A2uLHnaw3LxdqwmzqeN8FipnDE6qgnUfKL8THDSqyN2mxPUHMV28pJlhdI/brR2ON5379j6ICD1eEMK3lx/oAIWYuYLd8sbISXLmLv3dXtOFc497ofjkk/prYxgkttrFAO8k3gaIInxJaVHNYXTdS58xK4E3Sp0+zxi9wDT6AcmwzrBu6DB4gXcIzjTjS91XcKR6yO+txGiGseR76Yce0Y+mn4cjyBuCiXOG4EkapNVjdYiZysTsOblBWpB5nw49wuVxd1VyY1iUo4aV3HZU/R3p9xUa3cpN0AzgJAg4dQclxdlMSy8+o2N1GPchtRbMLUH7LhotpF+5tSb+ATq2GBXNfaej4sPWiXFcYgwaHL5FG1cOQ/df+Q7euyp+j3u2eHHOx0dFdTn2OA51ByeGnk0EU0Ym22fjj7CRxwmjqafMj6QFle/Ag+vy57sLzVed/l1/p8VumBxNISdUZgd8t+5jov1nb4L6diLLuoXXAEHa+Pp1Ny8PsLOIzy5x9yvNn9UPo7VTjvPnoCZFv8mpuWWDAG+5GN3vgQDF8klXC3xIRvCLY2zq0xzsIRJPA1+oXB5AchHm523ld7R+QKkXiSwP7i+LTeVveDs7URMg3IFpcl+6ldnkNEB+f/ftiBQOGkojl1eY645TzxWubJ6pK6keupeQbbQTzFMiEapziSFzH388RrmYUjPj8Nqtx8fxBPYSQ7FdxFE8c1OUe2ZIpxJkk3rTuZScGngLmMZAqEobiRLbmFI2QJlhOoX4evnn3d/X0AATVJyq3vrfkC9be6Z/+EAijk9Bi3ItokuCMVTt/6eFYFcT3s4/fbx1lEkwTD9hkURCEWZ8zH9sNXCOptpdfgqvTLWICBqbjsTrhJug5VaPGyUOEIckcgQqbmdX7ecY02usF1XUd2YRCgWBnnCvwiRCMULhwhl3gqtIcpL2JlRnh5BBmHdi5KNMJChCOcdx61Je2DjKy79cljZYRFikZYmHCE3OJZQ+szb0eplkWLRliocIS84hHWQUCpW3rFv/W8Pds9Xkp4tuhF2YULR5AGdkyKVbnaK6oooDhbkr5gyj/lbJnzmJciHEHaMWpgTmWaF+SkCgIqwiVdgxeRXZux8rA04QjS0MXieVXUyNtYQAg9X4JoKeBdGPMdEO4VJZgknqmxa/oj846NLCxVOGPSJYrMGcN0qM9W6Lhuv3pTJhGJWM6htheXJ5IJ5oW9Zy4GnkQQPV9Fk9lKhCMU6bpuQ33+RfWI7JtNgD4u+YONWx1M9CS1LIWKRZBWVkw695bmmm6yMuGMSbMuWaZYZF9yD5H6lvCtATPYLNCspxO8dtDQYxZKK3VBC30vo8TKDGCFrFw4Qmp92ssc9y+nAqYx0hA5TpC7mAh/m3U9C+M+P6khvciydZizoB1MBLKURnyJZaT5qixHH5VCOGNk56FEBYtxX36SuqXDEdqfytQwXyrhjAkCSpC6jLTolnGHRSmFM2ZdBSR7uFPBDKCklFo4Y9ZBQGV1SbPwQjhjZLMcWbtfsTOzemDoRAYg+CCYMV4JZ0yShckQ67io1gLPiLcUszuSU4V9PSDWS+FM4ouIJP3nP098Fssk3gtnkngtzMATsEZW43e0h3gtgjhmkQENSL16zZ58/a/hb1AhKiWcm4iQ6qb+LYDdSaq6MiyyeDHFxUSEPhENZEjBRi3qVU0oN6m0cGbx6cfG41FU5wrwiCvBpjmuCMv30oGSk9VgqSzHQatMr2CBDAlxABANN2rQ//8l/OlTUBsIrJS/ADHAarz8AZAkAAAAAElFTkSuQmCC"},8623:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIKSURBVHgB7ZndUcJAEIA34d6lBHhlAEMH0IFWAJZAB1qBdiBWIB2oFcBAA3QgBfDjbmSdEPJzl2wOYe6bgcDmkvuY2wt7CYDjCpjNZvXFYvFMW6gID4QhWaXUB34M8DXfbDaDXq+3BmFExWPSTCXyYuIp0oy4vA8CJEnv9/tVpElA+yVzvrR4krTneZNut9tE+bdIU1H5UqmSJt1utx/4O15dJhgbRg4TSZvC4jrSTBXyhcRNpBlpeWPxItKMpLyReBlpRkpeW1xCmpGQ1xKXlGbKyueKVyHNlJHPFK9SmikqnypuQ5opIp8oblOaMZU/ET+HNGMifySeUppOO53OPVhiuVy+4+YuEkqU/6sOM+rpOdgl3l9iVRmK5ywC/gMn8ip8U+oVjqVpWLTqZszLqe/7t6DJbrf7xFq9yHwJDp5h2obimEPjWq0W4MRo0ESkGC4CRjpnw/Y32LYBmlAfum3xvJPfQ7whrai22+2Y94WpgolPwQHufLFx9TABR2eEm0fyI0+OK/5wCI6hBPTDcTin8Th22qfOoSB4VXuKxxQIgrk+b7VaX/E4zoMmDjdIIrLKPwdO3DZO3DZO3DZO3DYXK577l0/VHNbB/YwmpreN61nno/6w5oE8csWpvMXCaQRyBIdFS1p/oMPVpcoah2wFhuAxibcScJHyHXu0ogUeI/60zuG4FH4AJfhbtlOFND4AAAAASUVORK5CYII="},571:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAObSURBVHgB7ZlPUtswFMafAgx/BtwF2+YC5QCdXqBwgeYALQeg6QE6dA/hAnRfYF/oAQjsm8kB2i5ZYEgmYQD1e8E2LyKxZFsmmU6/GU1i69n6WX6Snp4VeZLWOuh2qXZ/TxtK0RpOBSih1tSamaFvi4vUVEr9Jk9S5EHdrmbgbXqAHd2Qol8oO0tL6pA8qEKjQarX1/ocv+/IIth9AnSDBDR6mSFP8RuKc1XY7bE9laEYGuUPlzT4qytdi+24hKH+enGh16QNjqs435B2KOtUhgC0JxsaBy8fEKWedk+uj21x/zYeKKAyZIPv9fS66OmG4z2PxDWbVECVcRUrK2oLfpkMJPZPCb+woE5E/QE5CLPLTtJwhd5QmbL1POq3s9wP92hH7nJGZcvV510EFzn3AV5xMbK5zSTkBM6aNnhncNY0wWcCZ00LfGZw1jTA5wJnTRo+NzhrkvCFwFmTgs8NLuEmAW8Fj8LcfTOONuGKwvP9URrYSb10sbeC390RR3EbKHUz1s4Djw1G02wDNhxwcVhc63SoRj7A0VASN8/NPd2a4cGG3oQN3qzPq8KDc5Rc4NEhheCt4HLfaChMu84Gv7ysdqiAXFzlMjGuPLoKQGLwF+OuLXO2cQEPRcPV+D92Mz+j+iAaXCPlAo9xUhX1qW8yC3gr/j87S69EVVM0nJpycPD5A1HfIh/iDJXYbiW7cz4f72aiYs2X+N4GWsULw6g0BLuIBOFdvOk25oLiaxvolIJjGLzeowcQCm9u6PXqqgqjh+IHMXs7ZF+NBnOA3y2ZemN4uGACbNa7yGkex02bAB74NA/G+XlK8iiY1nbh++8BKhOaDMs9PXAr3+HBgMPVkFNpAP5BjznCXXMu5pQcgNcBwqEBT5OXOObB1uz16CB+S8K+cM87SWavorLvGhSNk8/UR6o6Hb0pG8LxmUtj0ezEEWB7xGySGT5Xfpx7HgP0S+THsdgNTjn6i+d+uEyA/1X4M7sOR5jJylt0wOZO7LPPI1qsowGnMHSoUTV4wI8AG/pCkQW+8BcJLEI8b9fQ4IYMgU3xNIow4fvtLR0GgWqOszPh+316i0HtZzUdJ36IaAwkKy0f8/ks+XDh83V6TvlIbNq+WpSykfAhrBEnafVTC27Tf/DnVqbpsN/Xa1h4tvmbZZqdXJiM4OspAD7c4uczAq9MU14mcI630VAZH52OMRg/ZLkgk6ugJ4/Js6IsgtNXu39CfwHpCJt244Iz3gAAAABJRU5ErkJggg=="},6197:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAuCAYAAAC8jpA0AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAP3SURBVHgB7VhdTttAEP52nUitBK3bUqmPOQI9QcMJ4AaFEwDvrWz3AsAJCCcgPQHpDegJ6r5VKj+hQSpSbE9nk0B27bVxnB+EyvfEbNa7H7Ozs98M8IQn5EJghiDPdW8ANwIa4w3q3aXg9ylmiKlJ97yVphDJekJiQ2hks6BTIcQpUXy0HHQ7mAKVSCuPXqO2w39ts+liQvCmIST8Je/8CBUwMek/3ptN/mgPFchaNq9EvjTpgXeFcwjChvV3oCtAoRA4JUVmvEGDIBo8oZm3Nn/TcqgePA9+hZgV6b/eu0aM/gnZY7YDGftRgu+vgm63aJ1esPKBkoRPSmxaiIQO6mtliN9LuoBwJ0K8xURDTIhLz23UIDjE5EaKTCniohJhop3lLxcHmBI9f8XjtXyYhMI+4vdFpyZRgFj0PZ2wilsOheYsCCss+2cB01yDWne8B58C350C5Hp6lCXMjxVhr/sNM4bK9Uz3RB8TEpt5WSXX0/yDZwzwMc6DsMJycNZJQLvGdgn2OfbdHG5ZKC+n4rjNIRFgjngZXOzzuXe0IbdGcts2t2YbVF4mzeYssYscDDOB8+PWFoJaS/7F1q197b85JMLm3Yb1uPH8U/enba2I4i19LV6MX10EFn4mVHyZl49aVdJaFQz2SXm757nN9LwMafbUR8OWSQuLBAnDswS5np6SIU1Eq7o9r8uXhwiRkrF6js7IBstFFDrpDhaM4aNC4a3NT34jnUUM0tfeW8PLHCohHgBKd+v2szpe6rZBmi+da9pjtbZIEExnRbEpIyQeIR4/ab65oW4X13zzg7p8us1a/Uq305425CC/ZKt4AKSlMGcU42LK1I9d8/Jl081CYJRmlGk/ZGNaUFuzXBYnC/X2UKaOwU68n7Qg+dUccTwsEGVkRIa00rYwY7upyi4sAGofXRGqfG2TEVZpyv/uvl67ReirCmbNNnWkAHMroCX/XMnULZRAJPp70DSxlMK3zbPm6YgiVQMa3r7yXu9gjuBY9vWeivLyROXWKIvsmhPFnk3bzgKjGtG4O3leHnLJwYvgvMWH3jZHneNZEx8RPtbHVOFR1CorfMZV+ZMSL5yznZPe59c+ZoDrQcgNqvC7t0DtFyMprEfv7TCpGtCBPEk/reoUalTfLdt/06GyBF+6w3R/b0R47b7yrlQvL5c4hs3DMj3nUXt4lR8Cz9aMLEu4NGmMiXu25qGGjiocMl3TgYYRDeS0h3l+Ox72BQsbmNqak0H1RJTfbF6fFKrNJiV25tafTmMa8oNeNtF+JJKDst7VUZn0LcY950EI5IqrYchQm7VEe9oKf2rSaVxycVyTdFeI1pwovOnjqopHn/CE/wX/APK8xWvUuF7QAAAAAElFTkSuQmCC"},6643:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/pay-mobile.ad8a9a0bf14648b7fdd3.jpeg"},3660:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/pay.24cf84dcd5ef367094ae.jpeg"},9180:e=>{"use strict";e.exports="data:image/png;base64,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"},4956:e=>{"use strict";e.exports="data:image/png;base64,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a4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICuCUIAuiYIAeiaIASga4IQgK4JQgC6JggB6JogBKBrghCArglCALomCAHomiAEoGuCEICl+BozEIQALMXnmIEgBGAp3sUMjlIWOzrKAqiiBuEvuRwu8sMm9kiPEIAleZLbNvZIEAKwGHmQYxt7DkNBCMCilDDM7WH+5bPczmPi1aTmCGFmahDq1dSRHiEAXROEAHRNEALQNUEIQNcEIQBdE4QAdE0QAtA1QQhA1wQhAF0ThAB0TRAC0DVBCEDXBCEAXROEAHRNEALQNUEIQNcEIQBdE4QAdE0QAtA1QQhA1wQhAF0ThAB0TRAC0LUShF9jRymlTQA7q6yhnWsXDkltHVUFYfYggBqb2J0ghMEmdlcdhI8CqFHzZnIbQFFVRyUI/x27E4RQ5zh2958AiuPY3X9qe4Q/BVCjpoY+B1BU1VEJwppiepQnKc0Twg7GCf6aURVBSPda1FEJwvOo8zyAXRxHnW0Ax1Fne1T+Nyfql9h9svHr0dHRPwO4l1x3F7H7ardtrruHAZ1rUUeXG+p/j909yE/kJIA7G2tmE7s7D+hcqzr64epvKrwI4D5qa+aPANrVUVnwUoZHU53TAG6Va+VFqmeRGl2bpI7y//Ex1SlBugngRqVGUr23AR1rXUdXD91+GXVKsn5M3qnCtcba+Bj1aub0YdUmr6P8DS5SvRZPEA5Oro33qd5FQMcmr6P8H09TG4Zu4IpSE6mNk4BO7aWOUptFM5dKahsmpWtjTX1MbegN0qW911H+oOepnYtkAQ2dSsOE/kVq5ySgM7PVUf7AT6kt+wzpShqWdrcaXSn0BunOrHWUP/g4tXeRvKPlwJXXeGr77vWSK8/oxmLqKH/C6zSNizT8kJuAA5CG+YsXqe0716teBxy4Oevo6HtPKj98irpz3G5TrpE5j+GYm3IvYjkAdRuwUGl4A1dqo7yz/DGGk++n7K1tc3uc66Lm3lBYlKXV0dH3PnN8siUMrf6E/StF+7jVm8Oxnn/N7WlM+wYXluTWOvrhe589fuJvAczhZcMQLAvWykKBcn/oJqAft9bRd4OwyF/gLOqPXwPupxRvk7nBMQRPA/pzpzo6ijtKw+0StkHA9ErxnkYDaVip7aQnenTnOrpzEBbCECbXLASLVHd7N6zVvero1qHRq8YvbJgUptE6BI9DCNKfe9fRvYKwGL9BWUBjOTe0UWrpWcsQHNmET092rqN7B2ExTj4+jmFvBrC7bQxLu8+iPdue6MU2KupopyAsxuWoJQzfBLCLUjvN9glew6gNPaiuo3stlrlJGs5vex/mI+AuyolKv+XCPY8JjXOELsrmUDWro517hFflJ/I5t4f5l8/CcCncpPTQSuE+njoEi/F7bAMOS/M6atIj/Na4d6lss9gEsM3tXW6v931maK7Fcpza+4D128ZEdTRJEF4ai7C0XwL6Ugq1DN283Efv73vs/2XF9lJHkwbhpfEmixKIx7n9FHqKHKZStB9iuE3lw9GCbowQhqzI3utoL0H4rXFxzSb+uoLjwfj7B2HJN8v29Uor71T/Mz6eL/0KsfH2idMYas4eQ+a02joCgIPz/5ICFOSsSzMEAAAAAElFTkSuQmCC"},2278:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAoCAYAAAB99ePgAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPQSURBVHgB7VgtdBpBEJ7LiyrVoBOd6KCLbnTPE53oRrc61JZoookGTTXRRQddaul8MEuHuZm743h9ryLz3r1j2Zndb+d/j+g/poyOoPV6fc2vVgnLMsuyCTWkU2pIDKzPr+safG0GOKIGdELN6bIm3xU1pGPAtWvydaghNTIrmwp+pn1txs+jGsPkSWMt8LNpV3QgnUSb83POT3TqczNe8Oav6eHxTzPfDvbp8BO6R6S5LwkAC8/5NU1RB9D8+mT4lxXjnOUeAVy0DkAf5b3Zg+fuqQocM/ZoXzNY4JL/z/n9Sn4gWDALM+7i4TVmIm/TD9bv2bRzYoBByGolUZviCLXgfgV8XYrzYl/298HRNm9pPytzYgAa8pOLn+2Ix5iDpge01XZEev0Wmby5qxBIlrKZphtMyUYXCviYn1HdCBSXyBUgyP+Q8YMBe5cOq8Hd8qunGBEED2aTzXyTksSyMCkUMNGHcirNLjgyJfg5OkHFpskcZ/TXnxAQzwfID2nfF+9Zdp6i1eYhMCL8v5eZTgp/Tk70ATDPj8rqqgDz5OFC8xQQCHF7yg/8DKJELH7Up/KuJBezefJIV3Ab2zwgmKb4YQMCG/actYasgbHhtcEDDSOFvHcAb8yk5LGHd7CJ7LWx1i4JS/hDUwsR1GTNnpsxIu8hLWqiE4TcOVdj7Z/pYCOtAFChtgrDwPy9qAA71L4pfqbBFGqxGReAueBqkga3DKJSV40yvwS5QReBq1rst+a1ZUfogo6kAjiVHjSdmbE2GYDdpqiWdgs+2wn4vfX6KcFrOlWgsAkWtUxQuS3sY+FLGktdB8zrRevUjO166YAAvSuLqULAh9DDdZxFvjKzbR6Tht0cZshNxBV73gJgMmvPYRoLUwEYSKJrSA2AiTxA3Mk+mtqCZ2fWF8OQ8k5p1wGA0kDCrFdKdpPlo4Mp+RXLWxcBbVKNrhBQsW4mxyw8VPMtWQSpY0YHUtTRlHVDtnwNzAnu5A2t6Nv9qO5FWRX3VEOhVVgK8ugVCz1koZ+ThWzZWVGc85aywcwzv9I0LjLRLc6uv3fozFnQ9lZ16EZXiaAxqCK4y1707yVh0UC0KOYiX3tnxpGmkIyjBrTgJoWrIRyWT45e7lIt+Ezb9nklWsEJu0oMhV0X87YD6lvSrgSH3mPstf7upRo9vNzEl97NiueeDDgLxo6f9DoCZCINJ0UpJ/xWoptDh6xpzkzHbFukKJGX5sFGH3LEvDrSurSvSU2rrMFHHNAxn8CWNfkqb2ARHQOubpV4oYZ07DdhRF3ZR8SV136/0b+mPxz6vMHMVe57AAAAAElFTkSuQmCC"},3321:e=>{"use strict";e.exports="data:image/png;base64,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"},1111:e=>{"use strict";e.exports="data:image/png;base64,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"},9362:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQ9SURBVHgB7VbNbhtVFD7n3rETp4aMJZAiscikMRJLixeI6QsQ8QDYFgRUIdGxxAaQmDgEVWKB40XFgkUmT0B4AeK8QOUHQLLZIRXVE+I0jcf3HM61m7Ye/+DSZXs2tubOnO873/3OuRfgdbxqgfCCwXXPvYhjjxFdcGyCqyhbfdCC/xELgXPguY+WwUfFW6Boi5HlS0ZQNgMNs7DipgI+Rgd/y9z+q7NI3rngl3c9D0AFDFQWMBZQFAJtjdAkoCEBUuxKFk9IFUZkhJjiUIGu/ReJmeC9/Zu+LAaItEoIZwh0sJLWIX7V/nPa+936mpdKmTuScVtIeAAUgcJa9vO/D14IvFfbDBXyxyKlFXS3H0MjV+tEsEB0666XXnFKzLD7RIWD7M7D6kLgvdq7AkwlkbqjHC5nvumcPr9u9//yBsh6XIAUg0pREzScJiXu3Xu7AI75VQjIlmCY/fRhZS74RZDfRYRA9q99ZeiWVDuecD/vI5oAHHJBG5BfMZoBTJkuK9hLStw9dL2UUSeyBZ4gHWQ/iapTwS+D98qM5lCYtpEGtzJJ4CDvK4d+Am2NRg1esu6OI5OmMmoqgbZ2NNXsTjSFAJyID9bFOx+9WYmOx8AF2AOm3wlpQykoZoI/xqS26wzmvlTrXml6P/dtp5WUGFOD+6z5LFawkatEY/44/8UtKg0n4qEoZny6bpsDiKgsAm4AYpgEtmEIikIzJ/Y5SgLbyH7xoCVN2BDVVpeUqJCIN3aiJjMdIPBqWtGd6+dqVD6WrK37HNdgSqAMFlkW4hTCjCBEIY12GhSmrcdK1YS8ZGF/DFzQXR5twdR2UtcAAC7MCNnwaN7IWh59K3U+wxhVLr0oLoclTAXTPmSFLZsYtSrOSq6s3NLcMhma09ZlIgY4xOZwDPwx9xsjRuyfB/li8sMrujqS0iLxs9/7wZuQtXfPLQCxdAtEMcUTnjk/dCUnihe43afB0fXzp0JdBJvbiChDgTpI9EGy1R7t5X3p6To6Up1jQtJ8xE7fdTRvkSbftqDS7K9Uosbz311KqxHbVuN1OQkq2dL5JPgQYDdfF1fJTBcChicI9PY9H1MyhKTlhkPG9rxjWMDPNJrdlc+mABOeiGrrUlTtRuWfMUNPjtfvN0PxbEkBtY0MhWyitbp31zytdVFLxTJaYaBNa7ASH0329ltFJUNLjCzTjUOZbvPH6zOJb9ZlYvn2GDVIew6oMPP1uAqzgg9dt/fYsdPwu6H91HTgmeBDBazESo5UJS2C3BG/HmNaNzLV6SQuf17z7LCSc+FL2bqcmDPSQBNbsRC4ja5cJtJIgbxVlnYcXiakktaQzLA7aHi4SIFFeW7lhdEth8KYqZa7HXXm5V/oGmVJLKUGH8rfbUlugUY3ltF5zU9AT4Vgs788aCT3/6XAk9H78Z2CXjar9r8x+iyGi06uuhjg63i141+DphoP0JtUwwAAAABJRU5ErkJggg=="},3528:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/buddy-upper.2c37db9e03afec3dab56.png"},9433:e=>{"use strict";e.exports="data:image/png;base64,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"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>cr,Encoder:()=>or,PacketType:()=>sr,protocol:()=>rr});var t,i=n(2791),r=n(1250);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var o=function(e){return e};var a="beforeunload",c="hashchange",d="popstate";function l(e){void 0===e&&(e={});var n=e.window,i=void 0===n?document.defaultView:n,r=i.history;function l(){var e=m(i.location.hash.substr(1)),t=e.pathname,n=void 0===t?"/":t,s=e.search,a=void 0===s?"":s,c=e.hash,d=void 0===c?"":c,l=r.state||{};return[l.idx,o({pathname:n,search:a,hash:d,state:l.usr||null,key:l.key||"default"})]}var g=null;function E(){if(g)T.call(g),g=null;else{var e=t.Pop,n=l(),i=n[0],r=n[1];if(T.length){if(null!=i){var s=y-i;s&&(g={action:e,location:r,retry:function(){N(-1*s)}},N(s))}}else I(e)}}i.addEventListener(d,E),i.addEventListener(c,(function(){f(l()[1])!==f(S)&&E()}));var _=t.Pop,v=l(),y=v[0],S=v[1],b=h(),T=h();function C(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var n=i.location.href,r=n.indexOf("#");t=-1===r?n:n.slice(0,r)}return t}()+"#"+("string"===typeof e?e:f(e))}function A(e,t){return void 0===t&&(t=null),o(s({pathname:S.pathname,hash:"",search:""},"string"===typeof e?m(e):e,{state:t,key:p()}))}function w(e,t){return[{usr:e.state,key:e.key,idx:t},C(e)]}function R(e,t,n){return!T.length||(T.call({action:e,location:t,retry:n}),!1)}function I(e){_=e;var t=l();y=t[0],S=t[1],b.call({action:_,location:S})}function N(e){r.go(e)}null==y&&(y=0,r.replaceState(s({},r.state,{idx:y}),""));var O={get action(){return _},get location(){return S},createHref:C,push:function e(n,s){var o=t.Push,a=A(n,s);if(R(o,a,(function(){e(n,s)}))){var c=w(a,y+1),d=c[0],l=c[1];try{r.pushState(d,"",l)}catch(u){i.location.assign(l)}I(o)}},replace:function e(n,i){var s=t.Replace,o=A(n,i);if(R(s,o,(function(){e(n,i)}))){var a=w(o,y),c=a[0],d=a[1];r.replaceState(c,"",d),I(s)}},go:N,back:function(){N(-1)},forward:function(){N(1)},listen:function(e){return b.push(e)},block:function(e){var t=T.push(e);return 1===T.length&&i.addEventListener(a,u),function(){t(),T.length||i.removeEventListener(a,u)}}};return O}function u(e){e.preventDefault(),e.returnValue=""}function h(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function p(){return Math.random().toString(36).substr(2,8)}function f(e){var t=e.pathname,n=void 0===t?"/":t,i=e.search,r=void 0===i?"":i,s=e.hash,o=void 0===s?"":s;return r&&"?"!==r&&(n+="?"===r.charAt(0)?r:"?"+r),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function m(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}const g=(0,i.createContext)(null);const E=(0,i.createContext)(null);const _=(0,i.createContext)({outlet:null,matches:[]});function v(e,t){if(!e)throw new Error(t)}function y(e,t,n){void 0===n&&(n="/");let i=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let r=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let s=null;for(let o=0;null==s&&o<r.length;++o)s=O(r[o],i);return s}function S(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i=""),e.forEach(((e,r)=>{let s={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(i)||v(!1),s.relativePath=s.relativePath.slice(i.length));let o=x([i,s.relativePath]),a=n.concat(s);e.children&&e.children.length>0&&(!0===e.index&&v(!1),S(e.children,t,a,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:a})})),t}const b=/^:\w+$/,T=3,C=2,A=1,w=10,R=-2,I=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(I)&&(i+=R),t&&(i+=C),n.filter((e=>!I(e))).reduce(((e,t)=>e+(b.test(t)?T:""===t?A:w)),i)}function O(e,t){let{routesMeta:n}=e,i={},r="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===r?t:t.slice(r.length)||"/",d=k({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!d)return null;Object.assign(i,d.params);let l=e.route;s.push({params:i,pathname:x([r,d.pathname]),pathnameBase:L(x([r,d.pathnameBase])),route:l}),"/"!==d.pathnameBase&&(r=x([r,d.pathnameBase]))}return s}function k(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(i.push(t),"([^\\/]+)")));e.endsWith("*")?(i.push("*"),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1),c=i.reduce(((e,t,n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(a[n]||""),e}),{});return{params:c,pathname:s,pathnameBase:o,pattern:e}}function D(e,t,n){let i,r="string"===typeof e?m(e):e,s=""===e||""===r.pathname?"/":r.pathname;if(null==s)i=n;else{let e=t.length-1;if(s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:M(i),hash:U(r)}}(r,i);return s&&"/"!==s&&s.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}const x=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function j(e){V()||v(!1);let{basename:t,navigator:n}=(0,i.useContext)(g),{hash:r,pathname:s,search:o}=G(e),a=s;if("/"!==t){let n=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?m(e).pathname:e.pathname}(e),i=null!=n&&n.endsWith("/");a="/"===s?t+(i?"/":""):x([t,s])}return n.createHref({pathname:a,search:o,hash:r})}function V(){return null!=(0,i.useContext)(E)}function F(){return V()||v(!1),(0,i.useContext)(E).location}function B(){V()||v(!1);let{basename:e,navigator:t}=(0,i.useContext)(g),{matches:n}=(0,i.useContext)(_),{pathname:r}=F(),s=JSON.stringify(n.map((e=>e.pathnameBase))),o=(0,i.useRef)(!1);(0,i.useEffect)((()=>{o.current=!0}));let a=(0,i.useCallback)((function(n,i){if(void 0===i&&(i={}),!o.current)return;if("number"===typeof n)return void t.go(n);let a=D(n,JSON.parse(s),r);"/"!==e&&(a.pathname=x([e,a.pathname])),(i.replace?t.replace:t.push)(a,i.state)}),[e,t,s,r]);return a}function W(){let{matches:e}=(0,i.useContext)(_),t=e[e.length-1];return t?t.params:{}}function G(e){let{matches:t}=(0,i.useContext)(_),{pathname:n}=F(),r=JSON.stringify(t.map((e=>e.pathnameBase)));return(0,i.useMemo)((()=>D(e,JSON.parse(r),n)),[e,r,n])}function H(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight(((n,r,s)=>(0,i.createElement)(_.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,s+1))}})),null)}function K(e){v(!1)}function z(e){let{basename:n="/",children:r=null,location:s,navigationType:o=t.Pop,navigator:a,static:c=!1}=e;V()&&v(!1);let d=L(n),l=(0,i.useMemo)((()=>({basename:d,navigator:a,static:c})),[d,a,c]);"string"===typeof s&&(s=m(s));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:_="default"}=s,y=(0,i.useMemo)((()=>{let e=P(u,d);return null==e?null:{pathname:e,search:h,hash:p,state:f,key:_}}),[d,u,h,p,f,_]);return null==y?null:(0,i.createElement)(g.Provider,{value:l},(0,i.createElement)(E.Provider,{children:r,value:{location:y,navigationType:o}}))}function Y(e){let{children:t,location:n}=e;return function(e,t){V()||v(!1);let{matches:n}=(0,i.useContext)(_),r=n[n.length-1],s=r?r.params:{},o=(r&&r.pathname,r?r.pathnameBase:"/");r&&r.route;let a,c=F();if(t){var d;let e="string"===typeof t?m(t):t;"/"===o||(null==(d=e.pathname)?void 0:d.startsWith(o))||v(!1),a=e}else a=c;let l=a.pathname||"/",u=y(e,{pathname:"/"===o?l:l.slice(o.length)||"/"});return H(u&&u.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:x([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:x([o,e.pathnameBase])}))),n)}(q(t),n)}function q(e){let t=[];return i.Children.forEach(e,(e=>{if(!(0,i.isValidElement)(e))return;if(e.type===i.Fragment)return void t.push.apply(t,q(e.props.children));e.type!==K&&v(!1);let n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=q(e.props.children)),t.push(n)})),t}function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},J.apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}const X=["onClick","reloadDocument","replace","state","target","to"],Z=["aria-current","caseSensitive","className","end","style","to","children"];function $(e){let{basename:t,children:n,window:r}=e,s=(0,i.useRef)();null==s.current&&(s.current=l({window:r}));let o=s.current,[a,c]=(0,i.useState)({action:o.action,location:o.location});return(0,i.useLayoutEffect)((()=>o.listen(c)),[o]),(0,i.createElement)(z,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}const ee=(0,i.forwardRef)((function(e,t){let{onClick:n,reloadDocument:r,replace:s=!1,state:o,target:a,to:c}=e,d=Q(e,X),l=j(c),u=function(e,t){let{target:n,replace:r,state:s}=void 0===t?{}:t,o=B(),a=F(),c=G(e);return(0,i.useCallback)((t=>{if(0===t.button&&(!n||"_self"===n)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();let n=!!r||f(a)===f(c);o(e,{replace:n,state:s})}}),[a,o,c,r,s,n,e])}(c,{replace:s,state:o,target:a});return(0,i.createElement)("a",J({},d,{href:l,onClick:function(e){n&&n(e),e.defaultPrevented||r||u(e)},ref:t,target:a}))}));const te=(0,i.forwardRef)((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:c,children:d}=e,l=Q(e,Z),u=F(),h=G(c),p=u.pathname,f=h.pathname;r||(p=p.toLowerCase(),f=f.toLowerCase());let m,g=p===f||!o&&p.startsWith(f)&&"/"===p.charAt(f.length),E=g?n:void 0;m="function"===typeof s?s({isActive:g}):[s,g?"active":null].filter(Boolean).join(" ");let _="function"===typeof a?a({isActive:g}):a;return(0,i.createElement)(ee,J({},l,{"aria-current":E,className:m,ref:t,style:_,to:c}),"function"===typeof d?d({isActive:g}):d)}));var ne=n(7248),ie=n(327),re=n(4164);let se=function(e){e()};const oe=()=>se,ae=i.createContext(null);function ce(){return(0,i.useContext)(ae)}let de=()=>{throw new Error("uSES not initialized!")};const le=(e,t)=>e===t;function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=e===ae?ce:()=>(0,i.useContext)(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;const{store:r,subscription:s,getServerState:o}=t(),a=de(s.addNestedSub,r.getState,o||r.getState,e,n);return(0,i.useDebugValue)(a),a}}const he=ue();n(2110),n(6900);const pe={notify(){},get:()=>[]};function fe(e,t){let n,i=pe;function r(){o.onStateChange&&o.onStateChange()}function s(){n||(n=t?t.addNestedSub(r):e.subscribe(r),i=function(){const e=oe();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let i=!0,r=n={callback:e,next:null,prev:n};return r.prev?r.prev.next=r:t=r,function(){i&&null!==t&&(i=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}())}const o={addNestedSub:function(e){return s(),i.subscribe(e)},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:r,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,i.clear(),i=pe)},getListeners:()=>i};return o}const me=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?i.useLayoutEffect:i.useEffect;let ge=null;const Ee=function(e){let{store:t,context:n,children:r,serverState:s}=e;const o=(0,i.useMemo)((()=>{const e=fe(t);return{store:t,subscription:e,getServerState:s?()=>s:void 0}}),[t,s]),a=(0,i.useMemo)((()=>t.getState()),[t]);me((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,a]);const c=n||ae;return i.createElement(c.Provider,{value:o},r)};function _e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=e===ae?ce:()=>(0,i.useContext)(e);return function(){const{store:e}=t();return e}}const ve=_e();function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=e===ae?ve:_e(e);return function(){return t().dispatch}}const Se=ye();var be;(e=>{de=e})(ie.useSyncExternalStoreWithSelector),(e=>{ge=e})(ne.useSyncExternalStore),be=re.unstable_batchedUpdates,se=be;var Te=n(4569);var Ce=n.n(Te)().create({withCredentials:!0});const Ae={get:(e,t)=>we(e,"GET",t),post:(e,t)=>we(e,"POST",t),put:(e,t)=>we(e,"PUT",t),delete:(e,t)=>we(e,"DELETE",t),addEvent:async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await Ce({url:"https://pikme-heavy-server.onrender.com/handle-events/create-".concat(t?"show":"event"),method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}})).data}};async function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return(await Ce({url:"".concat("https://server.pikme.tv/").concat(e),method:t,data:n,params:"GET"===t?n:null})).data}catch(i){throw i}}const Re={handleAccount:async function(e){return await Ae.post("handle-account/wallet-connect/"+e,{address:e})},updateAccount:async function(e,t){return await Ae.post("handle-account/update-address-info/"+e,t)},getUserEvents:async function(e){return await Ae.get("handle-account/get-tickets/"+e)},getUserStats:async function(e){return await Ae.get("handle-account/get-stats/"+e)},checkIsCreator:async function(e){return await Ae.get("handle-creator/is-creator/"+e)},addCreator:async function(e,t){return await Ae.post("handle-creator/add-creator/"+e,t)},editCreator:async function(e,t){return await Ae.post("handle-creator/update-info/"+e,t)},isAddressValid:async function(e){try{return(await Ae.get("handle-creator/check-wallet-address/"+e)).exist}catch{return!0}},getStreamTokenClient:async function(e){let{uid:t,role:n,channel:i}=e;const r=await Ae.get("rtc/".concat(i,"/").concat(n,"/uid/").concat(t));return r},deleteCreatorEvent:async function(e,t){return await Ae.post("handle-creator/remove-creator-events/"+t,{eventId:e})},validateOTP:async function(e,t){try{return await Ae.post("handle-creator/get-creator/"+e,{otp:t})}catch(n){return n}},sendOTP:async function(e){try{return await Ae.post("handle-creator/send-otp",{phone:e})}catch(t){return t}}};window.cs=Re;const Ie="dfmtbntrc",Ne="stgck1s3";async function Oe(e){const t=new FormData;return t.append("upload_preset",Ne),t.append("file",e),fetch("https://api.cloudinary.com/v1_1/".concat(Ie,"/auto/upload"),{method:"POST",body:t}).then((e=>e.json())).then((e=>e)).catch((e=>console.error(e)))}var ke=n(184);function De(e){let{phase:t}=e;return(0,ke.jsxs)("div",{className:"progress",children:[(0,ke.jsxs)("div",{className:"main-progress",children:[(0,ke.jsx)("div",{className:"back-main",children:t>1?(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"done"}):1}),(0,ke.jsx)("p",{children:"Choose your name"})]}),(0,ke.jsxs)("div",{className:"mid-progress",children:[(0,ke.jsx)("div",{className:t>1?"back-main":""}),(0,ke.jsx)("p",{children:"e"})]}),(0,ke.jsxs)("div",{className:"main-progress",children:[(0,ke.jsx)("div",{className:t>1?"back-main":"",children:t>2?(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"done"}):2}),(0,ke.jsx)("p",{children:"Gaming career"})]}),(0,ke.jsxs)("div",{className:"mid-progress",children:[(0,ke.jsx)("div",{className:t>2?"back-main":""}),(0,ke.jsx)("p",{children:"e"})]}),(0,ke.jsxs)("div",{className:"main-progress",children:[(0,ke.jsx)("div",{className:t>2?"back-main":"",children:"3"}),(0,ke.jsx)("p",{children:"Gaming experience"})]})]})}function Pe(e){return e<10?"0"+e.toString():e}function xe(e){const t=new Date(e);return"".concat(t.getFullYear(),"-").concat(Pe(t.getMonth()+1),"-").concat(Pe(t.getDate()),"  ").concat(Pe(t.getHours()),":").concat(Pe(t.getMinutes()))}function Le(e){const t=new Date(e);return"".concat(t.getFullYear(),"/").concat(Pe(t.getMonth()+1),"/").concat(Pe(t.getDate()))}function Me(e){const t=new Date(e);return"".concat(Pe(t.getHours()),":").concat(Pe(t.getMinutes()))}function Ue(e){return e?e.includes("twitter")?"twitter":e.includes("tiktok")?"tiktok":e.includes("youtube")?"youtube":"instagram":"instagram"}function je(e){return"number"!==typeof e?"To be added":e<1e4?(t=e,Math.floor(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):e<1e6?(e/1e3).toFixed(1)+"K":(e/1e6).toFixed(2)+"M";var t}function Ve(){const e=[];for(let t=Number((new Date).getFullYear());t>1999;t--)e.push(t);return e}function Fe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Be(e){return!!e&&!!e[Ot]}function We(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===kt}(e)||Array.isArray(e)||!!e[Nt]||!!e.constructor[Nt]||Je(e)||Qe(e))}function Ge(e,t,n){void 0===n&&(n=!1),0===He(e)?(n?Object.keys:Dt)(e).forEach((function(i){n&&"symbol"==typeof i||t(i,e[i],e)})):e.forEach((function(n,i){return t(i,n,e)}))}function He(e){var t=e[Ot];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Je(e)?2:Qe(e)?3:0}function Ke(e,t){return 2===He(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ze(e,t){return 2===He(e)?e.get(t):e[t]}function Ye(e,t,n){var i=He(e);2===i?e.set(t,n):3===i?(e.delete(t),e.add(n)):e[t]=n}function qe(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Je(e){return At&&e instanceof Map}function Qe(e){return wt&&e instanceof Set}function Xe(e){return e.o||e.t}function Ze(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Pt(e);delete t[Ot];for(var n=Dt(t),i=0;i<n.length;i++){var r=n[i],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function $e(e,t){return void 0===t&&(t=!1),tt(e)||Be(e)||!We(e)||(He(e)>1&&(e.set=e.add=e.clear=e.delete=et),Object.freeze(e),t&&Ge(e,(function(e,t){return $e(t,!0)}),!0)),e}function et(){Fe(2)}function tt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function nt(e){var t=xt[e];return t||Fe(18,e),t}function it(e,t){xt[e]||(xt[e]=t)}function rt(){return Tt}function st(e,t){t&&(nt("Patches"),e.u=[],e.s=[],e.v=t)}function ot(e){at(e),e.p.forEach(dt),e.p=null}function at(e){e===Tt&&(Tt=e.l)}function ct(e){return Tt={p:[],l:Tt,h:e,m:!0,_:0}}function dt(e){var t=e[Ot];0===t.i||1===t.i?t.j():t.O=!0}function lt(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||nt("ES5").S(t,e,i),i?(n[Ot].P&&(ot(t),Fe(4)),We(e)&&(e=ut(t,e),t.l||pt(t,e)),t.u&&nt("Patches").M(n[Ot].t,e,t.u,t.s)):e=ut(t,n,[]),ot(t),t.u&&t.v(t.u,t.s),e!==It?e:void 0}function ut(e,t,n){if(tt(t))return t;var i=t[Ot];if(!i)return Ge(t,(function(r,s){return ht(e,i,t,r,s,n)}),!0),t;if(i.A!==e)return t;if(!i.P)return pt(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var r=4===i.i||5===i.i?i.o=Ze(i.k):i.o;Ge(3===i.i?new Set(r):r,(function(t,s){return ht(e,i,r,t,s,n)})),pt(e,r,!1),n&&e.u&&nt("Patches").R(i,n,e.u,e.s)}return i.o}function ht(e,t,n,i,r,s){if(Be(r)){var o=ut(e,r,s&&t&&3!==t.i&&!Ke(t.D,i)?s.concat(i):void 0);if(Ye(n,i,o),!Be(o))return;e.m=!1}if(We(r)&&!tt(r)){if(!e.h.F&&e._<1)return;ut(e,r),t&&t.A.l||pt(e,r)}}function pt(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&$e(t,n)}function ft(e,t){var n=e[Ot];return(n?Xe(n):e)[t]}function mt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function gt(e){e.P||(e.P=!0,e.l&&gt(e.l))}function Et(e){e.o||(e.o=Ze(e.t))}function _t(e,t,n){var i=Je(t)?nt("MapSet").N(t,n):Qe(t)?nt("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),i={i:n?1:0,A:t?t.A:rt(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},r=i,s=Lt;n&&(r=[i],s=Mt);var o=Proxy.revocable(r,s),a=o.revoke,c=o.proxy;return i.k=c,i.j=a,c}(t,n):nt("ES5").J(t,n);return(n?n.A:rt()).p.push(i),i}function vt(e){return Be(e)||Fe(22,e),function e(t){if(!We(t))return t;var n,i=t[Ot],r=He(t);if(i){if(!i.P&&(i.i<4||!nt("ES5").K(i)))return i.t;i.I=!0,n=yt(t,r),i.I=!1}else n=yt(t,r);return Ge(n,(function(t,r){i&&ze(i.t,t)===r||Ye(n,t,e(r))})),3===r?new Set(n):n}(e)}function yt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ze(e)}function St(){function e(e,t){var n=r[e];return n?n.enumerable=t:r[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Ot];return Lt.get(t,e)},set:function(t){var n=this[Ot];Lt.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][Ot];if(!r.P)switch(r.i){case 5:i(r)&&gt(r);break;case 4:n(r)&&gt(r)}}}function n(e){for(var t=e.t,n=e.k,i=Dt(n),r=i.length-1;r>=0;r--){var s=i[r];if(s!==Ot){var o=t[s];if(void 0===o&&!Ke(t,s))return!0;var a=n[s],c=a&&a[Ot];if(c?c.t!==o:!qe(a,o))return!0}}var d=!!t[Ot];return i.length!==Dt(t).length+(d?0:1)}function i(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var i=0;i<t.length;i++)if(!t.hasOwnProperty(i))return!0;return!1}var r={};it("ES5",{J:function(t,n){var i=Array.isArray(t),r=function(t,n){if(t){for(var i=Array(n.length),r=0;r<n.length;r++)Object.defineProperty(i,""+r,e(r,!0));return i}var s=Pt(n);delete s[Ot];for(var o=Dt(s),a=0;a<o.length;a++){var c=o[a];s[c]=e(c,t||!!s[c].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(i,t),s={i:i?5:4,A:n?n.A:rt(),P:!1,I:!1,D:{},l:n,t:t,k:r,o:null,O:!1,C:!1};return Object.defineProperty(r,Ot,{value:s,writable:!0}),r},S:function(e,n,r){r?Be(n)&&n[Ot].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Ot];if(n){var r=n.t,s=n.k,o=n.D,a=n.i;if(4===a)Ge(s,(function(t){t!==Ot&&(void 0!==r[t]||Ke(r,t)?o[t]||e(s[t]):(o[t]=!0,gt(n)))})),Ge(r,(function(e){void 0!==s[e]||Ke(s,e)||(o[e]=!1,gt(n))}));else if(5===a){if(i(n)&&(gt(n),o.length=!0),s.length<r.length)for(var c=s.length;c<r.length;c++)o[c]=!1;else for(var d=r.length;d<s.length;d++)o[d]=!0;for(var l=Math.min(s.length,r.length),u=0;u<l;u++)s.hasOwnProperty(u)||(o[u]=!0),void 0===o[u]&&e(s[u])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):i(e)}})}var bt,Tt,Ct="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),At="undefined"!=typeof Map,wt="undefined"!=typeof Set,Rt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,It=Ct?Symbol.for("immer-nothing"):((bt={})["immer-nothing"]=!0,bt),Nt=Ct?Symbol.for("immer-draftable"):"__$immer_draftable",Ot=Ct?Symbol.for("immer-state"):"__$immer_state",kt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Dt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Pt=Object.getOwnPropertyDescriptors||function(e){var t={};return Dt(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},xt={},Lt={get:function(e,t){if(t===Ot)return e;var n=Xe(e);if(!Ke(n,t))return function(e,t,n){var i,r=mt(t,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(e.k):void 0}(e,n,t);var i=n[t];return e.I||!We(i)?i:i===ft(e.t,t)?(Et(e),e.o[t]=_t(e.A.h,i,e)):i},has:function(e,t){return t in Xe(e)},ownKeys:function(e){return Reflect.ownKeys(Xe(e))},set:function(e,t,n){var i=mt(Xe(e),t);if(null==i?void 0:i.set)return i.set.call(e.k,n),!0;if(!e.P){var r=ft(Xe(e),t),s=null==r?void 0:r[Ot];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(qe(n,r)&&(void 0!==n||Ke(e.t,t)))return!0;Et(e),gt(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ft(e.t,t)||t in e.t?(e.D[t]=!1,Et(e),gt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Xe(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty:function(){Fe(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Fe(12)}},Mt={};Ge(Lt,(function(e,t){Mt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Mt.deleteProperty=function(e,t){return Mt.set.call(this,e,t,void 0)},Mt.set=function(e,t,n){return Lt.set.call(this,e[0],t,n,e[0])};var Ut=function(){function e(e){var t=this;this.g=Rt,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var r=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=r);for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var i;return(i=n).call.apply(i,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Fe(6),void 0!==i&&"function"!=typeof i&&Fe(7),We(e)){var a=ct(t),c=_t(t,e,void 0),d=!0;try{o=n(c),d=!1}finally{d?ot(a):at(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return st(a,i),lt(e,a)}),(function(e){throw ot(a),e})):(st(a,i),lt(o,a))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===It&&(o=void 0),t.F&&$e(o,!0),i){var l=[],u=[];nt("Patches").M(e,o,l,u),i(l,u)}return o}Fe(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(r))}))};var i,r,s=t.produce(e,n,(function(e,t){i=e,r=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,i,r]})):[s,i,r]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){We(e)||Fe(8),Be(e)&&(e=vt(e));var t=ct(this),n=_t(this,e,void 0);return n[Ot].C=!0,at(t),n},t.finishDraft=function(e,t){var n=(e&&e[Ot]).A;return st(n,t),lt(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Rt&&Fe(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));var r=nt("Patches").$;return Be(e)?r(e,t):this.produce(e,(function(e){return r(e,t)}))},e}(),jt=new Ut,Vt=jt.produce;jt.produceWithPatches.bind(jt),jt.setAutoFreeze.bind(jt),jt.setUseProxies.bind(jt),jt.applyPatches.bind(jt),jt.createDraft.bind(jt),jt.finishDraft.bind(jt);const Ft=Vt;function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Kt="function"===typeof Symbol&&Symbol.observable||"@@observable",zt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Yt={INIT:"@@redux/INIT"+zt(),REPLACE:"@@redux/REPLACE"+zt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zt()}};function qt(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Jt(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Ht(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Ht(1));return n(Jt)(e,t)}if("function"!==typeof e)throw new Error(Ht(2));var r=e,s=t,o=[],a=o,c=!1;function d(){a===o&&(a=o.slice())}function l(){if(c)throw new Error(Ht(3));return s}function u(e){if("function"!==typeof e)throw new Error(Ht(4));if(c)throw new Error(Ht(5));var t=!0;return d(),a.push(e),function(){if(t){if(c)throw new Error(Ht(6));t=!1,d();var n=a.indexOf(e);a.splice(n,1),o=null}}}function h(e){if(!qt(e))throw new Error(Ht(7));if("undefined"===typeof e.type)throw new Error(Ht(8));if(c)throw new Error(Ht(9));try{c=!0,s=r(s,e)}finally{c=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Yt.INIT}),(i={dispatch:h,subscribe:u,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Ht(10));r=e,h({type:Yt.REPLACE})}})[Kt]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Ht(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Kt]=function(){return this},e},i}function Qt(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i];0,"function"===typeof e[r]&&(n[r]=e[r])}var s,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Yt.INIT}))throw new Error(Ht(12));if("undefined"===typeof n(void 0,{type:Yt.PROBE_UNKNOWN_ACTION()}))throw new Error(Ht(13))}))}(n)}catch(a){s=a}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var i=!1,r={},a=0;a<o.length;a++){var c=o[a],d=n[c],l=e[c],u=d(l,t);if("undefined"===typeof u){t&&t.type;throw new Error(Ht(14))}r[c]=u,i=i||u!==l}return(i=i||o.length!==Object.keys(e).length)?r:e}}function Xt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Zt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error(Ht(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map((function(e){return e(r)}));return i=Xt.apply(void 0,s)(n.dispatch),Gt(Gt({},n),{},{dispatch:i})}}}function $t(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(r){return"function"===typeof r?r(n,i,e):t(r)}}}}var en=$t();en.withExtraArgument=$t;const tn=en;var nn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rn=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},sn=Object.defineProperty,on=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),an=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,dn=function(e,t,n){return t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ln=function(e,t){for(var n in t||(t={}))an.call(t,n)&&dn(e,n,t[n]);if(on)for(var i=0,r=on(t);i<r.length;i++){n=r[i];cn.call(t,n)&&dn(e,n,t[n])}return e},un="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Xt:Xt.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function hn(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var pn=function(e){function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=e.apply(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return nn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,rn([void 0],e[0].concat(this)))):new(t.bind.apply(t,rn([void 0],e.concat(this))))},t}(Array);function fn(e){return We(e)?Ft(e,(function(){})):e}function mn(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,i=(e.immutableCheck,e.serializableCheck,new pn);n&&(!function(e){return"boolean"===typeof e}(n)?i.push(tn.withExtraArgument(n.extraArgument)):i.push(tn));0;return i}(e)}}function gn(e,t){function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t){var r=t.apply(void 0,n);if(!r)throw new Error("prepareAction did not return an object");return ln(ln({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function En(e){var t,n={},i=[],r={addCase:function(e,t){var i="string"===typeof e?e:e.type;if(i in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[i]=t,r},addMatcher:function(e,t){return i.push({matcher:e,reducer:t}),r},addDefaultCase:function(e){return t=e,r}};return e(r),[n,i,t]}Object.assign;var _n="listenerMiddleware";gn(_n+"/add"),gn(_n+"/removeAll"),gn(_n+"/remove");St();const vn=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,i="function"==typeof e.initialState?e.initialState:fn(e.initialState),r=e.reducers||{},s=Object.keys(r),o={},a={},c={};function d(){var t="function"===typeof e.extraReducers?En(e.extraReducers):[e.extraReducers],n=t[0],r=void 0===n?{}:n,s=t[1],o=void 0===s?[]:s,c=t[2],d=void 0===c?void 0:c,l=ln(ln({},r),a);return function(e,t,n,i){void 0===n&&(n=[]);var r,s="function"===typeof t?En(t):[t,n,i],o=s[0],a=s[1],c=s[2];if(function(e){return"function"===typeof e}(e))r=function(){return fn(e())};else{var d=fn(e);r=function(){return d}}function l(e,t){void 0===e&&(e=r());var n=rn([o[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var i;if(Be(e))return void 0===(i=n(e,t))?e:i;if(We(e))return Ft(e,(function(e){return n(e,t)}));if(void 0===(i=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return e}),e)}return l.getInitialState=r,l}(i,l,o,d)}return s.forEach((function(e){var n,i,s=r[e],d=t+"/"+e;"reducer"in s?(n=s.reducer,i=s.prepare):n=s,o[e]=n,a[d]=n,c[e]=i?gn(d,i):gn(d)})),{name:t,reducer:function(e,t){return n||(n=d()),n(e,t)},actions:c,caseReducers:o,getInitialState:function(){return n||(n=d()),n.getInitialState()}}}({name:"user",initialState:{address:"",phone:"",isConnected:!1,creator:!1},reducers:{setAddress:(e,t)=>{e.address=t.payload},setIsConnected:(e,t)=>{e.isConnected=t.payload},setPhone:(e,t)=>{e.phone=t.payload},setCreator:(e,t)=>{e.creator=t.payload},resetState:e=>{e.address="",e.isConnected=!1,e.creator=!1}}}),{setAddress:yn,setPhone:Sn,setIsConnected:bn,setCreator:Tn,resetState:Cn}=vn.actions,An=vn.reducer;function wn(e){return t=>{t({type:"SET_MENU",menu:e})}}function Rn(e){return t=>{t({type:"SET_POPUP",popup:e})}}function In(e){return t=>{t({type:"SET_STREAM",event:e})}}function Nn(e){return t=>{t({type:"SET_UPPER_POPUP",upperPopup:e})}}function On(e){return t=>{t({type:"SET_CALLBACK_LINK",callbackLink:e})}}function kn(e){return t=>{t({type:"SET_REGISTER_PHASE",phase:e})}}function Dn(e){return t=>{t({type:"SET_HOME_PHASE",phase:e})}}function Pn(e){return t=>{t({type:"SET_STREAM_PHASE",phase:e})}}const xn=[{game:"table-tennis",display:"Table Tennis"},{game:"poker",display:"Poker"},{game:"chess",display:"Chess"},{game:"boxing",display:"Boxing"},{game:"billiard",display:"Billiard"},{game:"tennis",display:"Tennis"},{game:"fifa",display:"FIFA"},{game:"rocket-league",display:"Rocket League"}],Ln=[{country:"Israel",code:"972",iso:"IL"},{country:"Afghanistan",code:"93",iso:"AF"},{country:"Albania",code:"355",iso:"AL"},{country:"Algeria",code:"213",iso:"DZ"},{country:"American Samoa",code:"1-684",iso:"AS"},{country:"Andorra",code:"376",iso:"AD"},{country:"Angola",code:"244",iso:"AO"},{country:"Anguilla",code:"1-264",iso:"AI"},{country:"Antarctica",code:"672",iso:"AQ"},{country:"Antigua and Barbuda",code:"1-268",iso:"AG"},{country:"Argentina",code:"54",iso:"AR"},{country:"Armenia",code:"374",iso:"AM"},{country:"Aruba",code:"297",iso:"AW"},{country:"Australia",code:"61",iso:"AU"},{country:"Austria",code:"43",iso:"AT"},{country:"Azerbaijan",code:"994",iso:"AZ"},{country:"Bahamas",code:"1-242",iso:"BS"},{country:"Bahrain",code:"973",iso:"BH"},{country:"Bangladesh",code:"880",iso:"BD"},{country:"Barbados",code:"1-246",iso:"BB"},{country:"Belarus",code:"375",iso:"BY"},{country:"Belgium",code:"32",iso:"BE"},{country:"Belize",code:"501",iso:"BZ"},{country:"Benin",code:"229",iso:"BJ"},{country:"Bermuda",code:"1-441",iso:"BM"},{country:"Bhutan",code:"975",iso:"BT"},{country:"Bolivia",code:"591",iso:"BO"},{country:"Bosnia and Herzegovina",code:"387",iso:"BA"},{country:"Botswana",code:"267",iso:"BW"},{country:"Brazil",code:"55",iso:"BR"},{country:"British Indian Ocean Territory",code:"246",iso:"IO"},{country:"British Virgin Islands",code:"1-284",iso:"VG"},{country:"Brunei",code:"673",iso:"BN"},{country:"Bulgaria",code:"359",iso:"BG"},{country:"Burkina Faso",code:"226",iso:"BF"},{country:"Burundi",code:"257",iso:"BI"},{country:"Cambodia",code:"855",iso:"KH"},{country:"Cameroon",code:"237",iso:"CM"},{country:"Canada",code:"1",iso:"CA"},{country:"Cape Verde",code:"238",iso:"CV"},{country:"Cayman Islands",code:"1-345",iso:"KY"},{country:"Central African Republic",code:"236",iso:"CF"},{country:"Chad",code:"235",iso:"TD"},{country:"Chile",code:"56",iso:"CL"},{country:"China",code:"86",iso:"CN"},{country:"Christmas Island",code:"61",iso:"CX"},{country:"Cocos Islands",code:"61",iso:"CC"},{country:"Colombia",code:"57",iso:"CO"},{country:"Comoros",code:"269",iso:"KM"},{country:"Cook Islands",code:"682",iso:"CK"},{country:"Costa Rica",code:"506",iso:"CR"},{country:"Croatia",code:"385",iso:"HR"},{country:"Cuba",code:"53",iso:"CU"},{country:"Curacao",code:"599",iso:"CW"},{country:"Cyprus",code:"357",iso:"CY"},{country:"Czech Republic",code:"420",iso:"CZ"},{country:"Democratic Republic of the Congo",code:"243",iso:"CD"},{country:"Denmark",code:"45",iso:"DK"},{country:"Djibouti",code:"253",iso:"DJ"},{country:"Dominica",code:"1-767",iso:"DM"},{country:"East Timor",code:"670",iso:"TL"},{country:"Ecuador",code:"593",iso:"EC"},{country:"Egypt",code:"20",iso:"EG"},{country:"El Salvador",code:"503",iso:"SV"},{country:"Equatorial Guinea",code:"240",iso:"GQ"},{country:"Eritrea",code:"291",iso:"ER"},{country:"Estonia",code:"372",iso:"EE"},{country:"Ethiopia",code:"251",iso:"ET"},{country:"Falkland Islands",code:"500",iso:"FK"},{country:"Faroe Islands",code:"298",iso:"FO"},{country:"Fiji",code:"679",iso:"FJ"},{country:"Finland",code:"358",iso:"FI"},{country:"France",code:"33",iso:"FR"},{country:"French Polynesia",code:"689",iso:"PF"},{country:"Gabon",code:"241",iso:"GA"},{country:"Gambia",code:"220",iso:"GM"},{country:"Georgia",code:"995",iso:"GE"},{country:"Germany",code:"49",iso:"DE"},{country:"Ghana",code:"233",iso:"GH"},{country:"Gibraltar",code:"350",iso:"GI"},{country:"Greece",code:"30",iso:"GR"},{country:"Greenland",code:"299",iso:"GL"},{country:"Grenada",code:"1-473",iso:"GD"},{country:"Guam",code:"1-671",iso:"GU"},{country:"Guatemala",code:"502",iso:"GT"},{country:"Guernsey",code:"44-1481",iso:"GG"},{country:"Guinea",code:"224",iso:"GN"},{country:"Guinea-Bissau",code:"245",iso:"GW"},{country:"Guyana",code:"592",iso:"GY"},{country:"Haiti",code:"509",iso:"HT"},{country:"Honduras",code:"504",iso:"HN"},{country:"Hong Kong",code:"852",iso:"HK"},{country:"Hungary",code:"36",iso:"HU"},{country:"Iceland",code:"354",iso:"IS"},{country:"India",code:"91",iso:"IN"},{country:"Indonesia",code:"62",iso:"ID"},{country:"Iran",code:"98",iso:"IR"},{country:"Iraq",code:"964",iso:"IQ"},{country:"Ireland",code:"353",iso:"IE"},{country:"Isle of Man",code:"44-1624",iso:"IM"},{country:"Italy",code:"39",iso:"IT"},{country:"Ivory Coast",code:"225",iso:"CI"},{country:"Jamaica",code:"1-876",iso:"JM"},{country:"Japan",code:"81",iso:"JP"},{country:"Jersey",code:"44-1534",iso:"JE"},{country:"Jordan",code:"962",iso:"JO"},{country:"Kazakhstan",code:"7",iso:"KZ"},{country:"Kenya",code:"254",iso:"KE"},{country:"Kiribati",code:"686",iso:"KI"},{country:"Kosovo",code:"383",iso:"XK"},{country:"Kuwait",code:"965",iso:"KW"},{country:"Kyrgyzstan",code:"996",iso:"KG"},{country:"Laos",code:"856",iso:"LA"},{country:"Latvia",code:"371",iso:"LV"},{country:"Lebanon",code:"961",iso:"LB"},{country:"Lesotho",code:"266",iso:"LS"},{country:"Liberia",code:"231",iso:"LR"},{country:"Libya",code:"218",iso:"LY"},{country:"Liechtenstein",code:"423",iso:"LI"},{country:"Lithuania",code:"370",iso:"LT"},{country:"Luxembourg",code:"352",iso:"LU"},{country:"Macao",code:"853",iso:"MO"},{country:"Macedonia",code:"389",iso:"MK"},{country:"Madagascar",code:"261",iso:"MG"},{country:"Malawi",code:"265",iso:"MW"},{country:"Malaysia",code:"60",iso:"MY"},{country:"Maldives",code:"960",iso:"MV"},{country:"Mali",code:"223",iso:"ML"},{country:"Malta",code:"356",iso:"MT"},{country:"Marshall Islands",code:"692",iso:"MH"},{country:"Mauritania",code:"222",iso:"MR"},{country:"Mauritius",code:"230",iso:"MU"},{country:"Mayotte",code:"262",iso:"YT"},{country:"Mexico",code:"52",iso:"MX"},{country:"Micronesia",code:"691",iso:"FM"},{country:"Moldova",code:"373",iso:"MD"},{country:"Monaco",code:"377",iso:"MC"},{country:"Mongolia",code:"976",iso:"MN"},{country:"Montenegro",code:"382",iso:"ME"},{country:"Montserrat",code:"1-664",iso:"MS"},{country:"Morocco",code:"212",iso:"MA"},{country:"Mozambique",code:"258",iso:"MZ"},{country:"Myanmar",code:"95",iso:"MM"},{country:"Namibia",code:"264",iso:"NA"},{country:"Nauru",code:"674",iso:"NR"},{country:"Nepal",code:"977",iso:"NP"},{country:"Netherlands",code:"31",iso:"NL"},{country:"Netherlands Antilles",code:"599",iso:"AN"},{country:"New Caledonia",code:"687",iso:"NC"},{country:"New Zealand",code:"64",iso:"NZ"},{country:"Nicaragua",code:"505",iso:"NI"},{country:"Niger",code:"227",iso:"NE"},{country:"Nigeria",code:"234",iso:"NG"},{country:"Niue",code:"683",iso:"NU"},{country:"North Korea",code:"850",iso:"KP"},{country:"Northern Mariana Islands",code:"1-670",iso:"MP"},{country:"Norway",code:"47",iso:"NO"},{country:"Oman",code:"968",iso:"OM"},{country:"Pakistan",code:"92",iso:"PK"},{country:"Palau",code:"680",iso:"PW"},{country:"Palestine",code:"970",iso:"PS"},{country:"Panama",code:"507",iso:"PA"},{country:"Papua New Guinea",code:"675",iso:"PG"},{country:"Paraguay",code:"595",iso:"PY"},{country:"Peru",code:"51",iso:"PE"},{country:"Philippines",code:"63",iso:"PH"},{country:"Pitcairn",code:"64",iso:"PN"},{country:"Poland",code:"48",iso:"PL"},{country:"Portugal",code:"351",iso:"PT"},{country:"Qatar",code:"974",iso:"QA"},{country:"Republic of the Congo",code:"242",iso:"CG"},{country:"Reunion",code:"262",iso:"RE"},{country:"Romania",code:"40",iso:"RO"},{country:"Russia",code:"7",iso:"RU"},{country:"Rwanda",code:"250",iso:"RW"},{country:"Saint Barthelemy",code:"590",iso:"BL"},{country:"Saint Helena",code:"290",iso:"SH"},{country:"Saint Kitts and Nevis",code:"1-869",iso:"KN"},{country:"Saint Lucia",code:"1-758",iso:"LC"},{country:"Saint Martin",code:"590",iso:"MF"},{country:"Saint Pierre and Miquelon",code:"508",iso:"PM"},{country:"Saint Vincent and the Grenadines",code:"1-784",iso:"VC"},{country:"Samoa",code:"685",iso:"WS"},{country:"San Marino",code:"378",iso:"SM"},{country:"Sao Tome and Principe",code:"239",iso:"ST"},{country:"Saudi Arabia",code:"966",iso:"SA"},{country:"Senegal",code:"221",iso:"SN"},{country:"Serbia",code:"381",iso:"RS"},{country:"Seychelles",code:"248",iso:"SC"},{country:"Sierra Leone",code:"232",iso:"SL"},{country:"Singapore",code:"65",iso:"SG"},{country:"Sint Maarten",code:"1-721",iso:"SX"},{country:"Slovakia",code:"421",iso:"SK"},{country:"Slovenia",code:"386",iso:"SI"},{country:"Solomon Islands",code:"677",iso:"SB"},{country:"Somalia",code:"252",iso:"SO"},{country:"South Africa",code:"27",iso:"ZA"},{country:"South Korea",code:"82",iso:"KR"},{country:"South Sudan",code:"211",iso:"SS"},{country:"Spain",code:"34",iso:"ES"},{country:"Sri Lanka",code:"94",iso:"LK"},{country:"Sudan",code:"249",iso:"SD"},{country:"Suriname",code:"597",iso:"SR"},{country:"Svalbard and Jan Mayen",code:"47",iso:"SJ"},{country:"Swaziland",code:"268",iso:"SZ"},{country:"Sweden",code:"46",iso:"SE"},{country:"Switzerland",code:"41",iso:"CH"},{country:"Syria",code:"963",iso:"SY"},{country:"Taiwan",code:"886",iso:"TW"},{country:"Tajikistan",code:"992",iso:"TJ"},{country:"Tanzania",code:"255",iso:"TZ"},{country:"Thailand",code:"66",iso:"TH"},{country:"Togo",code:"228",iso:"TG"},{country:"Tokelau",code:"690",iso:"TK"},{country:"Tonga",code:"676",iso:"TO"},{country:"Trinidad and Tobago",code:"1-868",iso:"TT"},{country:"Tunisia",code:"216",iso:"TN"},{country:"Turkey",code:"90",iso:"TR"},{country:"Turkmenistan",code:"993",iso:"TM"},{country:"Turks and Caicos Islands",code:"1-649",iso:"TC"},{country:"Tuvalu",code:"688",iso:"TV"},{country:"U.S. Virgin Islands",code:"1-340",iso:"VI"},{country:"Uganda",code:"256",iso:"UG"},{country:"Ukraine",code:"380",iso:"UA"},{country:"United Arab Emirates",code:"971",iso:"AE"},{country:"United Kingdom",code:"44",iso:"GB"},{country:"United States",code:"1",iso:"US"},{country:"Uruguay",code:"598",iso:"UY"},{country:"Uzbekistan",code:"998",iso:"UZ"},{country:"Vanuatu",code:"678",iso:"VU"},{country:"Vatican",code:"379",iso:"VA"},{country:"Venezuela",code:"58",iso:"VE"},{country:"Vietnam",code:"84",iso:"VN"},{country:"Wallis and Futuna",code:"681",iso:"WF"},{country:"Western Sahara",code:"212",iso:"EH"},{country:"Yemen",code:"967",iso:"YE"},{country:"Zambia",code:"260",iso:"ZM"},{country:"Zimbabwe",code:"263",iso:"ZW"}];function Mn(){const e=B(),t=Se(),{phone:r}=he((e=>e.user)),{callbackLink:s}=he((e=>e.generalModule)),{linkId:o}=he((e=>e.generalModule)),[a,c]=(0,i.useState)(1),[d,l]=(0,i.useState)({nickName:"",walletAddress:"",image:"",category:"",proficiencyGame:"",region:"",topAchievement:"",status:"",experience:"",socialLink:""}),[u,h]=(0,i.useState)({category:"gaming",game:"choose"}),[p,f]=(0,i.useState)("sports"),[m,g]=(0,i.useState)(!1),[E,_]=(0,i.useState)(null),[v,y]=(0,i.useState)(!1),S=Ve(),b=(0,i.useRef)(),T=(0,i.useRef)(),C=(0,i.useRef)(),A=(0,i.useRef)(),w=(0,i.useRef)(),R=(0,i.useRef)(),I=(0,i.useRef)(),N=(0,i.useRef)(),O=(0,i.useRef)(),k=(0,i.useRef)();(0,i.useEffect)((()=>{3===a&&D()}),[d.experience]);const D=async()=>{try{y(!0);const n=await Re.editCreator(r,{...d,linkId:o||"no-link"});t(Tn(n)),t(bn(!0)),t(Tn(n)),t(yn(n.walletAddress)),t(Sn(n.phone)),s?(e(s),t(On(""))):(t(kn(1)),window.location.reload())}catch(n){e("/")}},P=e=>{const{name:t,value:n}=e.target;"category"===t?(h("gaming"===n?{category:"gaming",game:"valorant"}:"choose"===n?{category:"choose",game:"choose"}:{category:"sports",game:"table-tennis"}),f(n)):h({...u,[t]:n})};return v?(0,ke.jsx)("div",{className:"home",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})}):(0,ke.jsxs)("section",{className:"register",children:[1===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h1",{children:"personal info"}),(0,ke.jsxs)("form",{className:"phase1",onSubmit:async e=>{e.preventDefault(),g(!0);if(!new RegExp(/^0x[a-fA-F0-9]{40}$/).test(T.current.value))return t(Nn("invalidAddress")),void g(!1);try{if(await Re.isAddressValid(T.current.value))return t(Nn("takenAddress")),void g(!1);const e=await Oe(C.current.files[0]);l({...d,image:e.secure_url,nickName:b.current.value,walletAddress:T.current.value}),c(2)}catch{t(Nn("errorServer"))}},children:[(0,ke.jsx)("h3",{children:"Nickname"}),(0,ke.jsx)("input",{type:"text",placeholder:"Enter your nickname",required:!0,maxLength:15,ref:b}),(0,ke.jsx)("h3",{children:"Wallet address"}),(0,ke.jsx)("input",{type:"text",placeholder:"Ethereum wallet address",required:!0,ref:T}),(0,ke.jsx)("h3",{children:"Profile Image"}),(0,ke.jsx)("label",{htmlFor:"img",children:(0,ke.jsxs)("div",{className:"upload-img",children:[(0,ke.jsx)("img",{src:n(6581)}),E&&E.name]})}),(0,ke.jsx)("input",{id:"img",className:"non-appear",type:"file",placeholder:"Upload your image",accept:"image/*",required:!0,ref:C,onChange:e=>{_(e.target.files[0])}}),m&&(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]}),(0,ke.jsxs)("button",{children:["Continue ",(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]}),2===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h1",{children:"Your Gaming Career"}),(0,ke.jsxs)("form",{className:"phase2",onSubmit:e=>{e.preventDefault();[A.current.value,w.current.value,R.current.value,I.current.value].some((e=>"choose"===e))?t(Nn("choose")):(l({...d,category:A.current.value,proficiencyGame:w.current.value,region:R.current.value,topAchievement:I.current.value}),c(3))},children:[(0,ke.jsxs)("div",{className:"all-select-wrapper",children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Category"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(5070)("./".concat(u.category,".png"))}),(0,ke.jsxs)("select",{ref:A,onClick:P,name:"category",disabled:!0,children:[(0,ke.jsx)("option",{value:"sports",children:"Sports"}),(0,ke.jsx)("option",{value:"gaming",children:"Gaming"}),(0,ke.jsx)("option",{value:"choose",children:"Choose"})]})]})]}),"gaming"===p&&(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(u.game,".webp"))}),(0,ke.jsxs)("select",{ref:w,onClick:P,name:"game",children:[(0,ke.jsx)("option",{value:"choose",children:"Choose"}),(0,ke.jsx)("option",{value:"valorant",children:"Valorant"}),(0,ke.jsx)("option",{value:"fifa",children:"Fifa"})]})]})]}),"sports"===p&&(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"sport type"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(u.game,".webp"))}),(0,ke.jsxs)("select",{ref:w,onClick:P,name:"game",children:[(0,ke.jsx)("option",{value:"choose",children:"Choose"}),xn.map((e=>(0,ke.jsx)("option",{value:e.game,children:e.display})))]})]})]}),"choose"===p&&(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(9049)}),(0,ke.jsx)("select",{ref:w,onClick:P,name:"game",style:{opacity:w.current&&"choose"!==w.current.value?1:.7},children:(0,ke.jsx)("option",{value:"choose",children:"Choose"})})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Region"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(5983)}),(0,ke.jsxs)("select",{ref:R,children:[(0,ke.jsx)("option",{value:"choose",children:"Choose"}),(0,ke.jsx)("option",{value:"europe",children:"Europe"}),(0,ke.jsx)("option",{value:"asia",children:"Asia"}),(0,ke.jsx)("option",{value:"south america",children:"South america"}),(0,ke.jsx)("option",{value:"north america",children:"North america"})]})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Top achivement"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(2724)}),(0,ke.jsxs)("select",{ref:I,children:[(0,ke.jsx)("option",{value:"choose",children:"Choose"}),(0,ke.jsx)("option",{value:"skilled player",children:"Skilled player"}),(0,ke.jsx)("option",{value:"local champion",children:"Local champion"}),(0,ke.jsx)("option",{value:"highest rank",children:"Highest rank"}),(0,ke.jsx)("option",{value:"coach",children:"Coach"}),(0,ke.jsx)("option",{value:"top 500",children:"Top 500 "}),(0,ke.jsx)("option",{value:"1st in region",children:"1st in region"}),(0,ke.jsx)("option",{value:"top 10 in region",children:"Top 10 region"}),(0,ke.jsx)("option",{value:"top 100 in region",children:"Top 100 region"}),(0,ke.jsx)("option",{value:"1st in country",children:"1st in country"}),(0,ke.jsx)("option",{value:"top 10 in country",children:"Top 10 country"}),(0,ke.jsx)("option",{value:"top 100 in country",children:"Top 100 country"}),(0,ke.jsx)("option",{value:"top 10 world",children:"Top 10 world"}),(0,ke.jsx)("option",{value:"top 100 world",children:"Top 100 world"}),(0,ke.jsx)("option",{value:"1st in the world",children:"1st in the world"}),(0,ke.jsx)("option",{value:"2nd in the world",children:"2nd in the world"}),(0,ke.jsx)("option",{value:"3rd in the world",children:"3rd in the world"})]})]})]})]}),(0,ke.jsxs)("button",{children:["Continue ",(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]}),3===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h1",{children:"Your Gaming Experience"}),(0,ke.jsxs)("form",{className:"phase2",onSubmit:e=>{e.preventDefault();let n=k.current.value;if(""!==n){let e="";try{if(e=new URL(n),!(n.includes("instagram")||n.includes("twitter")||n.includes("tiktok")||n.includes("youtube")))return t(Nn("socialUnsupported")),void(k.current.value="");n=e.href}catch{return t(Nn("socialError")),void(k.current.value="")}}"choose"!==N.current.value&&"choose"!==O.current.value?l({...d,status:N.current.value,experience:O.current.value,socialLink:n}):t(Nn("choose"))},children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Status"}),(0,ke.jsx)("div",{className:"select-wrapper",children:(0,ke.jsxs)("select",{ref:N,children:[(0,ke.jsx)("option",{value:"choose",children:"Choose"}),(0,ke.jsx)("option",{value:"beginner",children:"Beginner"}),(0,ke.jsx)("option",{value:"intermidate",children:"Intermidate"}),(0,ke.jsx)("option",{value:"advanced",children:"Advanced"}),(0,ke.jsx)("option",{value:"pro",children:"Pro"})]})})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Experience from"}),(0,ke.jsx)("div",{className:"select-wrapper",children:(0,ke.jsxs)("select",{ref:O,children:[(0,ke.jsx)("option",{value:"choose",children:"Choose"}),S.map((e=>(0,ke.jsx)("option",{value:e,children:e},e)))]})})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Link to social page"}),(0,ke.jsx)("input",{type:"text",placeholder:"Optional",ref:k,style:{marginTop:"0",width:"100%"}})]}),(0,ke.jsxs)("button",{children:["Create ",(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]}),(0,ke.jsx)(De,{phase:a})]})}const Un={addEvent:async function(e){const t=await Ae.post("handle-event/create-event",e);if(t)return t},deleteEvent:async function(e){return await Ae.post("handle-event/delete-unapproved-event/"+e)},endEvent:async function(e,t){return await Ae.post("handle-event/end-event/"+e,{shareWithCommunity:t})},editEvent:async function(e,t){return await Ae.post("handle-event/edit-event/"+e,t)},startEvent:async function(e){return await Ae.post("handle-event/start-event/"+e)},getById:async function(e){return await Ae.get("handle-event/get-event-creator/"+e)},getAnalytics:async function(e){return await Ae.get("handle-event/get-event-analytics/"+e)},confirm:async function(e,t){const n=await Ae.put("handle-event/accept-event/"+t,{creatorId:e});if(n)return n},getGlobalEvent:async function(e){return await Ae.get("handle-event/get-event-stream/".concat(e))},payCreator:async function(e,t){return await Ae.put("handle-event/pay-creator/"+e,{details:t})},setDistribution:async function(e,t){return await Ae.put("handle-event/set-fund-distribution/"+e,{shareWithCommunity:t})}};const jn=[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0];function Vn(e){let{ev:t,creator:r}=e;const s=B(),o=Se(),[a,c]=(0,i.useState)(!1),[d,l]=(0,i.useState)(t.fund?t.fund.percent:0),[u,h]=(0,i.useState)(t.fund?t.fund.won:0),p=e=>{"clients"===e?navigator.clipboard.writeText("pikme.tv/#/event/"+t._id):navigator.clipboard.writeText("https://create.pikme.tv/#/confirm/"+t._id),o(Nn("copied"))},f=async e=>{try{(e?await Re.deleteCreatorEvent(t._id,r.walletAddress):await Un.deleteEvent(t._id))&&window.location.reload()}catch{o(Nn("errorDelete"))}},m=()=>{var e;o((e=t,t=>{t({type:"SET_POPUP_EVENT",popupEvent:e})})),s("/edit")},g=async()=>{try{const e=await Un.getGlobalEvent(t._id);o(In(e)),s("/stream-control")}catch{o(Nn("errorLoadEvent"))}};return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"event-card",children:[(0,ke.jsxs)("div",{className:"event-upper",children:[(0,ke.jsx)("h3",{children:"Event Info"}),(0,ke.jsx)("div",{children:t.fund?!t.approved||t.cancelled||t.over?t.over||t.cancelled?t.fund.creatorPaid||t.cancelled?(0,ke.jsx)("p",{onClick:()=>f(!0),children:"Delete"}):(0,ke.jsx)("p",{onClick:()=>c("pay"),children:"Pay"}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{onClick:m,children:"Edit"}),(0,ke.jsx)("p",{onClick:()=>c("delete"),children:"Delete"})]}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{className:"main-color",onClick:()=>g(t),children:"Stream"}),(0,ke.jsx)("p",{onClick:()=>{p("clients")},children:"Share"})]}):t.cancelled||t.over?(0,ke.jsx)("p",{onClick:()=>f(!0),children:"Delete"}):t.approved?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{className:"main-color",onClick:()=>g(t),children:"Stream"}),(0,ke.jsx)("p",{onClick:()=>{p("clients")},children:"Share"})]}):t.players[0].walletAddress===r.walletAddress?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{onClick:m,children:"Edit"}),(0,ke.jsx)("p",{onClick:()=>p("creators"),children:"Share"}),(0,ke.jsx)("p",{onClick:()=>c("delete"),children:"Delete"})]}):void 0})]}),(0,ke.jsxs)("div",{className:"event-inner",children:[(0,ke.jsx)("img",{src:n(671)("./".concat(t.game,".webp"))}),(0,ke.jsxs)("div",{className:"headers",children:[(0,ke.jsx)("p",{children:"Game: "}),t.fund&&(0,ke.jsx)("p",{children:"Investors:"}),!t.fund&&(0,ke.jsx)("p",{children:"players "}),(0,ke.jsx)("p",{children:"Date:"}),(0,ke.jsx)("p",{children:"Time:"}),(0,ke.jsx)("p",{children:"Status:"})]}),(0,ke.jsxs)("div",{className:"details",children:[(0,ke.jsx)("p",{children:t.game}),t.fund&&(0,ke.jsx)("p",{children:Object.keys(t.fund.investors).length}),!t.fund&&(0,ke.jsx)("p",{children:t.players.length}),(0,ke.jsx)("p",{children:Le(t.date)}),(0,ke.jsx)("p",{children:Me(t.date)}),(0,ke.jsx)("p",{style:{color:t.over?"red":t.approved?"#04C300":"#F37F13"},children:t.cancelled?"Cancelled":t.fund&&t.over&&t.fund.creatorPaid?(0,ke.jsx)("p",{style:{color:"lime"},children:"Payed"}):t.fund&&t.over&&!t.fund.creatorPaid?(0,ke.jsx)("p",{style:{color:"gold"},children:"Payment"}):t.over?"Over":t.approved?t.fund?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("span",{style:{color:t.fund.current===t.fund.target?"#04C300":"white"},children:t.fund.current.toFixed(2)}),(0,ke.jsx)("span",{style:{color:"white"},children:"/"}),(0,ke.jsx)("span",{children:t.fund.target+"BNB"})]}):"Approved":"Waiting..."})]})]})]}),"delete"===a&&(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Delete the event?"}),(0,ke.jsx)("p",{children:"This action cannot be undone. are you sure you want to delete the event?"}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"bolder",onClick:()=>c(!1),children:"Cancel"}),(0,ke.jsx)("div",{className:"lighter",onClick:()=>f(!1),children:"Delete"})]})]}),"pay"===a&&(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Pay for event ?"}),(0,ke.jsxs)("p",{children:["You agreed to pay ",(t.fund.won*t.fund.percent).toFixed(3)," BNB"]}),(0,ke.jsx)("p",{children:"You may also edit it here before payment:"}),(0,ke.jsxs)("div",{className:"percent-wrapper",children:[(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{children:"Prize:"}),(0,ke.jsx)("input",{type:"number",placeholder:"20BNB",value:u,onChange:e=>{const{value:t}=e.target;Number(t)<0?o(Nn("invalidPrize")):h(t)}})]}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{children:"Share:"}),(0,ke.jsx)("select",{value:d,onChange:e=>{const{value:t}=e.target;l(t)},children:jn.map((e=>(0,ke.jsxs)("option",{value:e,children:[(100*e).toFixed(0),"%"]},e)))})]})]}),(0,ke.jsxs)("div",{className:"buttons-wrapper",value:String(u),children:[(0,ke.jsx)("div",{className:"bolder",onClick:()=>c(!1),children:"Cancel"}),(0,ke.jsx)("div",{className:"lighter",onClick:async()=>{try{if(0===Number(d)||0===Number(u)){return void(await Un.payCreator(t._id,{payZero:!0})?window.location.reload():o(Nn("errorServer")))}let e;e=window.innerWidth<1e3?"https://metamask.app.link/dapp/pikme.tv/#/pay/":"https://pikme.tv/#/pay/",e+=t._id;await Un.setDistribution(t._id,{prize:u,percent:d})&&window.open(e,"_blank")}catch{o(Nn("errorServer"))}finally{c(!1)}},children:"Pay"})]})]})]})}function Fn(){const e=Se(),t=B();return(0,ke.jsxs)("div",{className:"error",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Website is unavailable!"}),(0,ke.jsx)("p",{children:"Unfortunately the website is down at the moment. Try reloading the page,"}),(0,ke.jsxs)("p",{children:["if the page is still unavailable contact our support team ",(0,ke.jsx)("span",{children:"here"}),"."]}),(0,ke.jsx)("div",{onClick:()=>{e(Cn()),e((e=>{e({type:"RESET_GENERAL_STATE"})})),localStorage.removeItem("persist:root"),t("/"),window.location.reload()},children:"Reload page"})]})}function Bn(e){const t=Se(),[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)({0:"",1:"",2:"",3:"",4:"",5:""}),a=(0,i.useRef)(),c=(0,i.useRef)();(0,i.useEffect)((()=>{Object.values(s).every((e=>""!==e))&&l(!1)}),[s]);const d=async e=>{e&&e.preventDefault();const n=a.current.value+(0==c.current.value[0]?c.current.value.slice(1):c.current.value);try{const e=await Re.sendOTP(Number(n));"AxiosError"===e.name?t(Nn("errorServer")):e.response?r(n):t(Nn("invalidPhone"))}catch{t(Nn("errorServer"))}},l=async t=>{t&&t.preventDefault();const i=s[0]+s[1]+s[2]+s[3]+s[4]+s[5];e.handleCreatorPhone(n,i)},u=e=>{const{value:t,name:n}=e.target;if(t&&6===t.length)return o({0:t[0],1:t[1],2:t[2],3:t[3],4:t[4],5:t[5]}),void document.getElementById(5).focus();for(let i=0;i<Number(n);i++)if(""===s[i])return void document.getElementById(i).focus();Number(t)>=0&&Number(t)<=9&&(""!==t&&"5"!==n&&document.getElementById(Number(n)+1).focus(),o({...s,[n]:t}))},h=e=>{const{key:t,target:n}=e;"Backspace"===t&&""===n.value&&"0"!==n.name&&document.getElementById(Number(n.name)-1).focus()},p=[0,1,2,3,4,5];try{return(0,ke.jsxs)("section",{className:"login",children:[(0,ke.jsx)("h1",{children:"Login"}),!n&&(0,ke.jsxs)("form",{onSubmit:d,children:[(0,ke.jsx)("p",{children:"Phone number"}),(0,ke.jsxs)("div",{className:"phone-wrapper",children:[(0,ke.jsx)("select",{ref:a,children:Ln.map((e=>(0,ke.jsxs)("option",{value:e.code,children:[e.iso," +",e.code]},e.country)))}),(0,ke.jsx)("input",{type:"number",ref:c,placeholder:"enter number",required:!0})]}),(0,ke.jsx)("h5",{children:"A 6 digit OTP will be sent via SMS to verify your mobile number."}),(0,ke.jsx)("button",{children:"Continue"})]}),n&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h5",{style:{marginBottom:"8px"},children:"Enter the code you received to"}),(0,ke.jsx)("p",{style:{opacity:"1"},children:n}),(0,ke.jsx)("form",{className:"code",onSubmit:l,children:p.map((e=>(0,ke.jsx)("input",{autoFocus:0===e,id:e,type:"number",name:e,className:"digit",value:s[e],onChange:u,onKeyDown:h},e)))}),(0,ke.jsxs)("h4",{onClick:()=>{r(null),o({0:"",1:"",2:"",3:"",4:"",5:""})},children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_left"}),"Back"]}),(0,ke.jsx)("button",{onClick:l,children:"Continue"})]})]})}catch{return(0,ke.jsx)(Fn,{})}}function Wn(){const e=Se(),t=B(),[r,s]=(0,i.useState)("loading"),[o,a]=(0,i.useState)(!1),{isConnected:c}=he((e=>e.user)),{homePhase:d}=he((e=>e.tutorialModule)),{callbackLink:l}=he((e=>e.generalModule)),u=he((e=>e.user));(0,i.useEffect)((()=>{h(),window.scrollTo(0,0)}),[]);const h=async()=>{if(u.address)try{const n=await Re.addCreator(u.address,null);s(n),e(Tn(n)),null!==n&&void 0!==n&&n.banned&&t("/ban")}catch{a(!0),e(Cn()),s(!1)}else s(!1)};if(o)return(0,ke.jsx)(Fn,{});if(!c)return(0,ke.jsx)(Bn,{handleCreatorPhone:async(n,i)=>{try{const r=await Re.validateOTP(n,i);if(!1===r)e(bn(!0)),e(Sn(n)),s(!1);else if("string"===typeof r)e(Nn("errorCode"));else if("object"===typeof r&&r.nickName&&(e(bn(!0)),e(Tn(r)),e(yn(r.walletAddress)),e(Sn(n)),s(r),l)){const n=l;e(On("")),t(n)}}catch{e(Nn("errorServer"))}}});if("loading"===r)return(0,ke.jsx)("div",{className:"home",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})});if(!r)return(0,ke.jsx)(Mn,{});r.creatorEvents&&Object.keys(r.creatorEvents).length>0&&0===d&&e(Dn(1));try{return(0,ke.jsxs)("section",{className:"home",children:[(0,ke.jsx)("div",{className:"home-banner",children:(0,ke.jsxs)("h1",{children:["Welcome ",r.nickName]})}),Object.keys(r.creatorEvents).length>0?(0,ke.jsx)("div",{className:"events-container",children:Object.keys(r.creatorEvents).map((e=>(0,ke.jsx)(Vn,{ev:r.creatorEvents[e],creator:r},r.creatorEvents[e]._id)))}):(0,ke.jsxs)("div",{className:"no-events",children:[(0,ke.jsxs)("h1",{children:["You don't have any events yet, you can create one right ",(0,ke.jsx)("span",{onClick:()=>t("/create"),className:"clickable main-color",children:"here"}),"."]}),(0,ke.jsx)("img",{src:n(7820)})]})]})}catch{return(0,ke.jsx)(Fn,{})}}function Gn(){const e=B(),t=Se(),{id:r}=W(),[s,o]=(0,i.useState)("loading"),[a,c]=(0,i.useState)(!1),d=he((e=>e.user));(0,i.useEffect)((()=>{l()}),[]);const l=async()=>{try{const n=await Un.getById(r);if(!d||!d.creator)return t(On("confirm/"+n._id)),void e("/");n.players.find((e=>e.walletAddress===d.creator.walletAddress))&&c(!0),o(n)}catch{e("/")}},u=async()=>{if(d&&d.creator)try{await Un.confirm(d.creator._id,r)&&e("/")}catch{t(Nn("errorServer"))}e("/")},h=()=>{navigator.clipboard.writeText("https://create.pikme.tv/#/confirm/"+s._id),t(Nn("copied"))};if("loading"===s)return(0,ke.jsx)("div",{className:"home",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})});if(!s)return(0,ke.jsx)("div",{children:"oops! it seems there is no event on the link you recieved... "});try{return(0,ke.jsxs)("div",{className:"confirm",children:[(0,ke.jsxs)("div",{className:"boxes-wrapper",children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"info-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(s.game,".webp"))}),(0,ke.jsx)("p",{children:s.game})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Date"}),(0,ke.jsx)("div",{className:"info-wrapper",children:(0,ke.jsx)("p",{children:xe(s.date)})})]})]}),a?(0,ke.jsxs)("div",{className:"same",children:[(0,ke.jsx)("p",{children:"You already take part in this event, please send this link to your opponents instead:"}),(0,ke.jsxs)("div",{className:"copy",children:[(0,ke.jsx)("span",{children:"https://create.pikme.tv/#/confirm/"+s._id.slice(0,4)+"...sdfsdfsdfsdfsdfsdfsdff"}),(0,ke.jsx)("img",{onClick:h,src:n(8621)})]})]}):(0,ke.jsxs)("div",{className:"buttons",children:[(0,ke.jsx)("div",{className:"reject",onClick:()=>{e("/")},children:"Reject"}),(0,ke.jsx)("div",{className:"accept",onClick:u,children:"Accept!"})]})]})}catch{return(0,ke.jsx)(Fn,{})}}function Hn(){const e=B(),t=Se(),r=he((e=>e.user)),[s,o]=(0,i.useState)("loading"),[a,c]=(0,i.useState)(!1),[d,l]=(0,i.useState)("valorant"),[u,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),m=Ve();(0,i.useEffect)((()=>{r?E():e("/"),window.scrollTo(0,0)}),[]);const g=async()=>{if(u){f(!0);let i=s.socialLink;if(""!==i){let e="";try{if(e=new URL(i),!(i.includes("instagram")||i.includes("twitter")||i.includes("tiktok")||i.includes("youtube")))return t(Nn("socialUnsupported")),void f(!1);i=e.href}catch(n){return t(Nn("socialError")),void f(!1)}}const o=await Re.editCreator(r.phone,{...s,socialLink:i});o&&(t(Tn(o)),e("/"))}},E=async()=>{try{const n=await Re.addCreator(r.address,null);o(n),t(Tn(n)),l(n.proficiencyGame),null!==n&&void 0!==n&&n.banned&&e("/ban")}catch{e("/")}},_=()=>{navigator.clipboard.writeText(r.creator.walletAddress),t(Nn("copied-address"))},v=e=>{l(e.target.value),y(e)},y=e=>{const{name:t,value:n}=e.target;o({...s,[t]:n}),h(!0)},S=async e=>{const t=await Oe(e.target.files[0]);o({...s,image:t.secure_url}),h(!0)};if("loading"===s||p)return(0,ke.jsx)("div",{className:"home",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})});if(!s)return(0,ke.jsx)(ke.Fragment,{});const{nickName:b,walletAddress:T,image:C,proficiencyGame:A,region:w,topAchievement:R,status:I,experience:N,socialLink:O}=s;try{return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("section",{className:"profile",children:[(0,ke.jsx)("h1",{children:"Account information"}),(0,ke.jsxs)("div",{className:"edit-container",children:[(0,ke.jsxs)("div",{className:"main-img-wrapper",children:[(0,ke.jsx)("label",{htmlFor:"img",className:"noselect",children:(0,ke.jsx)("img",{className:"main-img",src:C})}),(0,ke.jsx)("input",{id:"img",className:"non-appear",type:"file",accept:"image/*",onChange:S})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Wallet address"}),(0,ke.jsxs)("div",{className:"second address",children:[(0,ke.jsx)("span",{children:T.slice(0,4)+"..."+T.slice(-4)}),(0,ke.jsx)("img",{onClick:_,src:n(8621)})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Name"}),(0,ke.jsx)("input",{className:"second",name:"nickName",type:"text",placeholder:"edit nickname",maxLength:15,value:b,onChange:y})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Main game"}),(0,ke.jsxs)("div",{className:"img-wrapper second",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(d,".webp"))}),(0,ke.jsx)("select",{value:A,onChange:v,name:"proficiencyGame",children:xn.map((e=>(0,ke.jsx)("option",{value:e.game,children:e.display},e.game)))})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Region"}),(0,ke.jsxs)("div",{className:"img-wrapper second",children:[(0,ke.jsx)("img",{src:n(5983)}),(0,ke.jsxs)("select",{name:"region",value:w,onChange:y,children:[(0,ke.jsx)("option",{value:"europe",children:"Europe"}),(0,ke.jsx)("option",{value:"asia",children:"Asia"}),(0,ke.jsx)("option",{value:"south america",children:"South america"}),(0,ke.jsx)("option",{value:"north america",children:"North america"})]})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Top achivement"}),(0,ke.jsxs)("div",{className:"img-wrapper second",children:[(0,ke.jsx)("img",{src:n(2724)}),(0,ke.jsxs)("select",{name:"topAchievement",value:R,onChange:y,children:[(0,ke.jsx)("option",{value:"1st",children:"1st in the world"}),(0,ke.jsx)("option",{value:"2nd",children:"2nd in the world"}),(0,ke.jsx)("option",{value:"3rd",children:"3rd in the world"}),(0,ke.jsx)("option",{value:"top 10 world",children:"Top 10 world"}),(0,ke.jsx)("option",{value:"top 100 world",children:"Top 100 world"}),(0,ke.jsx)("option",{value:"1st region",children:"1st in region"}),(0,ke.jsx)("option",{value:"top 10 region",children:"Top 10 region"}),(0,ke.jsx)("option",{value:"top 100 region",children:"Top 100 region"}),(0,ke.jsx)("option",{value:"1st country",children:"1st in country"}),(0,ke.jsx)("option",{value:"top 10 country",children:"Top 10 country"}),(0,ke.jsx)("option",{value:"top 100 country",children:"Top 100 country"}),(0,ke.jsx)("option",{value:"top 500",children:"Top 500 "}),(0,ke.jsx)("option",{value:"local champion",children:"Local champion"}),(0,ke.jsx)("option",{value:"highest rank",children:"Highest rank"}),(0,ke.jsx)("option",{value:"skilled player",children:"Skilled player"}),(0,ke.jsx)("option",{value:"coach",children:"Coach"})]})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Status"}),(0,ke.jsx)("div",{className:"img-wrapper second",children:(0,ke.jsxs)("select",{name:"status",value:I,onChange:y,children:[(0,ke.jsx)("option",{value:"gaming influencer",children:"Gaming influencer"}),(0,ke.jsx)("option",{value:"streamer",children:"Streamer"}),(0,ke.jsx)("option",{value:"pro player",children:"Pro player"})]})})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Experience from"}),(0,ke.jsx)("div",{className:"img-wrapper second",children:(0,ke.jsx)("select",{name:"experience",value:N,onChange:y,children:m.map((e=>(0,ke.jsx)("option",{value:e,children:e},e)))})})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Social link"}),(0,ke.jsx)("input",{className:"second social",name:"socialLink",type:"text",placeholder:"enter social link",value:O,onChange:y})]})]}),(0,ke.jsxs)("div",{className:"save-wrapper",children:[(0,ke.jsx)("button",{onClick:()=>{u?c(!0):e("/")},className:"back clickable",children:"Back"}),(0,ke.jsx)("button",{onClick:g,className:"save clickable",children:"Save"})]})]}),a&&(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Are you sure"}),(0,ke.jsx)("p",{children:"The changes you done will not be saved, go back anyway?"}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"bolder",onClick:()=>c(!1),children:"Cancel"}),(0,ke.jsx)("div",{className:"lighter",onClick:()=>e("/"),children:"Back"})]})]})]})}catch{return(0,ke.jsx)(Fn,{})}}function Kn(){const e=(0,i.useRef)(),t=t=>{t.preventDefault(),window.location.replace(e.current.value)};try{return window.scrollTo(0,0),(0,ke.jsxs)("div",{className:"join",children:[(0,ke.jsx)("h1",{children:"join an event"}),(0,ke.jsx)("p",{children:"Here you can enter the URL to join an existing event."}),(0,ke.jsxs)("form",{onSubmit:t,children:[(0,ke.jsx)("input",{type:"text",ref:e}),(0,ke.jsx)("button",{children:"Connect"})]}),window.innerWidth>700&&(0,ke.jsx)("img",{src:n(3545)}),window.innerWidth<700&&(0,ke.jsx)("img",{src:n(7406)})]})}catch{return(0,ke.jsx)(Fn,{})}}var zn=n(3322),Yn=n.n(zn);const qn=Object.create(null);qn.open="0",qn.close="1",qn.ping="2",qn.pong="3",qn.message="4",qn.upgrade="5",qn.noop="6";const Jn=Object.create(null);Object.keys(qn).forEach((e=>{Jn[qn[e]]=e}));const Qn={type:"error",data:"parser error"},Xn="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Zn="function"===typeof ArrayBuffer,$n=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ei=(e,t,n)=>{let{type:i,data:r}=e;return Xn&&r instanceof Blob?t?n(r):ti(r,n):Zn&&(r instanceof ArrayBuffer||$n(r))?t?n(r):ti(new Blob([r]),n):n(qn[i]+(r||""))},ti=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function ni(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ii;const ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",si="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)si[ri.charCodeAt(n)]=n;const oi="function"===typeof ArrayBuffer,ai=(e,t)=>{if("string"!==typeof e)return{type:"message",data:di(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:ci(e.substring(1),t)};return Jn[n]?e.length>1?{type:Jn[n],data:e.substring(1)}:{type:Jn[n]}:Qn},ci=(e,t)=>{if(oi){const n=(e=>{let t,n,i,r,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const d=new ArrayBuffer(o),l=new Uint8Array(d);for(t=0;t<a;t+=4)n=si[e.charCodeAt(t)],i=si[e.charCodeAt(t+1)],r=si[e.charCodeAt(t+2)],s=si[e.charCodeAt(t+3)],l[c++]=n<<2|i>>4,l[c++]=(15&i)<<4|r>>2,l[c++]=(3&r)<<6|63&s;return d})(e);return di(n,t)}return{base64:!0,data:e}},di=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,li=String.fromCharCode(30);function ui(){return new TransformStream({transform(e,t){!function(e,t){Xn&&e.data instanceof Blob?e.data.arrayBuffer().then(ni).then(t):Zn&&(e.data instanceof ArrayBuffer||$n(e.data))?t(ni(e.data)):ei(e,!1,(e=>{ii||(ii=new TextEncoder),t(ii.encode(e))}))}(e,(n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let hi;function pi(e){return e.reduce(((e,t)=>e+t.length),0)}function fi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function mi(e){if(e)return function(e){for(var t in mi.prototype)e[t]=mi.prototype[t];return e}(e)}mi.prototype.on=mi.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},mi.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},mi.prototype.off=mi.prototype.removeListener=mi.prototype.removeAllListeners=mi.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},mi.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},mi.prototype.emitReserved=mi.prototype.emit,mi.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},mi.prototype.hasListeners=function(e){return!!this.listeners(e).length};const gi="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Ei(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const _i=gi.setTimeout,vi=gi.clearTimeout;function yi(e,t){t.useNativeTimers?(e.setTimeoutFn=_i.bind(gi),e.clearTimeoutFn=vi.bind(gi)):(e.setTimeoutFn=gi.setTimeout.bind(gi),e.clearTimeoutFn=gi.clearTimeout.bind(gi))}class Si extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class bi extends mi{constructor(e){super(),this.writable=!1,yi(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new Si(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ai(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}const Ti="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ci=64,Ai={};let wi,Ri=0,Ii=0;function Ni(e){let t="";do{t=Ti[e%Ci]+t,e=Math.floor(e/Ci)}while(e>0);return t}function Oi(){const e=Ni(+new Date);return e!==wi?(Ri=0,wi=e):e+"."+Ni(Ri++)}for(;Ii<Ci;Ii++)Ai[Ti[Ii]]=Ii;let ki=!1;try{ki="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(bp){}const Di=ki;function Pi(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Di))return new XMLHttpRequest}catch(n){}if(!t)try{return new(gi[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function xi(){}const Li=null!=new Pi({xdomain:!1}).responseType;class Mi extends mi{constructor(e,t){super(),yi(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;const t=Ei(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const n=this.xhr=new Pi(t);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(i){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{n.setRequestHeader("Accept","*/*")}catch(i){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(i){return void this.setTimeoutFn((()=>{this.onError(i)}),0)}"undefined"!==typeof document&&(this.index=Mi.requestsCount++,Mi.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=xi,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete Mi.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Mi.requestsCount=0,Mi.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Ui);else if("function"===typeof addEventListener){addEventListener("onpagehide"in gi?"pagehide":"unload",Ui,!1)}function Ui(){for(let e in Mi.requests)Mi.requests.hasOwnProperty(e)&&Mi.requests[e].abort()}const ji="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Vi=gi.WebSocket||gi.MozWebSocket,Fi="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const Bi={websocket:class extends bi{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=Fi?{}:Ei(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Fi?new Vi(e,t,n):t?new Vi(e,t):new Vi(e)}catch(bp){return this.emitReserved("error",bp)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;ei(n,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(t){}i&&ji((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Oi()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!Vi}},webtransport:class extends bi{get name(){return"webtransport"}doOpen(){"function"===typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((e=>{const t=function(e,t){hi||(hi=new TextDecoder);const n=[];let i=0,r=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===i){if(pi(n)<1)break;const e=fi(n,1);s=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if(pi(n)<2)break;const e=fi(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(pi(n)<8)break;const e=fi(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){a.enqueue(Qn);break}r=s*Math.pow(2,32)+t.getUint32(4),i=3}else{if(pi(n)<r)break;const e=fi(n,r);a.enqueue(ai(s?e:hi.decode(e),t)),i=0}if(0===r||r>e){a.enqueue(Qn);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=ui();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const s={type:"open"};this.query.sid&&(s.data='{"sid":"'.concat(this.query.sid,'"}')),this.writer.write(s).then((()=>this.onOpen()))}))})))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this.writer.write(n).then((()=>{i&&ji((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends bi{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}const t=e&&e.forceBase64;this.supportsBinary=Li&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(li),i=[];for(let r=0;r<n.length;r++){const e=ai(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,s)=>{ei(e,!1,(e=>{i[s]=e,++r===n&&t(i.join(li))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Oi()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Mi(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},Wi=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hi(e){const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=Wi.exec(e||""),s={},o=14;for(;o--;)s[Gi[o]]=r[o]||"";return-1!=n&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,s.query),s}class Ki extends mi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=Hi(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Hi(t.host).host),yi(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Bi[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Ki.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(t){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;Ki.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ki.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,d(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function o(){s("transport closed")}function a(){s("socket closed")}function c(e){t&&e.name!==t.name&&r()}const d=()=>{t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",i),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",c),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onOpen(){if(this.readyState="open",Ki.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"===typeof(t=i)?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){Ki.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}Ki.protocol=4;Ki.protocol;const zi="function"===typeof ArrayBuffer,Yi=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,qi=Object.prototype.toString,Ji="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===qi.call(Blob),Qi="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===qi.call(File);function Xi(e){return zi&&(e instanceof ArrayBuffer||Yi(e))||Ji&&e instanceof Blob||Qi&&e instanceof File}function Zi(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Zi(e[t]))return!0;return!1}if(Xi(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Zi(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Zi(e[n]))return!0;return!1}function $i(e){const t=[],n=e.data,i=e;return i.data=er(n,t),i.attachments=t.length,{packet:i,buffers:t}}function er(e,t){if(!e)return e;if(Xi(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=er(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=er(e[i],t));return n}return e}function tr(e,t){return e.data=nr(e.data,t),delete e.attachments,e}function nr(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=nr(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=nr(e[n],t));return e}const ir=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],rr=5;var sr;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(sr||(sr={}));class or{constructor(e){this.replacer=e}encode(e){return e.type!==sr.EVENT&&e.type!==sr.ACK||!Zi(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===sr.EVENT?sr.BINARY_EVENT:sr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==sr.BINARY_EVENT&&e.type!==sr.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=$i(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function ar(e){return"[object Object]"===Object.prototype.toString.call(e)}class cr extends mi{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===sr.BINARY_EVENT;n||t.type===sr.BINARY_ACK?(t.type=n?sr.EVENT:sr.ACK,this.reconstructor=new dr(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Xi(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===sr[n.type])throw new Error("unknown packet type "+n.type);if(n.type===sr.BINARY_EVENT||n.type===sr.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!cr.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case sr.CONNECT:return ar(t);case sr.DISCONNECT:return void 0===t;case sr.CONNECT_ERROR:return"string"===typeof t||ar(t);case sr.EVENT:case sr.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===ir.indexOf(t[0]));case sr.ACK:case sr.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dr{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=tr(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function lr(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const ur=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hr extends mi{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[lr(e,"open",this.onopen.bind(this)),lr(e,"packet",this.onpacket.bind(this)),lr(e,"error",this.onerror.bind(this)),lr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){if(ur.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:sr.EVENT,data:n,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){const e=this.ids++,t=n.pop();this._registerAckCallback(e,t),r.id=e}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const s=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=function(){i.io.clearTimeoutFn(s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,[null,...n])}}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((t,i)=>{n.push(((e,n)=>r?e?i(e):t(n):t(e))),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];n(null,...s)}return i.pending=!1,t._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:sr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case sr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case sr.EVENT:case sr.BINARY_EVENT:this.onevent(e);break;case sr.ACK:case sr.BINARY_ACK:this.onack(e);break;case sr.DISCONNECT:this.ondisconnect();break;case sr.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];t.packet({type:sr.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:sr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function pr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}pr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},pr.prototype.reset=function(){this.attempts=0},pr.prototype.setMin=function(e){this.ms=e},pr.prototype.setMax=function(e){this.max=e},pr.prototype.setJitter=function(e){this.jitter=e};class fr extends mi{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,yi(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new pr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const r=n.parser||e;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ki(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=lr(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=lr(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(lr(e,"ping",this.onping.bind(this)),lr(e,"data",this.ondata.bind(this)),lr(e,"error",this.onerror.bind(this)),lr(e,"close",this.onclose.bind(this)),lr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){ji((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new hr(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const mr={};function gr(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=Hi(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,s=n.path,o=mr[r]&&s in mr[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new fr(i,t):(mr[r]||(mr[r]=new fr(i,t)),a=mr[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(gr,{Manager:fr,Socket:hr,io:gr,connect:gr});const Er=gr.connect("https://server.pikme.tv"),_r=["blue","cyan","magenta","lime","maroon","navy","olive","teal","violet","silver","gold","indigo","coral","crimson","fuchsia","khaki","lavender","plum","turquoise","wheat","beige","azure","aliceblue","antiquewhite","aquamarine","bisque","blanchedalmond","blueviolet","burlywood","cadetblue","chartreuse","chocolate","cornflowerblue","cornsilk","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","honeydew","hotpink","indianred","ivory","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","ol"],vr=e=>{let{eventName:t,mobile:n,zIndex:r,end:s,cameraIdx:o,cameras:a,start:c}=e;const d=Se(),l=he((e=>e.user)),[u,h]=(0,i.useState)([]),[p,f]=(0,i.useState)(!0);let m=l.creator&&l.creator.nickName?l.creator.nickName:"Guest"+Math.floor(1e4*Math.random()),g=_r[m.charCodeAt(0)%_r.length]||"white";(0,i.useEffect)((()=>(Er&&l.creator&&Er.emit("joinRoom",{username:l.creator.nickName,roomName:t,userId:String(l.creator.phone)}),()=>Er.off("message"))),[]),(0,i.useEffect)((()=>{document.getElementById("body-text").scrollTop=document.getElementById("body-text").scrollHeight}),[u]),(0,i.useEffect)((()=>{c&&Er.emit("start-stream",t)}),[c]);Er.on("message",(e=>{var t;e.viewers&&d((t=e.viewers,e=>{e({type:"SET_VIEWERS",viewers:t})})),e.newRoom?h([e]):h([...u,e])}));const E=()=>{const e=document.getElementById("input").value;""!==e&&(Er&&Er.emit("chat",{nickName:m,message:e,color:g,roomId:t}),document.getElementById("input").value="",document.getElementById("input").focus(),document.getElementById("body-text").scrollTop=document.getElementById("body-text").scrollHeight)};if(a&&a.length>0){let e="normal";Er.emit("change-camera",{type:e,roomId:t})}return s&&Er.emit("end-event",t),(0,ke.jsx)(ke.Fragment,{children:n&&!p?(0,ke.jsxs)("div",{className:"chat-bar-mobile",style:{zIndex:r},children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"settings"}),(0,ke.jsx)("p",{children:"Live chat"}),(0,ke.jsx)("span",{onClick:()=>f(!0),className:"material-symbols-outlined",children:"expand_less"})]}):(0,ke.jsxs)("div",{className:"chat-box",style:{zIndex:r},children:[(0,ke.jsx)("div",{className:"chat-header",children:(0,ke.jsx)("h1",{children:"Live chat"})}),(0,ke.jsx)("div",{id:"body-text",className:"body-text",children:u.map(((e,t)=>(0,ke.jsx)("div",{className:"message-div",children:(0,ke.jsxs)("div",{children:[(0,ke.jsx)("span",{style:{color:e.color},children:e.nickName}),(0,ke.jsx)("span",{style:{marginLeft:"1px"},children:":"}),(0,ke.jsx)("span",{style:{marginLeft:"5px",fontWeight:"lighter"},children:e.message})]})},t)))}),(0,ke.jsxs)("form",{className:"chat-box-input",onSubmit:e=>{e.preventDefault()},children:[(0,ke.jsx)("input",{id:"input",type:"text",onKeyDown:e=>{"Enter"===e.key&&E()},placeholder:"Type a message"}),(0,ke.jsx)("input",{type:"submit",style:{width:"0",padding:"0",borderWidth:"0",visibility:"hidden"}}),(0,ke.jsx)("button",{style:{width:"0",padding:"0",borderWidth:"0",visibility:"hidden"}})]})]})})};function yr(e){let{status:t}=e;const[n,r]=(0,i.useState)(0);let s=null;(0,i.useEffect)((()=>(clearInterval(s),"live"===t?a():o(),()=>clearInterval(s))),[t]);const o=()=>{clearInterval(s)},a=()=>{s=setInterval((()=>{r((e=>e+1))}),1e3)},c="".concat(("0"+Math.floor(n/3600)%24).slice(-2),":")+"".concat(("0"+Math.floor(n/60)%60).slice(-2),":")+"".concat(("0"+n%60).slice(-2));return"live"!==t?(0,ke.jsx)(ke.Fragment,{}):(0,ke.jsx)("p",{className:"stream-timer",children:c})}function Sr(e){(0,i.useEffect)((()=>()=>{clearTimeout(r)}),[]);const[t,n]=(0,i.useState)(Date.now()),r=setTimeout((()=>{n(Date.now)}),1e3),s=e.eventDate.getTime()-t;let o=Math.floor(s/864e5),a=Math.floor(s%864e5/36e5),c=Math.floor(s%36e5/6e4),d=Math.floor(s%6e4/1e3);return o<=0&&a<=0&&c<=0&&d<=0?(clearTimeout(r),e.setShowTimer&&e.setShowTimer(!1),(0,ke.jsx)(ke.Fragment,{})):(0,ke.jsxs)("div",{className:"timer",children:[o>0&&(0,ke.jsxs)("span",{children:[Pe(o),":"]}),(a>0||o>0)&&(0,ke.jsxs)("span",{children:[Pe(a),":"]}),(0,ke.jsx)("span",{children:Pe(c)}),":",(0,ke.jsx)("span",{children:Pe(d)})]})}const br={authorize:async function(e){return await Ae.post("handle-admin/authorize/"+e)},getWaitingEvents:async function(){return await Ae.get("handle-admin/get-waiting-events")},acceptEvent:async function(e){return await Ae.post("handle-admin/accept/"+e)},rejectEvent:async function(e){return await Ae.post("handle-admin/reject/"+e)},acceptShow:async function(e){return await Ae.post("handle-admin/accept-show/"+e)},rejectShow:async function(e){return await Ae.post("handle-admin/reject-show/"+e)},confirmPayment:async function(e){return await Ae.get("handle-admin/confirm-payment/"+e)},getCurrentEvents:async function(){return await Ae.get("handle-admin/get-current-events")},getPaymentEvents:async function(){return await Ae.get("handle-admin/get-payment-events")},getBanned:async function(){return await Ae.get("handle-admin/get-banlist")},getShows:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=await Ae.get("handle-admin/get-shows/"+e);return t},getMyShows:async function(){return await Ae.get("handle-admin/get-my-shows")},unbanUser:async function(e){return await Ae.post("handle-admin/unban-user/"+e)},announceWinner:async function(e,t){return await Ae.post("handle-admin/announce-winner/"+e,{teamWon:t})},announceWinnerFund:async function(e,t){return await Ae.post("handle-admin/announce-winner-fund/"+e,{shareWithCommunity:t})},changeShare:async function(e){return await Ae.post("handle-admin/change-share/"+e)},startShow:async function(e){return await Ae.post("handle-admin/start-show/"+e)},endShow:async function(e){return await Ae.post("handle-admin/end-show/"+e)},getHistory:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=await Ae.get("handle-admin/get-history/"+e);return t},cancelEvent:async function(e){return await Ae.post("handle-admin/cancel-event/"+e)},getGlobalShow:async function(e){return await Ae.get("handle-admin/get-show-stream/".concat(e))},banUser:async function(e){return await Ae.post("handle-admin/ban-user/"+e)},cancelShow:async function(e){return await Ae.post("handle-admin/cancel-show/"+e)},removeMyShow:async function(e){return await Ae.post("handle-admin/remove-my-show/"+e)},getByPhone:async function(e){return await Ae.get("handle-admin/get-by-phone/"+e)}};const Tr={appId:"2148ba0fc4934b56b78fc915f29945f1",uid:String(Math.floor(Math.random()*(2**32-1))+1),role:"host",type:"sports"};let Cr={audioStream:null,videoStream:null,cameras:[],mics:[]};const Ar={0:0,1:10,2:20,3:40,4:70,5:100,6:150,7:300,8:400,9:750,10:1e3},wr=Yn().createClient({mode:"live",codec:"vp8",role:Tr.role});function Rr(){const e=Se(),t=B(),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(0),[c,d]=(0,i.useState)(0),[l,u]=(0,i.useState)(5),[h,p]=(0,i.useState)(!1),[f,m]=(0,i.useState)("noDevices"),[g,E]=(0,i.useState)("user"),[_,v]=(0,i.useState)(!1),[y,S]=(0,i.useState)(!1),[b,T]=(0,i.useState)(!0),[C,A]=(0,i.useState)(!0),{viewers:w}=he((e=>e.generalModule)),R=he((e=>e.generalModule.streamInfo)),I=window.innerWidth<1100;let N,O=(0,i.useRef)(!1);(0,i.useEffect)((()=>(k(),()=>{wr&&(wr.unpublish(),wr.leave()),Cr.audioStream&&(Cr.audioStream.stop(),Cr.audioStream.close(),Cr.audioStream=null),Cr.videoStream&&(Cr.videoStream.stop(),Cr.videoStream.close(),Cr.videoStream=null)})),[]),(0,i.useEffect)((()=>{!async function(){await D(),await x(),"live"===f&&(await L(!1),P())}()}),[o,c,y,_,l,g]);const k=async()=>{Cr.cameras=await Yn().getCameras(),Cr.mics=await Yn().getMicrophones(),await x();let e=await Ae.get("handle-stream/".concat(R._id,"/audience/uid/").concat(Tr.uid));await wr.join(Tr.appId,R._id,e.rtcToken,Tr.uid),await wr.setClientRole(Tr.role)};async function D(){Cr.videoStream&&await Cr.videoStream.stop(),Cr.videoStream=null;const e=y?await Yn().createScreenVideoTrack():await j();Cr.videoStream=e;const t=await Yn().createMicrophoneAudioTrack();await t.setDevice(Cr.mics[c].deviceId),Cr.audioStream=t,Cr.audioStream.setVolume(_?0:Ar[l])}const P=async()=>{await wr.publish([Cr.videoStream,Cr.audioStream]),"live"!==f&&m("live")},x=async()=>{try{Cr.videoStream||await D(),Cr.videoStream.play("agora_local"),"noDevices"===f&&m("local")}catch(bp){console.log("222",bp),alert("error playing:"+o+"---"+Cr.cameras[o].label+"----"+bp.message)}},L=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{wr&&await wr.unpublish(),e&&m("local")}catch(bp){console.log("333",bp)}},M=async e=>{Cr.mics&&Cr.mics.length&&!O.current&&(O.current=!0,N&&clearTimeout(N),N=setTimeout((()=>{O.current=!1}),300),u(e.target.value))},U=e=>{document.documentElement.style.setProperty("--volume",10*e.target.value+(5-e.target.value)+"%")},j=async()=>{try{const e={cameraId:Cr.cameras[o].deviceId,facingMode:g,optimizationMode:"detail",encoderConfig:{bitrateMax:3e3,frameRate:{min:25,max:60},width:{max:1920,min:640},height:{max:1080,min:360}}};I?delete e.cameraId:delete e.facingMode;return await Yn().createCameraVideoTrack(e)}catch(bp){alert("error creating video:"+o+"---"+Cr.cameras[o].label+"----"+bp.message)}};console.log("gggggg",g);const V=async()=>{E("user"===g?"environment":"user")},F=()=>new Date(R.date).getTime()-Date.now()<=0,W=async()=>{if("end"===h)L(!0),p(!1);else if("end-event"===h)(async()=>{try{R.price?await br.endShow(R._id):await Un.endEvent(R._id,!!R.fund||C),m("ended"),p(!1),setTimeout((()=>{t("/")}),500)}catch{e(Nn("errorServer"))}})();else{try{await br.startShow(R._id)?P():e(Nn("event-ended-error"))}catch{e(Nn("errorServer"))}p(!1)}};if(!R)return(0,ke.jsx)("div",{className:"center-fixed",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})});const G=function(e){const t=new Date,n=new Date(e)-t,i=Math.floor(n/1e3/60/60/24),r=Math.floor(n/1e3/60/60)%24,s=Math.floor(n/1e3/60)%60;return i>0?"".concat(i," Days"):r>=1?"".concat(r," Hours"):"".concat(s," Minutes")}(R.date);try{return(0,ke.jsxs)(ke.Fragment,{children:[!I&&(0,ke.jsxs)("div",{className:"stream-container",children:[(0,ke.jsxs)("div",{className:"settings noselect",children:[(0,ke.jsxs)("div",{className:"settings-upper",children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"settings"}),(0,ke.jsx)("p",{children:"Options"})]}),(0,ke.jsxs)("div",{className:"option main-color",onClick:()=>s("camera"===r?"":"camera"),children:[(0,ke.jsx)("p",{children:"Stream source"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"camera"===r?"expand_less":"expand_more"})]}),"camera"===r&&(0,ke.jsxs)(ke.Fragment,{children:[Cr.cameras.map(((e,t)=>(0,ke.jsx)("div",{className:y||o!==t?"sub":"sub sec-color back-stream",onClick:()=>(e=>{o!==e&&a(e),S(!1)})(t),children:(0,ke.jsx)("p",{children:e.label})},t))),(0,ke.jsxs)("div",{className:y?"sub sec-color back-stream":"sub",onClick:()=>S(!0),children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"desktop_mac"}),(0,ke.jsx)("p",{children:" Screen"})]})]}),(0,ke.jsxs)("div",{className:"option main-color",onClick:()=>s("mic"===r?"":"mic"),children:[(0,ke.jsx)("p",{children:"Microphone"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"mic"===r?"expand_less":"expand_more"})]}),"mic"===r&&Cr.mics.map(((e,t)=>(0,ke.jsx)("div",{onClick:()=>d(t),className:c===t?"sub sec-color back-stream":"sub",children:(0,ke.jsxs)("p",{children:[t+1,". ",e.label.substring(0,e.label.indexOf("("))]})},t))),(0,ke.jsxs)("div",{className:"range-wrapper",children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"volume_up"}),(0,ke.jsx)("input",{type:"range",min:"0",max:"10",onMouseUp:M,onChange:U})]})]}),(0,ke.jsxs)("div",{className:"stream",children:[(0,ke.jsxs)("div",{className:"stream-video",children:["noDevices"===f&&(0,ke.jsxs)("div",{className:"no-camera",children:[(0,ke.jsxs)("svg",{width:"141",height:"120",viewBox:"0 0 141 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("g",{clipPath:"url(#clip0_1126_3578)",children:(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M96.3827 92.7377C98.8906 90.4582 100.496 87.5647 100.973 84.4652L128.32 94.8302C129.658 95.3389 131.125 95.5542 132.586 95.4566C134.047 95.3589 135.456 94.9514 136.685 94.271C137.914 93.5906 138.925 92.659 139.625 91.5608C140.324 90.4626 140.691 89.2326 140.692 87.9827V32.0177C140.691 30.7688 140.324 29.5399 139.624 28.4426C138.925 27.3453 137.916 26.4143 136.687 25.7341C135.459 25.0539 134.052 24.6461 132.592 24.5476C131.132 24.4491 129.667 24.6631 128.328 25.1702L100.973 35.5352C100.414 31.9284 98.3373 28.6177 95.1294 26.2197C91.9216 23.8216 87.8013 22.4998 83.5358 22.5002H37.5647L43.8431 30.0002H83.5358C85.8679 30.0002 88.1045 30.7904 89.7535 32.1969C91.4026 33.6034 92.329 35.5111 92.329 37.5002V82.5002C92.3306 83.8695 91.8927 85.2131 91.0628 86.3852L96.3827 92.7377ZM12.5567 31.3502C11.3947 32.0406 10.4455 32.9605 9.7902 34.0313C9.1349 35.1021 8.79286 36.2923 8.79324 37.5002V82.5002C8.79324 84.4893 9.71966 86.397 11.3687 87.8035C13.0178 89.21 15.2544 90.0002 17.5865 90.0002H61.6758L67.9541 97.5002H17.5865C12.9223 97.5002 8.44906 95.9198 5.15096 93.1068C1.85286 90.2938 0 86.4784 0 82.5002V37.5002C0 32.4377 2.93694 27.9602 7.44787 25.2452L12.5479 31.3502H12.5567ZM131.899 87.9752L101.122 76.3127V43.6877L131.899 32.0177V87.9827V87.9752ZM93.1468 114.675L5.21439 9.6752L12.3721 5.3252L100.304 110.325L93.1468 114.675Z",fill:"#F3F3F3",fillOpacity:"0.9"})}),(0,ke.jsx)("defs",{children:(0,ke.jsx)("clipPath",{id:"clip0_1126_3578",children:(0,ke.jsx)("rect",{width:"140.692",height:"120",fill:"white"})})})]}),(0,ke.jsx)("p",{children:"Could not detect any camera."}),(0,ke.jsxs)("p",{children:["You may need to grant access to your camera manually in",(0,ke.jsx)("a",{target:"_blank",href:"https://support.google.com/chrome/answer/2693767?hl=en&co=GENIE.Platform%3DDesktop",className:"main-color",children:" Chrome "})," or",(0,ke.jsx)("a",{target:"_blank",href:"https://support.apple.com/en-il/guide/mac-help/mchlf6d108da/mac",className:"main-color",children:" Safari"}),", then ",(0,ke.jsx)("span",{onClick:()=>window.location.reload(),children:"reload the page."})]})]}),(0,ke.jsx)("div",{id:"agora_local",className:"agora-local-pc",style:{zIndex:"noDevices"!==f?1:-1}})]}),(0,ke.jsxs)("div",{className:"stream-control noselect",children:[(0,ke.jsxs)("div",{className:"options",children:[_?(0,ke.jsxs)("svg",{className:"clickable sec-svg",onClick:()=>v(!_),width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("path",{d:"M22.7439 14.4978C22.7439 15.3792 22.597 16.2278 22.3282 17.0186L21.0561 15.7465C21.1394 15.3355 21.1813 14.9172 21.1812 14.4978V12.935C21.1812 12.7278 21.2635 12.5291 21.41 12.3825C21.5566 12.236 21.7553 12.1537 21.9626 12.1537C22.1698 12.1537 22.3685 12.236 22.5151 12.3825C22.6616 12.5291 22.7439 12.7278 22.7439 12.935V14.4978ZM14.9301 20.7489C16.2084 20.7489 17.3961 20.366 18.3869 19.7065L19.509 20.8302C18.3934 21.6392 17.0828 22.137 15.7115 22.2726V25.4372H20.3998C20.607 25.4372 20.8058 25.5196 20.9523 25.6661C21.0988 25.8126 21.1812 26.0114 21.1812 26.2186C21.1812 26.4258 21.0988 26.6246 20.9523 26.7711C20.8058 26.9177 20.607 27 20.3998 27H9.46037C9.25313 27 9.05439 26.9177 8.90785 26.7711C8.76131 26.6246 8.67898 26.4258 8.67898 26.2186C8.67898 26.0114 8.76131 25.8126 8.90785 25.6661C9.05439 25.5196 9.25313 25.4372 9.46037 25.4372H14.1487V22.2726C12.2213 22.0789 10.4346 21.1762 9.13513 19.7396C7.83569 18.303 7.11619 16.4349 7.11621 14.4978V12.935C7.11621 12.7278 7.19854 12.5291 7.34507 12.3825C7.49161 12.236 7.69036 12.1537 7.8976 12.1537C8.10483 12.1537 8.30358 12.236 8.45012 12.3825C8.59666 12.5291 8.67898 12.7278 8.67898 12.935V14.4978C8.67898 16.1557 9.33758 17.7457 10.5099 18.918C11.6822 20.0903 13.2722 20.7489 14.9301 20.7489ZM19.6184 6.68395V14.3087L18.0556 12.7459V6.68395C18.0592 5.86859 17.7441 5.08409 17.1774 4.49784C16.6107 3.91159 15.8374 3.56999 15.0223 3.54593C14.2073 3.52187 13.4152 3.81725 12.8149 4.36905C12.2146 4.92085 11.8537 5.68539 11.8092 6.49954L10.4887 5.179C10.8465 4.12763 11.5657 3.23734 12.5185 2.66663C13.4712 2.09592 14.5955 1.88183 15.6913 2.06246C16.7871 2.24309 17.7832 2.80673 18.5024 3.65303C19.2215 4.49933 19.617 5.57337 19.6184 6.68395Z",fill:"white",fillOpacity:"0.9"}),(0,ke.jsx)("path",{d:"M17.2521 18.5722L16.0832 17.4032C15.6091 17.5914 15.0961 17.6608 14.589 17.6051C14.0819 17.5495 13.5962 17.3706 13.1742 17.0841C12.7521 16.7975 12.4067 16.412 12.1679 15.9613C11.9291 15.5105 11.8043 15.0081 11.8043 14.498V13.1259L10.2415 11.5631V14.498C10.2413 15.319 10.4566 16.1256 10.866 16.8372C11.2753 17.5488 11.8644 18.1404 12.5742 18.5529C13.284 18.9654 14.0896 19.1843 14.9106 19.1877C15.7315 19.191 16.539 18.9788 17.2521 18.5722ZM5 4.11181L23.7533 22.8651L24.8597 21.7586L6.10644 3.00537L5 4.11181Z",fill:"white",fillOpacity:"0.9"})]}):(0,ke.jsxs)("svg",{className:"clickable",onClick:()=>v(!_),width:"30",height:"30",viewBox:"0 0 25 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("path",{d:"M0.8 11.1001C1.01217 11.1001 1.21566 11.1844 1.36569 11.3344C1.51571 11.4844 1.6 11.6879 1.6 11.9001V13.5001C1.6 15.1975 2.27428 16.8253 3.47452 18.0256C4.67475 19.2258 6.30261 19.9001 8 19.9001C9.69739 19.9001 11.3253 19.2258 12.5255 18.0256C13.7257 16.8253 14.4 15.1975 14.4 13.5001V11.9001C14.4 11.6879 14.4843 11.4844 14.6343 11.3344C14.7843 11.1844 14.9878 11.1001 15.2 11.1001C15.4122 11.1001 15.6157 11.1844 15.7657 11.3344C15.9157 11.4844 16 11.6879 16 11.9001V13.5001C16 15.4833 15.2634 17.3959 13.933 18.8667C12.6026 20.3375 10.7733 21.2618 8.8 21.4601V24.7001H13.6C13.8122 24.7001 14.0157 24.7844 14.1657 24.9344C14.3157 25.0844 14.4 25.2879 14.4 25.5001C14.4 25.7123 14.3157 25.9158 14.1657 26.0658C14.0157 26.2158 13.8122 26.3001 13.6 26.3001H2.4C2.18783 26.3001 1.98434 26.2158 1.83431 26.0658C1.68429 25.9158 1.6 25.7123 1.6 25.5001C1.6 25.2879 1.68429 25.0844 1.83431 24.9344C1.98434 24.7844 2.18783 24.7001 2.4 24.7001H7.2V21.4601C5.2267 21.2618 3.3974 20.3375 2.06701 18.8667C0.736615 17.3959 -2.49147e-05 15.4833 6.3201e-10 13.5001V11.9001C6.3201e-10 11.6879 0.0842856 11.4844 0.234315 11.3344C0.384344 11.1844 0.587827 11.1001 0.8 11.1001Z",fill:"#F3F3FF"}),(0,ke.jsx)("path",{d:"M11.2002 13.5002C11.2002 14.3489 10.8631 15.1628 10.2629 15.7629C9.66282 16.3631 8.84889 16.7002 8.0002 16.7002C7.1515 16.7002 6.33757 16.3631 5.73745 15.7629C5.13734 15.1628 4.8002 14.3489 4.8002 13.5002V5.5002C4.8002 4.6515 5.13734 3.83757 5.73745 3.23745C6.33757 2.63734 7.1515 2.3002 8.0002 2.3002C8.84889 2.3002 9.66282 2.63734 10.2629 3.23745C10.8631 3.83757 11.2002 4.6515 11.2002 5.5002V13.5002ZM8.0002 0.700195C6.72716 0.700195 5.50626 1.20591 4.60608 2.10608C3.70591 3.00626 3.2002 4.22716 3.2002 5.5002V13.5002C3.2002 14.7732 3.70591 15.9941 4.60608 16.8943C5.50626 17.7945 6.72716 18.3002 8.0002 18.3002C9.27323 18.3002 10.4941 17.7945 11.3943 16.8943C12.2945 15.9941 12.8002 14.7732 12.8002 13.5002V5.5002C12.8002 4.22716 12.2945 3.00626 11.3943 2.10608C10.4941 1.20591 9.27323 0.700195 8.0002 0.700195Z",fill:"#F3F3FF"})]}),(0,ke.jsx)("img",{onClick:()=>{F()?e(Rn("/")):t("/")},src:n(8623)})]}),(0,ke.jsxs)("div",{className:"start",children:[(0,ke.jsx)(yr,{status:f}),"live"!=f?(0,ke.jsxs)(ke.Fragment,{children:[b?(0,ke.jsx)(Sr,{eventDate:new Date(R.date),setShowTimer:T}):(0,ke.jsx)("div",{className:"begin",onClick:()=>{F()?p("start"):e(Nn(G))},children:"Go Live "}),(0,ke.jsx)("div",{className:"end",onClick:()=>{F()?p("end-event"):e(Nn(G))},children:"End Event"})]}):(0,ke.jsx)("div",{className:"begin",onClick:()=>p("end"),children:"Stop Live"})]}),(0,ke.jsx)("div",{className:"details",children:(0,ke.jsxs)("div",{children:[(0,ke.jsx)("img",{src:n(9362)}),(0,ke.jsx)("p",{children:w-1})]})})]})]}),(0,ke.jsx)(vr,{eventName:R._id,end:"ended"===f,cameraIdx:o,cameras:Cr.cameras,start:"live"===f})]}),I&&(0,ke.jsxs)("section",{className:"stream-mobile",children:[(0,ke.jsxs)("section",{className:"left-wrapper",children:[(0,ke.jsxs)("div",{className:"upper",children:[(0,ke.jsx)("div",{onClick:()=>{F()?p("end-event"):e(Nn(G))},className:"end-event-mobile",children:"End Event"}),(0,ke.jsx)(Sr,{eventDate:new Date(R.date),setShowTimer:T}),(0,ke.jsx)(yr,{status:f}),(0,ke.jsxs)("div",{className:"detail-holder",children:[(0,ke.jsxs)("div",{children:[(0,ke.jsx)("img",{src:n(9362)}),(0,ke.jsx)("p",{children:je(w-1)})]}),R.players&&(0,ke.jsx)("div",{children:(0,ke.jsx)("img",{src:R.fund?n(9180):n(5819)})})]})]}),(0,ke.jsxs)("div",{className:"stream-video-mobile",children:[(0,ke.jsx)("div",{id:"agora_local",className:"agora-local-mobile",style:{zIndex:"noDevices"!==f?1:-1,transform:"scaleX(-1)"}}),"noDevices"===f&&(0,ke.jsxs)("div",{className:"no-camera",children:[(0,ke.jsxs)("svg",{width:"141",height:"120",viewBox:"0 0 141 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("g",{clipPath:"url(#clip0_1126_3578)",children:(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M96.3827 92.7377C98.8906 90.4582 100.496 87.5647 100.973 84.4652L128.32 94.8302C129.658 95.3389 131.125 95.5542 132.586 95.4566C134.047 95.3589 135.456 94.9514 136.685 94.271C137.914 93.5906 138.925 92.659 139.625 91.5608C140.324 90.4626 140.691 89.2326 140.692 87.9827V32.0177C140.691 30.7688 140.324 29.5399 139.624 28.4426C138.925 27.3453 137.916 26.4143 136.687 25.7341C135.459 25.0539 134.052 24.6461 132.592 24.5476C131.132 24.4491 129.667 24.6631 128.328 25.1702L100.973 35.5352C100.414 31.9284 98.3373 28.6177 95.1294 26.2197C91.9216 23.8216 87.8013 22.4998 83.5358 22.5002H37.5647L43.8431 30.0002H83.5358C85.8679 30.0002 88.1045 30.7904 89.7535 32.1969C91.4026 33.6034 92.329 35.5111 92.329 37.5002V82.5002C92.3306 83.8695 91.8927 85.2131 91.0628 86.3852L96.3827 92.7377ZM12.5567 31.3502C11.3947 32.0406 10.4455 32.9605 9.7902 34.0313C9.1349 35.1021 8.79286 36.2923 8.79324 37.5002V82.5002C8.79324 84.4893 9.71966 86.397 11.3687 87.8035C13.0178 89.21 15.2544 90.0002 17.5865 90.0002H61.6758L67.9541 97.5002H17.5865C12.9223 97.5002 8.44906 95.9198 5.15096 93.1068C1.85286 90.2938 0 86.4784 0 82.5002V37.5002C0 32.4377 2.93694 27.9602 7.44787 25.2452L12.5479 31.3502H12.5567ZM131.899 87.9752L101.122 76.3127V43.6877L131.899 32.0177V87.9827V87.9752ZM93.1468 114.675L5.21439 9.6752L12.3721 5.3252L100.304 110.325L93.1468 114.675Z",fill:"#F3F3F3",fillOpacity:"0.9"})}),(0,ke.jsx)("defs",{children:(0,ke.jsx)("clipPath",{id:"clip0_1126_3578",children:(0,ke.jsx)("rect",{width:"140.692",height:"120",fill:"white"})})})]}),(0,ke.jsx)("h1",{style:{width:"350px"},children:"Could not detect any camera. You might have blocked camera access in this website."})]})]}),(0,ke.jsxs)("div",{className:"lower",children:[(0,ke.jsx)("img",{onClick:()=>{F()?e(Rn("/")):t("/")},className:"smaller",src:n(8623)}),"live"!=f?(0,ke.jsx)("img",{onClick:()=>{F()?p("start"):e(Nn(G))},src:n(3321)}):(0,ke.jsx)("img",{onClick:()=>p("end"),src:n(6197)}),_?(0,ke.jsxs)("svg",{className:"clickable sec-svg",onClick:()=>v(!1),width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("path",{d:"M22.7439 14.4978C22.7439 15.3792 22.597 16.2278 22.3282 17.0186L21.0561 15.7465C21.1394 15.3355 21.1813 14.9172 21.1812 14.4978V12.935C21.1812 12.7278 21.2635 12.5291 21.41 12.3825C21.5566 12.236 21.7553 12.1537 21.9626 12.1537C22.1698 12.1537 22.3685 12.236 22.5151 12.3825C22.6616 12.5291 22.7439 12.7278 22.7439 12.935V14.4978ZM14.9301 20.7489C16.2084 20.7489 17.3961 20.366 18.3869 19.7065L19.509 20.8302C18.3934 21.6392 17.0828 22.137 15.7115 22.2726V25.4372H20.3998C20.607 25.4372 20.8058 25.5196 20.9523 25.6661C21.0988 25.8126 21.1812 26.0114 21.1812 26.2186C21.1812 26.4258 21.0988 26.6246 20.9523 26.7711C20.8058 26.9177 20.607 27 20.3998 27H9.46037C9.25313 27 9.05439 26.9177 8.90785 26.7711C8.76131 26.6246 8.67898 26.4258 8.67898 26.2186C8.67898 26.0114 8.76131 25.8126 8.90785 25.6661C9.05439 25.5196 9.25313 25.4372 9.46037 25.4372H14.1487V22.2726C12.2213 22.0789 10.4346 21.1762 9.13513 19.7396C7.83569 18.303 7.11619 16.4349 7.11621 14.4978V12.935C7.11621 12.7278 7.19854 12.5291 7.34507 12.3825C7.49161 12.236 7.69036 12.1537 7.8976 12.1537C8.10483 12.1537 8.30358 12.236 8.45012 12.3825C8.59666 12.5291 8.67898 12.7278 8.67898 12.935V14.4978C8.67898 16.1557 9.33758 17.7457 10.5099 18.918C11.6822 20.0903 13.2722 20.7489 14.9301 20.7489ZM19.6184 6.68395V14.3087L18.0556 12.7459V6.68395C18.0592 5.86859 17.7441 5.08409 17.1774 4.49784C16.6107 3.91159 15.8374 3.56999 15.0223 3.54593C14.2073 3.52187 13.4152 3.81725 12.8149 4.36905C12.2146 4.92085 11.8537 5.68539 11.8092 6.49954L10.4887 5.179C10.8465 4.12763 11.5657 3.23734 12.5185 2.66663C13.4712 2.09592 14.5955 1.88183 15.6913 2.06246C16.7871 2.24309 17.7832 2.80673 18.5024 3.65303C19.2215 4.49933 19.617 5.57337 19.6184 6.68395Z",fill:"white",fillOpacity:"0.9"}),(0,ke.jsx)("path",{d:"M17.2521 18.5722L16.0832 17.4032C15.6091 17.5914 15.0961 17.6608 14.589 17.6051C14.0819 17.5495 13.5962 17.3706 13.1742 17.0841C12.7521 16.7975 12.4067 16.412 12.1679 15.9613C11.9291 15.5105 11.8043 15.0081 11.8043 14.498V13.1259L10.2415 11.5631V14.498C10.2413 15.319 10.4566 16.1256 10.866 16.8372C11.2753 17.5488 11.8644 18.1404 12.5742 18.5529C13.284 18.9654 14.0896 19.1843 14.9106 19.1877C15.7315 19.191 16.539 18.9788 17.2521 18.5722ZM5 4.11181L23.7533 22.8651L24.8597 21.7586L6.10644 3.00537L5 4.11181Z",fill:"white",fillOpacity:"0.9"})]}):(0,ke.jsxs)("svg",{className:"clickable",onClick:()=>v(!0),width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("path",{d:"M0.8 11.1001C1.01217 11.1001 1.21566 11.1844 1.36569 11.3344C1.51571 11.4844 1.6 11.6879 1.6 11.9001V13.5001C1.6 15.1975 2.27428 16.8253 3.47452 18.0256C4.67475 19.2258 6.30261 19.9001 8 19.9001C9.69739 19.9001 11.3253 19.2258 12.5255 18.0256C13.7257 16.8253 14.4 15.1975 14.4 13.5001V11.9001C14.4 11.6879 14.4843 11.4844 14.6343 11.3344C14.7843 11.1844 14.9878 11.1001 15.2 11.1001C15.4122 11.1001 15.6157 11.1844 15.7657 11.3344C15.9157 11.4844 16 11.6879 16 11.9001V13.5001C16 15.4833 15.2634 17.3959 13.933 18.8667C12.6026 20.3375 10.7733 21.2618 8.8 21.4601V24.7001H13.6C13.8122 24.7001 14.0157 24.7844 14.1657 24.9344C14.3157 25.0844 14.4 25.2879 14.4 25.5001C14.4 25.7123 14.3157 25.9158 14.1657 26.0658C14.0157 26.2158 13.8122 26.3001 13.6 26.3001H2.4C2.18783 26.3001 1.98434 26.2158 1.83431 26.0658C1.68429 25.9158 1.6 25.7123 1.6 25.5001C1.6 25.2879 1.68429 25.0844 1.83431 24.9344C1.98434 24.7844 2.18783 24.7001 2.4 24.7001H7.2V21.4601C5.2267 21.2618 3.3974 20.3375 2.06701 18.8667C0.736615 17.3959 -2.49147e-05 15.4833 6.3201e-10 13.5001V11.9001C6.3201e-10 11.6879 0.0842856 11.4844 0.234315 11.3344C0.384344 11.1844 0.587827 11.1001 0.8 11.1001Z",fill:"#F3F3FF"}),(0,ke.jsx)("path",{d:"M11.2002 13.5002C11.2002 14.3489 10.8631 15.1628 10.2629 15.7629C9.66282 16.3631 8.84889 16.7002 8.0002 16.7002C7.1515 16.7002 6.33757 16.3631 5.73745 15.7629C5.13734 15.1628 4.8002 14.3489 4.8002 13.5002V5.5002C4.8002 4.6515 5.13734 3.83757 5.73745 3.23745C6.33757 2.63734 7.1515 2.3002 8.0002 2.3002C8.84889 2.3002 9.66282 2.63734 10.2629 3.23745C10.8631 3.83757 11.2002 4.6515 11.2002 5.5002V13.5002ZM8.0002 0.700195C6.72716 0.700195 5.50626 1.20591 4.60608 2.10608C3.70591 3.00626 3.2002 4.22716 3.2002 5.5002V13.5002C3.2002 14.7732 3.70591 15.9941 4.60608 16.8943C5.50626 17.7945 6.72716 18.3002 8.0002 18.3002C9.27323 18.3002 10.4941 17.7945 11.3943 16.8943C12.2945 15.9941 12.8002 14.7732 12.8002 13.5002V5.5002C12.8002 4.22716 12.2945 3.00626 11.3943 2.10608C10.4941 1.20591 9.27323 0.700195 8.0002 0.700195Z",fill:"#F3F3FF"})]}),(0,ke.jsx)("img",{src:n(1111),onClick:V})]})]}),(0,ke.jsx)(vr,{eventName:R._id,mobile:!0,end:"ended"===f,cameraIdx:o,cameras:Cr.cameras,start:"live"===f})]}),h&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen blur",onClick:()=>p(!1)}),(0,ke.jsxs)("div",{className:"confirm-exit",children:[(0,ke.jsx)("img",{src:n(2349)("./".concat("exit"==h||"end-event"==h?"end":h,".png"))}),(0,ke.jsxs)("h1",{children:[h.charAt(0).toUpperCase()+h.slice(1)," ","end-event"==h?"?":"Live Stream?"]}),"start"===h&&(0,ke.jsx)("p",{children:"This action will broadcast this video to your viewers."}),"end"===h&&(0,ke.jsx)("p",{children:"This action will stop the broadcast, your viewers are waiting for you."}),"end-event"===h&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{children:"This Action cannot be undone. "}),R.game&&!R.fund&&(0,ke.jsxs)("div",{className:"checkbox-wrapper",children:[(0,ke.jsx)("div",{className:"checkbox",onClick:()=>A(!C),children:C&&(0,ke.jsx)("span",{className:"main-color noselect material-symbols-outlined",children:"done"})}),(0,ke.jsx)("p",{children:"Share rewards with community "})]}),R.fund&&(0,ke.jsxs)("div",{className:"percent-wrapper",children:[(0,ke.jsx)("p",{children:"Don't forget to share your prize with your investors:"}),(0,ke.jsx)("img",{src:n(window.innerHeight<900?6643:3660),className:window.innerHeight<1e3?"pay-img-mobile":"pay-img"})]})]}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("div",{onClick:()=>p(!1),children:"Cancel"}),(0,ke.jsx)("div",{className:"action",onClick:W,children:h.charAt(0).toUpperCase()+h.slice(1)})]})]})]})]})}catch(bp){return console.log(bp),(0,ke.jsx)(Fn,{})}}function Ir(){const[e,t]=(0,i.useState)(window.innerWidth<550);(0,i.useEffect)((()=>{if(window.addEventListener("resize",n),document.documentElement.style.setProperty("--visibility","hidden"),window.innerWidth<1100){const e=document.querySelector(".main-layout");e&&e.classList.add("main-stream");const t=document.querySelector(".header");t&&t.classList.add("non-appear")}return()=>{window.removeEventListener("resize",n),document.documentElement.style.setProperty("--visibility","visible"),document.documentElement.style.setProperty("--volume","100%");const e=document.querySelector(".main-layout");e&&e.classList.remove("main-stream");const t=document.querySelector(".header");t&&t.classList.remove("non-appear")}}),[]);const n=()=>{window.innerWidth>550&&!0===e&&t(!1)};return e?(0,ke.jsxs)("div",{className:"center-fixed rotate-phone",children:[(0,ke.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("path",{d:"M13.5 0H2.5C1.83703 0 1.20114 0.263394 0.732114 0.732114C0.263366 1.20109 0 1.83703 0 2.5V27.5C0 28.163 0.263394 28.7989 0.732114 29.2679C1.20109 29.7366 1.83703 30 2.5 30H13.5C14.163 30 14.7989 29.7366 15.2679 29.2679C15.7366 28.7989 16 28.163 16 27.5V2.5C16 1.83703 15.7366 1.20114 15.2679 0.732114C14.7989 0.263366 14.163 0 13.5 0ZM15 27.5C15 27.8978 14.842 28.2795 14.5607 28.5607C14.2795 28.8419 13.8977 29 13.5 29H2.50003C2.10226 29 1.72054 28.8419 1.43934 28.5607C1.15814 28.2794 1.00006 27.8977 1.00006 27.5V2.5C1.00006 2.10223 1.15809 1.72051 1.43934 1.43931C1.72059 1.15811 2.10231 1.00003 2.50003 1.00003H4.00003V1.50003C4.00003 1.63262 4.05271 1.75985 4.14646 1.8536C4.24021 1.94735 4.36744 2.00003 4.50003 2.00003H11.5C11.6326 2.00003 11.7599 1.94735 11.8536 1.8536C11.9473 1.75985 12 1.63262 12 1.50003V1.00003H13.5C13.8978 1.00003 14.2795 1.15806 14.5607 1.43931C14.8419 1.72057 15 2.10229 15 2.5V27.5Z",fill:"white"}),(0,ke.jsx)("path",{d:"M27.5 14.0001H18C17.7239 14.0001 17.5 14.2239 17.5 14.5001C17.5 14.7762 17.7239 15.0001 18 15.0001H27.5C27.8978 15.0001 28.2795 15.1581 28.5607 15.4393C28.8419 15.7206 29 16.1023 29 16.5V18H28.5C28.2239 18 28 18.2239 28 18.5V25.5C28 25.6326 28.0527 25.7599 28.1464 25.8536C28.2402 25.9473 28.3674 26 28.5 26H29V27.5C29 27.8978 28.8419 28.2795 28.5607 28.5607C28.2794 28.8419 27.8977 29 27.5 29H17C16.7239 29 16.5 29.2239 16.5 29.5C16.5 29.7761 16.7239 30 17 30H27.5C28.163 30 28.7989 29.7366 29.2679 29.2679C29.7366 28.7989 30 28.163 30 27.5V16.5C30 15.837 29.7366 15.2011 29.2679 14.7321C28.7989 14.2634 28.163 14 27.5 14V14.0001Z",fill:"white"}),(0,ke.jsx)("path",{d:"M19.1002 5.79994C19.1957 5.92471 19.3433 5.99838 19.5002 5.99994C19.6084 6.00061 19.714 5.96556 19.8002 5.89994C20.0212 5.73431 20.0658 5.42092 19.9002 5.19994L19.1102 4.13988C20.8678 4.43988 22.5049 5.23097 23.8321 6.42182C25.1592 7.61268 26.1223 9.15485 26.6102 10.8701L25.2502 10.0701C25.1357 9.9868 24.9915 9.95599 24.8531 9.98501C24.7145 10.0142 24.5951 10.1006 24.5239 10.223C24.4526 10.3453 24.4368 10.4921 24.4799 10.6267C24.523 10.7616 24.6212 10.8716 24.7502 10.9299L26.9002 12.2C26.9752 12.2464 27.062 12.2705 27.1502 12.2701H27.2801C27.4098 12.2424 27.5198 12.1578 27.5801 12.0399L28.8502 9.88995C28.9895 9.65178 28.9143 9.3462 28.6801 9.20001C28.4395 9.06251 28.133 9.14242 27.9902 9.37991L27.4801 10.25C26.8922 8.43529 25.8176 6.81654 24.3737 5.57014C22.9297 4.32351 21.1714 3.49694 19.2902 3.17997L20.2902 2.41992V2.42014C20.5112 2.25429 20.5558 1.9409 20.3902 1.72014C20.2246 1.49916 19.9112 1.45429 19.6902 1.62014L17.6902 3.12014C17.4694 3.28576 17.4246 3.59916 17.5902 3.82014L19.1002 5.79994Z",fill:"white"})]}),(0,ke.jsx)("h1",{children:"Please rotate your phone, make sure auto rotate is on."})]}):(0,ke.jsx)(Rr,{})}function Nr(e){let{players:t,setPopup:r,event:s,accept:o,reject:a}=e;const[c,d]=(0,i.useState)(0);let l=window.innerWidth<700;return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen blur",onClick:()=>r(!1),children:window.innerWidth<700&&(0,ke.jsx)("div",{onClick:()=>r(!1),className:"popup-close-mobile",children:(0,ke.jsx)("p",{children:"Tap to close"})})}),(0,ke.jsx)("section",{className:"popup cr",style:{zIndex:"1001"},children:(0,ke.jsxs)("div",{className:"bought noselect",children:[(0,ke.jsxs)("div",{className:"upper-navbar center",children:[(0,ke.jsx)("img",{src:n(3151),className:"hidden"}),(0,ke.jsxs)("div",{className:"center",children:[(0,ke.jsx)("img",{src:t[c].image}),(0,ke.jsx)("select",{onChange:e=>{const{value:t}=e.target;d(t)},children:t.map(((e,t)=>(0,ke.jsx)("option",{value:t,children:e.nickName})))})]}),(0,ke.jsx)("img",{className:"clickable",src:n(3151),onClick:()=>{r(!1)}})]}),l?(0,ke.jsxs)("div",{className:"inner-bought",children:[(0,ke.jsx)("img",{src:n(6030)("./wide-".concat(t[c].proficiencyGame,".webp"))}),(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Experience:"}),(0,ke.jsxs)("p",{children:[(new Date).getFullYear()-t[c].experience," Years"]})]}),(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Region:"}),(0,ke.jsx)("p",{children:t[c].region})]}),(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Status:"}),(0,ke.jsx)("p",{children:t[c].status})]}),(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Top achivement:"}),(0,ke.jsx)("p",{children:t[c].topAchievement})]}),(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Proficiency game:"}),(0,ke.jsx)("p",{children:t[c].proficiencyGame})]}),(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Phone number:"}),(0,ke.jsxs)("p",{children:["+",t[c].phone]})]}),t[c].socialLink&&(0,ke.jsxs)("div",{className:"mobile-line",children:[(0,ke.jsx)("h3",{children:"Find me at:"}),(0,ke.jsx)("a",{href:t[c].socialLink,target:"_blank",children:(0,ke.jsx)("img",{className:"contact-creator",src:n(854)("./".concat(Ue(t[c].socialLink),".png"))})})]})]}):(0,ke.jsxs)("div",{className:"inner-bought",children:[(0,ke.jsx)("img",{src:n(671)("./".concat(t[c].proficiencyGame,".webp"))}),(0,ke.jsxs)("div",{className:"player-details",children:[(0,ke.jsxs)("p",{children:["Experience: ",(0,ke.jsxs)("span",{children:[(new Date).getFullYear()-t[c].experience," Years"]})]}),(0,ke.jsxs)("p",{children:["Region: ",(0,ke.jsx)("span",{children:t[c].region})]}),(0,ke.jsxs)("p",{children:["Status: ",(0,ke.jsx)("span",{children:t[c].status})]}),(0,ke.jsxs)("p",{children:["Top achivement: ",(0,ke.jsx)("span",{children:t[c].topAchievement})]}),(0,ke.jsxs)("p",{children:["Proficiency game: ",(0,ke.jsx)("span",{children:t[c].proficiencyGame})]}),t[c].socialLink&&(0,ke.jsxs)("p",{children:["Find me at: ",(0,ke.jsxs)("a",{href:t[c].socialLink,target:"_blank",children:[" ",(0,ke.jsx)("img",{src:n(854)("./".concat(Ue(t[c].socialLink),".png"))})]})]})]})]}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>a(s._id),children:"Reject"}),(0,ke.jsx)("div",{className:"bolder",onClick:()=>o(s),children:"Accept"})]})]})})]})}function Or(e){let{event:t,setPopup:i,accept:r,reject:s}=e;return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen blur",onClick:()=>i(!1)}),(0,ke.jsx)("section",{className:"popup cr",style:{zIndex:"1001"},children:(0,ke.jsxs)("form",{className:"create",children:[(0,ke.jsxs)("div",{className:"create-upper",style:{justifyContent:"space-between",width:"100%"},children:[(0,ke.jsx)("div",{style:{width:"30px"}}),(0,ke.jsx)("h1",{children:"Funding event"}),(0,ke.jsx)("img",{src:n(3151),onClick:()=>{i(!1)}})]}),(0,ke.jsxs)("div",{className:"confirm",style:{minHeight:"unset",paddingTop:"10px",width:"100%"},children:[(0,ke.jsxs)("div",{className:"boxes-wrapper",style:{justifyContent:"space-between",width:"100%",flexWrap:"wrap"},children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"info-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(t.game,".webp"))}),(0,ke.jsx)("p",{children:t.game})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Date"}),(0,ke.jsxs)("div",{className:"info-wrapper",children:[(0,ke.jsx)("img",{src:n(451)}),(0,ke.jsx)("p",{children:xe(t.date)})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Target"}),(0,ke.jsxs)("div",{className:"info-wrapper",children:[(0,ke.jsx)("img",{src:n(5810)}),(0,ke.jsxs)("p",{children:[t.fund.target," BNB"]})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Prize"}),(0,ke.jsxs)("div",{className:"info-wrapper",children:[(0,ke.jsx)("img",{src:n(2724)}),(0,ke.jsxs)("p",{children:[t.fund.prize," BNB"]})]})]}),(0,ke.jsx)("div",{className:"all-select-wrapper",style:{maxWidth:window.innerWidth<700?"300px":""},children:(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Description"}),(0,ke.jsx)("textarea",{name:"description",readOnly:!0,className:"fund-desc",value:t.fund.description})]})})]}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>s(t._id),children:"Reject"}),(0,ke.jsx)("div",{className:"bolder",onClick:()=>r(t),children:"Accept"})]})]})]})})]})}function kr(){const e=Se(),[t,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!1),[a,c]=(0,i.useState)(!1);(0,i.useEffect)((()=>{d()}),[]);const d=async()=>{try{const e=await br.getWaitingEvents();r(e)}catch{o(!0)}},l=e=>{const t=new Date(e);return"".concat(t.getDate()," ").concat(["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][+e.slice(5,7)-1]," ").concat(t.getFullYear(),", ").concat(Me(e))},u=async t=>{if(!t.fund&&t.players.length<2)return void e(Nn("noPlayers"));const n=t._id;try{await br.acceptEvent(n),await d()}catch{e(Nn("errorServer"))}},h=async t=>{try{await br.rejectEvent(t),await d()}catch{e(Nn("errorServer"))}};return s?(0,ke.jsx)(Fn,{}):t?(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"control-wrapper",children:[(0,ke.jsxs)("p",{className:"list-count",children:["Waiting events : ",(0,ke.jsx)("span",{children:t.length})]}),t.length>0&&(0,ke.jsx)("div",{className:"list",children:t.map(((t,i)=>{return(0,ke.jsxs)("div",{className:"event",children:[(0,ke.jsxs)("div",{className:"left",children:[(0,ke.jsx)("img",{className:"game",src:n(6271)("./".concat(t.game,".webp"))}),(0,ke.jsxs)("div",{className:"details",children:[(0,ke.jsxs)("div",{className:"top",children:[(0,ke.jsx)("img",{src:t.players[0].image}),(0,ke.jsx)("p",{children:t.players[0].nickName}),t.players.length>1&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{children:"+"}),(0,ke.jsx)("div",{className:"img-wrapper",children:t.players.slice(1,4).map(((e,t)=>(0,ke.jsx)("img",{src:e.image,className:"img".concat(t)},t)))}),(0,ke.jsxs)("p",{children:[t.players.length-1," players"]})]})]}),(0,ke.jsx)("p",{children:l(t.date)})]})]}),(0,ke.jsxs)("div",{className:"actions",children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",onClick:()=>h(t._id),children:"close"}),(0,ke.jsx)("span",{onClick:()=>u(t),className:"material-symbols-outlined",children:"check"}),(0,ke.jsx)("span",{onClick:()=>c(t),className:"material-symbols-outlined",children:"visibility"}),(r=t.video,r?"error"===r?(0,ke.jsx)("span",{style:{color:"red"},onClick:()=>c("error"),className:"material-symbols-outlined",children:"error"}):(0,ke.jsx)("span",{className:"material-symbols-outlined",onClick:()=>e(Rn(r)),children:"play_circle"}):(0,ke.jsx)("span",{style:{color:"White"},className:"material-symbols-outlined",children:"videocam_off"}))]}),a&&a.fund&&(0,ke.jsx)(Or,{event:a,setPopup:c,accept:u,reject:h}),"object"===typeof a&&!a.fund&&(0,ke.jsx)(Nr,{event:a,players:a.players,setPopup:c,accept:u,reject:h}),"error"===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen blur",onClick:()=>c(!1)}),(0,ke.jsx)("section",{className:"simple-popup",style:{zIndex:"1001"},children:(0,ke.jsx)("p",{children:"Error uploading creator's video"})})]})]},i);var r}))})]})}):(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})}const Dr=[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0];function Pr(e){let{ev:t,endEvent:r,cancelEvent:s}=e;const o=Se(),[a,c]=(0,i.useState)(!1),[d,l]=(0,i.useState)(0),[u,h]=(0,i.useState)(!(t.over&&!t.shareWithCommunity)),p=(0,i.useRef)(),f=(0,i.useRef)();let m="Upcoming";new Date(Date.now())>new Date(t.date)&&(m="Started"),t.creatorStarted&&(m="Live"),t.over&&(m="Ended"),t.over&&t.fund&&!t.fund.creatorPaid&&(m="payment"),t.over&&t.fund&&t.fund.creatorPaid&&(m="Payed");let g="white";return"Started"===m&&(g="#F29B00"),"Live"===m&&(g="#F37F13"),"Ended"===m&&(g="red"),"payment"===m&&(g="gold"),"Payed"===m&&(g="lime"),(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"current-card",children:[(0,ke.jsxs)("div",{className:"event-upper",children:[(0,ke.jsxs)("div",{className:"name-wrapper",children:[(0,ke.jsx)("img",{src:t.players[0].image}),(0,ke.jsx)("h3",{children:t.players[0].nickName})]}),(0,ke.jsxs)("div",{children:[!u&&(0,ke.jsx)("img",{className:"clickable",src:n(6561),onClick:()=>c("share")}),!t.fund&&(0,ke.jsx)("p",{onClick:async()=>{try{const n=await Un.getAnalytics(t._id);o((e=n,t=>{t({type:"SET_POPUP_STATS",popupStats:e})})),o(Rn("stats"))}catch{o(Nn("errorServer"))}var e},children:"Info"}),(0,ke.jsx)("p",{onClick:()=>c("cancel"),children:"cancel"}),(!t.fund||t.fund&&t.fund.creatorPaid)&&(0,ke.jsx)("p",{onClick:()=>c("end"),children:"end"})]})]}),(0,ke.jsxs)("div",{className:"event-inner",children:[(0,ke.jsx)("img",{src:n(671)("./".concat(t.game,".webp"))}),(0,ke.jsxs)("div",{className:"headers",children:[(0,ke.jsx)("p",{children:"Type: "}),!t.fund&&(0,ke.jsx)("p",{children:"players: "}),t.fund&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{children:"Investors:"}),(0,ke.jsx)("p",{children:"Goal:"}),(0,ke.jsx)("p",{children:"Max prize:"})]}),(0,ke.jsx)("p",{children:"Date: "}),(0,ke.jsx)("p",{children:"Time: "}),(0,ke.jsx)("p",{children:"status:"})]}),(0,ke.jsxs)("div",{className:"details",children:[(0,ke.jsx)("p",{children:t.fund?"Fund event":"Vs event"}),!t.fund&&(0,ke.jsx)("p",{children:t.players.length}),t.fund&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{children:Object.keys(t.fund.investors).length}),(0,ke.jsx)("p",{children:(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("span",{style:{color:t.fund.current===t.fund.target?"#04C300":"white"},children:t.fund.current.toFixed(2)}),(0,ke.jsx)("span",{style:{color:"white"},children:"/"}),(0,ke.jsx)("span",{children:t.fund.target+" BNB"})]})}),(0,ke.jsxs)("p",{children:[t.fund.prize," BNB"]})]}),(0,ke.jsx)("p",{children:Le(t.date)}),(0,ke.jsx)("p",{children:Me(t.date)}),(0,ke.jsx)("p",{style:{color:g},children:m})]})]})]}),"cancel"===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Cancel the event?"}),(0,ke.jsx)("p",{children:"This action cannot be undone. are you sure you want to delete the event?"}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>c(!1),children:"Back"}),(0,ke.jsx)("div",{className:"bolder",onClick:()=>{s(t._id),c(!1)},children:"Confirm"})]})]}),(0,ke.jsx)("div",{className:"screen blur",onClick:()=>c(!1)})]}),"end"===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"simple-popup",children:[t.fund&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h2",{children:"Review fund event"}),(0,ke.jsxs)("p",{children:["The creator won ",t.fund.won," BNB and Chose to share",(0,ke.jsxs)("span",{onClick:()=>window.open("https://bscscan.com/tx/".concat(t.fund.transactionHash),"_blank"),className:"main-color clickable underline",children:["  ",t.fund.won*t.fund.percent," BNB"]})," (",100*t.fund.percent,"%). You can also edit the distribution to his supporters here (leave blank to use the cretor's choice):"]}),(0,ke.jsxs)("div",{className:"percent-wrapper",children:[(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{children:"Prize:"}),(0,ke.jsx)("input",{type:"number",ref:p,className:"prize",placeholder:t.fund.won+" BNB"})]}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{children:"Share:"}),(0,ke.jsxs)("select",{ref:f,children:[(0,ke.jsxs)("option",{value:t.fund.percent,children:[100*t.fund.percent,"%"]},"900"),Dr.map((e=>(0,ke.jsxs)("option",{value:e,children:[(100*e).toFixed(0),"%"]},e)))]})]})]})]}),!t.fund&&(0,ke.jsxs)("div",{className:"wrapper",children:[(0,ke.jsx)("h2",{children:"Choose the winner"}),(0,ke.jsx)("select",{onChange:e=>{l(e.target.value)},className:"player-select",children:t.players.map(((e,t)=>(0,ke.jsx)("option",{value:t,children:e.nickName},t)))})]}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>c(!1),children:"Close"}),(0,ke.jsx)("div",{className:"bolder",onClick:()=>{t.fund?r(t._id,"fund",{won:p.current.value,percent:f.current.value}):r(t._id,"vs",t.players[d]),c(!1)},children:"Confirm"})]})]}),(0,ke.jsx)("div",{className:"screen blur",onClick:()=>c(!1)})]}),"share"===a&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Share with community"}),(0,ke.jsx)("p",{children:"The creator chose to not share the earnings from this event with his community. Share with community anyway?"}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>c(!1),children:"Close"}),(0,ke.jsx)("div",{className:"bolder",onClick:async()=>{try{await br.changeShare(t._id),h(!0),c(!1)}catch{o(Nn("errorServer"))}},children:"Share"})]})]}),(0,ke.jsx)("div",{className:"screen blur",onClick:()=>c(!1)})]})]})}function xr(){const e=Se(),[t,n]=(0,i.useState)(),[r,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{o()}),[]);const o=async()=>{try{const e=await br.getCurrentEvents();n(e)}catch{s(!0)}},a=async(t,n,i)=>{try{"fund"===n?await br.announceWinnerFund(t,i):await br.announceWinner(t,i.walletAddress);o()}catch{e(Nn("errorServer"))}},c=async t=>{try{await br.cancelEvent(t),await o()}catch{e(Nn("errorServer"))}};return r?(0,ke.jsx)(Fn,{}):t?(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"control-current",children:[(0,ke.jsxs)("p",{className:"list-count",children:["Current events : ",(0,ke.jsx)("span",{children:t.length})]}),(0,ke.jsx)("div",{className:"events-container",children:t.map((e=>(0,ke.jsx)(Pr,{ev:e,cancelEvent:c,endEvent:a,lala:console.log(e._id)},e._id)))})]})}):(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})}function Lr(e){let{ev:t,loadPayment:r}=e;const s=Se(),[o,a]=(0,i.useState)(!1);return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"current-card",children:[(0,ke.jsxs)("div",{className:"event-upper",children:[(0,ke.jsxs)("div",{className:"name-wrapper",children:[(0,ke.jsx)("img",{src:t.players[0].image}),(0,ke.jsx)("h3",{children:t.players[0].nickName})]}),(0,ke.jsxs)("div",{className:"options",children:[(t.shareWithCommunity||t.cancelled)&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("img",{src:n(6551),onClick:()=>{const e=t.payments.wallets;let n="[";e.forEach(((t,i)=>{n+=t,i!==e.length-1&&(n+=",")})),n+="]",navigator.clipboard.writeText(n),s(Nn("copied-list"))}}),(0,ke.jsx)("img",{src:n(3597),onClick:()=>{const e=t.payments.moneyWon;let n="[";e.forEach(((t,i)=>{n+=Number(t),i!==e.length-1&&(n+=",")})),n+="]",navigator.clipboard.writeText(n),s(Nn("copied-list"))}})]}),(0,ke.jsx)("img",{src:n(2117),onClick:()=>a(!0)})]})]}),(0,ke.jsxs)("div",{className:"event-inner",children:[(0,ke.jsx)("img",{src:n(671)("./".concat(t.game,".webp"))}),(0,ke.jsxs)("div",{className:"headers",children:[(0,ke.jsx)("p",{children:"Type: "}),(0,ke.jsx)("p",{children:"Game"}),(0,ke.jsx)("p",{children:"players: "}),(0,ke.jsx)("p",{children:"Ended at:"}),(0,ke.jsx)("p",{children:t.fund?"Shared:":"Winner:"})]}),(0,ke.jsxs)("div",{className:"details",children:[(0,ke.jsx)("p",{children:t.fund?"Fund event":"Vs event"}),(0,ke.jsx)("p",{children:t.game}),(0,ke.jsx)("p",{children:t.players.length}),(0,ke.jsx)("p",{children:Le(t.date)}),(0,ke.jsx)("p",{children:t.cancelled?"Cancelled":t.fund?t.fund.won*t.fund.percent+" BNB":t.winner.nickName})]})]})]}),o&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Confirm payment"}),(0,ke.jsx)("p",{children:"By clicking confirm, you approve that everyone who was destined to receive a payment received it. this action can't be undone."}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>a(!1),children:"Close"}),(0,ke.jsx)("div",{className:"bolder",onClick:()=>{(async()=>{try{await br.confirmPayment(t._id),r()}catch{s(Nn("errorServer"))}})(),a(!1)},children:"confirm"})]})]}),(0,ke.jsx)("div",{className:"screen blur",onClick:()=>a(!1)})]})]})}function Mr(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s()}),[]);const s=async()=>{try{const e=await br.getPaymentEvents();t(e)}catch{r(!0)}};if(n)return(0,ke.jsx)(Fn,{});if(!e)return(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]});try{return(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"control-current",children:[(0,ke.jsxs)("p",{className:"list-count",children:["awaiting payment : ",(0,ke.jsx)("span",{children:e.length})]}),(0,ke.jsx)("div",{className:"events-container",children:e.map((e=>(0,ke.jsx)(Lr,{ev:e,loadPayment:s},e._id)))})]})})}catch{return(0,ke.jsx)(Fn,{})}}function Ur(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(!1),[a,c]=(0,i.useState)(!0),d=(0,i.useRef)(null),l=(0,i.useRef)(!1);(0,i.useEffect)((()=>(window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h))),[]),(0,i.useEffect)((()=>{u(n)}),[n]);const u=async()=>{try{const i=await br.getHistory(n);t(e.concat(i)),i.length<10&&c(!1)}catch{o(!0)}},h=()=>{if(l.current)return;if(!d.current)return void window.removeEventListener("scroll",h);const e=d.current.getBoundingClientRect();e.top>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(l.current=!0,setTimeout((()=>{l.current=!1}),800),r((e=>e+10)))};if(s)return(0,ke.jsx)(Fn,{});try{return(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"control-current control-history",children:[(0,ke.jsxs)("p",{className:"list-count",children:["Events log : ",(0,ke.jsx)("span",{children:e.length})]}),e.length>0&&(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:"Creator"}),(0,ke.jsx)("td",{children:"Game"}),(0,ke.jsx)("td",{children:"Players"}),(0,ke.jsx)("td",{children:"Date"}),(0,ke.jsx)("td",{children:"Type"}),(0,ke.jsx)("td",{children:"Winner/Winnings"})]})}),(0,ke.jsx)("tbody",{style:{zIndex:"1001"},children:e.map(((e,t)=>{return(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:e.players[0].nickName}),(0,ke.jsx)("td",{children:e.game}),(0,ke.jsx)("td",{children:e.players.length}),(0,ke.jsx)("td",{children:xe(e.date)}),(0,ke.jsx)("td",{children:e.fund?"Fund event":"Vs event"}),(0,ke.jsx)("td",{children:(n=e,n.cancelled?"Cancelled":n.fund?n.fund.won+" (".concat(100*n.fund.percent,"%)"):n.winner.nickName)})]},t);var n}))})]}),a&&(0,ke.jsx)("div",{style:{margin:"auto",position:"relative"},children:(0,ke.jsxs)("div",{ref:d,className:"loader loader-block",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})]})})}catch{return(0,ke.jsx)(Fn,{})}}function jr(){const e=Se(),[t,n]=(0,i.useState)(null),[r,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null),c=(0,i.useRef)(null);(0,i.useEffect)((()=>{d()}),[]);const d=async()=>{try{const e=await br.getBanned();n(e)}catch{s(!0)}},l=async function(i){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const s=await br.unbanUser(i),o=t.filter((e=>e.phone!==i));n(o),e(Nn("banRemoved-"+s)),r&&(a(null),c.current.value="")}catch{e(Nn("errorServer"))}},u=async t=>{try{t.preventDefault();const e=await br.getByPhone(c.current.value);a(e)}catch{e(Nn("errorServer"))}};if(r)return(0,ke.jsx)(Fn,{});if(!t)return(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]});try{var h;return(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"control-current control-history",children:[(0,ke.jsxs)("p",{className:"list-count",children:["banned players : ",(0,ke.jsx)("span",{children:t.length})]}),(0,ke.jsxs)("form",{className:"creator-search",onSubmit:u,children:[(0,ke.jsx)("input",{type:"text",ref:c,placeholder:"Enter phone number"}),(0,ke.jsx)("button",{className:"search",children:(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"search"})})]}),!o&&(null===c||void 0===c||null===(h=c.current)||void 0===h?void 0:h.value)&&(0,ke.jsx)("p",{className:"not-found",style:{marginLeft:"10px"},children:"No player found"}),o&&(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:"Name"}),(0,ke.jsx)("td",{children:"Phone"}),(0,ke.jsx)("td",{children:"Address"}),(0,ke.jsx)("td",{children:"Joined since"}),(0,ke.jsx)("td",{children:"Actions"})]})}),(0,ke.jsx)("tbody",{style:{zIndex:"1001"},children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:o.nickName}),(0,ke.jsx)("td",{children:o.phone}),(0,ke.jsx)("td",{children:o.walletAddress}),(0,ke.jsx)("td",{children:xe(o.createdAt)}),(0,ke.jsxs)("td",{children:[o.banned&&(0,ke.jsx)("div",{className:"remove-ban",onClick:()=>l(o.phone,!0),children:"Remove ban"}),!o.banned&&(0,ke.jsx)("div",{className:"remove-ban",onClick:()=>(async i=>{try{const r=await br.banUser(i);e(Nn("banned-"+r)),a(null),c.current.value="";const s=[...t,o];n(s)}catch{e(Nn("errorServer"))}})(o.phone),children:"Ban"})]})]})})]}),t.length>0&&(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:"Name"}),(0,ke.jsx)("td",{children:"Phone"}),(0,ke.jsx)("td",{children:"Address"}),(0,ke.jsx)("td",{children:"Joined since"}),(0,ke.jsx)("td",{children:"Actions"})]})}),(0,ke.jsx)("tbody",{style:{zIndex:"1001"},children:t.map(((e,t)=>(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:e.nickName}),(0,ke.jsx)("td",{children:e.phone}),(0,ke.jsx)("td",{children:e.walletAddress}),(0,ke.jsx)("td",{children:xe(e.createdAt)}),(0,ke.jsx)("td",{children:(0,ke.jsx)("div",{className:"remove-ban",onClick:()=>l(e.phone),children:"Remove ban"})})]},t)))})]})]})})}catch(bp){return console.log(bp),(0,ke.jsx)(Fn,{})}}function Vr(){const e=Se(),t=B(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(""),[c,d]=(0,i.useState)(0),[l,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!0),f=(0,i.useRef)(null),m=(0,i.useRef)(!1);(0,i.useEffect)((()=>(window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E))),[]),(0,i.useEffect)((()=>{g(c)}),[c]);const g=async()=>{try{const e=await br.getShows(c);s(r.concat(e)),e.length<10&&p(!1)}catch{u(!0)}},E=()=>{if(m.current)return;if(!f.current)return void window.removeEventListener("scroll",E);const e=f.current.getBoundingClientRect();e.top>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(m.current=!0,setTimeout((()=>{m.current=!1}),800),d((e=>e+10)))},_=e=>{switch(e){case"waiting":default:return(0,ke.jsx)("td",{style:{color:"yellow"},children:"Pending..."});case"approved":return(0,ke.jsx)("td",{style:{color:"green"},children:"Approved"});case"cancelled":return(0,ke.jsx)("td",{style:{color:"red"},children:"Cancelled"});case"ended":return(0,ke.jsx)("td",{style:{color:"blue"},children:"Ended"})}},v=e=>{const{name:t,className:n}=e.target;"accept"===n&&(async e=>{try{const t=await br.acceptShow(e);s(r.map((n=>n._id===e?t:n)))}catch{Nn("errorServer")}})(t),"reject"===n&&(async e=>{try{await br.rejectShow(e),s(r.filter((t=>t._id!==e)))}catch{Nn("errorServer")}})(t),"cancel"===n&&a(t),"share"===n&&S(t),"button-stream"===n&&y(t)},y=async n=>{try{const i=r.find((e=>e._id===n));e(In(i)),t("/stream-control")}catch{e(Nn("errorLoadEvent"))}},S=t=>{navigator.clipboard.writeText("".concat("shows.pikme.tv","/#/show/").concat(t)),e(Nn("copied"))};if(l)return(0,ke.jsx)(Fn,{});try{return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"control-current control-history",children:[(0,ke.jsxs)("p",{className:"list-count",children:["Shows log : ",(0,ke.jsx)("span",{children:r.length})]}),r.length>0&&(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:"Performer"}),(0,ke.jsx)("td",{children:"Title"}),(0,ke.jsx)("td",{children:"Date"}),(0,ke.jsx)("td",{children:"Tickets"}),(0,ke.jsx)("td",{children:"Status"}),(0,ke.jsx)("td",{children:"Actions"})]})}),(0,ke.jsx)("tbody",{style:{zIndex:"1001"},onClick:v,children:r.map(((e,t)=>(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:e.performerName}),(0,ke.jsx)("td",{children:e.title}),(0,ke.jsx)("td",{children:xe(e.date)}),(0,ke.jsx)("td",{children:e.viewersCount}),_(e.status),(0,ke.jsxs)("td",{className:"actions",children:["waiting"===e.status&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("button",{name:e._id,className:"reject",children:"Reject"}),(0,ke.jsx)("button",{className:"accept",name:e._id,children:"Accept"})]}),"approved"===e.status&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("button",{className:"cancel",name:e._id,children:"Cancel"}),(0,ke.jsx)("button",{className:"share",name:e._id,children:"Share"}),(0,ke.jsx)("button",{className:"button-stream",name:e._id,children:"stream"})]})]})]},t)))})]}),h&&(0,ke.jsx)("div",{style:{margin:"auto",position:"relative"},children:(0,ke.jsxs)("div",{ref:f,className:"loader loader-block",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})]}),o&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"simple-popup",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Cancel show?"}),(0,ke.jsx)("p",{children:"By clicking confirm, the show will be cancelled and buyers will have to get a refund, are you sure you want to cancel?"}),(0,ke.jsxs)("div",{className:"buttons-wrapper",children:[(0,ke.jsx)("div",{className:"lighter",onClick:()=>a(!1),children:"No"}),(0,ke.jsx)("div",{className:"bolder",onClick:()=>{(async e=>{try{await br.cancelShow(e),s(r.map((t=>t._id===e?{...t,status:"approved"}:t)))}catch{Nn("errorServer")}})(o),a(!1)},children:"confirm"})]})]}),(0,ke.jsx)("div",{className:"screen blur",onClick:()=>a(!1)})]})]})}catch{return(0,ke.jsx)(Fn,{})}}function Fr(){const e=Se(),t=B(),r=he((e=>e.user)),s=(0,i.useRef)(),o=(0,i.useRef)(),a=(0,i.useRef)(),c=(0,i.useRef)(),d=(0,i.useRef)(),l=(0,i.useRef)(),[u,h]=(0,i.useState)(new Date),p=(0,i.useRef)(),f=(0,i.useRef)(),[m,g]=(0,i.useState)({img:"",video:""});(0,i.useEffect)((()=>{window.scrollTo(0,0),r.creator.banned&&t("/ban")}),[]);const E=e=>new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=new Audio(i.result);e.onloadedmetadata=()=>t(e.duration)},i.readAsDataURL(e),i.onerror=e=>n(e)})),_=e=>{const{files:t,name:n}=e.target;g({...m,[n]:t[0]?t[0].name:""})};return(0,ke.jsxs)("form",{className:"create",onSubmit:async t=>{t.preventDefault();try{if(new Date>new Date(u))return void e(Nn("date"));const t=new FormData;if(e(Rn("upload-event")),!p.current.files[0])return e(Nn("imgRequired")),void e(Rn(""));if(l.current.value<1||l.current.value>1e3)return e(Nn("price")),void e(Rn(""));let n="",i="",h=f.current?f.current.files[0]:null;if(h){if(h.size>5e8)return e(Nn("video-size")),void e(Rn(""));if(await E(h)>61)return e(Nn("video-length")),void e(Rn(""));if(h.size<15e6){const e=await Oe(h);n=e.url,i=e.public_id}else t.append("file",h)}const m=u.toUTCString(),{url:g}=await Oe(p.current.files[0]),_={date:m,video:n,videoId:i,title:d.current.value,description:o.current.value,longDescription:a.current.value,performerName:s.current.value,link:c.current.value,img:g,price:l.current.value};t.append("playerAddress",r.creator.walletAddress),t.append("show",JSON.stringify(_));const v=await Ae.addEvent(t,!0);console.log(v),e(Rn("created-show"))}catch(bp){console.log(bp),e(Nn("errorCreate")),e(Rn(""))}},children:[(0,ke.jsxs)("div",{children:[(0,ke.jsxs)("div",{className:"all-select-wrapper",children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Performer name"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(1485)}),(0,ke.jsx)("input",{required:!0,maxLength:15,ref:s,className:"performer"})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Ticket price"}),(0,ke.jsx)("div",{className:"select-wrapper",style:{minHeight:"43px"},children:(0,ke.jsx)("input",{type:"number",className:"performer",required:!0,ref:l,style:{width:"280px"},placeholder:"\u20aa"})})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Date"}),(0,ke.jsxs)("div",{className:"select-wrapper",style:{minHeight:"43px"},children:[(0,ke.jsx)("img",{src:n(451)}),(0,ke.jsx)("input",{type:"datetime-local",className:"date-special",onChange:t=>{const{value:n}=t.target,i=new Date(n);new Date(Date.now())>new Date(i)?e(Nn("date")):h(i)},required:!0})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Performer image"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("input",{id:"img",name:"img",className:"non-appear",type:"file",placeholder:"Upload your image",accept:"image/*",ref:p,onChange:_}),(0,ke.jsx)("label",{htmlFor:"img",className:"clickable performer upload-video",style:{textAlign:"center",display:"block",fontSize:"24px",width:"280px"},children:m.img?(0,ke.jsx)("span",{children:m.img.slice(0,12)+"..."}):(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"drive_folder_upload"})})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"event title"}),(0,ke.jsx)("input",{maxLength:50,required:!0,ref:d,className:"link"})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"short description"}),(0,ke.jsx)("textarea",{maxLength:220,required:!0,className:"fund-desc",placeholder:"Tell us more about the event...",ref:o})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Long description (optional)"}),(0,ke.jsx)("textarea",{maxLength:1200,className:"fund-desc",placeholder:"add more details if any...",ref:a})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Link (optional)"}),(0,ke.jsx)("input",{className:"link",placeholder:"Link to competiton page",ref:c,maxLength:100})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Teaser video (optional, up to 1 minute)"}),(0,ke.jsx)("input",{id:"vid",name:"video",className:"non-appear",type:"file",placeholder:"Upload your video",accept:"video/mp4,video/x-m4v,video/*",ref:f,onChange:_}),(0,ke.jsx)("label",{htmlFor:"vid",className:"link clickable",style:{width:"100%",textAlign:"center",display:"block"},children:m.video?(0,ke.jsx)("span",{children:m.video.slice(0,24)+"..."}):(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"drive_folder_upload"})})]})]}),(0,ke.jsx)("button",{children:"Create!"})]})}function Br(e){let{show:t,removeShowFromList:n}=e;const i=Se(),r=B(),s=async()=>{try{i(In(t)),r("/stream-control")}catch{i(Nn("errorLoadEvent"))}},o=e=>{const t=new Date(e);return"".concat(t.getDate()," ").concat(["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][+e.slice(5,7)-1]," ").concat(t.getFullYear(),", ").concat(Me(e))},a=()=>{navigator.clipboard.writeText("".concat("shows.pikme.tv","/#/show/").concat(t._id)),i(Nn("copied"))};try{return(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"current-card",children:[(0,ke.jsxs)("div",{className:"event-upper",children:[(0,ke.jsxs)("div",{className:"name-wrapper",children:[(0,ke.jsx)("img",{src:t.img}),(0,ke.jsx)("h3",{children:t.performerName})]}),(0,ke.jsxs)("div",{className:"options",children:[("cancelled"===t.status||"ended"===t.status)&&(0,ke.jsx)("p",{onClick:()=>(async()=>{try{await br.removeMyShow(t._id),n(t._id)}catch{i(Nn("errorServer"))}})(),children:"Remove"}),"approved"===t.status&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("p",{onClick:s,children:"Stream"}),(0,ke.jsx)("p",{onClick:a,children:"Share"})]})]})]}),(0,ke.jsxs)("div",{className:"event-inner",children:[(0,ke.jsxs)("div",{className:"headers",children:[(0,ke.jsx)("p",{children:"Title:"}),(0,ke.jsx)("p",{children:"Date"}),(0,ke.jsx)("p",{children:"Tickets:"}),(0,ke.jsx)("p",{children:"Status:"})]}),(0,ke.jsxs)("div",{className:"details",children:[(0,ke.jsx)("p",{children:t.title}),(0,ke.jsx)("p",{children:o(t.date)}),(0,ke.jsx)("p",{children:t.viewersCount}),"cancelled"===t.status?(0,ke.jsx)("p",{style:{color:"red"},children:"Cancelled"}):"ended"===t.status?(0,ke.jsx)("p",{style:{color:"red"},children:"Ended"}):"approved"===t.status?(0,ke.jsx)("p",{style:{color:"green"},children:"Approved"}):(0,ke.jsx)("p",{style:{color:"yellow"},children:"Waiting..."})]})]})]})})}catch(bp){return console.log(bp),(0,ke.jsx)(ke.Fragment,{})}}function Wr(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s()}),[]);const s=async()=>{try{const e=await br.getMyShows();t(e)}catch{r(!0)}},o=n=>{t(e.filter((e=>e._id!==n)))};if(n)return(0,ke.jsx)(Fn,{});if(!e)return(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]});try{return(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"control-current",children:[(0,ke.jsxs)("p",{className:"list-count",children:["awaiting shows : ",(0,ke.jsx)("span",{children:e.length})]}),(0,ke.jsx)("div",{className:"events-container",children:e.map((e=>(0,ke.jsx)(Br,{show:e,removeShowFromList:o},e._id)))})]})})}catch(bp){return console.log(bp),(0,ke.jsx)(Fn,{})}}function Gr(){const e=B(),[t,n]=(0,i.useState)("Create Show"),r=he((e=>e.user)),[s,o]=(0,i.useState)("loading");(0,i.useEffect)((()=>{a(),window.scrollTo(0,0)}),[]);const a=async()=>{try{const e=await br.authorize(r.creator._id);o(e||!1)}catch{o(!1)}};if("loading"===s)return(0,ke.jsx)("div",{className:"home",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})});if(!s)return e("/"),(0,ke.jsx)("h1",{children:"Unauthorized"});try{return(0,ke.jsxs)("section",{className:"control",children:[(0,ke.jsx)("div",{className:"control-banner",children:(0,ke.jsxs)("h1",{children:["Welcome ",r.creator.nickName]})}),(0,ke.jsx)("div",{className:"options-bar",children:s.map((e=>(0,ke.jsx)("p",{className:e===t?"chosen":"",onClick:()=>n(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),"waiting"===t&&(0,ke.jsx)(kr,{}),"upcoming"===t&&(0,ke.jsx)(xr,{}),"payment"===t&&(0,ke.jsx)(Mr,{}),"history"===t&&(0,ke.jsx)(Ur,{}),"banned"===t&&(0,ke.jsx)(jr,{}),"Shows"===t&&(0,ke.jsx)(Vr,{}),"Create Show"===t&&(0,ke.jsx)(Fr,{}),"My shows"===t&&(0,ke.jsx)(Wr,{})]})}catch{return(0,ke.jsx)(Fn,{})}}function Hr(){const e=Se(),t=B(),r=he((e=>e.user)),[s,o]=(0,i.useState)({category:"sports",game:"table-tennis"}),[a,c]=(0,i.useState)(""),[d,l]=(0,i.useState)(""),[u,h]=(0,i.useState)("sports"),[p,f]=(0,i.useState)("vs"),m=(0,i.useRef)(),g=(0,i.useRef)(),[E,_]=(0,i.useState)("table-tennis"),[v,y]=(0,i.useState)(new Date),S={img:(0,i.useRef)(),video:(0,i.useRef)()},[b,T]=(0,i.useState)({img:"",video:""});(0,i.useEffect)((()=>{window.scrollTo(0,0),r.creator.banned&&t("/ban")}),[]);const C=e=>new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=new Audio(i.result);e.onloadedmetadata=()=>t(e.duration)},i.readAsDataURL(e),i.onerror=e=>n(e)})),A=t=>{const{name:n,value:i}=t.target;return""===i?"prize"===n?c(""):l(""):i<1?e(Nn("min1")):i>1e6?e(Nn("max1m")):(100*i%100).toString().includes(".")?e(Nn("decimals")):void("prize"===n?c(i):l(i))};return(0,ke.jsxs)("form",{className:"create",onSubmit:async t=>{t.preventDefault();try{if(new Date>new Date(v))return void e(Nn("date"));const t=new FormData;e(Rn("upload-event"));const n=v.toUTCString();let i,s="",o="",c=S.video.current?S.video.current.files[0]:null;if(c){if(c.size>5e8)return e(Nn("video-size")),void e(Rn(""));if(await C(c)>61)return e(Nn("video-length")),void e(Rn(""));if(c.size<15e6){const e=await Oe(c);s=e.url,o=e.public_id}else t.append("file",c)}i={category:"sports",game:E,date:n,shareWithCommunity:!1,player:r.creator,video:s,videoId:o},"fund"===p&&(i.fund={description:m.current.value,prize:a,target:d,link:g.current.value,current:0,investors:{}}),t.append("playerAddress",r.creator.walletAddress),t.append("event",JSON.stringify(i));const{_id:l,game:u}=await Ae.addEvent(t);e(Rn("vs"===p?l+"/"+r.creator.nickName+"*"+u:"created"))}catch(bp){console.log(bp),e(Nn("errorCreate")),e(Rn(""))}},children:[(0,ke.jsxs)("div",{children:[(0,ke.jsx)("div",{className:"create-upper",children:(0,ke.jsx)("h1",{children:"Create New Event"})}),(0,ke.jsxs)("div",{className:"create-type",children:[(0,ke.jsx)("p",{className:"vs"===p?"active":"inactive",onClick:()=>f("vs"),children:"VS"}),(0,ke.jsx)("p",{className:"fund"===p?"active":"inactive",onClick:()=>f("fund"),children:"Funding"})]}),(0,ke.jsxs)("div",{className:"all-select-wrapper",children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(s.game,".webp"))}),(0,ke.jsx)("select",{onChange:e=>{const{name:t,value:n}=e.target;"category"===t?(h(n),o("gaming"===n?{category:"gaming",game:"valorant"}:{category:"sports",game:"table-tennis"})):(_(n),o({...s,[t]:n}))},name:"game",required:!0,children:xn.map((e=>(0,ke.jsx)("option",{value:e.game,children:e.display},e.game)))})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Date"}),(0,ke.jsxs)("div",{className:"select-wrapper",style:{minHeight:"43px"},children:[(0,ke.jsx)("img",{src:n(451)}),(0,ke.jsx)("input",{type:"datetime-local",className:"date-special",onChange:t=>{const{value:n}=t.target,i=new Date(n);new Date(Date.now())>new Date(i)?e(Nn("date")):y(i)},required:!0})]})]}),"fund"===p&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Target"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(5810)}),(0,ke.jsx)("input",{className:"date-special",placeholder:"100 BNB",type:"number",value:d,name:"target",onChange:A,required:!0})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Prize"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(2724)}),(0,ke.jsx)("input",{placeholder:"1,000 BNB",className:"date-special",type:"number",value:a,name:"prize",onChange:A,required:!0})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Description"}),(0,ke.jsx)("textarea",{maxLength:220,required:!0,className:"fund-desc",placeholder:"Tell us more about the event...",ref:m})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Link (optional)"}),(0,ke.jsx)("input",{className:"link",placeholder:"Link to competiton page",ref:g,maxLength:100})]})]})]})]}),(0,ke.jsx)("button",{children:"Create!"})]})}function Kr(){const e=Se(),t=B(),r=he((e=>e.generalModule.popupEvent));let s=new Date(r.date);s=s.getFullYear()+"-"+(s.getMonth()+1).toString().padStart(2,"0")+"-"+s.getDate()+"T"+s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0");const[o,a]=(0,i.useState)({category:r.category,game:r.game,date:s}),[c,d]=(0,i.useState)(r.fund?{description:r.fund.description,prize:r.fund.prize,target:r.fund.target,link:r.fund.link,investors:{},current:0}:null),[l,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)({category:o.category,game:o.game}),[f,m]=(0,i.useState)(o.category);(0,i.useEffect)((()=>{window.scrollTo(0,0)}),[]);const g=e=>{const{name:t,value:n}=e.target;"category"===t?(m(n),p("gaming"===n?{category:"gaming",game:"valorant"}:{category:"sports",game:"table-tennis"})):p({...h,[t]:n})},E=e=>{const{name:t,value:n}=e.target;a({...o,[t]:n})},_=t=>{const{name:n,value:i}=t.target;if("target"===n||"prize"===n){if(i>1e6)return e(Nn("max1m"));if((100*i%100).toString().includes("."))return e(Nn("decimals"))}d({...c,[n]:i})};return l?(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]}):(0,ke.jsxs)("form",{className:"create",onSubmit:async n=>{if(n.preventDefault(),c&&c.description.length<20)e(Nn("desc"));else try{u(!0);await Un.editEvent(r._id,r.fund?{...o,fund:c}:o)&&(e(Nn("edited")),t("/"))}catch{console.log("error")}},children:[(0,ke.jsx)("div",{className:"create-upper",children:(0,ke.jsx)("h1",{children:"Edit your stream"})}),!r.fund&&(0,ke.jsxs)("div",{className:"all-select-wrapper",children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Category"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(5070)("./".concat(h.category,".png"))}),(0,ke.jsxs)("select",{disabled:!0,onChange:e=>{g(e),E(e)},name:"category",value:o.category,children:[(0,ke.jsx)("option",{value:"sports",children:"Sports"}),(0,ke.jsx)("option",{value:"gaming",children:"Gaming"})]})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(h.game,".webp"))}),(0,ke.jsx)("select",{onChange:e=>{g(e),E(e)},name:"game",required:!0,value:o.game,children:"gaming"===f?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("option",{value:"valorant",children:"Valorant"}),(0,ke.jsx)("option",{value:"fifa",children:"Fifa"})]}):(0,ke.jsx)(ke.Fragment,{children:xn.map((e=>(0,ke.jsx)("option",{value:e.game,children:e.display},e.game)))})})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper date",children:[(0,ke.jsx)("h3",{children:"Date"}),(0,ke.jsx)("div",{className:"select-wrapper",style:{minHeight:"43px"},children:(0,ke.jsx)("input",{type:"datetime-local",name:"date",required:!0,onChange:E,value:o.date})})]})]}),r.fund&&(0,ke.jsxs)("div",{className:"all-select-wrapper",children:[(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Game"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(7269)("./".concat(h.game,".webp"))}),(0,ke.jsx)("select",{onChange:e=>{g(e),E(e)},name:"game",required:!0,value:o.game,children:"gaming"===f?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("option",{value:"valorant",children:"Valorant"}),(0,ke.jsx)("option",{value:"fifa",children:"Fifa"})]}):(0,ke.jsx)(ke.Fragment,{children:xn.map((e=>(0,ke.jsx)("option",{value:e.game,children:e.display})))})})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Date"}),(0,ke.jsxs)("div",{className:"select-wrapper",style:{minHeight:"43px"},children:[(0,ke.jsx)("img",{src:n(451)}),(0,ke.jsx)("input",{type:"datetime-local",onChange:E,name:"date",className:"date-special",value:o.date,required:!0})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Target"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(5810)}),(0,ke.jsx)("input",{name:"target",onChange:_,className:"date-special",placeholder:"100 BNB",type:"number",value:c.target,required:!0})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",children:[(0,ke.jsx)("h3",{children:"Prize"}),(0,ke.jsxs)("div",{className:"select-wrapper",children:[(0,ke.jsx)("img",{src:n(2724)}),(0,ke.jsx)("input",{name:"prize",onChange:_,placeholder:"1000BNB",className:"date-special",type:"number",value:c.prize,required:!0})]})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Description"}),(0,ke.jsx)("textarea",{maxLength:220,name:"description",onChange:_,className:"fund-desc",placeholder:"Tell us about the competition...",value:c.description})]}),(0,ke.jsxs)("div",{className:"h3-wrapper",style:{width:"100%"},children:[(0,ke.jsx)("h3",{children:"Link (optional)"}),(0,ke.jsx)("input",{className:"link",placeholder:"Link to competiton page",name:"link",value:c.link,onChange:_})]})]}),(0,ke.jsx)("div",{className:"center",children:(0,ke.jsx)("button",{children:"Confirm"})})]})}function zr(){return(0,ke.jsxs)("div",{className:"error",children:[(0,ke.jsx)("img",{src:n(6561)}),(0,ke.jsx)("h1",{children:"Your account is banned."}),(0,ke.jsxs)("p",{children:["contact our support team ",(0,ke.jsx)("span",{onClick:()=>window.gist.chat("open"),children:"here"}),"."]})]})}function Yr(){const e=Se(),t=B(),{link:n}=W(),{linkId:r}=he((e=>e.generalModule));return(0,i.useEffect)((()=>{!async function(){try{if(r)return void t("/");const i="https://server.pikme.tv/handle-creator/update-link-clicked/"+n;await fetch(i)&&e(function(e){return t=>{t({type:"SET_LINK_ID",linkId:e})}}(n)),t("/")}catch(bp){console.log(bp),t("/")}}()}),[]),(0,ke.jsx)("div",{className:"home",children:(0,ke.jsx)("div",{className:"home",children:(0,ke.jsxs)("div",{className:"loader",children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})})})}function qr(){const e=Se(),t=B(),r=F(),s=he((e=>e.user)),o=s.creator&&[972528087084,972509620963,972503843964,972524041163].includes(s.creator.phone),[a,c]=(0,i.useState)(!1),{registerPhase:d}=he((e=>e.tutorialModule));let l=window.innerWidth<930;const u=n=>{r.pathname.includes("stream-control")?e(Rn(n)):t(n)};return(0,ke.jsxs)(ke.Fragment,{children:[!l&&(0,ke.jsxs)("div",{className:"header noselect",style:{zIndex:2===d?"1001":"100"},children:[(0,ke.jsxs)("div",{className:"options-bar",children:[(0,ke.jsx)("span",{className:"material-symbols-outlined menu-icon clickable hover-main",onClick:()=>e((e=>{e({type:"TOGGLE_MENU"})})),children:"menu"}),(0,ke.jsx)("div",{onClick:()=>u("/profile"),children:s.creator?(0,ke.jsx)("img",{className:"header-user-img",src:s.creator.image}):(0,ke.jsxs)("svg",{width:"30",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"clickable hover-main-svg",children:[(0,ke.jsxs)("g",{clipPath:"url(#clip0_424_10288)",children:[(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.9136 14.5457C27.9136 16.4745 27.1474 18.3244 25.7835 19.6883C24.4196 21.0522 22.5697 21.8184 20.6409 21.8184C18.712 21.8184 16.8622 21.0522 15.4983 19.6883C14.1344 18.3244 13.3681 16.4745 13.3681 14.5457C13.3681 12.6168 14.1344 10.767 15.4983 9.40308C16.8622 8.03918 18.712 7.27295 20.6409 7.27295C22.5697 7.27295 24.4196 8.03918 25.7835 9.40308C27.1474 10.767 27.9136 12.6168 27.9136 14.5457ZM24.2772 14.5457C24.2772 15.5101 23.8941 16.435 23.2122 17.117C22.5302 17.7989 21.6053 18.182 20.6409 18.182C19.6764 18.182 18.7515 17.7989 18.0696 17.117C17.3876 16.435 17.0045 15.5101 17.0045 14.5457C17.0045 13.5813 17.3876 12.6563 18.0696 11.9744C18.7515 11.2924 19.6764 10.9093 20.6409 10.9093C21.6053 10.9093 22.5302 11.2924 23.2122 11.9744C23.8941 12.6563 24.2772 13.5813 24.2772 14.5457Z",fill:"white",fillOpacity:"0.9"}),(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.6409 0C9.59542 0 0.640869 8.95455 0.640869 20C0.640869 31.0455 9.59542 40 20.6409 40C31.6863 40 40.6409 31.0455 40.6409 20C40.6409 8.95455 31.6863 0 20.6409 0ZM4.27723 20C4.27723 23.8 5.5736 27.2982 7.74632 30.0764C9.2722 28.0725 11.2407 26.4486 13.498 25.3315C15.7554 24.2143 18.2404 23.6342 20.7591 23.6364C23.2451 23.634 25.6989 24.1991 27.9335 25.2887C30.168 26.3783 32.1244 27.9635 33.6536 29.9236C35.229 27.8575 36.2897 25.4458 36.748 22.8883C37.2062 20.3308 37.0489 17.701 36.289 15.2163C35.5292 12.7317 34.1885 10.4637 32.3781 8.60007C30.5677 6.73641 28.3395 5.33065 25.8779 4.49911C23.4163 3.66756 20.7921 3.43413 18.2224 3.81813C15.6527 4.20214 13.2114 5.19253 11.1004 6.70737C8.9895 8.22221 7.26962 10.2179 6.0831 12.5294C4.89659 14.8409 4.27756 17.4018 4.27723 20ZM20.6409 36.3636C16.8844 36.3693 13.2414 35.077 10.3281 32.7055C11.5007 31.0268 13.0615 29.6562 14.8776 28.7103C16.6937 27.7645 18.7114 27.2713 20.7591 27.2727C22.7812 27.2711 24.7745 27.752 26.5735 28.6753C28.3724 29.5987 29.9252 30.9379 31.1027 32.5818C28.1669 35.0304 24.4637 36.369 20.6409 36.3636Z",fill:"white",fillOpacity:"0.9"})]}),(0,ke.jsx)("defs",{children:(0,ke.jsx)("clipPath",{id:"clip0_424_10288",children:(0,ke.jsx)("rect",{width:"40",height:"40",fill:"white",transform:"translate(0.640869)"})})})]})}),o&&(0,ke.jsx)("img",{className:"admin",src:n(7773),onClick:()=>u("/admin")})]}),(0,ke.jsx)("img",{onClick:()=>{u("/")},className:"logo clickable",src:n(367)}),(0,ke.jsxs)("div",{className:"options-bar",style:{visibility:s.creator?"visible":"hidden"},children:[(0,ke.jsx)("div",{onClick:()=>u("/join"),className:"join-button clickable",children:"Join"}),(0,ke.jsx)("div",{onClick:()=>u("/create"),className:"create-button",children:"Create"})]})]}),l&&!r.pathname.includes("stream-control")&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"header",style:{zIndex:2===d?"1001":"5"},children:[o&&(0,ke.jsx)("img",{className:"admin",src:n(7773),onClick:()=>u("/admin")}),(0,ke.jsx)(te,{to:"/",children:(0,ke.jsx)("img",{className:"logo",src:n(367)})}),(0,ke.jsx)("span",{className:"material-symbols-outlined menu-icon clickable hover-main",onClick:()=>e((e=>{e({type:"TOGGLE_MENU"})})),children:"menu"})]}),(0,ke.jsxs)("nav",{className:"footer-mobile",style:{zIndex:2===d?"1001":"1"},children:[(0,ke.jsx)(te,{to:"/profile",children:(0,ke.jsx)("img",{className:"user-img circle",src:s.creator?s.creator.image:n(9433)})}),s&&s.creator&&(0,ke.jsx)("img",{src:n(6157),onClick:()=>c(!a)}),(0,ke.jsx)(te,{to:"/",children:(0,ke.jsx)("img",{src:n(6923)})}),a&&(0,ke.jsxs)("div",{className:"create-menu",children:[(0,ke.jsx)("div",{onClick:()=>{c(!1),t("/create")},children:"Create new event"}),(0,ke.jsx)(te,{to:"/join",onClick:()=>c(!1),children:(0,ke.jsx)("div",{children:"Join event"})})]})]})]})]})}const Jr={_origin:"https://api.emailjs.com"},Qr=(e,t,n)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class Xr{constructor(e){this.status=e.status,this.text=e.responseText}}const Zr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((i,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",(e=>{let{target:t}=e;const n=new Xr(t);200===n.status||"OK"===n.text?i(n):r(n)})),s.addEventListener("error",(e=>{let{target:t}=e;r(new Xr(t))})),s.open("POST",Jr._origin+e,!0),Object.keys(n).forEach((e=>{s.setRequestHeader(e,n[e])})),s.send(t)}))},$r={init:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";Jr._userID=e,Jr._origin=t},send:(e,t,n,i)=>{const r=i||Jr._userID;Qr(r,e,t);const s={lib_version:"3.2.0",user_id:r,service_id:e,template_id:t,template_params:n};return Zr("/api/v1.0/email/send",JSON.stringify(s),{"Content-type":"application/json"})},sendForm:(e,t,n,i)=>{const r=i||Jr._userID,s=(e=>{let t;if(t="string"===typeof e?document.querySelector(e):e,!t||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t})(n);Qr(r,e,t);const o=new FormData(s);return o.append("lib_version","3.2.0"),o.append("service_id",e),o.append("template_id",t),o.append("user_id",r),Zr("/api/v1.0/email/send-form",o)}};function es(){const e=B(),t=F(),i=Se();return t.pathname.includes("stream-control")?(0,ke.jsx)(ke.Fragment,{}):(0,ke.jsxs)("div",{className:"footer-wrapper",children:[(0,ke.jsxs)("section",{className:"footer",children:[(0,ke.jsxs)("section",{className:"email",children:[(0,ke.jsx)("h3",{children:"don't miss the show"}),(0,ke.jsx)("p",{children:"Join our mailing list to get reminders for your events, and notificitions for new Events that you like."}),(0,ke.jsxs)("form",{onSubmit:e=>{e.preventDefault(),$r.sendForm("service_6o4hbxh","template_wcfvzf6",e.target,"72RBm-BgL2a--9Gky").then((()=>{console.log("sent")}),(e=>{console.log("FAILED...",e)}))},children:[(0,ke.jsx)("input",{name:"user_email",type:"email",placeholder:"Enter your email"}),(0,ke.jsx)("button",{children:"Sign Up"})]})]}),(0,ke.jsxs)("section",{className:"contact",children:[(0,ke.jsx)("h3",{children:"join PIKME.TV community"}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("a",{href:"https://www.instagram.com/pikme.tv/",target:"_blank",children:(0,ke.jsx)("img",{src:n(1666)})}),(0,ke.jsx)("a",{href:"https://twitter.com/PikmeTv",target:"_blank",children:(0,ke.jsx)("img",{src:n(6772)})}),(0,ke.jsx)("a",{href:"https://www.tiktok.com/@pikme.tv?lang=he-IL",target:"_blank",children:(0,ke.jsx)("img",{src:n(5773)})})]})]}),(0,ke.jsxs)("section",{className:"account",children:[(0,ke.jsxs)("div",{className:"my-account",children:[(0,ke.jsx)("h3",{children:"my account"}),(0,ke.jsx)("p",{onClick:()=>e("/profile"),children:"Profile"}),(0,ke.jsx)("p",{onClick:()=>e("/"),children:"my events"}),(0,ke.jsx)("p",{onClick:()=>e("/create"),children:"create event"})]}),(0,ke.jsxs)("div",{className:"support",children:[(0,ke.jsx)("h3",{children:"support"}),(0,ke.jsx)("p",{onClick:()=>window.open("https://homeric-games.gitbook.io/cvc/","_blank").focus(),children:"learn"}),(0,ke.jsx)("p",{onClick:()=>i(wn("help")),children:"help"}),(0,ke.jsx)("p",{onClick:()=>i(wn("feedback")),children:"feedback"})]})]})]}),(0,ke.jsxs)("section",{className:"footer-bottom",children:[(0,ke.jsx)("p",{onClick:()=>window.open("https://homericentertainment.com/","_blank").focus(),children:"\xae2022 Homeric entertainment"}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{onClick:()=>window.open("https://www.privacypolicyonline.com/live.php?token=J4MpfGXa6se1Ak9047TKVsyJzqtXRHjD","_blank").focus(),children:"privacy policy"}),(0,ke.jsx)("p",{onClick:()=>window.open("https://www.privacypolicyonline.com/live.php?token=BSvr42ubTJcEKnEu7WdkM3qMJ7Dozlla","_blank").focus(),children:"terms of service"})]})]})]})}function ts(){const e=Se(),t=(0,i.useRef)(),n=(0,i.useRef)(),r=(0,i.useRef)(),s=(0,i.useRef)(),{menu:o}=he((e=>e.generalModule)),a=he((e=>e.user)),c=window.innerWidth<700;(0,i.useEffect)((()=>(document.body.style.overflowY=o&&c?"hidden":"auto",()=>document.body.style.overflowY="auto")),[o]);return""===o?(0,ke.jsx)(ke.Fragment,{}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen",onClick:()=>e(wn(""))}),(0,ke.jsxs)("section",{className:"menu noselect",children:["normal"===o&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"hover-main",onClick:()=>e(wn("help")),children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"help"})," ",(0,ke.jsx)("div",{children:"Help"})]}),(0,ke.jsxs)("div",{className:"hover-main",onClick:()=>window.open("mailto:HomericEntertainment@gmail.com?subject=feedback&body="),children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"add_comment"})," ",(0,ke.jsx)("div",{children:"Feedback"})]}),a.isConnected?(0,ke.jsx)("div",{onClick:()=>{(()=>{try{e(Cn()),document.cookie="loginToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}catch{console.log("could not log out")}})(),e(wn(""))},className:"hover-main",children:(0,ke.jsxs)(te,{to:"/",children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"logout"})," ",(0,ke.jsx)("div",{children:"Log out"})]})}):(0,ke.jsx)("div",{className:"hover-main",onClick:()=>{e(wn(""))},children:(0,ke.jsxs)(te,{className:"main-color",to:"/profile",children:[(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"login"}),(0,ke.jsx)("div",{children:"Login"})]})}),c&&(0,ke.jsx)("div",{onClick:()=>e(wn("")),className:"close-mobile clickable",children:(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"cancel"})})]}),"help"===o&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:"center-start",children:[(0,ke.jsx)("p",{className:"help-p",children:"Help"}),(0,ke.jsxs)("div",{className:"help-opt hover-main",onClick:()=>window.open("https://homeric-games.gitbook.io/cvc/metamask-full-guide","_blank").focus(),children:[(0,ke.jsx)("p",{children:"how to install metamask?"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})]}),(0,ke.jsxs)("div",{className:"help-opt hover-main",onClick:()=>window.open("https://homeric-games.gitbook.io/cvc/add-funds-to-metamask","_blank").focus(),children:[(0,ke.jsx)("p",{children:"how to add money to the meta mask?"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})]}),(0,ke.jsxs)("div",{className:"help-opt hover-main",children:[(0,ke.jsx)("p",{children:"how to buy a ticket?"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})]}),(0,ke.jsxs)("div",{className:"help-opt hover-main",onClick:()=>window.open("https://homeric-games.gitbook.io/cvc/i-bought-a-ticket-what-now","_blank").focus(),children:[(0,ke.jsx)("p",{children:"I bought a ticket what now?"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})]}),(0,ke.jsxs)("div",{className:"help-opt hover-main",onClick:()=>window.open("https://homeric-games.gitbook.io/cvc/how-to-add-bnb-network-to-metamask","_blank").focus(),children:[(0,ke.jsx)("p",{children:"how to add my network to metamask?"}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})]}),(0,ke.jsxs)("div",{className:"help-opt hover-main",onClick:()=>window.open("https://homeric-games.gitbook.io/cvc/metamask-full-guide","_blank").focus(),children:[(0,ke.jsx)("p",{children:"general help in the platform."}),(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})]})]}),(0,ke.jsx)("div",{className:"close",onClick:()=>e(wn("normal")),children:(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"close"})})]}),"feedback"===o&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("form",{className:"center-start feedback",onSubmit:async e=>{console.log("oops")},children:[(0,ke.jsx)("p",{children:"Feedback"}),(0,ke.jsx)("textarea",{name:"message",rows:"5",cols:"25",ref:t,autoFocus:!0,required:!0,placeholder:"Please tell us how can we improve our product..."}),(0,ke.jsx)("input",{name:"user_name",type:"text",ref:r,className:"txt",placeholder:"Your name",required:!0}),(0,ke.jsx)("input",{name:"user_email",type:"email",ref:s,className:"txt",placeholder:"Your email",required:!0}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("input",{className:"checkbox",type:"checkbox",id:"notify",required:!0,ref:n}),(0,ke.jsx)("label",{htmlFor:"notify",children:" Allow support to contact back"})]}),(0,ke.jsx)("button",{children:"Send"})]}),(0,ke.jsx)("div",{className:"close",onClick:()=>e(wn("normal")),children:(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"close"})})]}),"sent"===o&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"close",onClick:()=>e(wn("normal")),children:(0,ke.jsx)("span",{className:"material-symbols-outlined",children:"close"})}),(0,ke.jsx)("p",{children:"We got you, our support team are doing their best to improve."})]})]})]})}var ns=n(173);function is(e){return e+.5|0}const rs=(e,t,n)=>Math.max(Math.min(e,n),t);function ss(e){return rs(is(2.55*e),0,255)}function os(e){return rs(is(255*e),0,255)}function as(e){return rs(is(e/2.55)/100,0,1)}function cs(e){return rs(is(100*e),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ls=[..."0123456789ABCDEF"],us=e=>ls[15&e],hs=e=>ls[(240&e)>>4]+ls[15&e],ps=e=>(240&e)>>4===(15&e);function fs(e){var t=(e=>ps(e.r)&&ps(e.g)&&ps(e.b)&&ps(e.a))(e)?us:hs;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const ms=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gs(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Es(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function _s(e,t,n){const i=gs(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function vs(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,c,d;return r!==s&&(d=r-s,c=o>.5?d/(2-r-s):d/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,d,r),a=60*a+.5),[0|a,c||0,o]}function ys(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(os)}function Ss(e,t,n){return ys(gs,e,t,n)}function bs(e){return(e%360+360)%360}function Ts(e){const t=ms.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?ss(+t[5]):os(+t[5]));const r=bs(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return ys(_s,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return ys(Es,e,t,n)}(r,s,o):Ss(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const Cs={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},As={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ws;function Rs(e){ws||(ws=function(){const e={},t=Object.keys(As),n=Object.keys(Cs);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Cs[s]);s=parseInt(As[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),ws.transparent=[0,0,0,0]);const t=ws[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Is=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Ns=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Os=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ks(e,t,n){if(e){let i=vs(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Ss(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Ds(e,t){return e?Object.assign(t||{},e):e}function Ps(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=os(e[3]))):(t=Ds(e,{r:0,g:0,b:0,a:1})).a=os(t.a),t}function xs(e){return"r"===e.charAt(0)?function(e){const t=Is.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?ss(e):rs(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?ss(n):rs(n,0,255)),i=255&(t[4]?ss(i):rs(i,0,255)),r=255&(t[6]?ss(r):rs(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):Ts(e)}class Ls{constructor(e){if(e instanceof Ls)return e;const t=typeof e;let n;"object"===t?n=Ps(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*ds[e[1]],g:255&17*ds[e[2]],b:255&17*ds[e[3]],a:5===n?17*ds[e[4]]:255}:7!==n&&9!==n||(t={r:ds[e[1]]<<4|ds[e[2]],g:ds[e[3]]<<4|ds[e[4]],b:ds[e[5]]<<4|ds[e[6]],a:9===n?ds[e[7]]<<4|ds[e[8]]:255})),t}(e)||Rs(e)||xs(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ds(this._rgb);return e&&(e.a=as(e.a)),e}set rgb(e){this._rgb=Ps(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(as(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?fs(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=vs(e),n=t[0],i=cs(t[1]),r=cs(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(as(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,c=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Os(as(e.r)),r=Os(as(e.g)),s=Os(as(e.b));return{r:os(Ns(i+n*(Os(as(t.r))-i))),g:os(Ns(r+n*(Os(as(t.g))-r))),b:os(Ns(s+n*(Os(as(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ls(this.rgb)}alpha(e){return this._rgb.a=os(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=is(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ks(this._rgb,2,e),this}darken(e){return ks(this._rgb,2,-e),this}saturate(e){return ks(this._rgb,1,e),this}desaturate(e){return ks(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=vs(e);n[0]=bs(n[0]+t),n=Ss(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Ms(){}const Us=(()=>{let e=0;return()=>e++})();function js(e){return null===e||"undefined"===typeof e}function Vs(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Fs(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Bs(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Ws(e,t){return Bs(e)?e:t}function Gs(e,t){return"undefined"===typeof e?t:e}const Hs=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ks(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function zs(e,t,n,i){let r,s,o;if(Vs(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Fs(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function Ys(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function qs(e){if(Vs(e))return e.map(qs);if(Fs(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=qs(e[n[r]]);return t}return e}function Js(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Qs(e,t,n,i){if(!Js(e))return;const r=t[e],s=n[e];Fs(r)&&Fs(s)?Xs(r,s,i):t[e]=qs(s)}function Xs(e,t,n){const i=Vs(t)?t:[t],r=i.length;if(!Fs(e))return e;const s=(n=n||{}).merger||Qs;let o;for(let a=0;a<r;++a){if(o=i[a],!Fs(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function Zs(e,t){return Xs(e,t,{merger:$s})}function $s(e,t,n){if(!Js(e))return;const i=t[e],r=n[e];Fs(i)&&Fs(r)?Zs(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=qs(r))}const eo={"":e=>e,x:e=>e.x,y:e=>e.y};function to(e,t){const n=eo[t]||(eo[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function no(e){return e.charAt(0).toUpperCase()+e.slice(1)}const io=e=>"undefined"!==typeof e,ro=e=>"function"===typeof e,so=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const oo=Math.PI,ao=2*oo,co=ao+oo,lo=Number.POSITIVE_INFINITY,uo=oo/180,ho=oo/2,po=oo/4,fo=2*oo/3,mo=Math.log10,go=Math.sign;function Eo(e,t,n){return Math.abs(e-t)<n}function _o(e){const t=Math.round(e);e=Eo(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(mo(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function vo(e){return!isNaN(parseFloat(e))&&isFinite(e)}function yo(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function So(e){return e*(oo/180)}function bo(e){return e*(180/oo)}function To(e){if(!Bs(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Co(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*oo&&(s+=ao),{angle:s,distance:r}}function Ao(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wo(e,t){return(e-t+co)%ao-oo}function Ro(e){return(e%ao+ao)%ao}function Io(e,t,n,i){const r=Ro(e),s=Ro(t),o=Ro(n),a=Ro(s-r),c=Ro(o-r),d=Ro(r-s),l=Ro(r-o);return r===s||r===o||i&&s===o||a>c&&d<l}function No(e,t,n){return Math.max(t,Math.min(n,e))}function Oo(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function ko(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Do=(e,t,n,i)=>ko(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Po=(e,t,n)=>ko(e,n,(i=>e[i][t]>=n));const xo=["push","pop","shift","splice","unshift"];function Lo(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(xo.forEach((t=>{delete e[t]})),delete e._chartjs)}function Mo(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Uo="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function jo(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,Uo.call(window,(()=>{i=!1,e.apply(t,n)})))}}const Vo=e=>"start"===e?"left":"end"===e?"right":"center",Fo=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Bo(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,_parsed:a}=e,c=o.axis,{min:d,max:l,minDefined:u,maxDefined:h}=o.getUserBounds();u&&(r=No(Math.min(Do(a,c,d).lo,n?i:Do(t,c,o.getPixelForValue(d)).lo),0,i-1)),s=h?No(Math.max(Do(a,o.axis,l,!0).hi+1,n?0:Do(t,c,o.getPixelForValue(l),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function Wo(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Go=e=>0===e||1===e,Ho=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ao/n),Ko=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ao/n)+1,zo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*ho),easeOutSine:e=>Math.sin(e*ho),easeInOutSine:e=>-.5*(Math.cos(oo*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Go(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Go(e)?e:Ho(e,.075,.3),easeOutElastic:e=>Go(e)?e:Ko(e,.075,.3),easeInOutElastic(e){const t=.1125;return Go(e)?e:e<.5?.5*Ho(2*e,t,.45):.5+.5*Ko(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-zo.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*zo.easeInBounce(2*e):.5*zo.easeOutBounce(2*e-1)+.5};function Yo(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function qo(e){return Yo(e)?e:new Ls(e)}function Jo(e){return Yo(e)?e:new Ls(e).saturate(.5).darken(.1).hexString()}const Qo=["x","y","borderWidth","radius","tension"],Xo=["color","borderColor","backgroundColor"];const Zo=new Map;function $o(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Zo.get(n);return i||(i=new Intl.NumberFormat(e,t),Zo.set(n,i)),i}(t,n).format(e)}const ea={values:e=>Vs(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=mo(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),$o(e,i,c)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(mo(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?ea.numeric.call(this,e,t,n):""}};var ta={formatters:ea};const na=Object.create(null),ia=Object.create(null);function ra(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function sa(e,t,n){return"string"===typeof t?Xs(ra(e,t),n):Xs(ra(e,""),t)}class oa{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Jo(t.backgroundColor),this.hoverBorderColor=(e,t)=>Jo(t.borderColor),this.hoverColor=(e,t)=>Jo(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return sa(this,e,t)}get(e){return ra(this,e)}describe(e,t){return sa(ia,e,t)}override(e,t){return sa(na,e,t)}route(e,t,n,i){const r=ra(this,e),s=ra(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return Fs(e)?Object.assign({},t,e):Gs(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var aa=new oa({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Xo},numbers:{type:"number",properties:Qo}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ta.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ca(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function da(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let c,d,l,u,h;for(c=0;c<a;c++)if(u=n[c],void 0===u||null===u||Vs(u)){if(Vs(u))for(d=0,l=u.length;d<l;d++)h=u[d],void 0===h||null===h||Vs(h)||(o=ca(e,r,s,o,h))}else o=ca(e,r,s,o,u);e.restore();const p=s.length/2;if(p>n.length){for(c=0;c<p;c++)delete r[s[c]];s.splice(0,p)}return o}function la(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function ua(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function ha(e,t,n,i){pa(e,t,n,i,null)}function pa(e,t,n,i,r){let s,o,a,c,d,l,u,h;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*uo;if(p&&"object"===typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:r?e.ellipse(n,i,r/2,m,0,0,ao):e.arc(n,i,m,0,ao),e.closePath();break;case"triangle":l=r?r/2:m,e.moveTo(n+Math.sin(g)*l,i-Math.cos(g)*m),g+=fo,e.lineTo(n+Math.sin(g)*l,i-Math.cos(g)*m),g+=fo,e.lineTo(n+Math.sin(g)*l,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":d=.516*m,c=m-d,o=Math.cos(g+po)*c,u=Math.cos(g+po)*(r?r/2-d:c),a=Math.sin(g+po)*c,h=Math.sin(g+po)*(r?r/2-d:c),e.arc(n-u,i-a,d,g-oo,g-ho),e.arc(n+h,i-o,d,g-ho,g),e.arc(n+u,i+a,d,g,g+ho),e.arc(n-h,i+o,d,g+ho,g+oo),e.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*m,l=r?r/2:c,e.rect(n-l,i-c,2*l,2*c);break}g+=po;case"rectRot":u=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-u,i-a),e.lineTo(n+h,i-o),e.lineTo(n+u,i+a),e.lineTo(n-h,i+o),e.closePath();break;case"crossRot":g+=po;case"cross":u=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-u,i-a),e.lineTo(n+u,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o);break;case"star":u=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-u,i-a),e.lineTo(n+u,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o),g+=po,u=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-u,i-a),e.lineTo(n+u,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o);break;case"line":o=r?r/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function fa(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ma(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ga(e){e.restore()}function Ea(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _a(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function va(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,d=n+s.actualBoundingBoxDescent,l=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,l),e.lineTo(a,l),e.stroke()}}function ya(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Sa(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Vs(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let c,d;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),js(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),c=0;c<o.length;++c)d=o[c],s.backdrop&&ya(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),js(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(d,n,i,s.maxWidth)),e.fillText(d,n,i,s.maxWidth),va(e,n,i,d,s),i+=Number(r.lineHeight);e.restore()}function ba(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*oo,oo,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,oo,ho,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ho,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-ho,!0),e.lineTo(n+o.topLeft,i)}const Ta=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ca=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Aa(e,t){const n=(""+e).match(Ta);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const wa=e=>+e||0;function Ra(e,t){const n={},i=Fs(t),r=i?Object.keys(t):t,s=Fs(e)?i?n=>Gs(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=wa(s(o));return n}function Ia(e){return Ra(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Na(e){return Ra(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Oa(e){const t=Ia(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ka(e,t){e=e||{},t=t||aa.font;let n=Gs(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Gs(e.style,t.style);i&&!(""+i).match(Ca)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Gs(e.family,t.family),lineHeight:Aa(Gs(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Gs(e.weight,t.weight),string:""};return r.string=function(e){return!e||js(e.size)||js(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Da(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&Vs(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function Pa(e,t){return Object.assign(Object.create(e),t)}function xa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Ka("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>xa([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>Va(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=Ka(Ua(s,e),n),"undefined"!==typeof r)return ja(e,r)?Ga(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>za(e).includes(t),ownKeys:e=>za(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function La(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Ma(e,i),setContext:t=>La(e,t,n,i),override:r=>La(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Va(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];ro(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let c=t(s,o||i);a.delete(e),ja(e,c)&&(c=Ga(r._scopes,r,e,c));return c}(t,a,e,n));Vs(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Fs(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const c of n){const n=Ga(i,r,e,c);t.push(La(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));ja(t,a)&&(a=La(a,r,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function Ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ro(n)?n:()=>n,isIndexable:ro(i)?i:()=>i}}const Ua=(e,t)=>e?e+no(t):t,ja=(e,t)=>Fs(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Va(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function Fa(e,t,n){return ro(e)?e(t,n):e}const Ba=(e,t)=>!0===e?t:"string"===typeof e?to(t,e):void 0;function Wa(e,t,n,i,r){for(const s of t){const t=Ba(n,s);if(t){e.add(t);const s=Fa(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Ga(e,t,n,i){const r=t._rootScopes,s=Fa(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let c=Ha(a,o,n,s||n,i);return null!==c&&(("undefined"===typeof s||s===n||(c=Ha(a,o,s,c,i),null!==c))&&xa(Array.from(a),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Vs(r)&&Fs(n))return n;return r||{}}(t,n,i))))}function Ha(e,t,n,i,r){for(;n;)n=Wa(e,t,n,i,r);return n}function Ka(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function za(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Ya(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,c,d,l;for(a=0,c=i;a<c;++a)d=a+n,l=t[d],o[a]={r:r.parse(to(l,s),d)};return o}const qa=Number.EPSILON||1e-14,Ja=(e,t)=>t<e.length&&!e[t].skip&&e[t],Qa=e=>"x"===e?"y":"x";function Xa(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=Ao(s,r),c=Ao(o,s);let d=a/(a+c),l=c/(a+c);d=isNaN(d)?0:d,l=isNaN(l)?0:l;const u=i*d,h=i*l;return{previous:{x:s.x-u*(o.x-r.x),y:s.y-u*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Za(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Qa(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,c,d=Ja(e,0);for(o=0;o<i;++o)if(a=c,c=d,d=Ja(e,o+1),c){if(d){const e=d[t]-c[t];r[o]=0!==e?(d[n]-c[n])/e:0}s[o]=a?d?go(r[o-1])!==go(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(e,t,n){const i=e.length;let r,s,o,a,c,d=Ja(e,0);for(let l=0;l<i-1;++l)c=d,d=Ja(e,l+1),c&&d&&(Eo(t[l],0,qa)?n[l]=n[l+1]=0:(r=n[l]/t[l],s=n[l+1]/t[l],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[l]=r*o*t[l],n[l+1]=s*o*t[l])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Qa(n),r=e.length;let s,o,a,c=Ja(e,0);for(let d=0;d<r;++d){if(o=a,a=c,c=Ja(e,d+1),!a)continue;const r=a[n],l=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=l-s*t[d]),c&&(s=(c[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=l+s*t[d])}}(e,s,t)}function $a(e,t,n){return Math.max(Math.min(e,n),t)}function ec(e,t,n,i,r){let s,o,a,c;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Za(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],c=Xa(n,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}t.capBezierPoints&&function(e,t){let n,i,r,s,o,a=fa(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&fa(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=$a(r.cp1x,t.left,t.right),r.cp1y=$a(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=$a(r.cp2x,t.left,t.right),r.cp2y=$a(r.cp2y,t.top,t.bottom)))}(e,n)}function tc(){return"undefined"!==typeof window&&"undefined"!==typeof document}function nc(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function ic(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const rc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const sc=["top","right","bottom","left"];function oc(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=sc[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ac=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function cc(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=rc(n),s="border-box"===r.boxSizing,o=oc(r,"padding"),a=oc(r,"border","width"),{x:c,y:d,box:l}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,c=!1;if(ac(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,c=!0}return{x:o,y:a,box:c}}(e,n),u=o.left+(l&&a.left),h=o.top+(l&&a.top);let{width:p,height:f}=t;return s&&(p-=o.width+a.width,f-=o.height+a.height),{x:Math.round((c-u)/p*n.width/i),y:Math.round((d-h)/f*n.height/i)}}const dc=e=>Math.round(10*e)/10;function lc(e,t,n,i){const r=rc(e),s=oc(r,"margin"),o=ic(r.maxWidth,e,"clientWidth")||lo,a=ic(r.maxHeight,e,"clientHeight")||lo,c=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=nc(e);if(s){const e=s.getBoundingClientRect(),o=rc(s),a=oc(o,"border","width"),c=oc(o,"padding");t=e.width-c.width-a.width,n=e.height-c.height-a.height,i=ic(o.maxWidth,s,"clientWidth"),r=ic(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||lo,maxHeight:r||lo}}(e,t,n);let{width:d,height:l}=c;if("content-box"===r.boxSizing){const e=oc(r,"border","width"),t=oc(r,"padding");d-=t.width+e.width,l-=t.height+e.height}d=Math.max(0,d-s.width),l=Math.max(0,i?d/i:l-s.height),d=dc(Math.min(d,o,c.maxWidth)),l=dc(Math.min(l,a,c.maxHeight)),d&&!l&&(l=dc(d/2));return(void 0!==t||void 0!==n)&&i&&c.height&&l>c.height&&(l=c.height,d=dc(Math.floor(l*i))),{width:d,height:l}}function uc(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const hc=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};tc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function pc(e,t){const n=function(e,t){return rc(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fc(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function mc(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function gc(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=fc(e,r,n),a=fc(r,s,n),c=fc(s,t,n),d=fc(o,a,n),l=fc(a,c,n);return fc(d,l,n)}function Ec(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function _c(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function vc(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function yc(e){return"angle"===e?{between:Io,compare:wo,normalize:Ro}:{between:Oo,compare:(e,t)=>e-t,normalize:e=>e}}function Sc(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function bc(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:c,normalize:d}=yc(i),{start:l,end:u,loop:h,style:p}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=yc(i),c=t.length;let d,l,{start:u,end:h,loop:p}=e;if(p){for(u+=c,h+=c,d=0,l=c;d<l&&o(a(t[u%c][i]),r,s);++d)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:p,style:e.style}}(e,t,n),f=[];let m,g,E,_=!1,v=null;const y=()=>_||c(r,E,m)&&0!==a(r,E),S=()=>!_||0===a(s,m)||c(s,E,m);for(let b=l,T=l;b<=u;++b)g=t[b%o],g.skip||(m=d(g[i]),m!==E&&(_=c(m,r,s),null===v&&y()&&(v=0===a(m,r)?b:T),null!==v&&S()&&(f.push(Sc({start:v,end:b,loop:h,count:o,style:p})),v=null),T=b,E=m));return null!==v&&f.push(Sc({start:v,end:u,loop:h,count:o,style:p})),f}function Tc(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=bc(i[r],e.points,t);s.length&&n.push(...s)}return n}function Cc(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=Ac(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,c=n.length,d=[];let l=s,u=t[0].start,h=u;function p(e,t,i,r){const s=a?-1:1;if(e!==t){for(e+=c;n[e%c].skip;)e-=s;for(;n[t%c].skip;)t+=s;e%c!==t%c&&(d.push({start:e%c,end:t%c,loop:i,style:r}),l=r,u=t%c)}}for(const f of t){u=a?u:f.start;let e,t=n[u%c];for(h=u+1;h<=f.end;h++){const s=n[h%c];e=Ac(i.setContext(Pa(r,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),wc(e,l)&&p(u,h-1,f.loop,l),t=s,l=e}u<h-1&&p(u,h-1,f.loop,l)}return d}(e,t,n,i):t}function Ac(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function wc(e,t){if(!t)return!1;const n=[],i=function(e,t){return Yo(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}class Rc{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Uo.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ic=new Rc;const Nc="transparent",Oc={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=qo(e||Nc),r=i.valid&&qo(t||Nc);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class kc{constructor(e,t,n,i){const r=t[n];i=Da([e.to,i,r,e.from]);const s=Da([e.from,r,i]);this._active=!0,this._fn=e.fn||Oc[e.type||typeof s],this._easing=zo[e.easing]||zo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Da([e.to,t,i,e.from]),this._from=Da([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class Dc{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Fs(e))return;const t=Object.keys(aa.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Fs(r))return;const s={};for(const e of t)s[e]=r[e];(Vs(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const c=s[a];if("$"===c.charAt(0))continue;if("options"===c){i.push(...this._animateOptions(e,t));continue}const d=t[c];let l=r[c];const u=n.get(c);if(l){if(u&&l.active()){l.update(u,d,o);continue}l.cancel()}u&&u.duration?(r[c]=l=new kc(u,e,c,d),i.push(l)):e[c]=d}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Ic.add(this._chart,n),!0):void 0}}function Pc(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function xc(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Lc(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,c,d;if(null!==t){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===n){if(i.all)continue;break}d=e.values[c],Bs(d)&&(s||0===t||go(t)===go(d))&&(t+=d)}return t}}function Mc(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Uc(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function jc(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function Vc(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,d=o.axis,l=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,i),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[c]:n,[d]:s}=e;h=(e._stacks||(e._stacks={}))[d]=Uc(r,l,n),h[a]=s,h._top=jc(h,o,!0,i.type),h._bottom=jc(h,o,!1,i.type);(h._visualValues||(h._visualValues={}))[a]=s}}function Fc(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Bc(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const Wc=e=>"reset"===e||"none"===e,Gc=(e,t)=>t?e:Object.assign({},e);class Hc{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Mc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Bc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Gs(n.xAxisID,Fc(e,"x")),s=t.yAxisID=Gs(n.yAxisID,Fc(e,"y")),o=t.rAxisID=Gs(n.rAxisID,Fc(e,"r")),a=t.indexAxis,c=t.iAxisID=i(a,r,s,o),d=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Lo(this._data,this),e._stacked&&Bc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Fs(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],n[i]={x:s,y:e[s]};return n}(t);else if(n!==t){if(n){Lo(n,this);const e=this._cachedMeta;Bc(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),xo.forEach((t=>{const n="_onData"+no(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const o=i.apply(this,r);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...r)})),o}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=Mc(t.vScale,t),t.stack!==n.stack&&(i=!0,Bc(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&Vc(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,c,d,l=0===e&&t===i.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,d=i;else{d=Vs(i[e])?this.parseArrayData(n,i,e,t):Fs(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===c[o]||u&&c[o]<u[o];for(a=0;a<t;++a)n._parsed[a+e]=c=d[a],l&&(r()&&(l=!1),u=c);n._sorted=l}s&&Vc(this,d)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,c=r.getLabels(),d=r===s,l=new Array(i);let u,h,p;for(u=0,h=i;u<h;++u)p=u+n,l[u]={[o]:d||r.parse(c[p],p),[a]:s.parse(t[p],p)};return l}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,c,d,l;for(a=0,c=i;a<c;++a)d=a+n,l=t[d],o[a]={x:r.parse(l[0],d),y:s.parse(l[1],d)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(i);let d,l,u,h;for(d=0,l=i;d<l;++d)u=d+n,h=t[u],c[d]={x:r.parse(to(h,o),u),y:s.parse(to(h,a),u)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return Lc({keys:xc(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=Lc(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:xc(n,!0),values:null})(t,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:l}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let u,h;function p(){h=i[u];const t=h[o.axis];return!Bs(h[e.axis])||d>t||l<t}for(u=0;u<s&&(p()||(this.updateRangeFromParsed(c,e,h,a),!r));++u);if(r)for(u=s-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(c,e,h,a);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Bs(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Fs(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Gs(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=Pc(e,n),r=Pc(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,c=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,r,o,a),d=o;d<o+a;++d){const t=i[d];t.hidden||(t.active&&c?s.push(t):t.draw(e,r))}for(d=0;d<s.length;++d)s[d].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Pa(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Pa(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&io(n);if(o)return Gc(o,a);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),l=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=c.getOptionScopes(this.getDataset(),d),h=Object.keys(aa.elements[e]),p=c.resolveNamedOptions(u,h,(()=>this.getContext(n,i,t)),l);return p.$shared&&(p.$shared=a,r[s]=Object.freeze(Gc(p,a))),p}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const c=new Dc(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Wc(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){Wc(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!Wc(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,c]of this._syncList)this[o](a,c);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&Bc(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Kc(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Mo(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,o,a=t._length;const c=()=>{32767!==s&&-32768!==s&&(io(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),c();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),c();return a}function zc(e,t,n,i){return Vs(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let c=o,d=a;Math.abs(o)>Math.abs(a)&&(c=a,d=o),t[n.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:s,min:o,max:a}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function Yc(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,c=[];let d,l,u,h;for(d=n,l=n+i;d<l;++d)h=t[d],u={},u[r.axis]=a||r.parse(o[d],d),c.push(zc(h,u,s,d));return c}function qc(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Jc(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:c,top:d,bottom:l}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=d:(n._bottom||0)===i?r=l:(s[Qc(l,o,a,c)]=!0,r=d)),s[Qc(r,o,a,c)]=!0,e.borderSkipped=s}function Qc(e,t,n,i){var r,s,o;return i?(o=n,e=Xc(e=(r=e)===(s=t)?o:r===o?s:r,n,t)):e=Xc(e,t,n),e}function Xc(e,t,n){return"start"===e?t:"end"===e?n:e}function Zc(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}Bt(Hc,"defaults",{}),Bt(Hc,"datasetElementType",null),Bt(Hc,"dataElementType",null);class $c extends Hc{parsePrimitiveData(e,t,n,i){return Yc(e,t,n,i)}parseArrayData(e,t,n,i){return Yc(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c="x"===r.axis?o:a,d="x"===s.axis?o:a,l=[];let u,h,p,f;for(u=n,h=n+i;u<h;++u)f=t[u],p={},p[r.axis]=r.parse(to(f,c),u),l.push(zc(to(f,d),p,s,u));return l}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,o=qc(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),d=this._getRuler(),{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||js(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,d),f=(t._stacks||{})[o.axis],m={horizontal:c,base:n.base,enableBorderRadius:!f||qc(t._custom)||s===f._top||s===f._bottom,x:c?n.head:p.center,y:c?p.center:n.head,height:c?p.size:Math.abs(n.size),width:c?Math.abs(n.size):p.size};u&&(m.options=l||this.resolveDataElementOptions(h,e[h].active?"active":i));const g=m.options||e[h].options;Jc(m,g,f,s),Zc(m,g,d.ratio),this.updateElement(e[h],h,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],o=e=>{const n=e.controller.getParsed(t),i=n&&n[e.vScale.axis];if(js(i)||isNaN(i))return!0};for(const a of i)if((void 0===t||!o(a))&&((!1===r||-1===s.indexOf(a.stack)||void 0===r&&void 0===a.stack)&&s.push(a.stack),a.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||Kc(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(e),c=a._custom,d=qc(c);let l,u,h=a[t.axis],p=0,f=n?this.applyStack(t,a,n):h;f!==h&&(p=f-h,f=h),d&&(h=c.barStart,f=c.barEnd-c.barStart,0!==h&&go(h)!==go(c.barEnd)&&(p=0),p+=h);const m=js(r)||d?p:r;let g=t.getPixelForValue(m);if(l=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,u=l-g,Math.abs(u)<s){u=function(e,t,n){return 0!==e?go(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,o)*s,h===o&&(g-=u/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),c=Math.min(e,r),p=Math.max(e,r);g=Math.max(Math.min(g,p),c),l=g+u,n&&!d&&(a._stacks[t.axis]._visualValues[i]=t.getValueForPixel(l)-t.getValueForPixel(g))}if(g===t.getPixelForValue(o)){const e=go(u)*t.getLineWidthForValue(o)/2;g+=e,u-=e}return{size:u,base:g,head:l,center:l+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=Gs(i.maxBarThickness,1/0);let o,a;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const d=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:n.barPercentage,start:d}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,o;return js(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}(e,t,i,n),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);o=c.start+c.chunk*d+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[t.axis]&&n[r].draw(this._ctx)}}Bt($c,"id","bar"),Bt($c,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Bt($c,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ed extends Hc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Gs(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Gs(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),c=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(t,i),d=s.axis,l=o.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!r&&this.getParsed(u),h={},p=h[d]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[d]),f=h[l]=r?o.getBasePixel():o.getPixelForValue(n[l]);h.skip=isNaN(p)||isNaN(f),c&&(h.options=a||this.resolveDataElementOptions(u,t.active?"active":i),r&&(h.options.radius=0)),this.updateElement(t,u,h,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Gs(n&&n._custom,r),i}}Bt(ed,"id","bubble"),Bt(ed,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Bt(ed,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class td extends Hc{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(Fs(n[e])){const{key:e="value"}=this._parsing;o=t=>+to(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return So(this.options.rotation-90)}_getCircumference(){return So(this.options.circumference)}_getRotationExtents(){let e=ao,t=-ao;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:d,rotation:l}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:p,offsetY:f}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<ao){const a=e,c=a+t,d=Math.cos(a),l=Math.sin(a),u=Math.cos(c),h=Math.sin(c),p=(e,t,i)=>Io(e,a,c,!0)?1:Math.max(t,t*n,i,i*n),f=(e,t,i)=>Io(e,a,c,!0)?-1:Math.min(t,t*n,i,i*n),m=p(0,d,u),g=p(ho,l,h),E=f(oo,d,u),_=f(oo+ho,l,h);i=(m-E)/2,r=(g-_)/2,s=-(m+E)/2,o=-(g+_)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(l,d,a),m=(n.width-s)/u,g=(n.height-s)/h,E=Math.max(Math.min(m,g)/2,0),_=Hs(this.options.radius,E),v=(_-Math.max(_*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*_,this.offsetY=f*_,i.total=this.calculateTotal(),this.outerRadius=_-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/ao)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,c=(o.left+o.right)/2,d=(o.top+o.bottom)/2,l=r&&a.animateScale,u=l?0:this.innerRadius,h=l?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],s={x:c+this.offsetX,y:d+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};f&&(s.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ao*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=$o(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Gs(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Bt(td,"id","doughnut"),Bt(td,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Bt(td,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Bt(td,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class nd extends Hc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=Bo(t,i,s);this._drawStart=o,this._drawCount=a,Wo(t)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:c},e),this.updateElements(i,o,a,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:l}=this._getSharedOptions(t,i),u=s.axis,h=o.axis,{spanGaps:p,segment:f}=this.options,m=vo(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,E=t+n,_=e.length;let v=t>0&&this.getParsed(t-1);for(let y=0;y<_;++y){const n=e[y],p=g?n:{};if(y<t||y>=E){p.skip=!0;continue}const _=this.getParsed(y),S=js(_[h]),b=p[u]=s.getPixelForValue(_[u],y),T=p[h]=r||S?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,_,a):_[h],y);p.skip=isNaN(b)||isNaN(T)||S,p.stop=y>0&&Math.abs(_[u]-v[u])>m,f&&(p.parsed=_,p.raw=c.data[y]),l&&(p.options=d||this.resolveDataElementOptions(y,n.active?"active":i)),g||this.updateElement(n,y,p,i),v=_}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Bt(nd,"id","line"),Bt(nd,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Bt(nd,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class id extends Hc{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=$o(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Ya.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,c=a.xCenter,d=a.yCenter,l=a.getIndexAngle(0)-.5*oo;let u,h=l;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,i,p);for(u=t;u<t+n;u++){const t=e[u];let n=h,f=h+this._computeAngle(u,i,p),m=s.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,r&&(o.animateScale&&(m=0),o.animateRotate&&(n=f=l));const g={x:c,y:d,innerRadius:0,outerRadius:m,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":i)};this.updateElement(t,u,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?So(this.resolveDataElementOptions(e,t).angle||n):0}}Bt(id,"id","polarArea"),Bt(id,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Bt(id,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class rd extends td{}Bt(rd,"id","pie"),Bt(rd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class sd extends Hc{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Ya.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),c=s?r.xCenter:a.x,d=s?r.yCenter:a.y,l={x:c,y:d,angle:a.angle,skip:isNaN(c)||isNaN(d),options:n};this.updateElement(t,o,l,i)}}}Bt(sd,"id","radar"),Bt(sd,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Bt(sd,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class od extends Hc{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=Bo(t,n,i);if(this._drawStart=r,this._drawCount=s,Wo(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(t,i),l=this.getSharedOptions(d),u=this.includeOptions(i,l),h=s.axis,p=o.axis,{spanGaps:f,segment:m}=this.options,g=vo(f)?f:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||r||"none"===i;let _=t>0&&this.getParsed(t-1);for(let v=t;v<t+n;++v){const t=e[v],n=this.getParsed(v),d=E?t:{},f=js(n[p]),y=d[h]=s.getPixelForValue(n[h],v),S=d[p]=r||f?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[p],v);d.skip=isNaN(y)||isNaN(S)||f,d.stop=v>0&&Math.abs(n[h]-_[h])>g,m&&(d.parsed=n,d.raw=c.data[v]),u&&(d.options=l||this.resolveDataElementOptions(v,t.active?"active":i)),E||this.updateElement(t,v,d,i),_=n}this.updateSharedOptions(l,i,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}Bt(od,"id","scatter"),Bt(od,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Bt(od,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function ad(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class cd{static override(e){Object.assign(cd.prototype,e)}constructor(e){Bt(this,"options",void 0),this.options=e||{}}init(){}formats(){return ad()}parse(){return ad()}format(){return ad()}add(){return ad()}diff(){return ad()}startOf(){return ad()}endOf(){return ad()}}var dd=cd;function ld(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?Po:Do;if(!i)return e(s,t,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(t);if(r){const i=e(s,t,n-r),o=e(s,t,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function ud(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,c=s.length;a<c;++a){const{index:e,data:n}=s[a],{lo:c,hi:d}=ld(s[a],t,o,r);for(let t=c;t<=d;++t){const r=n[t];r.skip||i(r,e,t)}}}function hd(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return ud(e,n,t,(function(n,o,a){(r||fa(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function pd(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let c=Number.POSITIVE_INFINITY;return ud(e,n,t,(function(n,d,l){const u=n.inRange(t.x,t.y,r);if(i&&!u)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!u)return;const p=a(t,h);p<c?(o=[{element:n,datasetIndex:d,index:l}],c=p):p===c&&o.push({element:n,datasetIndex:d,index:l})})),o}function fd(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?pd(e,t,n,i,r,s):function(e,t,n,i){let r=[];return ud(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:c}=Co(e,{x:t.x,y:t.y});Io(c,o,a)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function md(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return ud(e,n,t,((e,i,c)=>{e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:c}),a=a||e.inRange(t.x,t.y,r))})),i&&!a?[]:s}var gd={evaluateInteractionItems:ud,modes:{index(e,t,n,i){const r=cc(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?hd(e,r,s,i,o):fd(e,r,s,!1,i,o),c=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&c.push({element:n,datasetIndex:e.index,index:t})})),c):[]},dataset(e,t,n,i){const r=cc(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?hd(e,r,s,i,o):fd(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>hd(e,cc(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=cc(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return fd(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>md(e,cc(t,e),"x",n.intersect,i),y:(e,t,n,i)=>md(e,cc(t,e),"y",n.intersect,i)}};const Ed=["left","top","right","bottom"];function _d(e,t){return e.filter((e=>e.pos===t))}function vd(e,t){return e.filter((e=>-1===Ed.indexOf(e.pos)&&e.box.axis===t))}function yd(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Sd(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!Ed.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=d?d*r:o&&t.availableHeight)}return n}function bd(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Td(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Cd(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!Fs(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&Td(o,s.getPadding());const a=Math.max(0,t.outerWidth-bd(o,e,"left","right")),c=Math.max(0,t.outerHeight-bd(o,e,"top","bottom")),d=a!==e.w,l=c!==e.h;return e.w=a,e.h=c,n.horizontal?{same:d,other:l}:{same:l,other:d}}function Ad(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function wd(e,t,n,i){const r=[];let s,o,a,c,d,l;for(s=0,o=e.length,d=0;s<o;++s){a=e[s],c=a.box,c.update(a.width||t.w,a.height||t.h,Ad(a.horizontal,t));const{same:o,other:u}=Cd(t,n,a,i);d|=o&&r.length,l=l||u,c.fullSize||r.push(a)}return d&&wd(r,t,n,i)||l}function Rd(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Id(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const i=t.w*d,s=c.size||e.height;io(c.start)&&(o=c.start),e.fullSize?Rd(e,r.left,o,n.outerWidth-r.right-r.left,s):Rd(e,t.left+c.placed,o,i,s),c.start=o,c.placed+=i,o=e.bottom}else{const i=t.h*d,o=c.size||e.width;io(c.start)&&(s=c.start),e.fullSize?Rd(e,s,r.top,o,n.outerHeight-r.bottom-r.top):Rd(e,s,t.top+c.placed,o,i),c.start=s,c.placed+=i,s=e.right}}t.x=s,t.y=o}var Nd={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Oa(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=yd(t.filter((e=>e.box.fullSize)),!0),i=yd(_d(t,"left"),!0),r=yd(_d(t,"right")),s=yd(_d(t,"top"),!0),o=yd(_d(t,"bottom")),a=vd(t,"x"),c=vd(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:_d(t,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}(e.boxes),c=a.vertical,d=a.horizontal;zs(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const l=c.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/l,hBoxMaxHeight:o/2}),h=Object.assign({},r);Td(h,Oa(i));const p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),f=Sd(c.concat(d),u);wd(a.fullSize,p,u,f),wd(c,p,u,f),wd(d,p,u,f)&&wd(c,p,u,f),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Id(a.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,Id(a.rightAndBottom,p,u,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},zs(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class Od{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class kd extends Od{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Dd="$chartjs",Pd={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xd=e=>null===e||""===e;const Ld=!!hc&&{passive:!0};function Md(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Ld)}function Ud(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function jd(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Ud(n.addedNodes,i),t=t&&!Ud(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Vd(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Ud(n.removedNodes,i),t=t&&!Ud(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Fd=new Map;let Bd=0;function Wd(){const e=window.devicePixelRatio;e!==Bd&&(Bd=e,Fd.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Gd(e,t,n){const i=e.canvas,r=i&&nc(i);if(!r)return;const s=jo(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return o.observe(r),function(e,t){Fd.size||window.addEventListener("resize",Wd),Fd.set(e,t)}(e,s),o}function Hd(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Fd.delete(e),Fd.size||window.removeEventListener("resize",Wd)}(e)}function Kd(e,t,n){const i=e.canvas,r=jo((t=>{null!==e.ctx&&n(function(e,t){const n=Pd[e.type]||e.type,{x:i,y:r}=cc(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,Ld)}(i,t,r),r}class zd extends Od{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Dd]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",xd(r)){const t=pc(e,"width");void 0!==t&&(e.width=t)}if(xd(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=pc(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Dd])return!1;const n=t[Dd].initial;["height","width"].forEach((e=>{const i=n[e];js(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[Dd],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:jd,detach:Vd,resize:Gd}[t]||Kd;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Hd,detach:Hd,resize:Hd}[t]||Md)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return lc(e,t,n,i)}isAttached(e){const t=nc(e);return!(!t||!t.isConnected)}}class Yd{constructor(){Bt(this,"x",void 0),Bt(this,"y",void 0),Bt(this,"active",!1),Bt(this,"options",void 0),Bt(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return vo(this.x)&&vo(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function qd(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],c=s[o-1],d=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,d,s,o/r),d;const l=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((c-a)/(o-1)):null;for(Jd(t,d,l,js(i)?0:a-i,a),e=0,n=o-1;e<n;e++)Jd(t,d,l,s[e],s[e+1]);return Jd(t,d,l,c,js(i)?t.length:c+i),d}return Jd(t,d,l),d}function Jd(e,t,n,i,r){const s=Gs(i,0),o=Math.min(Gs(r,e.length),e.length);let a,c,d,l=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),d=s;d<0;)l++,d=Math.round(s+l*n);for(c=Math.max(s,0);c<o;c++)c===d&&(t.push(e[c]),l++,d=Math.round(s+l*n))}Bt(Yd,"defaults",{}),Bt(Yd,"defaultRoutes",void 0);const Qd=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Xd=(e,t)=>Math.min(t||e,e);function Zd(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function $d(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let c,d=e.getPixelForTick(r);if(!(n&&(c=1===i?Math.max(d-s,o-d):0===t?(e.getPixelForTick(1)-d)/2:(d-e.getPixelForTick(r-1))/2,d+=r<t?c:-c,d<s-a||d>o+a)))return d}function el(e){return e.drawTicks?e.tickLength:0}function tl(e,t){if(!e.display)return 0;const n=ka(e.font,t),i=Oa(e.padding);return(Vs(e.text)?e.text.length:1)*n.lineHeight+i.height}function nl(e,t,n){let i=Vo(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class il extends Yd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Ws(e,Number.POSITIVE_INFINITY),t=Ws(t,Number.NEGATIVE_INFINITY),n=Ws(n,Number.POSITIVE_INFINITY),i=Ws(i,Number.NEGATIVE_INFINITY),{min:Ws(e,n),max:Ws(t,i),minDefined:Bs(e),maxDefined:Bs(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,c=o.length;a<c;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Ws(n,Ws(i,n)),max:Ws(i,Ws(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ks(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Hs(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Zd(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=qd(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ks(this.options.afterUpdate,[this])}beforeSetDimensions(){Ks(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ks(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ks(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ks(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Ks(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Ks(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ks(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Xd(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,c=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const d=this._getLabelSizes(),l=d.widest.width,u=d.highest.height,h=No(this.chart.width-l,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),l+6>s&&(s=h/(n-(e.offset?.5:1)),o=this.maxHeight-el(e.grid)-t.padding-tl(e.title,this.chart.options.font),a=Math.sqrt(l*l+u*u),c=bo(Math.min(Math.asin(No((d.highest.height+6)/s,-1,1)),Math.asin(No(o/a,-1,1))-Math.asin(No(u/a,-1,1)))),c=Math.max(i,Math.min(r,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ks(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ks(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=tl(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=el(r)+s):(e.height=this.maxHeight,e.width=el(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,c=So(this.labelRotation),d=Math.cos(c),l=Math.sin(c);if(o){const t=n.mirror?0:l*r.width+d*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:d*r.width+l*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,l,d)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,c="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let l=0,u=0;a?c?(l=i*e.width,u=n*t.height):(l=n*e.height,u=i*t.width):"start"===r?u=t.width:"end"===r?l=e.width:"inner"!==r&&(l=e.width/2,u=t.width/2),this.paddingLeft=Math.max((l-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((u-d+s)*this.width/(this.width-d),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ks(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)js(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Zd(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/Xd(t,n));let c,d,l,u,h,p,f,m,g,E,_,v=0,y=0;for(c=0;c<t;c+=a){if(u=e[c].label,h=this._resolveTickFontOptions(c),i.font=p=h.string,f=r[p]=r[p]||{data:{},gc:[]},m=h.lineHeight,g=E=0,js(u)||Vs(u)){if(Vs(u))for(d=0,l=u.length;d<l;++d)_=u[d],js(_)||Vs(_)||(g=ca(i,f.data,f.gc,g,_),E+=m)}else g=ca(i,f.data,f.gc,g,u),E=m;s.push(g),o.push(E),v=Math.max(g,v),y=Math.max(E,y)}!function(e,t){zs(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const S=s.indexOf(v),b=o.indexOf(y),T=e=>({width:s[e]||0,height:o[e]||0});return{first:T(0),last:T(t-1),widest:T(S),highest:T(b),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return No(e,-32768,32767)}(this._alignToPixels?la(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Pa(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Pa(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=So(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,c=this.isHorizontal(),d=this.ticks.length+(a?1:0),l=el(r),u=[],h=o.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,m=function(e){return la(n,e,p)};let g,E,_,v,y,S,b,T,C,A,w,R;if("top"===s)g=m(this.bottom),S=this.bottom-l,T=g-f,A=m(e.top)+f,R=e.bottom;else if("bottom"===s)g=m(this.top),A=e.top,R=m(e.bottom)-f,S=g+f,T=this.top+l;else if("left"===s)g=m(this.right),y=this.right-l,b=g-f,C=m(e.left)+f,w=e.right;else if("right"===s)g=m(this.left),C=e.left,w=m(e.right)-f,y=g+f,b=this.left+l;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(Fs(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}A=e.top,R=e.bottom,S=g+f,T=S+l}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(Fs(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}y=g-f,b=y-l,C=e.left,w=e.right}const I=Gs(i.ticks.maxTicksLimit,d),N=Math.max(1,Math.ceil(d/I));for(E=0;E<d;E+=N){const e=this.getContext(E),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,d=t.color,l=i.dash||[],h=i.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;_=$d(this,E,a),void 0!==_&&(v=la(n,_,s),c?y=b=C=w=v:S=T=A=R=v,u.push({tx1:y,ty1:S,tx2:b,ty2:T,x1:C,y1:A,x2:w,y2:R,width:s,color:d,borderDash:l,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=d,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:c,padding:d,mirror:l}=r,u=el(n.grid),h=u+d,p=l?-d:h,f=-So(this.labelRotation),m=[];let g,E,_,v,y,S,b,T,C,A,w,R,I="middle";if("top"===i)S=this.bottom-p,b=this._getXAxisLabelAlignment();else if("bottom"===i)S=this.top+p,b=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(u);b=e.textAlign,y=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(u);b=e.textAlign,y=e.x}else if("x"===t){if("center"===i)S=(e.top+e.bottom)/2+h;else if(Fs(i)){const e=Object.keys(i)[0],t=i[e];S=this.chart.scales[e].getPixelForValue(t)+h}b=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)y=(e.left+e.right)/2-h;else if(Fs(i)){const e=Object.keys(i)[0],t=i[e];y=this.chart.scales[e].getPixelForValue(t)}b=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===a?I="top":"end"===a&&(I="bottom"));const N=this._getLabelSizes();for(g=0,E=o.length;g<E;++g){_=o[g],v=_.label;const e=r.setContext(this.getContext(g));T=this.getPixelForTick(g)+r.labelOffset,C=this._resolveTickFontOptions(g),A=C.lineHeight,w=Vs(v)?v.length:1;const t=w/2,n=e.color,a=e.textStrokeColor,d=e.textStrokeWidth;let u,h=b;if(s?(y=T,"inner"===b&&(h=g===E-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),R="top"===i?"near"===c||0!==f?-w*A+A/2:"center"===c?-N.highest.height/2-t*A+A:-N.highest.height+A/2:"near"===c||0!==f?A/2:"center"===c?N.highest.height/2-t*A:N.highest.height-w*A,l&&(R*=-1),0===f||e.showLabelBackdrop||(y+=A/2*Math.sin(f))):(S=T,R=(1-w)*A/2),e.showLabelBackdrop){const t=Oa(e.backdropPadding),n=N.heights[g],i=N.widths[g];let r=R-t.top,s=0-t.left;switch(I){case"middle":r-=n/2;break;case"bottom":r-=n}switch(b){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":g===E-1?s-=i:g>0&&(s-=i/2)}u={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:v,font:C,textOffset:R,options:{rotation:f,color:n,strokeColor:a,strokeWidth:d,textAlign:h,textBaseline:I,translation:[y,S],backdrop:u}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-So(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,c;return"left"===t?i?(c=this.right+r,"near"===n?a="left":"center"===n?(a="center",c+=o/2):(a="right",c+=o)):(c=this.right-s,"near"===n?a="right":"center"===n?(a="center",c-=o/2):(a="left",c=this.left)):"right"===t?i?(c=this.left+r,"near"===n?a="right":"center"===n?(a="center",c-=o/2):(a="left",c-=o)):(c=this.left+s,"near"===n?a="left":"center"===n?(a="center",c+=o/2):(a="right",c=this.right)):a="right",{textAlign:a,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,d,l,u;this.isHorizontal()?(c=la(e,this.left,s)-s/2,d=la(e,this.right,o)+o/2,l=u=a):(l=la(e,this.top,s)-s/2,u=la(e,this.bottom,o)+o/2,c=d=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,l),t.lineTo(d,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&ma(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;Sa(t,r.label,0,r.textOffset,n,e)}n&&ga(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=ka(n.font),s=Oa(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||Fs(t)?(a+=s.bottom,Vs(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:c,titleY:d,maxWidth:l,rotation:u}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:c}=e,{chartArea:d,scales:l}=c;let u,h,p,f=0;const m=o-r,g=a-s;if(e.isHorizontal()){if(h=Fo(i,s,a),Fs(n)){const e=Object.keys(n)[0],i=n[e];p=l[e].getPixelForValue(i)+m-t}else p="center"===n?(d.bottom+d.top)/2+m-t:Qd(e,n,t);u=a-s}else{if(Fs(n)){const e=Object.keys(n)[0],i=n[e];h=l[e].getPixelForValue(i)-g+t}else h="center"===n?(d.left+d.right)/2-g+t:Qd(e,n,t);p=Fo(i,o,r),f="left"===n?-ho:ho}return{titleX:h,titleY:p,maxWidth:u,rotation:f}}(this,a,t,o);Sa(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:u,textAlign:nl(o,t,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Gs(e.grid&&e.grid.z,-1),i=Gs(e.border&&e.border.z,0);return this._isVisible()&&this.draw===il.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return ka(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class rl{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=Xs(Object.create(null),[n?aa.get(n):{},aa.get(t),e.defaults]);aa.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),c=o.join(".");aa.route(s,r,c,a)}))}(t,e.defaultRoutes);e.descriptors&&aa.describe(t,e.descriptors)}(e,s,n),this.override&&aa.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in aa[i]&&(delete aa[i][n],this.override&&delete na[n])}}class sl{constructor(){this.controllers=new rl(Hc,"datasets",!0),this.elements=new rl(Yd,"elements"),this.plugins=new rl(Object,"plugins"),this.scales=new rl(il,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):zs(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=no(e);Ks(n["before"+i],[],n),t[e](n),Ks(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var ol=new sl;class al{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Ks(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){js(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Gs(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(ol.plugins.items);for(let s=0;s<i.length;s++)n.push(ol.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const c of r){const t=c.id,r=cl(n[t],i);null!==r&&o.push({plugin:c,options:dl(e.config,{plugin:c,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function cl(e,t){return t||!1!==e?!0===e?{}:e:null}function dl(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ll(e,t){const n=aa.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ul(e){if("x"===e||"y"===e||"r"===e)return e}function hl(e){if(ul(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&ul(e[0].toLowerCase());if(t)return t}var r;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function pl(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function fl(e,t){const n=na[e.type]||{scales:{}},i=t.scales||{},r=ll(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const o=i[t];if(!Fs(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=hl(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return pl(e,"x",n[0])||pl(e,"y",n[0])}return{}}(t,e),aa.scales[o.type]),c=function(e,t){return e===t?"_index_":"_value_"}(a,r),d=n.scales||{};s[t]=Zs(Object.create(null),[{axis:a},o,d[a],d[c]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,o=n.indexAxis||ll(r,t),a=(na[r]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),Zs(s[r],[{axis:t},i[r],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Zs(t,[aa.scales[t.type],aa.scale])})),s}function ml(e){const t=e.options||(e.options={});t.plugins=Gs(t.plugins,{}),t.scales=fl(e,t)}function gl(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const El=new Map,_l=new Set;function vl(e,t){let n=El.get(e);return n||(n=t(),El.set(e,n),_l.add(n)),n}const yl=(e,t,n)=>{const i=to(t,n);void 0!==i&&e.add(i)};class Sl{constructor(e){this._config=function(e){return(e=e||{}).data=gl(e.data),ml(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gl(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ml(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vl(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return vl("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return vl("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return vl("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>yl(a,e,t)))),t.forEach((e=>yl(a,i,e))),t.forEach((e=>yl(a,na[r]||{},e))),t.forEach((e=>yl(a,aa,e))),t.forEach((e=>yl(a,ia,e)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),_l.has(t)&&s.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,na[t]||{},aa.datasets[t]||{},{type:t},aa,ia]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=bl(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=Ma(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&(ro(o)||Tl(o))||s&&Vs(o))return!0}return!1}(s,t)){r.$shared=!1;a=La(s,n=ro(n)?n():n,this.createResolver(e,n,o))}for(const c of t)r[c]=a[c];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=bl(this._resolverCache,e,n);return Fs(t)?La(r,t,void 0,i):r}}function bl(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:xa(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const Tl=e=>Fs(e)&&Object.getOwnPropertyNames(e).some((t=>ro(e[t])));const Cl=["top","bottom","left","right","chartArea"];function Al(e,t){return"top"===e||"bottom"===e||-1===Cl.indexOf(e)&&"x"===t}function wl(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Rl(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ks(n&&n.onComplete,[e],t)}function Il(e){const t=e.chart,n=t.options.animation;Ks(n&&n.onProgress,[e],t)}function Nl(e){return tc()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ol={},kl=e=>{const t=Nl(e);return Object.values(Ol).filter((e=>e.canvas===t)).pop()};function Dl(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}function Pl(e,t,n){return e.options.clip?e[n]:t[n]}class xl{static register(){ol.add(...arguments),Ll()}static unregister(){ol.remove(...arguments),Ll()}constructor(e,t){const n=this.config=new Sl(t),i=Nl(e),r=kl(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!tc()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?kd:zd}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,c=a&&a.height,d=a&&a.width;this.id=Us(),this.ctx=o,this.canvas=a,this.width=d,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new al,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],Ol[this.id]=this,o&&a?(Ic.listen(this,"complete",Rl),Ic.listen(this,"progress",Il),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return js(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ol}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ua(this.canvas,this.ctx),this}stop(){return Ic.stop(this),this}resize(e,t){Ic.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,uc(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Ks(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){zs(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=hl(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),zs(r,(t=>{const r=t.options,s=r.id,o=hl(s,r),a=Gs(r.type,t.dtype);void 0!==r.position&&Al(r.position,o)===Al(t.dposition)||(r.position=t.dposition),i[s]=!0;let c=null;if(s in n&&n[s].type===a)c=n[s];else{c=new(ol.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[c.id]=c}c.init(r,e)})),zs(i,((e,t)=>{e||delete n[t]})),zs(n,(e=>{Nd.configure(this,e,e.options),Nd.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(wl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||ll(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=ol.getController(s),{datasetElementType:i,dataElementType:o}=aa.datasets[s];Object.assign(t,{dataElementType:ol.getElement(o),datasetElementType:i&&ol.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){zs(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:e}=this.getDatasetMeta(c),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||zs(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wl("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){zs(this.scales,(e=>{Nd.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);so(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){Dl(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!so(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Nd.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],zs(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,ro(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ic.has(this)?this.attached&&!Ic.running(this)&&Ic.start(this):(this.draw(),Rl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,i=!n.disabled,r=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Pl(n,t,"left"),right:Pl(n,t,"right"),top:Pl(i,t,"top"),bottom:Pl(i,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&ma(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&ga(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return fa(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=gd.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Pa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);io(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ic.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ua(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ol[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};zs(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){zs(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},zs(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!Ys(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Ks(r.onHover,[e,o,this],this),a&&Ks(r.onClick,[e,o,this],this));const d=!Ys(o,i);return(d||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=c,d}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function Ll(){return zs(xl.instances,(e=>e._plugins.invalidate()))}function Ml(e,t,n,i){const r=function(e){return Ra(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return No(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:No(r.innerStart,0,o),innerEnd:No(r.innerEnd,0,o)}}function Ul(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function jl(e,t,n,i,r,s){const{x:o,y:a,startAngle:c,pixelMargin:d,innerRadius:l}=t,u=Math.max(t.outerRadius+i+n-d,0),h=l>0?l+i+n+d:0;let p=0;const f=r-c;if(i){const e=((l>0?l-i:0)+(u>0?u-i:0))/2;p=(f-(0!==e?f*e/(e+i):f))/2}const m=(f-Math.max(.001,f*u-n/oo)/u)/2,g=c+m+p,E=r-m-p,{outerStart:_,outerEnd:v,innerStart:y,innerEnd:S}=Ml(t,h,u,E-g),b=u-_,T=u-v,C=g+_/b,A=E-v/T,w=h+y,R=h+S,I=g+y/w,N=E-S/R;if(e.beginPath(),s){const t=(C+A)/2;if(e.arc(o,a,u,C,t),e.arc(o,a,u,t,A),v>0){const t=Ul(T,A,o,a);e.arc(t.x,t.y,v,A,E+ho)}const n=Ul(R,E,o,a);if(e.lineTo(n.x,n.y),S>0){const t=Ul(R,N,o,a);e.arc(t.x,t.y,S,E+ho,N+Math.PI)}const i=(E-S/h+(g+y/h))/2;if(e.arc(o,a,h,E-S/h,i,!0),e.arc(o,a,h,i,g+y/h,!0),y>0){const t=Ul(w,I,o,a);e.arc(t.x,t.y,y,I+Math.PI,g-ho)}const r=Ul(b,g,o,a);if(e.lineTo(r.x,r.y),_>0){const t=Ul(b,C,o,a);e.arc(t.x,t.y,_,g-ho,C)}}else{e.moveTo(o,a);const t=Math.cos(C)*u+o,n=Math.sin(C)*u+a;e.lineTo(t,n);const i=Math.cos(A)*u+o,r=Math.sin(A)*u+a;e.lineTo(i,r)}e.closePath()}function Vl(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:c}=t,{borderWidth:d,borderJoinStyle:l,borderDash:u,borderDashOffset:h}=c,p="inner"===c.borderAlign;if(!d)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*d,e.lineJoin=l||"round"):(e.lineWidth=d,e.lineJoin=l||"bevel");let f=t.endAngle;if(s){jl(e,t,n,i,f,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(f=o+(a%ao||ao))}p&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=t;let d=r/a;e.beginPath(),e.arc(s,o,a,i-d,n+d),c>r?(d=r/c,e.arc(s,o,c,n+d,i-d,!0)):e.arc(s,o,r,n+ho,i-ho),e.closePath(),e.clip()}(e,t,f),s||(jl(e,t,n,i,f,r),e.stroke())}Bt(xl,"defaults",aa),Bt(xl,"instances",Ol),Bt(xl,"overrides",na),Bt(xl,"registry",ol),Bt(xl,"version","4.4.2"),Bt(xl,"getChart",kl);class Fl extends Yd{constructor(e){super(),Bt(this,"circumference",void 0),Bt(this,"endAngle",void 0),Bt(this,"fullCircles",void 0),Bt(this,"innerRadius",void 0),Bt(this,"outerRadius",void 0),Bt(this,"pixelMargin",void 0),Bt(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=Co(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:d,circumference:l}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=Gs(l,a-o)>=ao||Io(r,o,a),p=Oo(s,c+u,d+u);return h&&p}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:c}=this.options,d=(i+r)/2,l=(s+o+c+a)/2;return{x:t+Math.cos(d)*l,y:n+Math.sin(d)*l}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ao?Math.floor(n/ao):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(oo,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let c=t.endAngle;if(s){jl(e,t,n,i,c,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(c=o+(a%ao||ao))}jl(e,t,n,i,c,r),e.fill()}(e,this,a,r,s),Vl(e,this,a,r,s),e.restore()}}function Bl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Gs(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Gs(n.borderDash,t.borderDash)),e.lineDashOffset=Gs(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Gs(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Gs(n.borderWidth,t.borderWidth),e.strokeStyle=Gs(n.borderColor,t.borderColor)}function Wl(e,t,n){e.lineTo(n.x,n.y)}function Gl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,c=Math.max(r,o),d=Math.min(s,a),l=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:t.loop,ilen:d<c&&!l?i+d-c:d-c}}function Hl(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:c,ilen:d}=Gl(r,n,i),l=function(e){return e.stepped?Ea:e.tension||"monotone"===e.cubicInterpolationMode?_a:Wl}(s);let u,h,p,{move:f=!0,reverse:m}=i||{};for(u=0;u<=d;++u)h=r[(a+(m?d-u:u))%o],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):l(e,p,h,m,s.stepped),p=h);return c&&(h=r[(a+(m?d:0))%o],l(e,p,h,m,s.stepped)),!!c}function Kl(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=Gl(r,n,i),{move:c=!0,reverse:d}=i||{};let l,u,h,p,f,m,g=0,E=0;const _=e=>(o+(d?a-e:e))%s,v=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(c&&(u=r[_(0)],e.moveTo(u.x,u.y)),l=0;l<=a;++l){if(u=r[_(l)],u.skip)continue;const t=u.x,n=u.y,i=0|t;i===h?(n<p?p=n:n>f&&(f=n),g=(E*g+t)/++E):(v(),e.lineTo(t,n),h=i,E=0,p=f=n),m=n}v()}function zl(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Kl:Hl}Bt(Fl,"id","arc"),Bt(Fl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Bt(Fl,"defaultRoutes",{backgroundColor:"backgroundColor"}),Bt(Fl,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Yl="function"===typeof Path2D;function ql(e,t,n,i){Yl&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),Bl(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,o=zl(t);for(const a of r)Bl(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class Jl extends Yd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;ec(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return Cc(e,!0===i?[{start:o,end:a,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let o,a=t,c=e[t];for(o=t+1;o<=n;++o){const n=e[o%r];n.skip||n.stop?c.skip||(i=!1,s.push({start:t%r,end:(o-1)%r,loop:i}),t=a=n.stop?o:null):(a=o,c.skip&&(t=o)),c=n}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!e._fullLoop&&0===o&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=Tc(this,{property:t,start:i,end:i});if(!s.length)return;const o=[],a=function(e){return e.stepped?mc:e.tension||"monotone"===e.cubicInterpolationMode?gc:fc}(n);let c,d;for(c=0,d=s.length;c<d;++c){const{start:d,end:l}=s[c],u=r[d],h=r[l];if(u===h){o.push(u);continue}const p=a(u,h,Math.abs((i-u[t])/(h[t]-u[t])),n.stepped);p[t]=e[t],o.push(p)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return zl(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=zl(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)s&=r(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),ql(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ql(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}Bt(Jl,"id","line"),Bt(Jl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Bt(Jl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Bt(Jl,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Xl extends Yd{constructor(e){super(),Bt(this,"parsed",void 0),Bt(this,"skip",void 0),Bt(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return Ql(this,e,"x",t)}inYRange(e,t){return Ql(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!fa(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,ha(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Zl(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,c,d,l,u;return e.horizontal?(u=o/2,a=Math.min(n,r),c=Math.max(n,r),d=i-u,l=i+u):(u=s/2,a=n-u,c=n+u,d=Math.min(i,r),l=Math.max(i,r)),{left:a,top:d,right:c,bottom:l}}function $l(e,t,n,i){return e?0:No(t,n,i)}function eu(e){const t=Zl(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=Ia(i);return{t:$l(r.top,s.top,0,n),r:$l(r.right,s.right,0,t),b:$l(r.bottom,s.bottom,0,n),l:$l(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Na(r),o=Math.min(t,n),a=e.borderSkipped,c=i||Fs(r);return{topLeft:$l(!c||a.top||a.left,s.topLeft,0,o),topRight:$l(!c||a.top||a.right,s.topRight,0,o),bottomLeft:$l(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:$l(!c||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function tu(e,t,n,i){const r=null===t,s=null===n,o=e&&!(r&&s)&&Zl(e,i);return o&&(r||Oo(t,o.left,o.right))&&(s||Oo(n,o.top,o.bottom))}function nu(e,t){e.rect(t.x,t.y,t.w,t.h)}function iu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}Bt(Xl,"id","point"),Bt(Xl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Bt(Xl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class ru extends Yd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=eu(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?ba:nu;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),o(e,iu(s,t,r)),e.clip(),o(e,iu(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,iu(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return tu(this,e,t,n)}inXRange(e,t){return tu(this,e,null,t)}inYRange(e,t){return tu(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Bt(ru,"id","bar"),Bt(ru,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Bt(ru,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const su=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class ou extends Yd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ks(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=ka(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=su(n,r);let c,d;t.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(s,r,o,a)+10):(d=this.maxHeight,c=this._fitCols(s,i,o,a)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+o;let l=e;r.textAlign="left",r.textBaseline="middle";let u=-1,h=-d;return this.legendItems.forEach(((e,p)=>{const f=n+t/2+r.measureText(e.text).width;(0===p||c[c.length-1]+f+2*o>s)&&(l+=d,c[c.length-(p>0?0:1)]=0,h+=d,u++),a[p]={left:0,top:h,row:u,width:f,height:i},c[c.length-1]+=f+o})),l}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],d=s-e;let l=o,u=0,h=0,p=0,f=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),o=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=au(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,r,e,i);s>0&&h+g+2*o>d&&(l+=u+o,c.push({width:u,height:h}),p+=u+o,f++,u=h=0),a[s]={left:p,top:h,col:f,width:m,height:g},u=Math.max(u,m),h+=g+o})),l+=u,c.push({width:u,height:h}),l}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=Ec(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=Fo(n,this.left+i,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=Fo(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+e+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=Fo(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=Fo(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;ma(e,this),this._draw(),ga(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,o=aa.color,a=Ec(e.rtl,this.left,this.width),c=ka(s.font),{padding:d}=s,l=c.size,u=l/2;let h;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=su(s,l),g=this.isHorizontal(),E=this._computeTitleHeight();h=g?{x:Fo(r,this.left+d,this.right-n[0]),y:this.top+d+E,line:0}:{x:this.left+d,y:Fo(r,this.top+E+d,this.bottom-t[0].height),line:0},_c(this.ctx,e.textDirection);const _=m+d;this.legendItems.forEach(((v,y)=>{i.strokeStyle=v.fontColor,i.fillStyle=v.fontColor;const S=i.measureText(v.text).width,b=a.textAlign(v.textAlign||(v.textAlign=s.textAlign)),T=p+u+S;let C=h.x,A=h.y;a.setWidth(this.width),g?y>0&&C+T+d>this.right&&(A=h.y+=_,h.line++,C=h.x=Fo(r,this.left+d,this.right-n[h.line])):y>0&&A+_>this.bottom&&(C=h.x=C+t[h.line].width+d,h.line++,A=h.y=Fo(r,this.top+E+d,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;i.save();const r=Gs(n.lineWidth,1);if(i.fillStyle=Gs(n.fillStyle,o),i.lineCap=Gs(n.lineCap,"butt"),i.lineDashOffset=Gs(n.lineDashOffset,0),i.lineJoin=Gs(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Gs(n.strokeStyle,o),i.setLineDash(Gs(n.lineDash,[])),s.usePointStyle){const o={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},c=a.xPlus(e,p/2);pa(i,o,c,t+u,s.pointStyleWidth&&p)}else{const s=t+Math.max((l-f)/2,0),o=a.leftForLtr(e,p),c=Na(n.borderRadius);i.beginPath(),Object.values(c).some((e=>0!==e))?ba(i,{x:o,y:s,w:p,h:f,radius:c}):i.rect(o,s,p,f),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(C),A,v),C=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(b,C+p+u,g?C+T:this.right,e.rtl),function(e,t,n){Sa(i,n.text,e,t+m/2,c,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(C),A,v),g)h.x+=T+d;else if("string"!==typeof v.text){const e=c.lineHeight;h.y+=au(v,e)+d}else h.y+=_})),vc(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=ka(t.font),i=Oa(t.padding);if(!t.display)return;const r=Ec(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,c=i.top+a;let d,l=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+c,l=Fo(e.align,l,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);d=c+Fo(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Fo(o,l,l+u);s.textAlign=r.textAlign(Vo(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Sa(s,t.text,h,d,n)}_computeTitleHeight(){const e=this.options.title,t=ka(e.font),n=Oa(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Oo(e,this.left,this.right)&&Oo(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Oo(e,i.left,i.left+i.width)&&Oo(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Ks(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Ks(t.onHover,[e,n,this],this)}else n&&Ks(t.onClick,[e,n,this],this)}}function au(e,t){return t*(e.text?e.text.length:0)}var cu={id:"legend",_element:ou,start(e,t,n){const i=e.legend=new ou({ctx:e.ctx,options:n,chart:e});Nd.configure(e,i,n),Nd.addBox(e,i)},stop(e){Nd.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Nd.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const c=e.controller.getStyle(n?0:void 0),d=Oa(c.borderWidth);return{text:t[e.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};new WeakMap;const du={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}const o=[...i].reduce(((e,t)=>e+t))/i.size;return{x:o,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=Ao(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function lu(e,t){return t&&(Vs(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function uu(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function hu(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function pu(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,c=ka(t.bodyFont),d=ka(t.titleFont),l=ka(t.footerFont),u=s.length,h=r.length,p=i.length,f=Oa(t.padding);let m=f.height,g=0,E=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(E+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*d.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),E){m+=p*(t.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(E-p)*c.lineHeight+(E-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*l.lineHeight+(h-1)*t.footerSpacing);let _=0;const v=function(e){g=Math.max(g,n.measureText(e).width+_)};return n.save(),n.font=d.string,zs(e.title,v),n.font=c.string,zs(e.beforeBody.concat(e.afterBody),v),_=t.displayColors?o+2+t.boxPadding:0,zs(i,(e=>{zs(e.before,v),zs(e.lines,v),zs(e.after,v)})),_=0,n.font=l.string,zs(e.footer,v),n.restore(),g+=f.width,{width:g,height:m}}function fu(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:c}}=e;let d="center";return"center"===i?d=r<=(a+c)/2?"left":"right":r<=s/2?d="left":r>=o-s/2&&(d="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(d,e,t,n)&&(d="center"),d}function mu(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||fu(e,t,n,i),yAlign:i}}function gu(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:c}=n,d=r+s,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:p}=Na(o);let f=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,c,d);return"center"===c?"left"===a?f+=d:"right"===a&&(f-=d):"left"===a?f-=Math.max(l,h)+r:"right"===a&&(f+=Math.max(u,p)+r),{x:No(f,0,i.width-t.width),y:No(m,0,i.height-t.height)}}function Eu(e,t,n){const i=Oa(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function _u(e){return lu([],uu(e))}function vu(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const yu={beforeTitle:Ms,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Ms,beforeBody:Ms,beforeLabel:Ms,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return js(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ms,afterBody:Ms,beforeFooter:Ms,footer:Ms,afterFooter:Ms};function Su(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?yu[t].call(n,i):r}class bu extends Yd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new Dc(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Pa(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=Su(n,"beforeTitle",this,e),r=Su(n,"title",this,e),s=Su(n,"afterTitle",this,e);let o=[];return o=lu(o,uu(i)),o=lu(o,uu(r)),o=lu(o,uu(s)),o}getBeforeBody(e,t){return _u(Su(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return zs(e,(e=>{const t={before:[],lines:[],after:[]},r=vu(n,e);lu(t.before,uu(Su(r,"beforeLabel",this,e))),lu(t.lines,Su(r,"label",this,e)),lu(t.after,uu(Su(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return _u(Su(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Su(n,"beforeFooter",this,e),r=Su(n,"footer",this,e),s=Su(n,"afterFooter",this,e);let o=[];return o=lu(o,uu(i)),o=lu(o,uu(r)),o=lu(o,uu(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,c=[];for(o=0,a=t.length;o<a;++o)c.push(hu(this.chart,t[o]));return e.filter&&(c=c.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(c=c.sort(((t,i)=>e.itemSort(t,i,n)))),zs(c,(t=>{const n=vu(e.callbacks,t);i.push(Su(n,"labelColor",this,t)),r.push(Su(n,"labelPointStyle",this,t)),s.push(Su(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=c,c}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=du[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=pu(this,n),o=Object.assign({},e,t),a=mu(this.chart,n,o),c=gu(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:c.x,y:c.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:c,bottomLeft:d,bottomRight:l}=Na(o),{x:u,y:h}=e,{width:p,height:f}=t;let m,g,E,_,v,y;return"center"===r?(v=h+f/2,"left"===i?(m=u,g=m-s,_=v+s,y=v-s):(m=u+p,g=m+s,_=v-s,y=v+s),E=m):(g="left"===i?u+Math.max(a,d)+s:"right"===i?u+p-Math.max(c,l)-s:this.caretX,"top"===r?(_=h,v=_-s,m=g-s,E=g+s):(_=h+f,v=_+s,m=g+s,E=g-s),y=_),{x1:m,x2:g,x3:E,y1:_,y2:v,y3:y}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const c=Ec(n.rtl,this.x,this.width);for(e.x=Eu(this,n.titleAlign,n),t.textAlign=c.textAlign(n.titleAlign),t.textBaseline="middle",s=ka(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],c.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:c}=r,d=ka(r.bodyFont),l=Eu(this,"left",r),u=i.x(l),h=a<d.lineHeight?(d.lineHeight-a)/2:0,p=t.y+h;if(r.usePointStyle){const t={radius:Math.min(c,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(u,c)+c/2,d=p+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,ha(e,t,n,d),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,ha(e,t,n,d)}else{e.lineWidth=Fs(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(u,c),n=i.leftForLtr(i.xPlus(u,1),c-2),o=Na(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ba(e,{x:t,y:p,w:c,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),ba(e,{x:n,y:p+1,w:c-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,p,c,a),e.strokeRect(t,p,c,a),e.fillStyle=s.backgroundColor,e.fillRect(n,p+1,c-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:c,boxPadding:d}=n,l=ka(n.bodyFont);let u=l.lineHeight,h=0;const p=Ec(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+u/2),e.y+=u+r},m=p.textAlign(s);let g,E,_,v,y,S,b;for(t.textAlign=s,t.textBaseline="middle",t.font=l.string,e.x=Eu(this,m,n),t.fillStyle=n.bodyColor,zs(this.beforeBody,f),h=o&&"right"!==m?"center"===s?c/2+d:c+2+d:0,v=0,S=i.length;v<S;++v){for(g=i[v],E=this.labelTextColors[v],t.fillStyle=E,zs(g.before,f),_=g.lines,o&&_.length&&(this._drawColorBox(t,e,v,p,n),u=Math.max(l.lineHeight,a)),y=0,b=_.length;y<b;++y)f(_[y]),u=l.lineHeight;zs(g.after,f)}h=0,u=l.lineHeight,zs(this.afterBody,f),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=Ec(n.rtl,this.x,this.width);for(e.x=Eu(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=ka(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:c,height:d}=n,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:p}=Na(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+l,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+c-u,a),t.quadraticCurveTo(o+c,a,o+c,a+u),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+c,a+d-p),t.quadraticCurveTo(o+c,a+d,o+c-p,a+d),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+h,a+d),t.quadraticCurveTo(o,a+d,o,a+d-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+l),t.quadraticCurveTo(o,a,o+l,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=du[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=pu(this,e),o=Object.assign({},n,this._size),a=mu(t,e,o),c=gu(e,o,a,t);i._to===c.x&&r._to===c.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Oa(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),_c(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),vc(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!Ys(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!Ys(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=du[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}Bt(bu,"positioners",du);var Tu={id:"tooltip",_element:bu,positioners:du,afterInit(e,t,n){n&&(e.tooltip=new bu({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yu},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Cu(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function Au(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class wu extends il{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(js(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:No(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Cu(n,e,Gs(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return Au.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ru(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:c,maxTicks:d,maxDigits:l,includeBounds:u}=e,h=r||1,p=d-1,{min:f,max:m}=t,g=!js(s),E=!js(o),_=!js(c),v=(m-f)/(l+1);let y,S,b,T,C=_o((m-f)/p/h)*h;if(C<1e-14&&!g&&!E)return[{value:f},{value:m}];T=Math.ceil(m/C)-Math.floor(f/C),T>p&&(C=_o(T*C/p/h)*h),js(a)||(y=Math.pow(10,a),C=Math.ceil(C*y)/y),"ticks"===i?(S=Math.floor(f/C)*C,b=Math.ceil(m/C)*C):(S=f,b=m),g&&E&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,C/1e3)?(T=Math.round(Math.min((o-s)/C,d)),C=(o-s)/T,S=s,b=o):_?(S=g?s:S,b=E?o:b,T=c-1,C=(b-S)/T):(T=(b-S)/C,T=Eo(T,Math.round(T),C/1e3)?Math.round(T):Math.ceil(T));const A=Math.max(To(C),To(S));y=Math.pow(10,js(a)?A:a),S=Math.round(S*y)/y,b=Math.round(b*y)/y;let w=0;for(g&&(u&&S!==s?(n.push({value:s}),S<s&&w++,Eo(Math.round((S+w*C)*y)/y,s,Iu(s,v,e))&&w++):S<s&&w++);w<T;++w){const e=Math.round((S+w*C)*y)/y;if(E&&e>o)break;n.push({value:e})}return E&&u&&b!==o?n.length&&Eo(n[n.length-1].value,o,Iu(o,v,e))?n[n.length-1].value=o:n.push({value:o}):E&&b!==o||n.push({value:b}),n}function Iu(e,t,n){let{horizontal:i,minRotation:r}=n;const s=So(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}Bt(wu,"id","category"),Bt(wu,"defaults",{ticks:{callback:Au}});class Nu extends il{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return js(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=go(i),t=go(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=Ru({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&yo(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return $o(e,this.chart.options.locale,this.options.ticks.format)}}class Ou extends Nu{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Bs(e)?e:0,this.max=Bs(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=So(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Bt(Ou,"id","linear"),Bt(Ou,"defaults",{ticks:{callback:ta.formatters.numeric}});const ku=e=>Math.floor(mo(e)),Du=(e,t)=>Math.pow(10,ku(e)+t);function Pu(e){return 1===e/Math.pow(10,ku(e))}function xu(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function Lu(e,t){let{min:n,max:i}=t;n=Ws(e.min,n);const r=[],s=ku(n);let o=function(e,t){let n=ku(t-e);for(;xu(e,t,n)>10;)n++;for(;xu(e,t,n)<10;)n--;return Math.min(n,ku(e))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const c=Math.pow(10,o),d=s>o?Math.pow(10,s):0,l=Math.round((n-d)*a)/a,u=Math.floor((n-d)/c/10)*c*10;let h=Math.floor((l-u)/Math.pow(10,o)),p=Ws(e.min,Math.round((d+u+h*Math.pow(10,o))*a)/a);for(;p<i;)r.push({value:p,major:Pu(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),p=Math.round((d+u+h*Math.pow(10,o))*a)/a;const f=Ws(e.max,p);return r.push({value:f,major:Pu(f),significand:h}),r}class Mu extends il{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Nu.prototype.parse.apply(this,[e,t]);if(0!==n)return Bs(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Bs(e)?Math.max(0,e):null,this.max=Bs(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Bs(this._userMin)&&(this.min=e===Du(this.min,0)?Du(this.min,-1):Du(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(Du(n,-1)),s(Du(i,1)))),n<=0&&r(Du(i,-1)),i<=0&&s(Du(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=Lu({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&yo(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":$o(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=mo(e),this._valueRange=mo(this.max)-mo(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(mo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Uu(e){const t=e.ticks;if(t.display&&e.display){const e=Oa(t.backdropPadding);return Gs(t.font&&t.font.size,aa.font.size)+e.height}return 0}function ju(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Vu(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?oo/s:0;for(let u=0;u<s;u++){const s=o.setContext(e.getPointLabelContext(u));r[u]=s.padding;const h=e.getPointPosition(u,e.drawingArea+r[u],a),p=ka(s.font),f=(c=e.ctx,d=p,l=Vs(l=e._pointLabels[u])?l:[l],{w:da(c,d.string,l),h:l.length*d.lineHeight});i[u]=f;const m=Ro(e.getIndexAngle(u)+a),g=Math.round(bo(m));Fu(n,t,m,ju(g,h.x,f.w,0,180),ju(g,h.y,f.h,90,270))}var c,d,l;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:Uu(s)/2,additionalAngle:o?oo/r:0};let d;for(let l=0;l<r;l++){c.padding=n[l],c.size=t[l];const r=Bu(e,l,c);i.push(r),"auto"===a&&(r.visible=Wu(r,d),r.visible&&(d=r))}return i}(e,i,r)}function Fu(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(c=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-c)):r.end>t.b&&(c=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+c))}function Bu(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,c=e.getPointPosition(t,i+r+o,s),d=Math.round(bo(Ro(c.angle+ho))),l=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(c.y,a.h,d),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(d),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(c.x,a.w,u);return{visible:!0,x:c.x,y:l,textAlign:u,left:h,top:l,right:h+a.w,bottom:l+a.h}}function Wu(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(fa({x:n,y:i},t)||fa({x:n,y:s},t)||fa({x:r,y:i},t)||fa({x:r,y:s},t))}function Gu(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!js(a)){const n=Na(t.borderRadius),c=Oa(t.backdropPadding);e.fillStyle=a;const d=i-c.left,l=r-c.top,u=s-i+c.width,h=o-r+c.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),ba(e,{x:d,y:l,w:u,h:h,radius:n}),e.fill()):e.fillRect(d,l,u,h)}}function Hu(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,ao);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}Bt(Mu,"id","logarithmic"),Bt(Mu,"defaults",{ticks:{callback:ta.formatters.logarithmic,major:{enabled:!0}}});class Ku extends Nu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Oa(Uu(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Bs(e)&&!isNaN(e)?e:0,this.max=Bs(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Uu(this.options))}generateTickLabels(e){Nu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Ks(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?Vu(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return Ro(e*(ao/(this._pointLabels.length||1))+So(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(js(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(js(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Pa(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-ho+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Hu(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let o,a,c;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));Gu(n,s,t);const o=ka(s.font),{x:a,y:c,textAlign:d}=t;Sa(n,e._pointLabels[r],a,c+o.lineHeight/2,o,{color:s.color,textAlign:d,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=i.setContext(n),c=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:c}=t;!o&&!i||!a||!c||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),Hu(e,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,c)}})),n.display){for(e.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),c=ka(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=c.string,s=e.measureText(i.label).width,e.fillStyle=a.backdropColor;const t=Oa(a.backdropPadding);e.fillRect(-s/2-t.left,-r-c.size/2-t.top,s+t.width,c.size+t.height)}Sa(e,i.label,0,-r,c,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}Bt(Ku,"id","radialLinear"),Bt(Ku,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ta.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Bt(Ku,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Bt(Ku,"descriptors",{angleLines:{_fallback:"grid"}});const zu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yu=Object.keys(zu);function qu(e,t){return e-t}function Ju(e,t){if(js(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),Bs(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!vo(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function Qu(e,t,n,i){const r=Yu.length;for(let s=Yu.indexOf(e);s<r-1;++s){const e=zu[Yu[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return Yu[s]}return Yu[r-1]}function Xu(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=ko(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function Zu(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=n[a],c>=0&&(t[c].major=!0);return t}(e,i,r,n):i}class $u extends il{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new dd(e.adapters.date);i.init(t),Zs(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Ju(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=Bs(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Bs(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?Qu(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=Yu.length-1;s>=Yu.indexOf(n);s--){const n=Yu[s];if(zu[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return Yu[n?Yu.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Yu.indexOf(e)+1,n=Yu.length;t<n;++t)if(zu[Yu[t]].common)return Yu[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),Zu(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=No(i,0,s),r=No(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||Qu(r.minUnit,t,n,this._getLabelCapacity(t)),o=Gs(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,c=vo(a)||!0===a,d={};let l,u,h=t;if(c&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,c?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const p="data"===i.ticks.source&&this.getDataTimestamps();for(l=h,u=0;l<n;l=+e.add(l,o,s),u++)Xu(d,l,p);return l!==n&&"ticks"!==i.bounds&&1!==u||Xu(d,l,p),Object.keys(d).sort(qu).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Ks(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,c=this._majorUnit,d=a&&o[a],l=c&&o[c],u=n[t],h=c&&l&&u&&u.major;return this._adapter.format(e,i||(h?l:d))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=So(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Zu(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(Ju(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Mo(e.sort(qu))}}function eh(e,t,n){let i,r,s,o,a=0,c=e.length-1;n?(t>=e[a].pos&&t<=e[c].pos&&({lo:a,hi:c}=Do(e,"pos",t)),({pos:i,time:s}=e[a]),({pos:r,time:o}=e[c])):(t>=e[a].time&&t<=e[c].time&&({lo:a,hi:c}=Do(e,"time",t)),({time:i,pos:s}=e[a]),({time:r,pos:o}=e[c]));const d=r-i;return d?s+(o-s)*(t-i)/d:s}Bt($u,"id","time"),Bt($u,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class th extends $u{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=eh(t,this.min),this._tableRange=eh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,o,a,c,d;for(s=0,o=e.length;s<o;++s)c=e[s],c>=t&&c<=n&&i.push(c);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)d=i[s+1],a=i[s-1],c=i[s],Math.round((d+a)/2)!==c&&r.push({time:c,pos:s/(o-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(eh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return eh(this._table,n*this._tableRange+this._minPos,!0)}}Bt(th,"id","timeseries"),Bt(th,"defaults",$u.defaults);const nh="label";function ih(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function rh(e,t){e.labels=t}function sh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nh;const i=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):{...t}}))}function oh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nh;const n={labels:[],datasets:[]};return rh(n,e.labels),sh(n,e.datasets,t),n}function ah(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:a,data:c,options:d,plugins:l=[],fallbackContent:u,updateMode:h,...p}=e,f=(0,i.useRef)(null),m=(0,i.useRef)(),g=()=>{f.current&&(m.current=new xl(f.current,{type:a,data:oh(c,o),options:d&&{...d},plugins:l}),ih(t,m.current))},E=()=>{ih(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,i.useEffect)((()=>{!s&&m.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,d)}),[s,d]),(0,i.useEffect)((()=>{!s&&m.current&&rh(m.current.config.data,c.labels)}),[s,c.labels]),(0,i.useEffect)((()=>{!s&&m.current&&c.datasets&&sh(m.current.config.data,c.datasets,o)}),[s,c.datasets]),(0,i.useEffect)((()=>{m.current&&(s?(E(),setTimeout(g)):m.current.update(h))}),[s,d,c.labels,c.datasets,h]),(0,i.useEffect)((()=>{m.current&&(E(),setTimeout(g))}),[a]),(0,i.useEffect)((()=>(g(),()=>E())),[]),i.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:r},p),u)}const ch=(0,i.forwardRef)(ah);function dh(e,t){return xl.register(t),(0,i.forwardRef)(((t,n)=>i.createElement(ch,Object.assign({},t,{ref:n,type:e}))))}const lh=dh("doughnut",td);xl.register(Fl,Tu,cu);var uh=["FF8447","FFC247","FFFF47","C2FF47","84FF47","47FF47","47FF84","47FFC2","47FFFF","47C2FF","4784FF","406EE5","4747FF","8447FF","C247FF","FF47FF","F40084","FF47C2","FF4784","FF4747"].map((e=>"rgb(".concat(parseInt(e.slice(0,2),16),", ").concat(parseInt(e.slice(2,4),16),", ").concat(parseInt(e.slice(4,6),16),")")));const hh={plugins:{legend:{display:!1}}};function ph(e){let{stats:t}=e;const r=Se(),{players:s,totalTickets:o,totalViewers:a,game:c}=t,[d,l]=(0,i.useState)(!0),u=[],h=[],p=[],f=[],m=[];for(var g in s)u.push(s[g].nickName),h.push(s[g].amount),p.push(s[g].viewers),f.push(s[g].percentage),m.push(s[g].percentageViewers);const E={labels:u,datasets:[{label:d?"BNB":"viewers",data:d?h:p,backgroundColor:uh,borderWidth:0}]};return"no-tickets"===t?(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsx)("h1",{children:"No one bought any tickets yet..."})}):(0,ke.jsx)(ke.Fragment,{children:(0,ke.jsxs)("div",{className:"analytics too-low-fix",children:[(0,ke.jsxs)("div",{className:"upper",children:[(0,ke.jsx)("img",{src:n(6235),style:{cursor:"auto"}}),(0,ke.jsx)("h1",{children:c}),(0,ke.jsx)("img",{className:"clickable",src:n(3151),onClick:()=>r(Rn(""))})]}),(0,ke.jsxs)("div",{className:"display",children:[(0,ke.jsxs)("div",{className:d?"active":"inactive",onClick:()=>l(!0),children:[(0,ke.jsx)("p",{children:o}),(0,ke.jsx)("img",{src:n(5948)("./".concat(d?"bnb-selected":"bnb",".png"))})]}),(0,ke.jsxs)("div",{className:d?"inactive":"active",onClick:()=>l(!1),children:[(0,ke.jsx)("p",{children:a}),(0,ke.jsx)("img",{src:n(5948)("./".concat(d?"viewers":"viewers-selected",".png"))})]})]}),(0,ke.jsxs)("div",{className:"details",children:[(0,ke.jsxs)("div",{className:"chart",children:[(0,ke.jsx)("p",{children:d?o:a}),(0,ke.jsx)(lh,{data:E,options:hh})]}),(0,ke.jsxs)("div",{className:"data",children:[(0,ke.jsx)("div",{children:u.map(((e,t)=>(0,ke.jsxs)("div",{children:[(0,ke.jsx)("div",{style:{background:uh[t]},className:"circle"}),(0,ke.jsx)("p",{children:e})]},t)))}),d&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"amounts",children:h.map(((e,t)=>(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{children:e}),(0,ke.jsx)("img",{src:n(5300)})]},t)))}),(0,ke.jsx)("div",{className:"amounts",children:f.map(((e,t)=>(0,ke.jsx)("div",{children:(0,ke.jsxs)("p",{children:[e.toFixed(2),"%"]})},t)))})]}),!d&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"amounts",children:p.map(((e,t)=>(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{children:e}),(0,ke.jsx)("img",{src:n(5451)})]},t)))}),(0,ke.jsx)("div",{className:"amounts",children:m.map(((e,t)=>(0,ke.jsx)("div",{children:(0,ke.jsxs)("p",{children:[e.toFixed(2),"%"]})},t)))})]})]})]}),(0,ke.jsx)("div",{className:"done",onClick:()=>r(Rn("")),children:"Done"})]})})}function fh(e){let{video:t}=e;Se();return(0,i.useEffect)((()=>(document.documentElement.style.setProperty("--visibility","hidden"),()=>document.documentElement.style.setProperty("--visibility","visible"))),[]),(0,ke.jsx)("div",{className:"popup-video",children:(0,ke.jsx)("iframe",{src:t.slice(0,4)+"s"+t.slice(4),width:"100%",height:"100%",allow:"autoplay; fullscreen; encrypted-media; picture-in-picture",allowfullscreen:!0,frameborder:"0"})})}function mh(e){var t=Object.entries(e).filter((function(e){var t=e[1];return void 0!==t&&null!==t})).map((function(e){var t=e[0],n=e[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(String(n)))}));return t.length>0?"?".concat(t.join("&")):""}var gh=n(1694),Eh=n.n(gh),_h=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vh=function(){return vh=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},vh.apply(this,arguments)},yh=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}c((i=i.apply(e,t||[])).next())}))},Sh=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},bh=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};var Th=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openShareDialog=function(e){var n,i,r=t.props,s=r.onShareWindowClose,o=r.windowHeight,a=void 0===o?400:o,c=r.windowPosition,d=void 0===c?"windowCenter":c,l=r.windowWidth,u=void 0===l?550:l;!function(e,t,n){var i=t.height,r=t.width,s=bh(t,["height","width"]),o=vh({height:i,width:r,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},s),a=window.open(e,"",Object.keys(o).map((function(e){return"".concat(e,"=").concat(o[e])})).join(", "));if(n)var c=window.setInterval((function(){try{(null===a||a.closed)&&(window.clearInterval(c),n(a))}catch(e){console.error(e)}}),1e3)}(e,vh({height:a,width:u},"windowCenter"===d?(n=u,i=a,{left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-n/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-i/2}):function(e,t){return{top:(window.screen.height-t)/2,left:(window.screen.width-e)/2}}(u,a)),s)},t.handleClick=function(e){return yh(t,void 0,void 0,(function(){var t,n,i,r,s,o,a,c,d,l;return Sh(this,(function(u){switch(u.label){case 0:return t=this.props,n=t.beforeOnClick,i=t.disabled,r=t.networkLink,s=t.onClick,o=t.url,a=t.openShareDialogOnClick,c=t.opts,d=r(o,c),i?[2]:(e.preventDefault(),n?(l=n(),!(h=l)||"object"!==typeof h&&"function"!==typeof h||"function"!==typeof h.then?[3,2]:[4,l]):[3,2]);case 1:u.sent(),u.label=2;case 2:return a&&this.openShareDialog(d),s&&s(e,d),[2]}var h}))}))},t}return _h(t,e),t.prototype.render=function(){var e=this.props,t=(e.beforeOnClick,e.children),n=e.className,r=e.disabled,s=e.disabledStyle,o=e.forwardedRef,a=(e.networkLink,e.networkName),c=(e.onShareWindowClose,e.openShareDialogOnClick,e.opts,e.resetButtonStyle),d=e.style,l=(e.url,e.windowHeight,e.windowPosition,e.windowWidth,bh(e,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","networkLink","networkName","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","url","windowHeight","windowPosition","windowWidth"])),u=Eh()("react-share__ShareButton",{"react-share__ShareButton--disabled":!!r,disabled:!!r},n),h=vh(vh(c?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},d),r&&s);return i.createElement("button",vh({},l,{"aria-label":l["aria-label"]||a,className:u,onClick:this.handleClick,ref:o,style:h}),t)},t.defaultProps={disabledStyle:{opacity:.6},openShareDialogOnClick:!0,resetButtonStyle:!0},t}(i.Component);const Ch=Th;var Ah=function(){return Ah=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ah.apply(this,arguments)};const wh=function(e,t,n,r){function s(s,o){var a=n(s),c=Ah({},s);return Object.keys(a).forEach((function(e){delete c[e]})),i.createElement(Ch,Ah({},r,c,{forwardedRef:o,networkName:e,networkLink:t,opts:n(s)}))}return s.displayName="ShareButton-".concat(e),(0,i.forwardRef)(s)};var Rh=wh("email",(function(e,t){var n=t.subject,i=t.body,r=t.separator;return"mailto:"+mh({subject:n,body:i?i+r+e:e})}),(function(e){return{subject:e.subject,body:e.body,separator:e.separator||" "}}),{openShareDialogOnClick:!1,onClick:function(e,t){window.location.href=t}});const Ih=Rh;var Nh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Oh=function(e){function t(t){var n=e.call(this,t)||this;return n.name="AssertionError",n}return Nh(t,e),t}(Error);function kh(e,t){if(!e)throw new Oh(t)}var Dh=wh("whatsapp",(function(e,t){var n=t.title,i=t.separator;return kh(e,"whatsapp.url"),"https://"+(/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)?"api":"web")+".whatsapp.com/send"+mh({text:n?n+i+e:e})}),(function(e){return{title:e.title,separator:e.separator||" "}}),{windowWidth:550,windowHeight:400});const Ph=Dh;var xh=wh("facebookmessenger",(function(e,t){var n=t.appId;return"https://www.facebook.com/dialog/send"+mh({link:e,redirect_uri:t.redirectUri||e,app_id:n,to:t.to})}),(function(e){return{appId:e.appId,redirectUri:e.redirectUri,to:e.to}}),{windowWidth:1e3,windowHeight:820});const Lh=xh;var Mh=wh("telegram",(function(e,t){var n=t.title;return kh(e,"telegram.url"),"https://telegram.me/share/url"+mh({url:e,text:n})}),(function(e){return{title:e.title}}),{windowWidth:550,windowHeight:400});const Uh=Mh;function jh(){const e=Se(),t=B(),{popup:r}=he((e=>e.generalModule)),{popupStats:s}=he((e=>e.generalModule));(0,i.useEffect)((()=>(r?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>document.body.classList.remove("no-scroll"))),[r]);const o=e=>"id"===e?r.substring(0,r.indexOf("/")):"name"===e?r.substring(r.indexOf("/")+1,r.indexOf("*")):r.substring(r.indexOf("*")+1);return r?"/"===r.charAt(0)?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen blur",onClick:()=>{e(Rn(""))},children:ns.tq&&(0,ke.jsx)("div",{onClick:()=>e(Rn("")),className:"popup-close-mobile",children:(0,ke.jsx)("p",{children:"Tap to close"})})}),(0,ke.jsxs)("div",{className:"confirm-exit",children:[(0,ke.jsx)("img",{src:n(6197)}),(0,ke.jsx)("h1",{children:"Confirm navigation"}),(0,ke.jsx)("p",{children:"If you are already live, this action will pause your stream, continue anyway?"}),(0,ke.jsxs)("div",{children:[(0,ke.jsx)("div",{onClick:()=>e(Rn("")),children:"Cancel"}),(0,ke.jsx)("div",{className:"action",onClick:()=>{e(Rn("")),t(r)},children:"Continue"})]})]})]}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen blur",onClick:()=>{e(Rn(""))},children:ns.tq&&(0,ke.jsx)("div",{onClick:()=>e(Rn("")),className:"popup-close-mobile",children:(0,ke.jsx)("p",{children:"Tap to close"})})}),(0,ke.jsxs)("section",{className:"popup",style:{zIndex:"100"},children:["stats"===r&&(0,ke.jsx)(ph,{stats:s}),"upload-event"===r&&(0,ke.jsxs)("div",{children:[(0,ke.jsx)("p",{style:{textAlign:"center"},children:"Uploading your event, this may take up to a minute..."}),(0,ke.jsxs)("div",{className:"loader loader-block",style:{marginTop:"30px",marginBottom:"30px"},children:[(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})]}),"6"===r.slice(0,1)&&(0,ke.jsxs)("div",{className:"event-link",children:[(0,ke.jsx)("p",{children:"Event created successfully!"}),(0,ke.jsx)("p",{children:"To get it confirmed, please send your opponent the link below:"}),(0,ke.jsxs)("div",{className:"share-wrapper",children:[(0,ke.jsxs)("div",{className:"copy",children:[(0,ke.jsx)("span",{children:"https://create.pikme.tv/#/confirm/"+o("id")}),(0,ke.jsx)("img",{onClick:()=>{navigator.clipboard.writeText("https://create.pikme.tv/#/confirm/"+o("id")),e(Nn("copied"))},src:n(8621)})]}),(0,ke.jsxs)("div",{className:"buttons",children:[(0,ke.jsx)(Ih,{className:"share-button email",url:"https://create.pikme.tv/#/confirm/"+o("id"),subject:"challenge ".concat(o("name"),"'s in his ").concat(o("game")," competition!")}),(0,ke.jsx)(Ph,{className:"share-button whatsapp",title:"Click this link to challenge ".concat(o("name"),"'s in his ").concat(o("game")," competition!"),url:"https://create.pikme.tv/#/confirm/"+o("id")}),(0,ke.jsx)(Lh,{className:"share-button facebook",url:"https://create.pikme.tv/#/confirm/"+r}),(0,ke.jsx)(Uh,{className:"share-button telegram",title:"Click this link to challenge ".concat(o("name"),"'s in his ").concat(o("game")," competition!"),url:"https://create.pikme.tv/#/confirm/"+o("id")})]})]}),(0,ke.jsx)("div",{className:"done",onClick:()=>{e(Rn("")),t("/")},children:"Done"})]}),"created"===r&&(0,ke.jsxs)("div",{className:"created",children:[(0,ke.jsx)("img",{src:n(9986)}),(0,ke.jsx)("h1",{children:"Event in progress"}),(0,ke.jsx)("p",{children:"The event was successfully created and is now awaiting approval. You can edit your event until the event is approved."}),(0,ke.jsx)("div",{className:"done",onClick:()=>{e(Rn("")),t("/")},children:"Done"})]}),"created-show"===r&&(0,ke.jsxs)("div",{className:"created",children:[(0,ke.jsx)("img",{src:n(9986)}),(0,ke.jsx)("h1",{children:"Show in progress"}),(0,ke.jsx)("p",{children:"The show was successfully created and is now awaiting approval."}),(0,ke.jsx)("div",{className:"done",onClick:()=>e(Rn("")),children:"Done"})]}),r.includes("cloudinary")&&(0,ke.jsx)(fh,{video:r})]})]}):(0,ke.jsx)(ke.Fragment,{})}const Vh=["1","2","3","4","5","6","7","8","9","0","-"];function Fh(){const e=Se(),{upperPopup:t}=he((e=>e.generalModule));(0,i.useEffect)((()=>{t&&n()}),[t]);const n=()=>{setTimeout((()=>{e(Nn(""))}),3e3)};return t?(0,ke.jsxs)("section",{className:"upper-popup",children:["errorServer"===t&&(0,ke.jsx)("p",{children:"something went wrong... please try again later."}),"errorCode"===t&&(0,ke.jsx)("p",{children:"Code is incorrect, please enter a valid one."}),"copied"===t&&(0,ke.jsx)("p",{children:"Link Copied!"}),"copied-list"===t&&(0,ke.jsx)("p",{children:"List has been copied to clipboard!"}),"copied-address"===t&&(0,ke.jsx)("p",{children:"Address Copied!"}),"socialError"===t&&(0,ke.jsx)("p",{children:"Link broken!"}),"socialUnsupported"===t&&(0,ke.jsx)("p",{children:"you may enter only tiktok,instagram,twitter or youtube links"}),"errorCreate"===t&&(0,ke.jsx)("p",{children:"something went wrong... could not create event."}),"errorDelete"===t&&(0,ke.jsx)("p",{children:"something went wrong... could not delete event."}),"noPlayers"===t&&(0,ke.jsx)("p",{children:"Vs events need at least 2 players in order to be accepted"}),"choose"===t&&(0,ke.jsx)("p",{children:"Please complete all the fields"}),"invalidPhone"===t&&(0,ke.jsx)("p",{children:"invalid phone number, make sure the phone you entered is correct."}),"invalidAddress"===t&&(0,ke.jsx)("p",{children:"invalid address, make sure you use a valid ethereum wallet."}),"desc"===t&&(0,ke.jsx)("p",{children:"Use at least 20 characters for the description."}),"takenAddress"===t&&(0,ke.jsx)("p",{children:"This address is already used by other user."}),"otherStream"===t&&(0,ke.jsx)("p",{children:"Someone else already started streaming."}),"price"===t&&(0,ke.jsx)("p",{children:"Please enter a price between 1\u20aa and 1000\u20aa"}),"date"===t&&(0,ke.jsx)("p",{children:"Cannot create event in the past, please enter a valid date in the future."}),"invalidPrize"===t&&(0,ke.jsx)("p",{children:"Please enter a valid prize"}),"errorLoadEvent"===t&&(0,ke.jsx)("p",{children:"Cannot load event, please try again later"}),"event-ended-error"===t&&(0,ke.jsx)("p",{children:"Cannot start stream, the other creator might have ended it already"}),"video-length"===t&&(0,ke.jsx)("p",{children:"Video duration may not be longer than 1 minute."}),"edited"===t&&(0,ke.jsx)("p",{children:"Event edited successfully!"}),"min1"===t&&(0,ke.jsx)("p",{children:"Minimum is 1BNB"}),"max1m"===t&&(0,ke.jsx)("p",{children:"Maximum is 1M BNB"}),"video-size"===t&&(0,ke.jsx)("p",{children:"500MB is the maximum video size."}),"imgRequired"===t&&(0,ke.jsx)("p",{children:"Please upload an image of the event."}),t.includes("banned-")&&(0,ke.jsxs)("p",{children:[t.split("-").slice(1).join("-")," is now banned."]}),t.includes("banRemoved-")&&(0,ke.jsxs)("p",{children:["Ban removed for ",t.split("-").slice(1).join("-")]}),Vh.some((e=>e===t.charAt(0)))&&(0,ke.jsxs)("p",{children:["cannot start or end live stream now, event starts in ",t]})]}):(0,ke.jsx)(ke.Fragment,{})}function Bh(){const e=Se(),{registerPhase:t}=he((e=>e.tutorialModule));return 0===t||t>2?(0,ke.jsx)(ke.Fragment,{}):2===t?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen-tutorial"}),(0,ke.jsxs)("div",{className:"tutorial-specific ".concat(window.innerWidth<930?"t-down-mid":"t-up"),style:window.innerWidth<930?{bottom:"-100px",left:"50%",top:"unset"}:{top:"320px",left:window.innerWidth-320+"px"},children:[(0,ke.jsxs)("div",{className:"specific-inner",children:[(0,ke.jsx)("h1",{children:"Create & Join"}),(0,ke.jsx)("p",{children:"Here you can create new event or join an existing one."})]}),(0,ke.jsx)("div",{className:"continue-wrapper",style:{justifyContent:"center"},children:(0,ke.jsx)("h5",{onClick:()=>e(kn(3)),children:"Continue"})})]})]}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen-tutorial"}),(0,ke.jsxs)("div",{className:"buddy-wrapper",children:[(0,ke.jsx)("img",{src:n(3528)}),(0,ke.jsxs)("section",{className:"tutorial-center",children:[(0,ke.jsx)("h1",{children:"Welcome to pikmeTV creator mode"}),(0,ke.jsx)("p",{children:"Your registration is now complete."}),(0,ke.jsx)("div",{onClick:()=>e(kn(2)),className:"action",children:"Got it!"}),(0,ke.jsxs)("div",{className:"progress-circles",children:[(0,ke.jsx)("div",{className:"main-back"}),(0,ke.jsx)("div",{})]})]})]})]})}function Wh(){const e=Se(),{homePhase:t}=he((e=>e.tutorialModule));return(0,i.useEffect)((()=>{document.body.style.overflow=1===t?"hidden":"auto"}),[t]),1!==t?(0,ke.jsx)(ke.Fragment,{}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen-tutorial"}),(0,ke.jsxs)("div",{className:"buddy-wrapper",children:[(0,ke.jsx)("img",{src:n(3528)}),(0,ke.jsxs)("section",{className:"tutorial-center",children:[(0,ke.jsx)("h1",{children:"Manage your events"}),(0,ke.jsx)("p",{children:"Here you can view, edit and share your events. you can edit any event you've created."}),(0,ke.jsx)("div",{onClick:()=>e(Dn(2)),className:"action",children:"Got it!"})]})]})]})}function Gh(){const e=Se(),{streamPhase:t}=he((e=>e.tutorialModule)),r=window.innerWidth>1100,s=window.innerWidth<550,[o,a]=(0,i.useState)(r?"55%":window.innerWidth-400+"px"),[c,d]=(0,i.useState)(r?"30%":"350px");(0,i.useEffect)((()=>{t<=3&&t>0&&window.innerWidth>1100&&window.location.pathname.includes("stream-control")?document.body.style.overflow="hidden":document.body.style.overflow="auto"}),[t]);return 0===t||t>3?(0,ke.jsx)(ke.Fragment,{}):t>1?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen-tutorial"}),(0,ke.jsxs)("div",{className:"".concat(r?"tutorial-specific":"tutorial-specific-stream"," ").concat(s?2===t?"t-right t-right-mobile right-rotate":"t-down t-down-mobile right-rotate":r?2===t?"t-right":"t-down":2===t?"t-right-stream":"t-down-stream"),style:{top:c,left:o},children:[(0,ke.jsxs)("div",{className:"specific-inner",children:[2===t&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h1",{children:"Live Chat"}),(0,ke.jsx)("p",{children:"Here you can chat with your viewers about the event. "})]}),3===t&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("h1",{children:"Control panel"}),(0,ke.jsx)("p",{children:"Once your camera is connected you can control your stream."})]})]}),(0,ke.jsxs)("div",{className:"continue-wrapper",children:[(0,ke.jsxs)("p",{children:["Step ",t,"/3"]}),(0,ke.jsx)("h5",{onClick:()=>{r?2===t&&(a("50%"),d("80%")):2===t&&(d(window.innerHeight-70+"px"),a("50%")),e(Pn(t+1))},children:3===t?"Got it!":"Continue"})]})]})]}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("div",{className:"screen-tutorial"}),(0,ke.jsxs)("div",{className:"buddy-wrapper ".concat(s?"buddy-rotate":""),children:[(0,ke.jsx)("img",{src:n(3528)}),(0,ke.jsxs)("section",{className:"tutorial-center",children:[(0,ke.jsx)("h1",{children:"Manage your stream"}),(0,ke.jsx)("p",{children:"On this page you can chat with the viewers and control your stream settings."}),(0,ke.jsx)("div",{onClick:()=>e(Pn(2)),className:"action",children:"Got it!"}),(0,ke.jsxs)("div",{className:"progress-circles",children:[(0,ke.jsx)("div",{className:"main-back"}),(0,ke.jsx)("div",{}),(0,ke.jsx)("div",{})]})]})]})]})}const Hh=function(){return(0,ke.jsxs)($,{children:[(0,ke.jsxs)("div",{className:"app",children:[(0,ke.jsx)(qr,{}),(0,ke.jsx)("main",{className:"main-layout",children:(0,ke.jsxs)(Y,{children:[(0,ke.jsx)(K,{path:"/profile",element:(0,ke.jsx)(Hn,{})}),(0,ke.jsx)(K,{path:"/confirm/:id",element:(0,ke.jsx)(Gn,{})}),(0,ke.jsx)(K,{path:"/stream-control",element:(0,ke.jsx)(Ir,{})}),(0,ke.jsx)(K,{path:"/join",element:(0,ke.jsx)(Kn,{})}),(0,ke.jsx)(K,{path:"/create",element:(0,ke.jsx)(Hr,{})}),(0,ke.jsx)(K,{path:"/edit",element:(0,ke.jsx)(Kr,{})}),(0,ke.jsx)(K,{path:"/admin",element:(0,ke.jsx)(Gr,{})}),(0,ke.jsx)(K,{path:"/ban",element:(0,ke.jsx)(zr,{})}),(0,ke.jsx)(K,{path:"/landing/:link",element:(0,ke.jsx)(Yr,{})}),(0,ke.jsx)(K,{path:"/",element:(0,ke.jsx)(Wn,{})})]})}),(0,ke.jsx)(es,{})]}),(0,ke.jsx)(ts,{}),(0,ke.jsx)(jh,{}),(0,ke.jsx)(Fh,{}),(0,ke.jsx)(Wh,{}),(0,ke.jsx)(Bh,{}),(0,ke.jsx)(Gh,{})]})},Kh={viewers:0,menu:"",popup:"",popupEvent:"",popupStats:"",upperPopup:"",streamPopup:"",callbackLink:"",linkId:"",streamInfo:{},streamShow:{}};const zh={connectPhase:0,registerPhase:0,homePhase:0,streamPhase:0};var Yh="persist:",qh="persist/FLUSH",Jh="persist/REHYDRATE",Qh="persist/PAUSE",Xh="persist/PERSIST",Zh="persist/PURGE",$h="persist/REGISTER";function ep(e){return ep="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(e)}function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ip(e,t,n,i){i.debug;var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(n,!0).forEach((function(t){np(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e&&"object"===ep(e)&&Object.keys(e).forEach((function(i){"_persist"!==i&&t[i]===n[i]&&(r[i]=e[i])})),r}function rp(e){var t,n=e.blacklist||null,i=e.whitelist||null,r=e.transforms||[],s=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:Yh).concat(e.key),a=e.storage;t=!1===e.serialize?function(e){return e}:"function"===typeof e.serialize?e.serialize:sp;var c=e.writeFailHandler||null,d={},l={},u=[],h=null,p=null;function f(){if(0===u.length)return h&&clearInterval(h),void(h=null);var e=u.shift(),n=r.reduce((function(t,n){return n.in(t,e,d)}),d[e]);if(void 0!==n)try{l[e]=t(n)}catch(bp){console.error("redux-persist/createPersistoid: error serializing state",bp)}else delete l[e];0===u.length&&(Object.keys(l).forEach((function(e){void 0===d[e]&&delete l[e]})),p=a.setItem(o,t(l)).catch(g))}function m(e){return(!i||-1!==i.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function g(e){c&&c(e)}return{update:function(e){Object.keys(e).forEach((function(t){m(t)&&d[t]!==e[t]&&-1===u.indexOf(t)&&u.push(t)})),Object.keys(d).forEach((function(t){void 0===e[t]&&m(t)&&-1===u.indexOf(t)&&void 0!==d[t]&&u.push(t)})),null===h&&(h=setInterval(f,s)),d=e},flush:function(){for(;0!==u.length;)f();return p||Promise.resolve()}}}function sp(e){return JSON.stringify(e)}function op(e){var t,n=e.transforms||[],i="".concat(void 0!==e.keyPrefix?e.keyPrefix:Yh).concat(e.key),r=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"===typeof e.deserialize?e.deserialize:ap,r.getItem(i).then((function(e){if(e)try{var i={},r=t(e);return Object.keys(r).forEach((function(e){i[e]=n.reduceRight((function(t,n){return n.out(t,e,r)}),t(r[e]))})),i}catch(bp){throw bp}}))}function ap(e){return JSON.parse(e)}function cp(e){0}function dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dp(n,!0).forEach((function(t){up(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function up(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hp(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pp(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fp(n,!0).forEach((function(t){gp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ep={registry:[],bootstrapped:!1},_p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ep,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $h:return mp({},e,{registry:[].concat(pp(e.registry),[t.key])});case Jh:var n=e.registry.indexOf(t.key),i=pp(e.registry);return i.splice(n,1),mp({},e,{registry:i,bootstrapped:0===i.length});default:return e}};var vp=n(5752);const yp=Qt({user:An,generalModule:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return{...e,filter:t.filter};case"SET_VIEWERS":return{...e,viewers:t.viewers};case"SET_MENU":return{...e,menu:t.menu};case"SET_STREAM":return{...e,streamInfo:t.event};case"SET_STREAM_SHOW":return{...e,streamShow:t.show};case"SET_POPUP":return{...e,popup:t.popup};case"SET_POPUP_INFO":return{...e,popupInfo:t.popupInfo};case"SET_POPUP_BOUGHT":return{...e,popupBought:t.popupBought};case"TOGGLE_MENU":return""===e.menu?{...e,menu:"normal"}:{...e,menu:""};case"SET_POPUP_EVENT":return{...e,popupEvent:t.popupEvent};case"SET_POPUP_STATS":return{...e,popupStats:t.popupStats};case"SET_UPPER_POPUP":return{...e,upperPopup:t.upperPopup};case"SET_CALLBACK_LINK":return{...e,callbackLink:t.callbackLink};case"SET_LINK_ID":return{...e,linkId:t.linkId};case"RESET_GENERAL_STATE":return{viewers:0,menu:"",popup:"",popupEvent:"",popupStats:"",upperPopup:"",streamInfo:{},streamShow:{}};default:return e}},tutorialModule:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONNECT_PHASE":return{...e,connectPhase:t.phase};case"SET_HOME_PHASE":return{...e,homePhase:t.phase};case"SET_REGISTER_PHASE":return{...e,registerPhase:t.phase};case"SET_STREAM_PHASE":return{...e,streamPhase:t.phase};default:return e}}}),Sp=function(e){var t,n=mn(),i=e||{},r=i.reducer,s=void 0===r?void 0:r,o=i.middleware,a=void 0===o?n():o,c=i.devTools,d=void 0===c||c,l=i.preloadedState,u=void 0===l?void 0:l,h=i.enhancers,p=void 0===h?void 0:h;if("function"===typeof s)t=s;else{if(!hn(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Qt(s)}var f=a;"function"===typeof f&&(f=f(n));var m=Zt.apply(void 0,f),g=Xt;d&&(g=un(ln({trace:!1},"object"===typeof d&&d)));var E=[m];return Array.isArray(p)?E=rn([m],p):"function"===typeof p&&(E=p(E)),Jt(t,u,g.apply(void 0,E))}({reducer:function(e,t){var n=void 0!==e.version?e.version:-1,i=(e.debug,void 0===e.stateReconciler?ip:e.stateReconciler),r=e.getStoredState||op,s=void 0!==e.timeout?e.timeout:5e3,o=null,a=!1,c=!0,d=function(e){return e._persist.rehydrated&&o&&!c&&o.update(e),e};return function(l,u){var h=l||{},p=h._persist,f=hp(h,["_persist"]);if(u.type===Xh){var m=!1,g=function(t,n){m||(u.rehydrate(e.key,t,n),m=!0)};if(s&&setTimeout((function(){!m&&g(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),s),c=!1,o||(o=rp(e)),p)return lp({},t(f,u),{_persist:p});if("function"!==typeof u.rehydrate||"function"!==typeof u.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),r(e).then((function(t){var i=e.migrate||function(e,t){return Promise.resolve(e)};i(t,n).then((function(e){g(e)}),(function(e){g(void 0,e)}))}),(function(e){g(void 0,e)})),lp({},t(f,u),{_persist:{version:n,rehydrated:!1}})}if(u.type===Zh)return a=!0,u.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:Yh).concat(e.key);return t.removeItem(n,cp)}(e)),lp({},t(f,u),{_persist:p});if(u.type===qh)return u.result(o&&o.flush()),lp({},t(f,u),{_persist:p});if(u.type===Qh)c=!0;else if(u.type===Jh){if(a)return lp({},f,{_persist:lp({},p,{rehydrated:!0})});if(u.key===e.key){var E=t(f,u),_=u.payload,v=lp({},!1!==i&&void 0!==_?i(_,l,E,e):E,{_persist:lp({},p,{rehydrated:!0})});return d(v)}}if(!p)return t(l,u);var y=t(f,u);return y===f?l:d(lp({},y,{_persist:p}))}}({key:"root",version:1,storage:vp.Z},yp),middleware:e=>e({serializableCheck:{ignoredActions:[qh,Jh,Qh,Xh,Zh,$h]}})});!function(e,t,n){var i=n||!1,r=Jt(_p,Ep,t&&t.enhancer?t.enhancer:void 0),s=function(e){r.dispatch({type:$h,key:e})},o=function(t,n,s){var o={type:Jh,payload:n,err:s,key:t};e.dispatch(o),r.dispatch(o),i&&a.getState().bootstrapped&&(i(),i=!1)},a=mp({},r,{purge:function(){var t=[];return e.dispatch({type:Zh,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:qh,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:Qh})},persist:function(){e.dispatch({type:Xh,register:s,rehydrate:o})}});t&&t.manualPersist||a.persist()}(Sp);r.createRoot(document.getElementById("root")).render((0,ke.jsx)(Ee,{store:Sp,children:(0,ke.jsx)(Hh,{})}))})()})();
//# sourceMappingURL=main.5b77ca3d.js.map